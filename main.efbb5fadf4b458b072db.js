var p6=Object.defineProperty,g6=Object.defineProperties,m6=Object.getOwnPropertyDescriptors,JU=Object.getOwnPropertySymbols,_6=Object.prototype.hasOwnProperty,y6=Object.prototype.propertyIsEnumerable,XU=(je,ye,V)=>ye in je?p6(je,ye,{enumerable:!0,configurable:!0,writable:!0,value:V}):je[ye]=V,Al=(je,ye)=>{for(var V in ye||(ye={}))_6.call(ye,V)&&XU(je,V,ye[V]);if(JU)for(var V of JU(ye))y6.call(ye,V)&&XU(je,V,ye[V]);return je},nC=(je,ye)=>g6(je,m6(ye));(self.webpackChunkshopping_app=self.webpackChunkshopping_app||[]).push([[179],{8255:je=>{function ye(V){return Promise.resolve().then(()=>{var c=new Error("Cannot find module '"+V+"'");throw c.code="MODULE_NOT_FOUND",c})}ye.keys=()=>[],ye.resolve=ye,ye.id=8255,je.exports=ye},7716:(je,ye,V)=>{"use strict";V.d(ye,{deG:()=>Xu,tb:()=>iw,AFp:()=>nw,ip1:()=>tw,CZH:()=>Cu,hGG:()=>Cw,z2F:()=>jc,sBO:()=>pM,Sil:()=>Cr,_Vd:()=>Qf,EJc:()=>iS,SBq:()=>ua,qLn:()=>ea,vpe:()=>gl,gxx:()=>hu,tBr:()=>ts,XFs:()=>Ge,OlP:()=>cn,zs3:()=>Rn,ZZ4:()=>rh,aQg:()=>Rv,soG:()=>mE,YKP:()=>Pm,v3s:()=>kp,h0i:()=>ls,PXZ:()=>hO,R0b:()=>eo,FiY:()=>Xo,Lbi:()=>rS,g9A:()=>rw,Qsj:()=>ep,FYo:()=>Av,JOm:()=>v,Tiy:()=>xv,q3G:()=>Nn,tp0:()=>Ts,EAV:()=>gS,Rgc:()=>sh,dDg:()=>lS,DyG:()=>js,q4F:()=>Pv,GfV:()=>tp,s_b:()=>Tn,ifc:()=>Fe,eFA:()=>uw,G48:()=>Bc,Gpc:()=>H,X6Q:()=>Jm,_c5:()=>Up,VLi:()=>ow,c2e:()=>sw,zSh:()=>Rf,wAp:()=>lt,vHH:()=>we,EiD:()=>Pg,mCW:()=>ri,qzn:()=>bt,JVY:()=>ic,pB0:()=>_C,eBb:()=>Sg,L6k:()=>ay,LAX:()=>mC,cg1:()=>la,Tjo:()=>yw,kL8:()=>yD,yhl:()=>mf,dqk:()=>mt,sIi:()=>kt,CqO:()=>T0,QGY:()=>w0,F4k:()=>fm,RDi:()=>Zo,AaK:()=>J,z3N:()=>Ao,qOj:()=>fu,TTD:()=>Vr,_Bn:()=>zD,xp6:()=>MC,uIk:()=>Ky,Tol:()=>gm,ekj:()=>L0,Suo:()=>Js,Xpm:()=>kr,lG2:()=>od,Yz7:()=>fn,cJS:()=>Sn,oAB:()=>jo,Yjl:()=>Si,Y36:()=>gu,_UZ:()=>qI,BQk:()=>sv,ynx:()=>ZI,qZA:()=>$I,TgZ:()=>HI,EpF:()=>wc,n5z:()=>Kl,Ikx:()=>mv,LFG:()=>pr,$8M:()=>bs,NdJ:()=>GI,CRH:()=>$b,oxw:()=>lv,ALo:()=>Ub,lcZ:()=>jA,Q6J:()=>iv,s9C:()=>ul,DdM:()=>vp,iGM:()=>iE,MAs:()=>pN,CHM:()=>qu,oJD:()=>Md,LSH:()=>vf,kYT:()=>Ru,Udp:()=>dv,d8E:()=>H0,YNc:()=>g0,_uU:()=>uD,Oqu:()=>oa,hij:()=>aa});var c=V(9765),ne=V(5319),U=V(7574),de=V(6682),se=V(8819);function Q(i){for(let s in i)if(i[s]===Q)return s;throw Error("Could not find renamed property on target object.")}function me(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function J(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(J).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function ee(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const B=Q({__forward_ref__:Q});function H(i){return i.__forward_ref__=H,i.toString=function(){return J(this())},i}function G(i){return le(i)?i():i}function le(i){return"function"==typeof i&&i.hasOwnProperty(B)&&i.__forward_ref__===H}class we extends Error{constructor(s,a){super(function(i,s){return`${i?`NG0${i}: `:""}${s}`}(s,a)),this.code=s}}function re(i){return"string"==typeof i?i:null==i?"":String(i)}function fe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():re(i)}function Pt(i,s){const a=s?` in ${s}`:"";throw new we("201",`No provider for ${fe(i)} found${a}`)}function Gt(i,s){null==i&&function(i,s,a,u){throw new Error(`ASSERTION ERROR: ${i}`+(null==u?"":` [Expected=> ${a} ${u} ${s} <=Actual]`))}(s,i,null,"!=")}function fn(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Sn(i){return{providers:i.providers||[],imports:i.imports||[]}}function or(i){return Bt(i,_s)||Bt(i,dr)}function Bt(i,s){return i.hasOwnProperty(s)?i[s]:null}function Zi(i){return i&&(i.hasOwnProperty(Ae)||i.hasOwnProperty(Wn))?i[Ae]:null}const _s=Q({\u0275prov:Q}),Ae=Q({\u0275inj:Q}),dr=Q({ngInjectableDef:Q}),Wn=Q({ngInjectorDef:Q});var Ge=(()=>((Ge=Ge||{})[Ge.Default=0]="Default",Ge[Ge.Host=1]="Host",Ge[Ge.Self=2]="Self",Ge[Ge.SkipSelf=4]="SkipSelf",Ge[Ge.Optional=8]="Optional",Ge))();let Wt;function Qr(i){const s=Wt;return Wt=i,s}function tt(i,s,a){const u=or(i);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:a&Ge.Optional?null:void 0!==s?s:void Pt(J(i),"Injector")}function Nt(i){return{toString:i}.toString()}var Mt=(()=>((Mt=Mt||{})[Mt.OnPush=0]="OnPush",Mt[Mt.Default=1]="Default",Mt))(),Fe=(()=>((Fe=Fe||{})[Fe.Emulated=0]="Emulated",Fe[Fe.None=2]="None",Fe[Fe.ShadowDom=3]="ShadowDom",Fe))();const Xe="undefined"!=typeof globalThis&&globalThis,id="undefined"!=typeof window&&window,uo="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,en="undefined"!=typeof global&&global,mt=Xe||en||id||uo,W={},q=[],K=Q({\u0275cmp:Q}),Te=Q({\u0275dir:Q}),oe=Q({\u0275pipe:Q}),He=Q({\u0275mod:Q}),_t=Q({\u0275loc:Q}),jt=Q({\u0275fac:Q}),Vn=Q({__NG_ELEMENT_ID__:Q});let Un=0;function kr(i){return Nt(()=>{const a={},u={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Mt.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||q,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Fe.Emulated,id:"c",styles:i.styles||q,_:null,setInput:null,schemas:i.schemas||null,tView:null},h=i.directives,f=i.features,_=i.pipes;return u.id+=Un++,u.inputs=Ho(i.inputs,a),u.outputs=Ho(i.outputs),f&&f.forEach(E=>E(u)),u.directiveDefs=h?()=>("function"==typeof h?h():h).map(Dr):null,u.pipeDefs=_?()=>("function"==typeof _?_():_).map(Bo):null,u})}function Dr(i){return ar(i)||function(i){return i[Te]||null}(i)}function Bo(i){return function(i){return i[oe]||null}(i)}const Ou={};function jo(i){return Nt(()=>{const s={type:i.type,bootstrap:i.bootstrap||q,declarations:i.declarations||q,imports:i.imports||q,exports:i.exports||q,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(Ou[i.id]=i.type),s})}function Ru(i,s){return Nt(()=>{const a=xi(i,!0);a.declarations=s.declarations||q,a.imports=s.imports||q,a.exports=s.exports||q})}function Ho(i,s){if(null==i)return W;const a={};for(const u in i)if(i.hasOwnProperty(u)){let h=i[u],f=h;Array.isArray(h)&&(f=h[1],h=h[0]),a[h]=u,s&&(s[h]=f)}return a}const od=kr;function Si(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function ar(i){return i[K]||null}function xi(i,s){const a=i[He]||null;if(!a&&!0===s)throw new Error(`Type ${J(i)} does not have '\u0275mod' property.`);return a}function mn(i){return Array.isArray(i)&&"object"==typeof i[1]}function xr(i){return Array.isArray(i)&&!0===i[1]}function Lh(i){return 0!=(8&i.flags)}function xl(i){return 2==(2&i.flags)}function ku(i){return 1==(1&i.flags)}function Wi(i){return null!==i.template}function Ki(i){return 0!=(512&i[2])}function ys(i,s){return i.hasOwnProperty(jt)?i[jt]:null}class kl{constructor(s,a,u){this.previousValue=s,this.currentValue=a,this.firstChange=u}isFirstChange(){return this.firstChange}}function Vr(){return Fl}function Fl(i){return i.type.prototype.ngOnChanges&&(i.setInput=Ur),q_}function q_(){const i=dd(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===W)i.previous=s;else for(let u in s)a[u]=s[u];i.current=null,this.ngOnChanges(s)}}function Ur(i,s,a,u){const h=dd(i)||function(i,s){return i[vs]=s}(i,{previous:W,current:null}),f=h.current||(h.current={}),_=h.previous,E=this.declaredInputs[a],w=_[E];f[E]=new kl(w&&w.currentValue,s,_===W),i[u]=s}Vr.ngInherit=!0;const vs="__ngSimpleChanges__";function dd(i){return i[vs]||null}let Sa;function Zo(i){Sa=i}function fo(){return void 0!==Sa?Sa:"undefined"!=typeof document?document:void 0}function on(i){return!!i.listen}const Es={createRenderer:(i,s)=>fo()};function tn(i){for(;Array.isArray(i);)i=i[0];return i}function Go(i,s){return tn(s[i])}function mi(i,s){return tn(s[i.index])}function po(i,s){return i.data[s]}function go(i,s){return i[s]}function Pr(i,s){const a=s[i];return mn(a)?a:a[0]}function Bu(i){return 4==(4&i[2])}function ju(i){return 128==(128&i[2])}function jn(i,s){return null==s?null:i[s]}function Vl(i){i[18]=0}function Ul(i,s){i[5]+=s;let a=i,u=i[3];for(;null!==u&&(1===s&&1===a[5]||-1===s&&0===a[5]);)u[5]+=s,a=u,u=u[3]}const at={lFrame:yd(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Bl(){return at.bindingsEnabled}function Ie(){return at.lFrame.lView}function At(){return at.lFrame.tView}function qu(i){return at.lFrame.contextLView=i,i[8]}function un(){let i=Zu();for(;null!==i&&64===i.type;)i=i.parent;return i}function Zu(){return at.lFrame.currentTNode}function Br(i,s){const a=at.lFrame;a.currentTNode=i,a.isParent=s}function Pa(){return at.lFrame.isParent}function jl(){at.lFrame.isParent=!1}function Na(){return at.isInCheckNoChangesMode}function Ma(i){at.isInCheckNoChangesMode=i}function Hn(){const i=at.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}function Mi(){return at.lFrame.bindingIndex++}function jr(i){const s=at.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}function $l(i,s){const a=at.lFrame;a.bindingIndex=a.bindingRootIndex=i,ql(s)}function ql(i){at.lFrame.currentDirectiveIndex=i}function Zl(i){const s=at.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}function zu(){return at.lFrame.currentQueryIndex}function Oa(i){at.lFrame.currentQueryIndex=i}function Ra(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function _d(i,s,a){if(a&Ge.SkipSelf){let h=s,f=i;for(;!(h=h.parent,null!==h||a&Ge.Host||(h=Ra(f),null===h||(f=f[15],10&h.type))););if(null===h)return!1;s=h,i=f}const u=at.lFrame=Yh();return u.currentTNode=s,u.lView=i,!0}function zo(i){const s=Yh(),a=i[1];at.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Yh(){const i=at.lFrame,s=null===i?null:i.child;return null===s?yd(i):s}function yd(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Qh(){const i=at.lFrame;return at.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Jh=Qh;function Ls(){const i=Qh();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function lr(){return at.lFrame.selectedIndex}function ka(i){at.lFrame.selectedIndex=i}function Pn(){const i=at.lFrame;return po(i.tView,i.selectedIndex)}function Wu(i,s){for(let a=s.directiveStart,u=s.directiveEnd;a<u;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:w,ngAfterViewChecked:I,ngOnDestroy:P}=f;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),w&&(i.viewHooks||(i.viewHooks=[])).push(-a,w),I&&((i.viewHooks||(i.viewHooks=[])).push(a,I),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,I)),null!=P&&(i.destroyHooks||(i.destroyHooks=[])).push(a,P)}}function _o(i,s,a){Ed(i,s,3,a)}function Gl(i,s,a,u){(3&i[2])===a&&Ed(i,s,a,u)}function Mn(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Ed(i,s,a,u){const f=null!=u?u:-1,_=s.length-1;let E=0;for(let w=void 0!==u?65535&i[18]:0;w<_;w++)if("number"==typeof s[w+1]){if(E=s[w],null!=u&&E>=u)break}else s[w]<0&&(i[18]+=65536),(E<f||-1==f)&&(fg(i,a,s,w),i[18]=(4294901760&i[18])+w+2),w++}function fg(i,s,a,u){const h=a[u]<0,f=a[u+1],E=i[h?-a[u]:a[u]];if(h){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(E)}finally{}}}else try{f.call(E)}finally{}}class Va{constructor(s,a,u){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=u}}function tf(i,s,a){const u=on(i);let h=0;for(;h<a.length;){const f=a[h];if("number"==typeof f){if(0!==f)break;h++;const _=a[h++],E=a[h++],w=a[h++];u?i.setAttribute(s,E,w,_):s.setAttributeNS(_,E,w)}else{const _=f,E=a[++h];Us(_)?u&&i.setProperty(s,_,E):u?i.setAttribute(s,_,E):s.setAttribute(_,E),h++}}return h}function pg(i){return 3===i||4===i||6===i}function Us(i){return 64===i.charCodeAt(0)}function Ku(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let u=0;u<s.length;u++){const h=s[u];"number"==typeof h?a=h:0===a||gg(i,a,h,null,-1===a||2===a?s[++u]:null)}}return i}function gg(i,s,a,u,h){let f=0,_=i.length;if(-1===s)_=-1;else for(;f<i.length;){const E=i[f++];if("number"==typeof E){if(E===s){_=-1;break}if(E>s){_=f-1;break}}}for(;f<i.length;){const E=i[f];if("number"==typeof E)break;if(E===a){if(null===u)return void(null!==h&&(i[f+1]=h));if(u===i[f+1])return void(i[f+2]=h)}f++,null!==u&&f++,null!==h&&f++}-1!==_&&(i.splice(_,0,s),f=_+1),i.splice(f++,0,a),null!==u&&i.splice(f++,0,u),null!==h&&i.splice(f++,0,h)}function wd(i){return-1!==i}function vo(i){return 32767&i}function _i(i,s){let a=function(i){return i>>16}(i),u=s;for(;a>0;)u=u[15],a--;return u}let zl=!0;function Ba(i){const s=zl;return zl=i,s}let sf=0;function Wl(i,s){const a=rt(i,s);if(-1!==a)return a;const u=s[1];u.firstCreatePass&&(i.injectorIndex=s.length,Wo(u.data,i),Wo(s,null),Wo(u.blueprint,null));const h=_n(i,s),f=i.injectorIndex;if(wd(h)){const _=vo(h),E=_i(h,s),w=E[1].data;for(let I=0;I<8;I++)s[f+I]=E[_+I]|w[_+I]}return s[f+8]=h,f}function Wo(i,s){i.push(0,0,0,0,0,0,0,0,s)}function rt(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function _n(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,u=null,h=s;for(;null!==h;){const f=h[1],_=f.type;if(u=2===_?f.declTNode:1===_?h[6]:null,null===u)return-1;if(a++,h=h[15],-1!==u.injectorIndex)return u.injectorIndex|a<<16}return-1}function Yn(i,s,a){!function(i,s,a){let u;"string"==typeof a?u=a.charCodeAt(0)||0:a.hasOwnProperty(Vn)&&(u=a[Vn]),null==u&&(u=a[Vn]=sf++);const h=255&u;s.data[i+(h>>5)]|=1<<h}(i,s,a)}function Hr(i,s,a){if(a&Ge.Optional)return i;Pt(s,"NodeInjector")}function $r(i,s,a,u){if(a&Ge.Optional&&void 0===u&&(u=null),0==(a&(Ge.Self|Ge.Host))){const h=i[9],f=Qr(void 0);try{return h?h.get(s,u,a&Ge.Optional):tt(s,u,a&Ge.Optional)}finally{Qr(f)}}return Hr(u,s,a)}function of(i,s,a,u=Ge.Default,h){if(null!==i){const f=function(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(Vn)?i[Vn]:void 0;return"number"==typeof s?s>=0?255&s:ze:s}(a);if("function"==typeof f){if(!_d(s,i,u))return u&Ge.Host?Hr(h,a,u):$r(s,a,u,h);try{const _=f(u);if(null!=_||u&Ge.Optional)return _;Pt(a)}finally{Jh()}}else if("number"==typeof f){let _=null,E=rt(i,s),w=-1,I=u&Ge.Host?s[16][6]:null;for((-1===E||u&Ge.SkipSelf)&&(w=-1===E?_n(i,s):s[E+8],-1!==w&&Ju(u,!1)?(_=s[1],E=vo(w),s=_i(w,s)):E=-1);-1!==E;){const P=s[1];if(Qu(f,E,P.data)){const R=_g(E,s,a,_,u,I);if(R!==yi)return R}w=s[E+8],-1!==w&&Ju(u,s[1].data[E+8]===I)&&Qu(f,E,s)?(_=P,E=vo(w),s=_i(w,s)):E=-1}}}return $r(s,a,u,h)}const yi={};function ze(){return new Eo(un(),Ie())}function _g(i,s,a,u,h,f){const _=s[1],E=_.data[i+8],P=Bs(E,_,a,null==u?xl(E)&&zl:u!=_&&0!=(3&E.type),h&Ge.Host&&f===E);return null!==P?vi(s,_,P,E):yi}function Bs(i,s,a,u,h){const f=i.providerIndexes,_=s.data,E=1048575&f,w=i.directiveStart,P=f>>20,k=h?E+P:i.directiveEnd;for(let Z=u?E:E+P;Z<k;Z++){const Y=_[Z];if(Z<w&&a===Y||Z>=w&&Y.type===a)return Z}if(h){const Z=_[w];if(Z&&Wi(Z)&&Z.type===a)return w}return null}function vi(i,s,a,u){let h=i[a];const f=s.data;if(function(i){return i instanceof Va}(h)){const _=h;_.resolving&&function(i,s){throw new we("200",`Circular dependency in DI detected for ${i}`)}(fe(f[a]));const E=Ba(_.canSeeViewProviders);_.resolving=!0;const w=_.injectImpl?Qr(_.injectImpl):null;_d(i,u,Ge.Default);try{h=i[a]=_.factory(void 0,f,i,u),s.firstCreatePass&&a>=u.directiveStart&&function(i,s,a){const{ngOnChanges:u,ngOnInit:h,ngDoCheck:f}=s.type.prototype;if(u){const _=Fl(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}h&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,h),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==w&&Qr(w),Ba(E),_.resolving=!1,Jh()}}return h}function Qu(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Ju(i,s){return!(i&Ge.Self||i&Ge.Host&&s)}class Eo{constructor(s,a){this._tNode=s,this._lView=a}get(s,a){return of(this._tNode,this._lView,s,void 0,a)}}function Kl(i){return Nt(()=>{const s=i.prototype.constructor,a=s[jt]||ja(s),u=Object.prototype;let h=Object.getPrototypeOf(i.prototype).constructor;for(;h&&h!==u;){const f=h[jt]||ja(h);if(f&&f!==a)return f;h=Object.getPrototypeOf(h)}return f=>new f})}function ja(i){return le(i)?()=>{const s=ja(G(i));return s&&s()}:ys(i)}function bs(i){return function(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const u=a.length;let h=0;for(;h<u;){const f=a[h];if(pg(f))break;if(0===f)h+=2;else if("number"==typeof f)for(h++;h<u&&"string"==typeof a[h];)h++;else{if(f===s)return a[h+1];h+=2}}}return null}(un(),i)}const Ha="__parameters__";function Xi(i,s,a){return Nt(()=>{const u=function(i){return function(...a){if(i){const u=i(...a);for(const h in u)this[h]=u[h]}}}(s);function h(...f){if(this instanceof h)return u.apply(this,f),this;const _=new h(...f);return E.annotation=_,E;function E(w,I,P){const R=w.hasOwnProperty(Ha)?w[Ha]:Object.defineProperty(w,Ha,{value:[]})[Ha];for(;R.length<=P;)R.push(null);return(R[P]=R[P]||[]).push(_),w}}return a&&(h.prototype=Object.create(a.prototype)),h.prototype.ngMetadataName=i,h.annotationCls=h,h})}class cn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=fn({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Xu=new cn("AnalyzeForEntryComponents"),js=Function;function ni(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let u=i[a];Array.isArray(u)?(s===i&&(s=i.slice(0,a)),ni(u,s)):s!==i&&s.push(u)}return s}function ws(i,s){i.forEach(a=>Array.isArray(a)?ws(a,s):s(a))}function Za(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Oi(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function dn(i,s,a){let u=Jn(i,s);return u>=0?i[1|u]=a:(u=~u,function(i,s,a,u){let h=i.length;if(h==s)i.push(a,u);else if(1===h)i.push(u,i[0]),i[0]=a;else{for(h--,i.push(i[h-1],i[h]);h>s;)i[h]=i[h-2],h--;i[s]=a,i[s+1]=u}}(i,u,s,a)),u}function Jo(i,s){const a=Jn(i,s);if(a>=0)return i[1|a]}function Jn(i,s){return function(i,s,a){let u=0,h=i.length>>a;for(;h!==u;){const f=u+(h-u>>1),_=i[f<<a];if(s===_)return f<<a;_>s?h=f:u=f+1}return~(h<<a)}(i,s,1)}const Rt={},Qt="__NG_DI_FLAG__",bn="ngTempTokenPath",Xn=/\n/gm,To="__source",Nr=Q({provide:String,useValue:Q});let pn;function Hs(i){const s=pn;return pn=i,s}function wg(i,s=Ge.Default){if(void 0===pn)throw new Error("inject() must be called from an injection context");return null===pn?tt(i,void 0,s):pn.get(i,s&Ge.Optional?null:void 0,s)}function pr(i,s=Ge.Default){return(Wt||wg)(G(i),s)}function eu(i){const s=[];for(let a=0;a<i.length;a++){const u=G(i[a]);if(Array.isArray(u)){if(0===u.length)throw new Error("Arguments array must have arguments.");let h,f=Ge.Default;for(let _=0;_<u.length;_++){const E=u[_],w=nc(E);"number"==typeof w?-1===w?h=E.token:f|=w:h=E}s.push(pr(h,f))}else s.push(pr(u))}return s}function tu(i,s){return i[Qt]=s,i.prototype[Qt]=s,i}function nc(i){return i[Qt]}function Io(i,s,a,u){const h=i[bn];throw s[To]&&h.unshift(s[To]),i.message=function(i,s,a,u=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let h=J(s);if(Array.isArray(s))h=s.map(J).join(" -> ");else if("object"==typeof s){let f=[];for(let _ in s)if(s.hasOwnProperty(_)){let E=s[_];f.push(_+":"+("string"==typeof E?JSON.stringify(E):J(E)))}h=`{${f.join(", ")}}`}return`${a}${u?"("+u+")":""}[${h}]: ${i.replace(Xn,"\n  ")}`}("\n"+i.message,h,a,u),i.ngTokenPath=h,i[bn]=null,i}const ts=tu(Xi("Inject",i=>({token:i})),-1),Xo=tu(Xi("Optional"),8),Ts=tu(Xi("SkipSelf"),4);let Ad,gf;function Wa(i){var s;return(null===(s=function(){if(void 0===Ad&&(Ad=null,mt.trustedTypes))try{Ad=mt.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return Ad}())||void 0===s?void 0:s.createHTML(i))||i}function Ag(i){var s;return(null===(s=function(){if(void 0===gf&&(gf=null,mt.trustedTypes))try{gf=mt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return gf}())||void 0===s?void 0:s.createHTML(i))||i}class Ka{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class oy extends Ka{getTypeName(){return"HTML"}}class hC extends Ka{getTypeName(){return"Style"}}class fC extends Ka{getTypeName(){return"Script"}}class pC extends Ka{getTypeName(){return"URL"}}class gC extends Ka{getTypeName(){return"ResourceURL"}}function Ao(i){return i instanceof Ka?i.changingThisBreaksApplicationSecurity:i}function bt(i,s){const a=mf(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}function mf(i){return i instanceof Ka&&i.getTypeName()||null}function ic(i){return new oy(i)}function ay(i){return new hC(i)}function Sg(i){return new fC(i)}function mC(i){return new pC(i)}function _C(i){return new gC(i)}class So{constructor(s){this.inertDocumentHelper=s}getInertBodyElement(s){s="<body><remove></remove>"+s;try{const a=(new window.DOMParser).parseFromString(Wa(s),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(s):(a.removeChild(a.firstChild),a)}catch(a){return null}}}class ly{constructor(s){if(this.defaultDoc=s,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const u=this.inertDocument.createElement("body");a.appendChild(u)}}getInertBodyElement(s){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=Wa(s),a;const u=this.inertDocument.createElement("body");return u.innerHTML=Wa(s),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(s){const a=s.attributes;for(let h=a.length-1;0<h;h--){const _=a.item(h).name;("xmlns:ns1"===_||0===_.indexOf("ns1:"))&&s.removeAttribute(_)}let u=s.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const cy=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,qr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function ri(i){return(i=String(i)).match(cy)||i.match(qr)?i:"unsafe:"+i}function $s(i){const s={};for(const a of i.split(","))s[a]=!0;return s}function sc(...i){const s={};for(const a of i)for(const u in a)a.hasOwnProperty(u)&&(s[u]=!0);return s}const Pd=$s("area,br,col,hr,img,wbr"),hy=$s("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),_f=$s("rp,rt"),oc=sc(Pd,sc(hy,$s("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),sc(_f,$s("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),sc(_f,hy)),Ya=$s("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Et=$s("srcset"),xo=sc(Ya,Et,$s("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),$s("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),bC=$s("script,style,template");class Nd{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(s){let a=s.firstChild,u=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?u=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,u&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let h=this.checkClobberedElement(a,a.nextSibling);if(h){a=h;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(s){const a=s.nodeName.toLowerCase();if(!oc.hasOwnProperty(a))return this.sanitizedSomething=!0,!bC.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const u=s.attributes;for(let h=0;h<u.length;h++){const f=u.item(h),_=f.name,E=_.toLowerCase();if(!xo.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let w=f.value;Ya[E]&&(w=ri(w)),Et[E]&&(i=w,w=(i=String(i)).split(",").map(s=>ri(s.trim())).join(", ")),this.buf.push(" ",_,'="',nu(w),'"')}var i;return this.buf.push(">"),!0}endElement(s){const a=s.nodeName.toLowerCase();oc.hasOwnProperty(a)&&!Pd.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(s){this.buf.push(nu(s))}checkClobberedElement(s,a){if(a&&(s.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${s.outerHTML}`);return a}}const fy=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,wC=/([^\#-~ |!])/g;function nu(i){return i.replace(/&/g,"&amp;").replace(fy,function(s){return"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";"}).replace(wC,function(s){return"&#"+s.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Qa;function Pg(i,s){let a=null;try{Qa=Qa||function(i){const s=new ly(i);return function(){try{return!!(new window.DOMParser).parseFromString(Wa(""),"text/html")}catch(i){return!1}}()?new So(s):s}(i);let u=s?String(s):"";a=Qa.getInertBodyElement(u);let h=5,f=u;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,u=f,f=a.innerHTML,a=Qa.getInertBodyElement(u)}while(u!==f);return Wa((new Nd).sanitizeChildren(Ja(a)||a))}finally{if(a){const u=Ja(a)||a;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function Ja(i){return"content"in i&&function(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var Nn=(()=>((Nn=Nn||{})[Nn.NONE=0]="NONE",Nn[Nn.HTML=1]="HTML",Nn[Nn.STYLE=2]="STYLE",Nn[Nn.SCRIPT=3]="SCRIPT",Nn[Nn.URL=4]="URL",Nn[Nn.RESOURCE_URL=5]="RESOURCE_URL",Nn))();function Md(i){const s=Xa();return s?Ag(s.sanitize(Nn.HTML,i)||""):bt(i,"HTML")?Ag(Ao(i)):Pg(fo(),re(i))}function vf(i){const s=Xa();return s?s.sanitize(Nn.URL,i)||"":bt(i,"URL")?Ao(i):ri(re(i))}function Xa(){const i=Ie();return i&&i[12]}const qs="__ngContext__";function ur(i,s){i[qs]=s}function bf(i){const s=function(i){return i[qs]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function el(i){return i.ngOriginalError}function Ld(i,...s){i.error(...s)}class ea{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),u=this._findContext(s),h=(i=s)&&i.ngErrorLogger||Ld;var i;h(this._console,"ERROR",s),a&&h(this._console,"ORIGINAL ERROR",a),u&&h(this._console,"ERROR CONTEXT",u)}_findContext(s){return s?s.ngDebugContext||this._findContext(el(s)):null}_findOriginalError(s){let a=s&&el(s);for(;a&&el(a);)a=el(a);return a||null}}const Bg=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(mt))();function Ri(i){return i instanceof Function?i():i}var v=(()=>((v=v||{})[v.Important=1]="Important",v[v.DashCase=2]="DashCase",v))();function m(i,s){return undefined(i,s)}function N(i){const s=i[3];return xr(s)?s[3]:s}function Oe(i){return Ue(i[13])}function xe(i){return Ue(i[4])}function Ue(i){for(;null!==i&&!xr(i);)i=i[4];return i}function St(i,s,a,u,h){if(null!=u){let f,_=!1;xr(u)?f=u:mn(u)&&(_=!0,u=u[0]);const E=tn(u);0===i&&null!==a?null==h?LT(s,a,E):au(s,a,E,h||null,!0):1===i&&null!==a?au(s,a,E,h||null,!0):2===i?function(i,s,a){const u=Iy(i,s);u&&function(i,s,a,u){on(i)?i.removeChild(s,a,u):s.removeChild(a)}(i,u,s,a)}(s,E,_):3===i&&s.destroyNode(E),null!=f&&function(i,s,a,u,h){const f=a[7];f!==tn(a)&&St(s,i,u,f,h);for(let E=10;E<a.length;E++){const w=a[E];Gg(w[1],w,i,s,u,f)}}(s,i,f,a,h)}}function Bd(i,s,a){return on(i)?i.createElement(s,a):null===a?i.createElement(s):i.createElementNS(a,s)}function xf(i,s){const a=i[9],u=a.indexOf(s),h=s[3];1024&s[2]&&(s[2]&=-1025,Ul(h,-1)),a.splice(u,1)}function cc(i,s){if(i.length<=10)return;const a=10+s,u=i[a];if(u){const h=u[17];null!==h&&h!==i&&xf(h,u),s>0&&(i[a-1][4]=u[4]);const f=Oi(i,10+s);!function(i,s){Gg(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(u[1],u);const _=f[19];null!==_&&_.detachView(f[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function jd(i,s){if(!(256&s[2])){const a=s[11];on(a)&&a.destroyNode&&Gg(i,s,a,3,null,null),function(i){let s=i[13];if(!s)return qg(i[1],i);for(;s;){let a=null;if(mn(s))a=s[13];else{const u=s[10];u&&(a=u)}if(!a){for(;s&&!s[4]&&s!==i;)mn(s)&&qg(s[1],s),s=s[3];null===s&&(s=i),mn(s)&&qg(s[1],s),a=s&&s[4]}s=a}}(s)}}function qg(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let u=0;u<a.length;u+=2){const h=s[a[u]];if(!(h instanceof Va)){const f=a[u+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const E=h[f[_]],w=f[_+1];try{w.call(E)}finally{}}else try{f.call(h)}finally{}}}}(i,s),function(i,s){const a=i.cleanup,u=s[7];let h=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const _=a[f+1],E="function"==typeof _?_(s):tn(s[_]),w=u[h=a[f+2]],I=a[f+3];"boolean"==typeof I?E.removeEventListener(a[f],w,I):I>=0?u[h=I]():u[h=-I].unsubscribe(),f+=2}else{const _=u[h=a[f+1]];a[f].call(_)}if(null!==u){for(let f=h+1;f<u.length;f++)u[f]();s[7]=null}}(i,s),1===s[1].type&&on(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&xr(s[3])){a!==s[3]&&xf(a,s);const u=s[19];null!==u&&u.detachView(i)}}}function kT(i,s,a){return function(i,s,a){let u=s;for(;null!==u&&40&u.type;)u=(s=u).parent;if(null===u)return a[0];if(2&u.flags){const h=i.data[u.directiveStart].encapsulation;if(h===Fe.None||h===Fe.Emulated)return null}return mi(u,a)}(i,s.parent,a)}function au(i,s,a,u,h){on(i)?i.insertBefore(s,a,u,h):s.insertBefore(a,u,h)}function LT(i,s,a){on(i)?i.appendChild(s,a):s.appendChild(a)}function AC(i,s,a,u,h){null!==u?au(i,s,a,u,h):LT(i,s,a)}function Iy(i,s){return on(i)?i.parentNode(s):s.parentNode}let Pf=function(i,s,a){return 40&i.type?mi(i,a):null};function dc(i,s,a,u){const h=kT(i,u,s),f=s[11],E=function(i,s,a){return Pf(i,s,a)}(u.parent||s[6],u,s);if(null!=h)if(Array.isArray(a))for(let w=0;w<a.length;w++)AC(f,h,a[w],E,!1);else AC(f,h,a,E,!1)}function Dy(i,s){if(null!==s){const a=s.type;if(3&a)return mi(s,i);if(4&a)return xC(-1,i[s.index]);if(8&a){const u=s.child;if(null!==u)return Dy(i,u);{const h=i[s.index];return xr(h)?xC(-1,h):tn(h)}}if(32&a)return m(s,i)()||tn(i[s.index]);{const u=BT(i,s);return null!==u?Array.isArray(u)?u[0]:Dy(N(i[16]),u):Dy(i,s.next)}}return null}function BT(i,s){return null!==s?i[16][6].projection[s.projection]:null}function xC(i,s){const a=10+i+1;if(a<s.length){const u=s[a],h=u[1].firstChild;if(null!==h)return Dy(u,h)}return s[7]}function PC(i,s,a,u,h,f,_){for(;null!=a;){const E=u[a.index],w=a.type;if(_&&0===s&&(E&&ur(tn(E),u),a.flags|=4),64!=(64&a.flags))if(8&w)PC(i,s,a.child,u,h,f,!1),St(s,i,h,E,f);else if(32&w){const I=m(a,u);let P;for(;P=I();)St(s,i,h,P,f);St(s,i,h,E,f)}else 16&w?HT(i,s,u,a,h,f):St(s,i,h,E,f);a=_?a.projectionNext:a.next}}function Gg(i,s,a,u,h,f){PC(a,u,i.firstChild,s,h,f,!1)}function HT(i,s,a,u,h,f){const _=a[16],w=_[6].projection[u.projection];if(Array.isArray(w))for(let I=0;I<w.length;I++)St(s,i,h,w[I],f);else PC(i,s,w,_[3],h,f,!0)}function qT(i,s,a){on(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function NC(i,s,a){on(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function ZT(i,s,a){let u=i.length;for(;;){const h=i.indexOf(s,a);if(-1===h)return h;if(0===h||i.charCodeAt(h-1)<=32){const f=s.length;if(h+f===u||i.charCodeAt(h+f)<=32)return h}a=h+1}}const GT="ng-template";function zT(i,s,a){let u=0;for(;u<i.length;){let h=i[u++];if(a&&"class"===h){if(h=i[u],-1!==ZT(h.toLowerCase(),s,0))return!0}else if(1===h){for(;u<i.length&&"string"==typeof(h=i[u++]);)if(h.toLowerCase()===s)return!0;return!1}}return!1}function dP(i){return 4===i.type&&i.value!==GT}function WT(i,s,a){return s===(4!==i.type||a?i.value:GT)}function KT(i,s,a){let u=4;const h=i.attrs||[],f=function(i){for(let s=0;s<i.length;s++)if(pg(i[s]))return s;return i.length}(h);let _=!1;for(let E=0;E<s.length;E++){const w=s[E];if("number"!=typeof w){if(!_)if(4&u){if(u=2|1&u,""!==w&&!WT(i,w,a)||""===w&&1===s.length){if(Po(u))return!1;_=!0}}else{const I=8&u?w:s[++E];if(8&u&&null!==i.attrs){if(!zT(i.attrs,I,a)){if(Po(u))return!1;_=!0}continue}const R=YT(8&u?"class":w,h,dP(i),a);if(-1===R){if(Po(u))return!1;_=!0;continue}if(""!==I){let k;k=R>f?"":h[R+1].toLowerCase();const Z=8&u?k:null;if(Z&&-1!==ZT(Z,I,0)||2&u&&I!==k){if(Po(u))return!1;_=!0}}}}else{if(!_&&!Po(u)&&!Po(w))return!1;if(_&&Po(w))continue;_=!1,u=w|1&u}}return Po(u)||_}function Po(i){return 0==(1&i)}function YT(i,s,a,u){if(null===s)return-1;let h=0;if(u||!a){let f=!1;for(;h<s.length;){const _=s[h];if(_===i)return h;if(3===_||6===_)f=!0;else{if(1===_||2===_){let E=s[++h];for(;"string"==typeof E;)E=s[++h];continue}if(4===_)break;if(0===_){h+=4;continue}}h+=f?1:2}return-1}return function(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const u=i[a];if("number"==typeof u)return-1;if(u===s)return a;a++}return-1}(s,i)}function QT(i,s,a=!1){for(let u=0;u<s.length;u++)if(KT(i,s[u],a))return!0;return!1}function Ay(i,s){return i?":not("+s.trim()+")":s}function mP(i){let s=i[0],a=1,u=2,h="",f=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&u){const E=i[++a];h+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&u?h+="."+_:4&u&&(h+=" "+_);else""!==h&&!Po(_)&&(s+=Ay(f,h),h=""),u=_,f=f||!Po(u);a++}return""!==h&&(s+=Ay(f,h)),s}const vt={};function MC(i){JT(At(),Ie(),lr()+i,Na())}function JT(i,s,a,u){if(!u)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&_o(s,f,a)}else{const f=i.preOrderHooks;null!==f&&Gl(s,f,0,a)}ka(a)}function lu(i,s){return i<<17|s<<2}function na(i){return i>>17&32767}function OC(i){return 2|i}function rl(i){return(131068&i)>>2}function RC(i,s){return-131069&i|s<<2}function wn(i){return 1|i}function rI(i,s){const a=i.contentQueries;if(null!==a)for(let u=0;u<a.length;u+=2){const h=a[u],f=a[u+1];if(-1!==f){const _=i.data[f];Oa(h),_.contentQueries(2,s[f],f)}}}function Nf(i,s,a,u,h,f,_,E,w,I){const P=s.blueprint.slice();return P[0]=h,P[2]=140|u,Vl(P),P[3]=P[15]=i,P[8]=a,P[10]=_||i&&i[10],P[11]=E||i&&i[11],P[12]=w||i&&i[12]||null,P[9]=I||i&&i[9]||null,P[6]=f,P[16]=2==s.type?i[16]:P,P}function hc(i,s,a,u,h){let f=i.data[s];if(null===f)f=function(i,s,a,u,h){const f=Zu(),_=Pa(),w=i.data[s]=function(i,s,a,u,h,f){return{type:a,index:u,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,a,s,u,h);return null===i.firstChild&&(i.firstChild=w),null!==f&&(_?null==f.child&&null!==w.parent&&(f.child=w):null===f.next&&(f.next=w)),w}(i,s,a,u,h),at.lFrame.inI18n&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=u,f.attrs=h;const _=function(){const i=at.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return Br(f,!0),f}function Mr(i,s,a,u){if(0===a)return-1;const h=s.length;for(let f=0;f<a;f++)s.push(u),i.blueprint.push(u),i.data.push(null);return h}function Mf(i,s,a){zo(s);try{const u=i.viewQuery;null!==u&&Vy(1,u,a);const h=i.template;null!==h&&PP(i,s,h,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&rI(i,s),i.staticViewQueries&&Vy(2,i.viewQuery,a);const f=i.components;null!==f&&function(i,s){for(let a=0;a<s.length;a++)Ry(i,s[a])}(s,f)}catch(u){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),u}finally{s[2]&=-5,Ls()}}function cu(i,s,a,u){const h=s[2];if(256==(256&h))return;zo(s);const f=Na();try{Vl(s),function(i){at.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&PP(i,s,a,2,u);const _=3==(3&h);if(!f)if(_){const I=i.preOrderCheckHooks;null!==I&&_o(s,I,null)}else{const I=i.preOrderHooks;null!==I&&Gl(s,I,0,null),Mn(s,0)}if(function(i){for(let s=Oe(i);null!==s;s=xe(s)){if(!s[2])continue;const a=s[9];for(let u=0;u<a.length;u++){const h=a[u],f=h[3];0==(1024&h[2])&&Ul(f,1),h[2]|=1024}}}(s),function(i){for(let s=Oe(i);null!==s;s=xe(s))for(let a=10;a<s.length;a++){const u=s[a],h=u[1];ju(u)&&cu(h,u,h.template,u[8])}}(s),null!==i.contentQueries&&rI(i,s),!f)if(_){const I=i.contentCheckHooks;null!==I&&_o(s,I)}else{const I=i.contentHooks;null!==I&&Gl(s,I,1),Mn(s,1)}!function(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let u=0;u<a.length;u++){const h=a[u];if(h<0)ka(~h);else{const f=h,_=a[++u],E=a[++u];$l(_,f),E(2,s[f])}}}finally{ka(-1)}}(i,s);const E=i.components;null!==E&&function(i,s){for(let a=0;a<s.length;a++)Xg(i,s[a])}(s,E);const w=i.viewQuery;if(null!==w&&Vy(2,w,u),!f)if(_){const I=i.viewCheckHooks;null!==I&&_o(s,I)}else{const I=i.viewHooks;null!==I&&Gl(s,I,2),Mn(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),f||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,Ul(s[3],-1))}finally{Ls()}}function xP(i,s,a,u){const h=s[10],f=!Na(),_=Bu(s);try{f&&!_&&h.begin&&h.begin(),_&&Mf(i,s,u),cu(i,s,a,u)}finally{f&&!_&&h.end&&h.end()}}function PP(i,s,a,u,h){const f=lr(),_=2&u;try{ka(-1),_&&s.length>20&&JT(i,s,20,Na()),a(u,h)}finally{ka(f)}}function sI(i,s,a){if(Lh(s)){const h=s.directiveEnd;for(let f=s.directiveStart;f<h;f++){const _=i.data[f];_.contentQueries&&_.contentQueries(1,a[f],f)}}}function Kg(i,s,a){!Bl()||(function(i,s,a,u){const h=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||Wl(a,s),ur(u,s);const _=a.initialInputs;for(let E=h;E<f;E++){const w=i.data[E],I=Wi(w);I&&dI(s,a,w);const P=vi(s,i,E,a);ur(P,s),null!==_&&qC(0,E-h,P,w,0,_),I&&(Pr(a.index,s)[8]=P)}}(i,s,a,mi(a,s)),128==(128&a.flags)&&function(i,s,a){const u=a.directiveStart,h=a.directiveEnd,_=a.index,E=at.lFrame.currentDirectiveIndex;try{ka(_);for(let w=u;w<h;w++){const I=i.data[w],P=s[w];ql(w),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&lI(I,P)}}finally{ka(-1),ql(E)}}(i,s,a))}function oI(i,s,a=mi){const u=s.localNames;if(null!==u){let h=s.index+1;for(let f=0;f<u.length;f+=2){const _=u[f+1],E=-1===_?a(s,i):i[_];i[h++]=E}}}function NP(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=My(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function My(i,s,a,u,h,f,_,E,w,I){const P=20+u,R=P+h,k=function(i,s){const a=[];for(let u=0;u<s;u++)a.push(u<i?null:vt);return a}(P,R),Z="function"==typeof I?I():I;return k[1]={type:i,blueprint:k,template:a,queries:null,viewQuery:E,declTNode:s,data:k.slice().fill(null,P),bindingStartIndex:P,expandoStartIndex:R,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:w,consts:Z,incompleteFirstPass:!1}}function kP(i,s,a,u){const h=Uy(s);null===a?h.push(u):(h.push(a),i.firstCreatePass&&KC(i).push(u,h.length-1))}function FP(i,s,a){for(let u in i)if(i.hasOwnProperty(u)){const h=i[u];(a=null===a?{}:a).hasOwnProperty(u)?a[u].push(s,h):a[u]=[s,h]}return a}function er(i,s,a,u,h,f,_,E){const w=mi(s,a);let P,I=s.inputs;!E&&null!=I&&(P=I[u])?(YC(i,a,P,u,h),xl(s)&&function(i,s){const a=Pr(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(u=function(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(u),h=null!=_?_(h,s.value||"",u):h,on(f)?f.setProperty(w,u,h):Us(u)||(w.setProperty?w.setProperty(u,h):w[u]=h))}function Gs(i,s,a,u){let h=!1;if(Bl()){const f=function(i,s,a){const u=i.directiveRegistry;let h=null;if(u)for(let f=0;f<u.length;f++){const _=u[f];QT(a,_.selectors,!1)&&(h||(h=[]),Yn(Wl(a,s),i,_.type),Wi(_)?(cI(i,a),h.unshift(_)):h.push(_))}return h}(i,s,a),_=null===u?null:{"":-1};if(null!==f){h=!0,zs(a,i.data.length,f.length);for(let P=0;P<f.length;P++){const R=f[P];R.providersResolver&&R.providersResolver(R)}let E=!1,w=!1,I=Mr(i,s,f.length,null);for(let P=0;P<f.length;P++){const R=f[P];a.mergedAttrs=Ku(a.mergedAttrs,R.hostAttrs),Qg(i,a,s,I,R),jP(I,R,_),null!==R.contentQueries&&(a.flags|=8),(null!==R.hostBindings||null!==R.hostAttrs||0!==R.hostVars)&&(a.flags|=128);const k=R.type.prototype;!E&&(k.ngOnChanges||k.ngOnInit||k.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!w&&(k.ngOnChanges||k.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),w=!0),I++}!function(i,s){const u=s.directiveEnd,h=i.data,f=s.attrs,_=[];let E=null,w=null;for(let I=s.directiveStart;I<u;I++){const P=h[I],R=P.inputs,k=null===f||dP(s)?null:HP(R,f);_.push(k),E=FP(R,I,E),w=FP(P.outputs,I,w)}null!==E&&(E.hasOwnProperty("class")&&(s.flags|=16),E.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=E,s.outputs=w}(i,a)}_&&function(i,s,a){if(s){const u=i.localNames=[];for(let h=0;h<s.length;h+=2){const f=a[s[h+1]];if(null==f)throw new we("301",`Export of name '${s[h+1]}' not found!`);u.push(s[h],f)}}}(a,u,_)}return a.mergedAttrs=Ku(a.mergedAttrs,a.attrs),h}function Yg(i,s,a,u,h,f){const _=f.hostBindings;if(_){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const w=~s.index;(function(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(E)!=w&&E.push(w),E.push(u,h,_)}}function lI(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function cI(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function jP(i,s,a){if(a){if(s.exportAs)for(let u=0;u<s.exportAs.length;u++)a[s.exportAs[u]]=i;Wi(s)&&(a[""]=i)}}function zs(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function Qg(i,s,a,u,h){i.data[u]=h;const f=h.factory||(h.factory=ys(h.type)),_=new Va(f,Wi(h),null);i.blueprint[u]=_,a[u]=_,Yg(i,s,0,u,Mr(i,a,h.hostVars,vt),h)}function dI(i,s,a){const u=mi(s,i),h=NP(a),f=i[10],_=ky(i,Nf(i,h,null,a.onPush?64:16,u,s,f,f.createRenderer(u,a),null,null));i[s.index]=_}function ol(i,s,a,u,h,f){const _=mi(i,s);!function(i,s,a,u,h,f,_){if(null==f)on(i)?i.removeAttribute(s,h,a):s.removeAttribute(h);else{const E=null==_?re(f):_(f,u||"",h);on(i)?i.setAttribute(s,h,E,a):a?s.setAttributeNS(a,h,E):s.setAttribute(h,E)}}(s[11],_,f,i.value,a,u,h)}function qC(i,s,a,u,h,f){const _=f[s];if(null!==_){const E=u.setInput;for(let w=0;w<_.length;){const I=_[w++],P=_[w++],R=_[w++];null!==E?u.setInput(a,R,I,P):a[P]=R}}}function HP(i,s){let a=null,u=0;for(;u<s.length;){const h=s[u];if(0!==h)if(5!==h){if("number"==typeof h)break;i.hasOwnProperty(h)&&(null===a&&(a=[]),a.push(h,i[h],s[u+1])),u+=2}else u+=2;else u+=4}return a}function hI(i,s,a,u){return new Array(i,!0,!1,s,null,0,u,a,null,null)}function Xg(i,s){const a=Pr(s,i);if(ju(a)){const u=a[1];80&a[2]?cu(u,a,u.template,a[8]):a[5]>0&&Oy(a)}}function Oy(i){for(let u=Oe(i);null!==u;u=xe(u))for(let h=10;h<u.length;h++){const f=u[h];if(1024&f[2]){const _=f[1];cu(_,f,_.template,f[8])}else f[5]>0&&Oy(f)}const a=i[1].components;if(null!==a)for(let u=0;u<a.length;u++){const h=Pr(a[u],i);ju(h)&&h[5]>0&&Oy(h)}}function Ry(i,s){const a=Pr(s,i),u=a[1];(function(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(u,a),Mf(u,a,a[8])}function ky(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function ZC(i){for(;i;){i[2]|=64;const s=N(i);if(Ki(i)&&!s)return i;i=s}return null}function Fy(i,s,a){const u=s[10];u.begin&&u.begin();try{cu(i,s,i.template,a)}catch(h){throw By(s,h),h}finally{u.end&&u.end()}}function Ly(i){!function(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],u=bf(a),h=u[1];xP(h,u,h.template,a)}}(i[8])}function Vy(i,s,a){Oa(0),s(i,a)}const GP=(()=>Promise.resolve(null))();function Uy(i){return i[7]||(i[7]=[])}function KC(i){return i.cleanup||(i.cleanup=[])}function By(i,s){const a=i[9],u=a?a.get(ea,null):null;u&&u.handleError(s)}function YC(i,s,a,u,h){for(let f=0;f<a.length;){const _=a[f++],E=a[f++],w=s[_],I=i.data[_];null!==I.setInput?I.setInput(w,h,u,E):w[E]=h}}function al(i,s,a){const u=Go(s,i);!function(i,s,a){on(i)?i.setValue(s,a):s.textContent=a}(i[11],u,a)}function Of(i,s,a){let u=a?i.styles:null,h=a?i.classes:null,f=0;if(null!==s)for(let _=0;_<s.length;_++){const E=s[_];"number"==typeof E?f=E:1==f?h=ee(h,E):2==f&&(u=ee(u,E+": "+s[++_]+";"))}a?i.styles=u:i.stylesWithoutHost=u,a?i.classes=h:i.classesWithoutHost=h}const hu=new cn("INJECTOR",-1);class jy{get(s,a=Rt){if(a===Rt){const u=new Error(`NullInjectorError: No provider for ${J(s)}!`);throw u.name="NullInjectorError",u}return a}}const Rf=new cn("Set Injector scope."),$d={},KP={};let Hy;function kf(){return void 0===Hy&&(Hy=new jy),Hy}function mI(i,s=null,a=null,u){return new QP(i,a,s||kf(),u)}class QP{constructor(s,a,u,h=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];a&&ws(a,E=>this.processProvider(E,s,a)),ws([s],E=>this.processInjectorType(E,[],f)),this.records.set(hu,Ff(void 0,this));const _=this.records.get(Rf);this.scope=null!=_?_.value:null,this.source=h||("object"==typeof s?null:J(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=Rt,u=Ge.Default){this.assertNotDestroyed();const h=Hs(this),f=Qr(void 0);try{if(!(u&Ge.SkipSelf)){let E=this.records.get(s);if(void 0===E){const w=("function"==typeof(i=s)||"object"==typeof i&&i instanceof cn)&&or(s);E=w&&this.injectableDefInScope(w)?Ff(QC(s),$d):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(u&Ge.Self?kf():this.parent).get(s,a=u&Ge.Optional&&a===Rt?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[bn]=_[bn]||[]).unshift(J(s)),h)throw _;return Io(_,s,"R3InjectorError",this.source)}throw _}finally{Qr(f),Hs(h)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((u,h)=>s.push(J(h))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(s,a,u){if(!(s=G(s)))return!1;let h=Zi(s);const f=null==h&&s.ngModule||void 0,_=void 0===f?s:f,E=-1!==u.indexOf(_);if(void 0!==f&&(h=Zi(f)),null==h)return!1;if(null!=h.imports&&!E){let P;u.push(_);try{ws(h.imports,R=>{this.processInjectorType(R,a,u)&&(void 0===P&&(P=[]),P.push(R))})}finally{}if(void 0!==P)for(let R=0;R<P.length;R++){const{ngModule:k,providers:Z}=P[R];ws(Z,Y=>this.processProvider(Y,k,Z||q))}}this.injectorDefTypes.add(_);const w=ys(_)||(()=>new _);this.records.set(_,Ff(w,$d));const I=h.providers;if(null!=I&&!E){const P=s;ws(I,R=>this.processProvider(R,P,I))}return void 0!==f&&void 0!==s.providers}processProvider(s,a,u){let h=qd(s=G(s))?s:G(s&&s.provide);const f=yI(i=s)?Ff(void 0,i.useValue):Ff(_I(i),$d);var i;if(qd(s)||!0!==s.multi)this.records.get(h);else{let _=this.records.get(h);_||(_=Ff(void 0,$d,!0),_.factory=()=>eu(_.multi),this.records.set(h,_)),h=s,_.multi.push(s)}this.records.set(h,f)}hydrate(s,a){return a.value===$d&&(a.value=KP,a.value=a.factory()),"object"==typeof a.value&&a.value&&null!==(i=a.value)&&"object"==typeof i&&"function"==typeof i.ngOnDestroy&&this.onDestroy.add(a.value),a.value;var i}injectableDefInScope(s){if(!s.providedIn)return!1;const a=G(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function QC(i){const s=or(i),a=null!==s?s.factory:ys(i);if(null!==a)return a;if(i instanceof cn)throw new Error(`Token ${J(i)} is missing a \u0275prov definition.`);if(i instanceof Function)return function(i){const s=i.length;if(s>0){const u=function(i,s){const a=[];for(let u=0;u<i;u++)a.push(s);return a}(s,"?");throw new Error(`Can't resolve all parameters for ${J(i)}: (${u.join(", ")}).`)}const a=function(i){const s=i&&(i[_s]||i[dr]);if(s){const a=function(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Error("unreachable")}function _I(i,s,a){let u;if(qd(i)){const h=G(i);return ys(h)||QC(h)}if(yI(i))u=()=>G(i.useValue);else if(function(i){return!(!i||!i.useFactory)}(i))u=()=>i.useFactory(...eu(i.deps||[]));else if(function(i){return!(!i||!i.useExisting)}(i))u=()=>pr(G(i.useExisting));else{const h=G(i&&(i.useClass||i.provide));if(!function(i){return!!i.deps}(i))return ys(h)||QC(h);u=()=>new h(...eu(i.deps))}return u}function Ff(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function yI(i){return null!==i&&"object"==typeof i&&Nr in i}function qd(i){return"function"==typeof i}const XC=function(i,s,a){return function(i,s=null,a=null,u){const h=mI(i,s,a,u);return h._resolveInjectorDefTypes(),h}({name:a},s,i,a)};let Rn=(()=>{class i{static create(a,u){return Array.isArray(a)?XC(a,u,""):XC(a.providers,a.parent,a.name||"")}}return i.THROW_IF_NOT_FOUND=Rt,i.NULL=new jy,i.\u0275prov=fn({token:i,providedIn:"any",factory:()=>pr(hu)}),i.__NG_ELEMENT_ID__=-1,i})();function cN(i,s){Wu(bf(i)[1],un())}function fu(i){let s=function(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const u=[i];for(;s;){let h;if(Wi(i))h=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Error("Directives cannot inherit Components");h=s.\u0275dir}if(h){if(a){u.push(h);const _=i;_.inputs=a0(i.inputs),_.declaredInputs=a0(i.declaredInputs),_.outputs=a0(i.outputs);const E=h.hostBindings;E&&hN(i,E);const w=h.viewQuery,I=h.contentQueries;if(w&&l0(i,w),I&&dN(i,I),me(i.inputs,h.inputs),me(i.declaredInputs,h.declaredInputs),me(i.outputs,h.outputs),Wi(h)&&h.data.animation){const P=i.data;P.animation=(P.animation||[]).concat(h.data.animation)}}const f=h.features;if(f)for(let _=0;_<f.length;_++){const E=f[_];E&&E.ngInherit&&E(i),E===fu&&(a=!1)}}s=Object.getPrototypeOf(s)}!function(i){let s=0,a=null;for(let u=i.length-1;u>=0;u--){const h=i[u];h.hostVars=s+=h.hostVars,h.hostAttrs=Ku(h.hostAttrs,a=Ku(a,h.hostAttrs))}}(u)}function a0(i){return i===W?{}:i===q?[]:i}function l0(i,s){const a=i.viewQuery;i.viewQuery=a?(u,h)=>{s(u,h),a(u,h)}:s}function dN(i,s){const a=i.contentQueries;i.contentQueries=a?(u,h,f)=>{s(u,h,f),a(u,h,f)}:s}function hN(i,s){const a=i.hostBindings;i.hostBindings=a?(u,h)=>{s(u,h),a(u,h)}:s}let rm=null;function gr(){if(!rm){const i=mt.Symbol;if(i&&i.iterator)rm=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const u=s[a];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(rm=u)}}}return rm}class ra{constructor(s){this.wrapped=s}static wrap(s){return new ra(s)}static unwrap(s){return ra.isWrapped(s)?s.wrapped:s}static isWrapped(s){return s instanceof ra}}function kt(i){return!!Wy(i)&&(Array.isArray(i)||!(i instanceof Map)&&gr()in i)}function Wy(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function ia(i,s,a){return i[s]=a}function Ci(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Ky(i,s,a,u){const h=Ie();return Ci(h,Mi(),s)&&(At(),ol(Pn(),h,i,s,a,u)),Ky}function Gd(i,s,a,u){return Ci(i,Mi(),a)?s+re(a)+u:vt}function g0(i,s,a,u,h,f,_,E){const w=Ie(),I=At(),P=i+20,R=I.firstCreatePass?function(i,s,a,u,h,f,_,E,w){const I=s.consts,P=hc(s,i,4,_||null,jn(I,E));Gs(s,a,P,jn(I,w)),Wu(s,P);const R=P.tViews=My(2,P,u,h,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,I);return null!==s.queries&&(s.queries.template(s,P),R.queries=s.queries.embeddedTView(P)),P}(P,I,w,s,a,u,h,f,_):I.data[P];Br(R,!1);const k=w[11].createComment("");dc(I,w,k,R),ur(k,w),ky(w,w[P]=hI(k,w,k,R)),ku(R)&&Kg(I,w,R),null!=_&&oI(w,R,E)}function pN(i){return go(at.lFrame.contextLView,20+i)}function gu(i,s=Ge.Default){const a=Ie();return null===a?pr(i,s):of(un(),a,G(i),s)}function iv(i,s,a){const u=Ie();return Ci(u,Mi(),s)&&er(At(),Pn(),u,i,s,u[11],a,!1),iv}function jI(i,s,a,u,h){const _=h?"class":"style";YC(i,a,s.inputs[_],_,u)}function HI(i,s,a,u){const h=Ie(),f=At(),_=20+i,E=h[11],w=h[_]=Bd(E,s,at.lFrame.currentNamespace),I=f.firstCreatePass?function(i,s,a,u,h,f,_){const E=s.consts,I=hc(s,i,2,h,jn(E,f));return Gs(s,a,I,jn(E,_)),null!==I.attrs&&Of(I,I.attrs,!1),null!==I.mergedAttrs&&Of(I,I.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,I),I}(_,f,h,0,s,a,u):f.data[_];Br(I,!0);const P=I.mergedAttrs;null!==P&&tf(E,w,P);const R=I.classes;null!==R&&NC(E,w,R);const k=I.styles;null!==k&&qT(E,w,k),64!=(64&I.flags)&&dc(f,h,w,I),0===at.lFrame.elementDepthCount&&ur(w,h),at.lFrame.elementDepthCount++,ku(I)&&(Kg(f,h,I),sI(f,I,h)),null!==u&&oI(h,I)}function $I(){let i=un();Pa()?jl():(i=i.parent,Br(i,!1));const s=i;at.lFrame.elementDepthCount--;const a=At();a.firstCreatePass&&(Wu(a,i),Lh(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function(i){return 0!=(16&i.flags)}(s)&&jI(a,s,Ie(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function(i){return 0!=(32&i.flags)}(s)&&jI(a,s,Ie(),s.stylesWithoutHost,!1)}function qI(i,s,a,u){HI(i,s,a,u),$I()}function ZI(i,s,a){const u=Ie(),h=At(),f=i+20,_=h.firstCreatePass?function(i,s,a,u,h){const f=s.consts,_=jn(f,u),E=hc(s,i,8,"ng-container",_);return null!==_&&Of(E,_,!0),Gs(s,a,E,jn(f,h)),null!==s.queries&&s.queries.elementStart(s,E),E}(f,h,u,s,a):h.data[f];Br(_,!0);const E=u[f]=u[11].createComment("");dc(h,u,E,_),ur(E,u),ku(_)&&(Kg(h,u,_),sI(h,_,u)),null!=a&&oI(u,_)}function sv(){let i=un();const s=At();Pa()?jl():(i=i.parent,Br(i,!1)),s.firstCreatePass&&(Wu(s,i),Lh(i)&&s.queries.elementEnd(i))}function wc(){return Ie()}function w0(i){return!!i&&"function"==typeof i.then}function fm(i){return!!i&&"function"==typeof i.subscribe}const T0=fm;function GI(i,s,a,u){const h=Ie(),f=At(),_=un();return function(i,s,a,u,h,f,_,E){const w=ku(u),P=i.firstCreatePass&&KC(i),R=s[8],k=Uy(s);let Z=!0;if(3&u.type||E){const te=mi(u,s),Me=E?E(te):te,be=k.length,et=E?ct=>E(tn(ct[u.index])):u.index;if(on(a)){let ct=null;if(!E&&w&&(ct=function(i,s,a,u){const h=i.cleanup;if(null!=h)for(let f=0;f<h.length-1;f+=2){const _=h[f];if(_===a&&h[f+1]===u){const E=s[7],w=h[f+2];return E.length>w?E[w]:null}"string"==typeof _&&(f+=2)}return null}(i,s,h,u.index)),null!==ct)(ct.__ngLastListenerFn__||ct).__ngNextListenerFn__=f,ct.__ngLastListenerFn__=f,Z=!1;else{f=av(u,s,R,f,!1);const $t=a.listen(Me,h,f);k.push(f,$t),P&&P.push(h,et,be,be+1)}}else f=av(u,s,R,f,!0),Me.addEventListener(h,f,_),k.push(f),P&&P.push(h,et,be,_)}else f=av(u,s,R,f,!1);const Y=u.outputs;let ce;if(Z&&null!==Y&&(ce=Y[h])){const te=ce.length;if(te)for(let Me=0;Me<te;Me+=2){const br=s[ce[Me]][ce[Me+1]].subscribe(f),no=k.length;k.push(f,br),P&&P.push(h,u.index,no,-(no+1))}}}(f,h,h[11],_,i,s,!!a,u),GI}function zI(i,s,a,u){try{return!1!==a(u)}catch(h){return By(i,h),!1}}function av(i,s,a,u,h){return function f(_){if(_===Function)return u;const E=2&i.flags?Pr(i.index,s):s;0==(32&s[2])&&ZC(E);let w=zI(s,0,u,_),I=f.__ngNextListenerFn__;for(;I;)w=zI(s,0,I,_)&&w,I=I.__ngNextListenerFn__;return h&&!1===w&&(_.preventDefault(),_.returnValue=!1),w}}function lv(i=1){return function(i){return(at.lFrame.contextLView=function(i,s){for(;i>0;)s=s[15],i--;return s}(i,at.lFrame.contextLView))[8]}(i)}function ul(i,s,a){return A0(i,"",s,"",a),ul}function A0(i,s,a,u,h){const f=Ie(),_=Gd(f,s,a,u);return _!==vt&&er(At(),Pn(),f,i,_,f[11],h,!1),A0}function JI(i,s,a,u,h){const f=i[a+1],_=null===s;let E=u?na(f):rl(f),w=!1;for(;0!==E&&(!1===w||_);){const P=i[E+1];XI(i[E],s)&&(w=!0,i[E+1]=u?wn(P):OC(P)),E=u?na(P):rl(P)}w&&(i[a+1]=u?OC(f):wn(f))}function XI(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Jn(i,s)>=0}const Gr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function SN(i){return i.substring(Gr.key,Gr.keyEnd)}function O0(i,s){const a=Gr.textEnd;return a===s?-1:(s=Gr.keyEnd=function(i,s,a){for(;s<a&&i.charCodeAt(s)>32;)s++;return s}(i,Gr.key=s,a),$f(i,s,a))}function $f(i,s,a){for(;s<a&&i.charCodeAt(s)<=32;)s++;return s}function dv(i,s,a){return No(i,s,a,!1),dv}function L0(i,s){return No(i,s,null,!0),L0}function gm(i){!function(i,s,a,u){const h=At(),f=jr(2);h.firstUpdatePass&&MN(h,null,f,u);const _=Ie();if(a!==vt&&Ci(_,f,a)){const E=h.data[lr()];if(V0(E,u)&&!NN(h,f)){let w=u?E.classesWithoutHost:E.stylesWithoutHost;null!==w&&(a=ee(w,a||"")),jI(h,E,_,a,u)}else!function(i,s,a,u,h,f,_,E){h===vt&&(h=q);let w=0,I=0,P=0<h.length?h[0]:null,R=0<f.length?f[0]:null;for(;null!==P||null!==R;){const k=w<h.length?h[w+1]:void 0,Z=I<f.length?f[I+1]:void 0;let ce,Y=null;P===R?(w+=2,I+=2,k!==Z&&(Y=R,ce=Z)):null===R||null!==P&&P<R?(w+=2,Y=P):(I+=2,Y=R,ce=Z),null!==Y&&aD(i,s,a,u,Y,ce,_,E),P=w<h.length?h[w]:null,R=I<f.length?f[I]:null}}(h,E,_,_[11],_[f+1],_[f+1]=function(i,s,a){if(null==a||""===a)return q;const u=[],h=Ao(a);if(Array.isArray(h))for(let f=0;f<h.length;f++)i(u,h[f],!0);else if("object"==typeof h)for(const f in h)h.hasOwnProperty(f)&&i(u,f,h[f]);else"string"==typeof h&&s(u,h);return u}(i,s,a),u,f)}}(dn,cl,i,!0)}function cl(i,s){for(let a=function(i){return function(i){Gr.key=0,Gr.keyEnd=0,Gr.value=0,Gr.valueEnd=0,Gr.textEnd=i.length}(i),O0(i,$f(i,0,Gr.textEnd))}(s);a>=0;a=O0(s,a))dn(i,SN(s),!0)}function No(i,s,a,u){const h=Ie(),f=At(),_=jr(2);f.firstUpdatePass&&MN(f,i,_,u),s!==vt&&Ci(h,_,s)&&aD(f,f.data[lr()],h,h[11],i,h[_+1]=function(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=J(Ao(i)))),i}(s,a),u,_)}function NN(i,s){return s>=i.expandoStartIndex}function MN(i,s,a,u){const h=i.data;if(null===h[a+1]){const f=h[lr()],_=NN(i,a);V0(f,u)&&null===s&&!_&&(s=!1),s=function(i,s,a,u){const h=Zl(i);let f=u?s.residualClasses:s.residualStyles;if(null===h)0===(u?s.classBindings:s.styleBindings)&&(a=fv(a=Jd(null,i,s,a,u),s.attrs,u),f=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==h)if(a=Jd(h,i,s,a,u),null===f){let w=function(i,s,a){const u=a?s.classBindings:s.styleBindings;if(0!==rl(u))return i[na(u)]}(i,s,u);void 0!==w&&Array.isArray(w)&&(w=Jd(null,i,s,w[1],u),w=fv(w,s.attrs,u),function(i,s,a,u){i[na(a?s.classBindings:s.styleBindings)]=u}(i,s,u,w))}else f=function(i,s,a){let u;const h=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<h;f++)u=fv(u,i[f].hostAttrs,a);return fv(u,s.attrs,a)}(i,s,u)}return void 0!==f&&(u?s.residualClasses=f:s.residualStyles=f),a}(h,f,s,u),function(i,s,a,u,h,f){let _=f?s.classBindings:s.styleBindings,E=na(_),w=rl(_);i[u]=a;let P,I=!1;if(Array.isArray(a)){const R=a;P=R[1],(null===P||Jn(R,P)>0)&&(I=!0)}else P=a;if(h)if(0!==w){const k=na(i[E+1]);i[u+1]=lu(k,E),0!==k&&(i[k+1]=RC(i[k+1],u)),i[E+1]=function(i,s){return 131071&i|s<<17}(i[E+1],u)}else i[u+1]=lu(E,0),0!==E&&(i[E+1]=RC(i[E+1],u)),E=u;else i[u+1]=lu(w,0),0===E?E=u:i[w+1]=RC(i[w+1],u),w=u;I&&(i[u+1]=OC(i[u+1])),JI(i,P,u,!0),JI(i,P,u,!1),function(i,s,a,u,h){const f=h?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&Jn(f,s)>=0&&(a[u+1]=wn(a[u+1]))}(s,P,i,u,f),_=lu(E,w),f?s.classBindings=_:s.styleBindings=_}(h,f,s,a,_,u)}}function Jd(i,s,a,u,h){let f=null;const _=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<_&&(f=s[E],u=fv(u,f.hostAttrs,h),f!==i);)E++;return null!==i&&(a.directiveStylingLast=E),u}function fv(i,s,a){const u=a?1:2;let h=-1;if(null!==s)for(let f=0;f<s.length;f++){const _=s[f];"number"==typeof _?h=_:h===u&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),dn(i,_,!!a||s[++f]))}return void 0===i?null:i}function aD(i,s,a,u,h,f,_,E){if(!(3&s.type))return;const w=i.data,I=w[E+1];pv(function(i){return 1==(1&i)}(I)?lD(w,s,a,h,rl(I),_):void 0)||(pv(f)||function(i){return 2==(2&i)}(I)&&(f=lD(w,null,a,h,E,_)),function(i,s,a,u,h){const f=on(i);if(s)h?f?i.addClass(a,u):a.classList.add(u):f?i.removeClass(a,u):a.classList.remove(u);else{let _=-1===u.indexOf("-")?void 0:v.DashCase;if(null==h)f?i.removeStyle(a,u,_):a.style.removeProperty(u);else{const E="string"==typeof h&&h.endsWith("!important");E&&(h=h.slice(0,-10),_|=v.Important),f?i.setStyle(a,u,h,_):a.style.setProperty(u,h,E?"important":"")}}}(u,_,Go(lr(),a),h,f))}function lD(i,s,a,u,h,f){const _=null===s;let E;for(;h>0;){const w=i[h],I=Array.isArray(w),P=I?w[1]:w,R=null===P;let k=a[h+1];k===vt&&(k=R?q:void 0);let Z=R?Jo(k,u):P===u?k:void 0;if(I&&!pv(Z)&&(Z=Jo(w,u)),pv(Z)&&(E=Z,_))return E;const Y=i[h+1];h=_?na(Y):rl(Y)}if(null!==s){let w=f?s.residualClasses:s.residualStyles;null!=w&&(E=Jo(w,u))}return E}function pv(i){return void 0!==i}function V0(i,s){return 0!=(i.flags&(s?16:32))}function uD(i,s=""){const a=Ie(),u=At(),h=i+20,f=u.firstCreatePass?hc(u,h,1,s,null):u.data[h],_=a[h]=function(i,s){return on(i)?i.createText(s):i.createTextNode(s)}(a[11],s);dc(u,a,_,f),Br(f,!1)}function oa(i){return aa("",i,""),oa}function aa(i,s,a){const u=Ie(),h=Gd(u,i,s,a);return h!==vt&&al(u,lr(),h),aa}function mv(i,s,a){const u=Ie();return Ci(u,Mi(),s)&&er(At(),Pn(),u,i,s,u[11],a,!0),mv}function H0(i,s,a){const u=Ie();if(Ci(u,Mi(),s)){const f=At(),_=Pn();er(f,_,u,i,s,function(i,s,a){return(null===i||Wi(i))&&(a=function(i){for(;Array.isArray(i);){if("object"==typeof i[1])return i;i=i[0]}return null}(a[s.index])),a[11]}(Zl(f.data),_,u),a,!0)}return H0}const Xd=void 0;var JN=["en",[["a","p"],["AM","PM"],Xd],[["AM","PM"],Xd,Xd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Xd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Xd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Xd,"{1} 'at' {0}",Xd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(i){const s=Math.floor(Math.abs(i)),a=i.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let Zf={};function la(i){const s=function(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=vD(s);if(a)return a;const u=s.split("-")[0];if(a=vD(u),a)return a;if("en"===u)return JN;throw new Error(`Missing locale data for the locale "${i}".`)}function yD(i){return la(i)[lt.PluralCase]}function vD(i){return i in Zf||(Zf[i]=mt.ng&&mt.ng.common&&mt.ng.common.locales&&mt.ng.common.locales[i]),Zf[i]}var lt=(()=>((lt=lt||{})[lt.LocaleId=0]="LocaleId",lt[lt.DayPeriodsFormat=1]="DayPeriodsFormat",lt[lt.DayPeriodsStandalone=2]="DayPeriodsStandalone",lt[lt.DaysFormat=3]="DaysFormat",lt[lt.DaysStandalone=4]="DaysStandalone",lt[lt.MonthsFormat=5]="MonthsFormat",lt[lt.MonthsStandalone=6]="MonthsStandalone",lt[lt.Eras=7]="Eras",lt[lt.FirstDayOfWeek=8]="FirstDayOfWeek",lt[lt.WeekendRange=9]="WeekendRange",lt[lt.DateFormat=10]="DateFormat",lt[lt.TimeFormat=11]="TimeFormat",lt[lt.DateTimeFormat=12]="DateTimeFormat",lt[lt.NumberSymbols=13]="NumberSymbols",lt[lt.NumberFormats=14]="NumberFormats",lt[lt.CurrencyCode=15]="CurrencyCode",lt[lt.CurrencySymbol=16]="CurrencySymbol",lt[lt.CurrencyName=17]="CurrencyName",lt[lt.Currencies=18]="Currencies",lt[lt.Directionality=19]="Directionality",lt[lt.PluralCase=20]="PluralCase",lt[lt.ExtraData=21]="ExtraData",lt))();const _v="en-US";let CD=_v;function $0(i){Gt(i,"Expected localeId to be defined"),"string"==typeof i&&(CD=i.toLowerCase().replace(/_/g,"-"))}function wm(i,s,a,u,h){if(i=G(i),Array.isArray(i))for(let f=0;f<i.length;f++)wm(i[f],s,a,u,h);else{const f=At(),_=Ie();let E=qd(i)?i:G(i.provide),w=_I(i);const I=un(),P=1048575&I.providerIndexes,R=I.directiveStart,k=I.providerIndexes>>20;if(qd(i)||!i.multi){const Z=new Va(w,h,gu),Y=Yf(E,s,h?P:P+k,R);-1===Y?(Yn(Wl(I,_),f,E),Or(f,i,s.length),s.push(E),I.directiveStart++,I.directiveEnd++,h&&(I.providerIndexes+=1048576),a.push(Z),_.push(Z)):(a[Y]=Z,_[Y]=Z)}else{const Z=Yf(E,s,P+k,R),Y=Yf(E,s,P,P+k),ce=Z>=0&&a[Z],te=Y>=0&&a[Y];if(h&&!te||!h&&!ce){Yn(Wl(I,_),f,E);const Me=function(i,s,a,u,h){const f=new Va(i,a,gu);return f.multi=[],f.index=s,f.componentProviders=0,oi(f,h,u&&!a),f}(h?uM:db,a.length,h,u,w);!h&&te&&(a[Y].providerFactory=Me),Or(f,i,s.length,0),s.push(E),I.directiveStart++,I.directiveEnd++,h&&(I.providerIndexes+=1048576),a.push(Me),_.push(Me)}else Or(f,i,Z>-1?Z:Y,oi(a[h?Y:Z],w,!h&&u));!h&&u&&te&&a[Y].componentProviders++}}}function Or(i,s,a,u){const h=qd(s);if(h||function(i){return!!i.useClass}(s)){const _=(s.useClass||s).prototype.ngOnDestroy;if(_){const E=i.destroyHooks||(i.destroyHooks=[]);if(!h&&s.multi){const w=E.indexOf(a);-1===w?E.push(a,[u,_]):E[w+1].push(u,_)}else E.push(a,_)}}}function oi(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function Yf(i,s,a,u){for(let h=a;h<u;h++)if(s[h]===i)return h;return-1}function db(i,s,a,u){return hb(this.multi,[])}function uM(i,s,a,u){const h=this.multi;let f;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=vi(a,a[1],this.providerFactory.index,u);f=E.slice(0,_),hb(h,f);for(let w=_;w<E.length;w++)f.push(E[w])}else f=[],hb(h,f);return f}function hb(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function zD(i,s=[]){return a=>{a.providersResolver=(u,h)=>function(i,s,a){const u=At();if(u.firstCreatePass){const h=Wi(i);wm(a,u.data,u.blueprint,h,!0),wm(s,u.data,u.blueprint,h,!1)}}(u,h?h(i):i,s)}}class Iv{}const WD="ngComponent";class YD{resolveComponentFactory(s){throw function(i){const s=Error(`No component factory found for ${J(i)}. Did you add it to @NgModule.entryComponents?`);return s[WD]=i,s}(s)}}let Qf=(()=>{class i{}return i.NULL=new YD,i})();function Jf(...i){}function Xf(i,s){return new ua(mi(i,s))}const JD=function(){return Xf(un(),Ie())};let ua=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=JD,i})();function Dm(i){return i instanceof ua?i.nativeElement:i}class Av{}let ep=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>nh(),i})();const nh=function(){const i=Ie(),a=Pr(un().index,i);return function(i){return i[11]}(mn(a)?a:i)};let xv=(()=>{class i{}return i.\u0275prov=fn({token:i,providedIn:"root",factory:()=>null}),i})();class tp{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Pv=new tp("12.2.8");class Bi{constructor(){}supports(s){return kt(s)}create(s){return new Mv(s)}}const eA=(i,s)=>s;class Mv{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||eA}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,u=this._removalsHead,h=0,f=null;for(;a||u;){const _=!u||a&&a.currentIndex<mb(u,h,f)?a:u,E=mb(_,h,f),w=_.currentIndex;if(_===u)h--,u=u._nextRemoved;else if(a=a._next,null==_.previousIndex)h++;else{f||(f=[]);const I=E-h,P=w-h;if(I!=P){for(let k=0;k<I;k++){const Z=k<f.length?f[k]:f[k]=0,Y=Z+k;P<=Y&&Y<I&&(f[k]=Z+1)}f[_.previousIndex]=P-I}}E!==w&&s(_,E,w)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!kt(s))throw new Error(`Error trying to diff '${J(s)}'. Only arrays and iterables are allowed`);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let h,f,_,a=this._itHead,u=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)f=s[E],_=this._trackByFn(E,f),null!==a&&Object.is(a.trackById,_)?(u&&(a=this._verifyReinsertion(a,f,_,E)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,_,E),u=!0),a=a._next}else h=0,function(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[gr()]();let u;for(;!(u=a.next()).done;)s(u.value)}}(s,E=>{_=this._trackByFn(h,E),null!==a&&Object.is(a.trackById,_)?(u&&(a=this._verifyReinsertion(a,E,_,h)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,_,h),u=!0),a=a._next,h++}),this.length=h;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,u,h){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,h)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(u,h))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,h)):s=this._addAfter(new tA(a,u),f,h),s}_verifyReinsertion(s,a,u,h){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==f?s=this._reinsertAfter(f,s._prev,h):s.currentIndex!=h&&(s.currentIndex=h,this._addToMoves(s,h)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const h=s._prevRemoved,f=s._nextRemoved;return null===h?this._removalsHead=f:h._nextRemoved=f,null===f?this._removalsTail=h:f._prevRemoved=h,this._insertAfter(s,a,u),this._addToMoves(s,u),s}_moveAfter(s,a,u){return this._unlink(s),this._insertAfter(s,a,u),this._addToMoves(s,u),s}_addAfter(s,a,u){return this._insertAfter(s,a,u),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,u){const h=null===a?this._itHead:a._next;return s._next=h,s._prev=a,null===h?this._itTail=s:h._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new gb),this._linkedRecords.put(s),s.currentIndex=u,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,u=s._next;return null===a?this._itHead=u:a._next=u,null===u?this._itTail=a:u._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new gb),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class tA{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class pb{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===a||a<=u.currentIndex)&&Object.is(u.trackById,s))return u;return null}remove(s){const a=s._prevDup,u=s._nextDup;return null===a?this._head=u:a._nextDup=u,null===u?this._tail=a:u._prevDup=a,null===this._head}}class gb{constructor(){this.map=new Map}put(s){const a=s.trackById;let u=this.map.get(a);u||(u=new pb,this.map.set(a,u)),u.add(s)}get(s,a){const h=this.map.get(s);return h?h.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function mb(i,s,a){const u=i.previousIndex;if(null===u)return u;let h=0;return a&&u<a.length&&(h=a[u]),u+s+h}class np{constructor(){}supports(s){return s instanceof Map||Wy(s)}create(){return new _b}}class _b{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Wy(s)))throw new Error(`Error trying to diff '${J(s)}'. Only maps and objects are allowed`)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(u,h)=>{if(a&&a.key===h)this._maybeAddToChanges(a,u),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(h,u);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let u=a;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const u=s._prev;return a._next=s,a._prev=u,s._prev=a,u&&(u._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const h=this._records.get(s);this._maybeAddToChanges(h,a);const f=h._prev,_=h._next;return f&&(f._next=_),_&&(_._prev=f),h._next=null,h._prev=null,h}const u=new yb(s);return this._records.set(s,u),u.currentValue=a,this._addToAdditions(u),u}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(u=>a(s[u],u))}}class yb{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ov(){return new rh([new Bi])}let rh=(()=>{class i{constructor(a){this.factories=a}static create(a,u){if(null!=u){const h=u.factories.slice();a=a.concat(h)}return new i(a)}static extend(a){return{provide:i,useFactory:u=>i.create(a,u||Ov()),deps:[[i,new Ts,new Xo]]}}find(a){const u=this.factories.find(h=>h.supports(a));if(null!=u)return u;throw new Error(`Cannot find a differ supporting object '${a}' of type '${function(i){return i.name||typeof i}(a)}'`)}}return i.\u0275prov=fn({token:i,providedIn:"root",factory:Ov}),i})();function vb(){return new Rv([new np])}let Rv=(()=>{class i{constructor(a){this.factories=a}static create(a,u){if(u){const h=u.factories.slice();a=a.concat(h)}return new i(a)}static extend(a){return{provide:i,useFactory:u=>i.create(a,u||vb()),deps:[[i,new Ts,new Xo]]}}find(a){const u=this.factories.find(h=>h.supports(a));if(u)return u;throw new Error(`Cannot find a differ supporting object '${a}'`)}}return i.\u0275prov=fn({token:i,providedIn:"root",factory:vb}),i})();function rp(i,s,a,u,h=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&u.push(tn(f)),xr(f))for(let E=10;E<f.length;E++){const w=f[E],I=w[1].firstChild;null!==I&&rp(w[1],w,I,u)}const _=a.type;if(8&_)rp(i,s,a.child,u);else if(32&_){const E=m(a,s);let w;for(;w=E();)u.push(w)}else if(16&_){const E=BT(s,a);if(Array.isArray(E))u.push(...E);else{const w=N(s[16]);rp(w[1],w,E,u,!0)}}a=h?a.projectionNext:a.next}return u}class Ac{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return rp(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(xr(s)){const a=s[8],u=a?a.indexOf(this):-1;u>-1&&(cc(s,u),Oi(a,u))}this._attachedToViewContainer=!1}jd(this._lView[1],this._lView)}onDestroy(s){kP(this._lView[1],this._lView,null,s)}markForCheck(){ZC(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Fy(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(i,s,a){Ma(!0);try{Fy(i,s,a)}finally{Ma(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var s;this._appRef=null,Gg(this._lView[1],s=this._lView,s[11],2,null,null)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=s}}class Eb extends Ac{constructor(s){super(s),this._view=s}detectChanges(){Ly(this._view)}checkNoChanges(){!function(i){Ma(!0);try{Ly(i)}finally{Ma(!1)}}(this._view)}get context(){return null}}const rA=function(i){return function(i,s,a){if(xl(i)&&!a){const u=Pr(i.index,s);return new Ac(u,u)}return 47&i.type?new Ac(s[16],s):null}(un(),Ie(),16==(16&i))};let pM=(()=>{class i{}return i.__NG_ELEMENT_ID__=rA,i})();const kv=[new np],ih=new rh([new Bi]),Cb=new Rv(kv),ip=function(){return pl(un(),Ie())};let sh=(()=>{class i{}return i.__NG_ELEMENT_ID__=ip,i})();const oh=sh,oA=class extends oh{constructor(s,a,u){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=u}createEmbeddedView(s){const a=this._declarationTContainer.tViews,u=Nf(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(u[19]=f.createEmbeddedView(a)),Mf(a,u,s),new Ac(u)}};function pl(i,s){return 4&i.type?new oA(s,i,Xf(i,s)):null}class ls{}class Pm{}const aA=function(){return uA(un(),Ie())};let Tn=(()=>{class i{}return i.__NG_ELEMENT_ID__=aA,i})();const _M=Tn,lA=class extends _M{constructor(s,a,u){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=u}get element(){return Xf(this._hostTNode,this._hostLView)}get injector(){return new Eo(this._hostTNode,this._hostLView)}get parentInjector(){const s=_n(this._hostTNode,this._hostLView);if(wd(s)){const a=_i(s,this._hostLView),u=vo(s);return new Eo(a[1].data[u+8],a)}return new Eo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=sp(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,u){const h=s.createEmbeddedView(a||{});return this.insert(h,u),h}createComponent(s,a,u,h,f){const _=u||this.parentInjector;if(!f&&null==s.ngModule&&_){const w=_.get(ls,null);w&&(f=w)}const E=s.create(_,h,void 0,f);return this.insert(E.hostView,a),E}insert(s,a){const u=s._lView,h=u[1];if(xr(u[3])){const P=this.indexOf(s);if(-1!==P)this.detach(P);else{const R=u[3],k=new lA(R,R[6],R[3]);k.detach(k.indexOf(s))}}const f=this._adjustIndex(a),_=this._lContainer;!function(i,s,a,u){const h=10+u,f=a.length;u>0&&(a[h-1][4]=s),u<f-10?(s[4]=a[h],Za(a,10+u,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const E=s[19];null!==E&&E.insertView(i),s[2]|=128}(h,u,_,f);const E=xC(f,_),w=u[11],I=Iy(w,_[7]);return null!==I&&function(i,s,a,u,h,f){u[0]=h,u[6]=s,Gg(i,u,a,1,h,f)}(h,_[6],w,u,I,E),s.attachToViewContainerRef(),Za(ah(_),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=sp(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),u=cc(this._lContainer,a);u&&(Oi(ah(this._lContainer),a),jd(u[1],u))}detach(s){const a=this._adjustIndex(s,-1),u=cc(this._lContainer,a);return u&&null!=Oi(ah(this._lContainer),a)?new Ac(u):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function sp(i){return i[8]}function ah(i){return i[8]||(i[8]=[])}function uA(i,s){let a;const u=s[i.index];if(xr(u))a=u;else{let h;if(8&i.type)h=tn(u);else{const f=s[11];h=f.createComment("");const _=mi(i,s);au(f,Iy(f,_),h,function(i,s){return on(i)?i.nextSibling(s):s.nextSibling}(f,_),!1)}s[i.index]=a=hI(u,s,h,i),ky(s,a)}return new lA(a,i,s)}const nr={};class kA extends Qf{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=ar(s);return new FA(a,this.ngModule)}}function ai(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}const FM=new cn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Bg});class FA extends Iv{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=s.selectors.map(mP).join(","),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return ai(this.componentDef.inputs)}get outputs(){return ai(this.componentDef.outputs)}create(s,a,u,h){const f=(h=h||this.ngModule)?function(i,s){return{get:(a,u,h)=>{const f=i.get(a,nr,h);return f!==nr||u===nr?f:s.get(a,u,h)}}}(s,h.injector):s,_=f.get(Av,Es),E=f.get(xv,null),w=_.createRenderer(null,this.componentDef),I=this.componentDef.selectors[0][0]||"div",P=u?function(i,s,a){if(on(i))return i.selectRootElement(s,a===Fe.ShadowDom);let u="string"==typeof s?i.querySelector(s):s;return u.textContent="",u}(w,u,this.componentDef.encapsulation):Bd(_.createRenderer(null,this.componentDef),I,function(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(I)),R=this.componentDef.onPush?576:528,k=function(i,s){return{components:[],scheduler:i||Bg,clean:GP,playerHandler:s||null,flags:0}}(),Z=My(0,null,null,1,0,null,null,null,null,null),Y=Nf(null,Z,k,R,null,null,_,w,E,f);let ce,te;zo(Y);try{const Me=function(i,s,a,u,h,f){const _=a[1];a[20]=i;const w=hc(_,20,2,"#host",null),I=w.mergedAttrs=s.hostAttrs;null!==I&&(Of(w,I,!0),null!==i&&(tf(h,i,I),null!==w.classes&&NC(h,i,w.classes),null!==w.styles&&qT(h,i,w.styles)));const P=u.createRenderer(i,s),R=Nf(a,NP(s),null,s.onPush?64:16,a[20],w,u,P,f||null,null);return _.firstCreatePass&&(Yn(Wl(w,a),_,s.type),cI(_,w),zs(w,a.length,1)),ky(a,R),a[20]=R}(P,this.componentDef,Y,_,w);if(P)if(u)tf(w,P,["ng-version",Pv.full]);else{const{attrs:be,classes:et}=function(i){const s=[],a=[];let u=1,h=2;for(;u<i.length;){let f=i[u];if("string"==typeof f)2===h?""!==f&&s.push(f,i[++u]):8===h&&a.push(f);else{if(!Po(h))break;h=f}u++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);be&&tf(w,P,be),et&&et.length>0&&NC(w,P,et.join(" "))}if(te=po(Z,20),void 0!==a){const be=te.projection=[];for(let et=0;et<this.ngContentSelectors.length;et++){const ct=a[et];be.push(null!=ct?Array.from(ct):null)}}ce=function(i,s,a,u,h){const f=a[1],_=function(i,s,a){const u=un();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Qg(i,u,s,Mr(i,s,1,null),a));const h=vi(s,i,u.directiveStart,u);ur(h,s);const f=mi(u,s);return f&&ur(f,s),h}(f,a,s);if(u.components.push(_),i[8]=_,h&&h.forEach(w=>w(_,s)),s.contentQueries){const w=un();s.contentQueries(1,_,w.directiveStart)}const E=un();return!f.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(ka(E.index),Yg(a[1],E,0,E.directiveStart,E.directiveEnd,s),lI(s,_)),_}(Me,this.componentDef,Y,k,[cN]),Mf(Z,Y,null)}finally{Ls()}return new yp(this.componentType,ce,Xf(te,Y),Y,te)}}class yp extends class{}{constructor(s,a,u,h,f){super(),this.location=u,this._rootLView=h,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new Eb(h),this.componentType=s}get injector(){return new Eo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}const ch=new Map;class dh extends ls{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new kA(this);const u=xi(s),h=s[_t]||null;h&&$0(h),this._bootstrapComponents=Ri(u.bootstrap),this._r3Injector=mI(s,a,[{provide:ls,useValue:this},{provide:Qf,useValue:this.componentFactoryResolver}],J(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=Rn.THROW_IF_NOT_FOUND,u=Ge.Default){return s===Rn||s===ls||s===hu?this:this._r3Injector.get(s,a,u)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class Oo extends Pm{constructor(s){super(),this.moduleType=s,null!==xi(s)&&function(i){const s=new Set;!function a(u){const h=xi(u,!0),f=h.id;null!==f&&(function(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${J(s)} vs ${J(s.name)}`)}(f,ch.get(f),u),ch.set(f,u));const _=Ri(h.imports);for(const E of _)s.has(E)||(s.add(E),a(E))}(i)}(s)}create(s){return new dh(this.moduleType,s)}}function vp(i,s,a){const u=Hn()+i,h=Ie();return h[u]===vt?ia(h,u,a?s.call(a):s()):function(i,s){return i[s]}(h,u)}function Cp(i,s,a,u,h,f){const _=s+a;return Ci(i,_,h)?ia(i,_+1,f?u.call(f,h):u(h)):function(i,s){const a=i[s];return a===vt?void 0:a}(i,_+1)}function Ub(i,s){const a=At();let u;const h=i+20;a.firstCreatePass?(u=function(i,s){if(s)for(let a=s.length-1;a>=0;a--){const u=s[a];if(i===u.name)return u}throw new we("302",`The pipe '${i}' could not be found!`)}(s,a.pipeRegistry),a.data[h]=u,u.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(h,u.onDestroy)):u=a.data[h];const f=u.factory||(u.factory=ys(u.type)),_=Qr(gu);try{const E=Ba(!1),w=f();return Ba(E),function(i,s,a,u){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=u}(a,Ie(),h,w),w}finally{Qr(_)}}function jA(i,s,a){const u=i+20,h=Ie(),f=go(h,u);return function(i,s){ra.isWrapped(s)&&(s=ra.unwrap(s),i[at.lFrame.bindingIndex]=vt);return s}(h,function(i,s){return i[1].data[s].pure}(h,u)?Cp(h,Hn(),s,f.transform,a,f):f.transform(a))}function Jv(i){return s=>{setTimeout(i,void 0,s)}}const gl=class extends c.xQ{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,u){var h,f,_;let E=s,w=a||(()=>null),I=u;if(s&&"object"==typeof s){const R=s;E=null===(h=R.next)||void 0===h?void 0:h.bind(R),w=null===(f=R.error)||void 0===f?void 0:f.bind(R),I=null===(_=R.complete)||void 0===_?void 0:_.bind(R)}this.__isAsync&&(w=Jv(w),E&&(E=Jv(E)),I&&(I=Jv(I)));const P=super.subscribe({next:E,error:w,complete:I});return s instanceof ne.w&&s.add(P),P}};function BM(){return this._results[gr()]()}class Xv{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=gr(),u=Xv.prototype;u[a]||(u[a]=BM)}get changes(){return this._changes||(this._changes=new gl)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const u=this;u.dirty=!1;const h=ni(s);(this._changesDetected=!function(i,s,a){if(i.length!==s.length)return!1;for(let u=0;u<i.length;u++){let h=i[u],f=s[u];if(a&&(h=a(h),f=a(f)),f!==h)return!1}return!0}(u._results,h,a))&&(u._results=h,u.length=h.length,u.last=h[this.length-1],u.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class kc{constructor(s){this.queryList=s,this.matches=null}clone(){return new kc(this.queryList)}setDirty(){this.queryList.setDirty()}}class jb{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const u=null!==s.contentQueries?s.contentQueries[0]:a.length,h=[];for(let f=0;f<u;f++){const _=a.getByIndex(f);h.push(this.queries[_.indexInDeclarationView].clone())}return new jb(h)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==Zb(s,a).matches&&this.queries[a].setDirty()}}class Hb{constructor(s,a,u=null){this.predicate=s,this.flags=a,this.read=u}}class eE{constructor(s=[]){this.queries=s}elementStart(s,a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let u=0;u<this.length;u++){const h=null!==a?a.length:0,f=this.getByIndex(u).embeddedTView(s,h);f&&(f.indexInDeclarationView=u,null!==a?a.push(f):a=[f])}return null!==a?new eE(a):null}template(s,a){for(let u=0;u<this.queries.length;u++)this.queries[u].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class da{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new da(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let u=s.parent;for(;null!==u&&8&u.type&&u.index!==a;)u=u.parent;return a===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const u=this.metadata.predicate;if(Array.isArray(u))for(let h=0;h<u.length;h++){const f=u[h];this.matchTNodeWithReadOption(s,a,HA(a,f)),this.matchTNodeWithReadOption(s,a,Bs(a,s,f,!1,!1))}else u===sh?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Bs(a,s,u,!1,!1))}matchTNodeWithReadOption(s,a,u){if(null!==u){const h=this.metadata.read;if(null!==h)if(h===ua||h===Tn||h===sh&&4&a.type)this.addMatch(a.index,-2);else{const f=Bs(a,s,h,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,u)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function HA(i,s){const a=i.localNames;if(null!==a)for(let u=0;u<a.length;u+=2)if(a[u]===s)return a[u+1];return null}function tE(i,s,a,u){return-1===a?function(i,s){return 11&i.type?Xf(i,s):4&i.type?pl(i,s):null}(s,i):-2===a?function(i,s,a){return a===ua?Xf(s,i):a===sh?pl(s,i):a===Tn?uA(s,i):void 0}(i,s,u):vi(i,i[1],a,s)}function rE(i,s,a,u){const h=s[19].queries[u];if(null===h.matches){const f=i.data,_=a.matches,E=[];for(let w=0;w<_.length;w+=2){const I=_[w];E.push(I<0?null:tE(s,f[I],_[w+1],a.metadata.read))}h.matches=E}return h.matches}function Hm(i,s,a,u){const h=i.queries.getByIndex(a),f=h.matches;if(null!==f){const _=rE(i,s,h,a);for(let E=0;E<f.length;E+=2){const w=f[E];if(w>0)u.push(_[E/2]);else{const I=f[E+1],P=s[-w];for(let R=10;R<P.length;R++){const k=P[R];k[17]===k[3]&&Hm(k[1],k,I,u)}if(null!==P[9]){const R=P[9];for(let k=0;k<R.length;k++){const Z=R[k];Hm(Z[1],Z,I,u)}}}}}return u}function iE(i){const s=Ie(),a=At(),u=zu();Oa(u+1);const h=Zb(a,u);if(i.dirty&&Bu(s)===(2==(2&h.metadata.flags))){if(null===h.matches)i.reset([]);else{const f=h.crossesNgTemplate?Hm(a,s,u,[]):rE(a,s,h,u);i.reset(f,Dm),i.notifyOnChanges()}return!0}return!1}function Js(i,s,a,u){const h=At();if(h.firstCreatePass){const f=un();(function(i,s,a){null===i.queries&&(i.queries=new eE),i.queries.track(new da(s,a))})(h,new Hb(s,a,u),f.index),function(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(h,i),2==(2&a)&&(h.staticContentQueries=!0)}!function(i,s,a){const u=new Xv(4==(4&a));kP(i,s,u,u.destroy),null===s[19]&&(s[19]=new jb),s[19].queries.push(new kc(u))}(h,Ie(),a)}function $b(){return i=Ie(),s=zu(),i[19].queries[s].queryList;var i,s}function Zb(i,s){return i.queries.getByIndex(s)}const tw=new cn("Application Initializer");let Cu=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Jf,this.reject=Jf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,h)=>{this.resolve=u,this.reject=h})}runInitializers(){if(this.initialized)return;const a=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const f=this.appInits[h]();if(w0(f))a.push(f);else if(T0(f)){const _=new Promise((E,w)=>{f.subscribe({complete:E,error:w})});a.push(_)}}Promise.all(a).then(()=>{u()}).catch(h=>{this.reject(h)}),0===a.length&&u(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(pr(tw,8))},i.\u0275prov=fn({token:i,factory:i.\u0275fac}),i})();const nw=new cn("AppId"),nS={provide:nw,useFactory:function(){return`${gE()}${gE()}${gE()}`},deps:[]};function gE(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const rw=new cn("Platform Initializer"),rS=new cn("Platform ID"),iw=new cn("appBootstrapListener");let sw=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=fn({token:i,factory:i.\u0275fac}),i})();const mE=new cn("LocaleId"),iS=new cn("DefaultCurrencyCode");class ha{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}const fa=function(i){return new Oo(i)},lO=fa,Fn=function(i){return Promise.resolve(fa(i))},sS=function(i){const s=fa(i),u=Ri(xi(i).declarations).reduce((h,f)=>{const _=ar(f);return _&&h.push(new FA(_)),h},[]);return new ha(s,u)},uO=sS,Ps=function(i){return Promise.resolve(sS(i))};let Cr=(()=>{class i{constructor(){this.compileModuleSync=lO,this.compileModuleAsync=Fn,this.compileModuleAndAllComponentsSync=uO,this.compileModuleAndAllComponentsAsync=Ps}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=fn({token:i,factory:i.\u0275fac}),i})();const wu=(()=>Promise.resolve(0))();function Vc(i){"undefined"==typeof Zone?wu.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class eo{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new gl(!1),this.onMicrotaskEmpty=new gl(!1),this.onStable=new gl(!1),this.onError=new gl(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!u&&a,h.shouldCoalesceRunChangeDetection=u,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function(){let i=mt.requestAnimationFrame,s=mt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function(i){const s=()=>{!function(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(mt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,to(i),i.isCheckStableRunning=!0,_E(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),to(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,u,h,f,_,E)=>{try{return aS(i),a.invokeTask(h,f,_,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),Np(i)}},onInvoke:(a,u,h,f,_,E,w)=>{try{return aS(i),a.invoke(h,f,_,E,w)}finally{i.shouldCoalesceRunChangeDetection&&s(),Np(i)}},onHasTask:(a,u,h,f)=>{a.hasTask(h,f),u===h&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,to(i),_E(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,u,h,f)=>(a.handleError(h,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(h)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!eo.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(eo.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,u){return this._inner.run(s,a,u)}runTask(s,a,u,h){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+h,s,oS,Jf,Jf);try{return f.runTask(_,a,u)}finally{f.cancelTask(_)}}runGuarded(s,a,u){return this._inner.runGuarded(s,a,u)}runOutsideAngular(s){return this._outer.run(s)}}const oS={};function _E(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function to(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function aS(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Np(i){i._nesting--,_E(i)}class mh{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new gl,this.onMicrotaskEmpty=new gl,this.onStable=new gl,this.onError=new gl}run(s,a,u){return s.apply(a,u)}runGuarded(s,a,u){return s.apply(a,u)}runOutsideAngular(s){return s()}runTask(s,a,u,h){return s.apply(a,u)}}let lS=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{eo.assertNotInAngularZone(),Vc(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Vc(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(a)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,u,h){let f=-1;u&&u>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),a(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:h})}whenStable(a,u,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,u,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,u,h){return[]}}return i.\u0275fac=function(a){return new(a||i)(pr(eo))},i.\u0275prov=fn({token:i,factory:i.\u0275fac}),i})(),Uc=(()=>{class i{constructor(){this._applications=new Map,vE.addToWindow(this)}registerApplication(a,u){this._applications.set(a,u)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,u=!0){return vE.findTestabilityInTree(this,a,u)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=fn({token:i,factory:i.\u0275fac}),i})();class uS{addToWindow(s){}findTestabilityInTree(s,a,u){return null}}function ow(i){vE=i}let vE=new uS,hs=!0,EE=!1;function Jm(){return EE=!0,hs}function Bc(){if(EE)throw new Error("Cannot enable prod mode after platform setup.");hs=!1}let Fo;const bE=new cn("AllowMultipleToken");class hO{constructor(s,a){this.name=s,this.token=a}}function uw(i,s,a=[]){const u=`Platform: ${s}`,h=new cn(u);return(f=[])=>{let _=fS();if(!_||_.injector.get(bE,!1))if(i)i(a.concat(f).concat({provide:h,useValue:!0}));else{const E=a.concat(f).concat({provide:h,useValue:!0},{provide:Rf,useValue:"platform"});!function(i){if(Fo&&!Fo.destroyed&&!Fo.injector.get(bE,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Fo=i.get(cw);const s=i.get(rw,null);s&&s.forEach(a=>a())}(Rn.create({providers:E,name:u}))}return function(i){const s=fS();if(!s)throw new Error("No platform exists!");if(!s.injector.get(i,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return s}(h)}}function fS(){return Fo&&!Fo.destroyed?Fo:null}let cw=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,u){const E=function(i,s){let a;return a="noop"===i?new mh:("zone.js"===i?void 0:i)||new eo({enableLongStackTrace:Jm(),shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),w=[{provide:eo,useValue:E}];return E.run(()=>{const I=Rn.create({providers:w,parent:this.injector,name:a.moduleType.name}),P=a.create(I),R=P.injector.get(ea,null);if(!R)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return E.runOutsideAngular(()=>{const k=E.onError.subscribe({next:Z=>{R.handleError(Z)}});P.onDestroy(()=>{Xm(this._modules,P),k.unsubscribe()})}),function(i,s,a){try{const u=a();return w0(u)?u.catch(h=>{throw s.runOutsideAngular(()=>i.handleError(h)),h}):u}catch(u){throw s.runOutsideAngular(()=>i.handleError(u)),u}}(R,E,()=>{const k=P.injector.get(Cu);return k.runInitializers(),k.donePromise.then(()=>($0(P.injector.get(mE,_v)||_v),this._moduleDoBootstrap(P),P))})})}bootstrapModule(a,u=[]){const h=dw({},u);return function(i,s,a){const u=new Oo(a);return Promise.resolve(u)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,h))}_moduleDoBootstrap(a){const u=a.injector.get(jc);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(h=>u.bootstrap(h));else{if(!a.instance.ngDoBootstrap)throw new Error(`The module ${J(a.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);a.instance.ngDoBootstrap(u)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(pr(Rn))},i.\u0275prov=fn({token:i,factory:i.\u0275fac}),i})();function dw(i,s){return Array.isArray(s)?s.reduce(dw,i):Object.assign(Object.assign({},i),s)}let jc=(()=>{class i{constructor(a,u,h,f,_){this._zone=a,this._injector=u,this._exceptionHandler=h,this._componentFactoryResolver=f,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new U.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),w=new U.y(I=>{let P;this._zone.runOutsideAngular(()=>{P=this._zone.onStable.subscribe(()=>{eo.assertNotInAngularZone(),Vc(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const R=this._zone.onUnstable.subscribe(()=>{eo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{P.unsubscribe(),R.unsubscribe()}});this.isStable=(0,de.T)(E,w.pipe((0,se.B)()))}bootstrap(a,u){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let h;h=a instanceof Iv?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(h.componentType);const f=function(i){return i.isBoundToModule}(h)?void 0:this._injector.get(ls),E=h.create(Rn.NULL,[],u||h.selector,f),w=E.location.nativeElement,I=E.injector.get(lS,null),P=I&&E.injector.get(Uc);return I&&P&&P.registerApplication(w,I),E.onDestroy(()=>{this.detachView(E.hostView),Xm(this.components,E),P&&P.unregisterApplication(w)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const u=a;this._views.push(u),u.attachToAppRef(this)}detachView(a){const u=a;Xm(this._views,u),u.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(iw,[]).concat(this._bootstrapListeners).forEach(h=>h(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(pr(eo),pr(Rn),pr(ea),pr(Qf),pr(Cu))},i.\u0275prov=fn({token:i,factory:i.\u0275fac}),i})();function Xm(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}class kp{}class yh{}const pw={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let gS=(()=>{class i{constructor(a,u){this._compiler=a,this._config=u||pw}load(a){return this.loadAndCompile(a)}loadAndCompile(a){let[u,h]=a.split("#");return void 0===h&&(h="default"),V(8255)(u).then(f=>f[h]).then(f=>mS(f,u,h)).then(f=>this._compiler.compileModuleAsync(f))}loadFactory(a){let[u,h]=a.split("#"),f="NgFactory";return void 0===h&&(h="default",f=""),V(8255)(this._config.factoryPathPrefix+u+this._config.factoryPathSuffix).then(_=>_[h+f]).then(_=>mS(_,u,h))}}return i.\u0275fac=function(a){return new(a||i)(pr(Cr),pr(yh,8))},i.\u0275prov=fn({token:i,factory:i.\u0275fac}),i})();function mS(i,s,a){if(!i)throw new Error(`Cannot find '${a}' in '${s}'`);return i}const yw=function(i){return null},Up=uw(null,"core",[{provide:rS,useValue:"unknown"},{provide:cw,deps:[Rn]},{provide:Uc,deps:[]},{provide:sw,deps:[]}]),Ew=[{provide:jc,useClass:jc,deps:[eo,Rn,ea,Qf,Cu]},{provide:FM,deps:[eo],useFactory:function(i){let s=[];return i.onStable.subscribe(()=>{for(;s.length;)s.pop()()}),function(a){s.push(a)}}},{provide:Cu,useClass:Cu,deps:[[new Xo,tw]]},{provide:Cr,useClass:Cr,deps:[]},nS,{provide:rh,useFactory:function(){return ih},deps:[]},{provide:Rv,useFactory:function(){return Cb},deps:[]},{provide:mE,useFactory:function(i){return $0(i=i||"undefined"!=typeof $localize&&$localize.locale||_v),i},deps:[[new ts(mE),new Xo,new Ts]]},{provide:iS,useValue:"USD"}];let Cw=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(pr(jc))},i.\u0275mod=jo({type:i}),i.\u0275inj=Sn({providers:Ew}),i})()},8939:(je,ye,V)=>{"use strict";V.d(ye,{hO:()=>le,xv:()=>ee,Dh:()=>J,GT:()=>Q,cc:()=>he,on:()=>B,pX:()=>se});var c=V(7716),ne=V(7841),U=V(2968);je=V.hmd(je);const de=["ngOnDestroy"],se=(re,fe,Ce,Pe={})=>new Proxy(re,{get:(Ke,Pt)=>Ce.runOutsideAngular(()=>{var Ft;if(re[Pt])return(null===(Ft=null==Pe?void 0:Pe.spy)||void 0===Ft?void 0:Ft.get)&&Pe.spy.get(Pt,re[Pt]),re[Pt];if(de.indexOf(Pt)>-1)return()=>{};const Tt=fe.toPromise().then(An=>{const It=An&&An[Pt];return"function"==typeof It?It.bind(An):It&&It.then?It.then(pt=>Ce.run(()=>pt)):Ce.run(()=>It)});return new Proxy(()=>{},{get:(An,It)=>Tt[It],apply:(An,It,pt)=>Tt.then(Xt=>{var gt;const Ut=Xt&&Xt(...pt);return(null===(gt=null==Pe?void 0:Pe.spy)||void 0===gt?void 0:gt.apply)&&Pe.spy.apply(Pt,pt,Ut),Ut})})})}),Q=(re,fe)=>{fe.forEach(Ce=>{Object.getOwnPropertyNames(Ce.prototype||Ce).forEach(Pe=>{Object.defineProperty(re.prototype,Pe,Object.getOwnPropertyDescriptor(Ce.prototype||Ce,Pe))})})};class me{constructor(fe){return fe}}const J=new c.OlP("angularfire2.app.options"),ee=new c.OlP("angularfire2.app.name");function B(re,fe,Ce){const Ke="object"==typeof Ce&&Ce||{};Ke.name=Ke.name||"string"==typeof Ce&&Ce||"[DEFAULT]";const Ft=ne.Z.apps.filter(Tt=>Tt&&Tt.name===Ke.name)[0]||fe.runOutsideAngular(()=>ne.Z.initializeApp(re,Ke));try{JSON.stringify(re)!==JSON.stringify(Ft.options)&&H("error",`${Ft.name} Firebase App already initialized with different options${je.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Tt){}return new me(Ft)}const H=(re,...fe)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[re](...fe)},G={provide:me,useFactory:B,deps:[J,c.R0b,[new c.FiY,ee]]};let le=(()=>{class re{constructor(Ce){ne.Z.registerVersion("angularfire",U.q4.full,"core"),ne.Z.registerVersion("angularfire",U.q4.full,"app-compat"),ne.Z.registerVersion("angular",c.q4F.full,Ce.toString())}static initializeApp(Ce,Pe){return{ngModule:re,providers:[{provide:J,useValue:Ce},{provide:ee,useValue:Pe}]}}}return re.\u0275fac=function(Ce){return new(Ce||re)(c.LFG(c.Lbi))},re.\u0275mod=c.oAB({type:re}),re.\u0275inj=c.cJS({providers:[G]}),re})();function he(re,fe,Ce,Pe,Ke){const[,Pt,Ft]=globalThis.\u0275AngularfireInstanceCache.find(Tt=>Tt[0]===re)||[];if(Pt)return function(re,fe){try{return re.toString()===fe.toString()}catch(Ce){return re===fe}}(Ke,Ft)||(pe("error",`${fe} was already initialized on the ${Ce} Firebase App with different settings.${ve?" You may need to reload as Firebase is not HMR aware.":""}`),pe("warn",{is:Ke,was:Ft})),Pt;{const Tt=Pe();return globalThis.\u0275AngularfireInstanceCache.push([re,Tt,Ke]),Tt}}const ve=!!je.hot,pe=(re,...fe)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[re](...fe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2968:(je,ye,V)=>{"use strict";V.d(ye,{q4:()=>vg,iC:()=>Jo,HU:()=>df,vb:()=>Za,JM:()=>ws});var c=V(7716),ne=V(2329),U=V(8239),de=V(8026),se=V(3854),Q=V(3910),me=V(5422),J=V(6676);const ee="@firebase/installations",B="0.5.4",G=`w:${B}`,le="FIS_v2",fe=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ce(T){return T instanceof se.ZR&&T.code.includes("request-failed")}function Pe({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function Ke(T){return{token:T.token,requestStatus:2,expiresIn:Xt(T.expiresIn),creationTime:Date.now()}}function Pt(T,x){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,U.Z)(function*(T,x){const j=(yield x.json()).error;return fe.create("request-failed",{requestName:T,serverCode:j.code,serverMessage:j.message,serverStatus:j.status})})).apply(this,arguments)}function Tt({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function An(T,{refreshToken:x}){const M=Tt(T);return M.append("Authorization",function(T){return`${le} ${T}`}(x)),M}function It(T){return pt.apply(this,arguments)}function pt(){return(pt=(0,U.Z)(function*(T){const x=yield T();return x.status>=500&&x.status<600?T():x})).apply(this,arguments)}function Xt(T){return Number(T.replace("s","000"))}function Ut(T,x){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,U.Z)(function*(T,{fid:x}){const M=Pe(T),ue={method:"POST",headers:Tt(T),body:JSON.stringify({fid:x,authVersion:le,appId:T.appId,sdkVersion:G})},De=yield It(()=>fetch(M,ue));if(De.ok){const Be=yield De.json();return{fid:Be.fid||x,registrationStatus:2,refreshToken:Be.refreshToken,authToken:Ke(Be.authToken)}}throw yield Pt("Create Installation",De)})).apply(this,arguments)}function Mu(T){return new Promise(x=>{setTimeout(x,T)})}const Os=/^[cdef][\w-]{21}$/;function Gt(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const M=function(T){return function(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return Os.test(M)?M:""}catch(T){return""}}function Rs(T){return`${T.appName}!${T.appId}`}const lo=new Map;function ms(T,x){const M=Rs(T);Sn(M,x),function(T,x){const M=(!Bt&&"BroadcastChannel"in self&&(Bt=new BroadcastChannel("[Firebase] FID Change"),Bt.onmessage=T=>{Sn(T.data.key,T.data.fid)}),Bt);M&&M.postMessage({key:T,fid:x}),0===lo.size&&Bt&&(Bt.close(),Bt=null)}(M,x)}function Sn(T,x){const M=lo.get(T);if(M)for(const j of M)j(x)}let Bt=null;const Ae="firebase-installations-store";let dr=null;function Wn(){return dr||(dr=(0,J.openDb)("firebase-installations-database",1,T=>{switch(T.oldVersion){case 0:T.createObjectStore(Ae)}})),dr}function Ge(T,x){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,U.Z)(function*(T,x){const M=Rs(T),X=(yield Wn()).transaction(Ae,"readwrite"),ue=X.objectStore(Ae),De=yield ue.get(M);return yield ue.put(x,M),yield X.complete,(!De||De.fid!==x.fid)&&ms(T,x.fid),x})).apply(this,arguments)}function Gi(T){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,U.Z)(function*(T){const x=Rs(T),j=(yield Wn()).transaction(Ae,"readwrite");yield j.objectStore(Ae).delete(x),yield j.complete})).apply(this,arguments)}function tt(T,x){return ot.apply(this,arguments)}function ot(){return(ot=(0,U.Z)(function*(T,x){const M=Rs(T),X=(yield Wn()).transaction(Ae,"readwrite"),ue=X.objectStore(Ae),De=yield ue.get(M),Be=x(De);return void 0===Be?yield ue.delete(M):yield ue.put(Be,M),yield X.complete,Be&&(!De||De.fid!==Be.fid)&&ms(T,Be.fid),Be})).apply(this,arguments)}function Nt(T){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,U.Z)(function*(T){let x;const M=yield tt(T,j=>{const X=Jr(j),ue=Yt(T,X);return x=ue.registrationPromise,ue.installationEntry});return""===M.fid?{installationEntry:yield x}:{installationEntry:M,registrationPromise:x}})).apply(this,arguments)}function Jr(T){return mt(T||{fid:Gt(),registrationStatus:0})}function Yt(T,x){if(0===x.registrationStatus){if(!navigator.onLine)return{installationEntry:x,registrationPromise:Promise.reject(fe.create("app-offline"))};const M={fid:x.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:M,registrationPromise:function(T,x){return Xe.apply(this,arguments)}(T,M)}}return 1===x.registrationStatus?{installationEntry:x,registrationPromise:id(T)}:{installationEntry:x}}function Xe(){return(Xe=(0,U.Z)(function*(T,x){try{return Ge(T,yield Ut(T,x))}catch(M){throw Ce(M)&&409===M.customData.serverCode?yield Gi(T):yield Ge(T,{fid:x.fid,registrationStatus:0}),M}})).apply(this,arguments)}function id(T){return uo.apply(this,arguments)}function uo(){return(uo=(0,U.Z)(function*(T){let x=yield en(T);for(;1===x.registrationStatus;)yield Mu(100),x=yield en(T);if(0===x.registrationStatus){const{installationEntry:M,registrationPromise:j}=yield Nt(T);return j||M}return x})).apply(this,arguments)}function en(T){return tt(T,x=>{if(!x)throw fe.create("installation-not-found");return mt(x)})}function mt(T){return function(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function sd(T,x){return W.apply(this,arguments)}function W(){return(W=(0,U.Z)(function*({appConfig:T,platformLoggerProvider:x},M){const j=q(T,M),X=An(T,M),ue=x.getImmediate({optional:!0});ue&&X.append("x-firebase-client",ue.getPlatformInfoString());const Be={method:"POST",headers:X,body:JSON.stringify({installation:{sdkVersion:G}})},$e=yield It(()=>fetch(j,Be));if($e.ok)return Ke(yield $e.json());throw yield Pt("Generate Auth Token",$e)})).apply(this,arguments)}function q(T,{fid:x}){return`${Pe(T)}/${x}/authTokens:generate`}function K(T){return Te.apply(this,arguments)}function Te(){return(Te=(0,U.Z)(function*(T,x=!1){let M;const j=yield tt(T.appConfig,ue=>{if(!Un(ue))throw fe.create("not-registered");const De=ue.authToken;if(!x&&kr(De))return ue;if(1===De.requestStatus)return M=oe(T,x),ue;{if(!navigator.onLine)throw fe.create("app-offline");const Be=Dr(ue);return M=jt(T,Be),Be}});return M?yield M:j.authToken})).apply(this,arguments)}function oe(T,x){return He.apply(this,arguments)}function He(){return(He=(0,U.Z)(function*(T,x){let M=yield _t(T.appConfig);for(;1===M.authToken.requestStatus;)yield Mu(100),M=yield _t(T.appConfig);const j=M.authToken;return 0===j.requestStatus?K(T,x):j})).apply(this,arguments)}function _t(T){return tt(T,x=>{if(!Un(x))throw fe.create("not-registered");return function(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(x.authToken)?Object.assign(Object.assign({},x),{authToken:{requestStatus:0}}):x})}function jt(T,x){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,U.Z)(function*(T,x){try{const M=yield sd(T,x),j=Object.assign(Object.assign({},x),{authToken:M});return yield Ge(T.appConfig,j),M}catch(M){if(!Ce(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const j=Object.assign(Object.assign({},x),{authToken:{requestStatus:0}});yield Ge(T.appConfig,j)}else yield Gi(T.appConfig);throw M}})).apply(this,arguments)}function Un(T){return void 0!==T&&2===T.registrationStatus}function kr(T){return 2===T.requestStatus&&!function(T){const x=Date.now();return x<T.creationTime||T.creationTime+T.expiresIn<x+36e5}(T)}function Dr(T){const x={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:x})}function jo(){return(jo=(0,U.Z)(function*(T){const x=T,{installationEntry:M,registrationPromise:j}=yield Nt(x.appConfig);return j?j.catch(console.error):K(x).catch(console.error),M.fid})).apply(this,arguments)}function Ho(){return(Ho=(0,U.Z)(function*(T,x=!1){const M=T;return yield od(M.appConfig),(yield K(M,x)).token})).apply(this,arguments)}function od(T){return Si.apply(this,arguments)}function Si(){return(Si=(0,U.Z)(function*(T){const{registrationPromise:x}=yield Nt(T);x&&(yield x)})).apply(this,arguments)}function rn(T){return fe.create("missing-app-config-values",{valueName:T})}const ei="installations";(0,de._registerComponent)(new Q.wA(ei,T=>{const x=T.getProvider("app").getImmediate();return{app:x,appConfig:function(T){if(!T||!T.options)throw rn("App Configuration");if(!T.name)throw rn("App Name");const x=["projectId","apiKey","appId"];for(const M of x)if(!T.options[M])throw rn(M);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(x),platformLoggerProvider:(0,de._getProvider)(x,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,de._registerComponent)(new Q.wA("installations-internal",T=>{const x=T.getProvider("app").getImmediate(),M=(0,de._getProvider)(x,ei).getImmediate();return{getId:()=>function(T){return jo.apply(this,arguments)}(M),getToken:X=>function(T){return Ho.apply(this,arguments)}(M,X)}},"PRIVATE")),(0,de.registerVersion)(ee,B),(0,de.registerVersion)(ee,B,"esm2017");const pi="@firebase/remote-config",hr=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ku{constructor(x,M,j,X){this.client=x,this.storage=M,this.storageCache=j,this.logger=X}isCachedDataFresh(x,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const j=Date.now()-M,X=j<=x;return this.logger.debug(`Config fetch cache check. Cache age millis: ${j}. Cache max age millis (minimumFetchIntervalMillis setting): ${x}. Is cache hit: ${X}.`),X}fetch(x){var M=this;return(0,U.Z)(function*(){const[j,X]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(X&&M.isCachedDataFresh(x.cacheMaxAgeMillis,j))return X;x.eTag=X&&X.eTag;const ue=yield M.client.fetch(x),De=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ue.status&&De.push(M.storage.setLastSuccessfulFetchResponse(ue)),yield Promise.all(De),ue})()}}function Wi(T=navigator){return T.languages&&T.languages[0]||T.language}class Ki{constructor(x,M,j,X,ue,De){this.firebaseInstallations=x,this.sdkVersion=M,this.namespace=j,this.projectId=X,this.apiKey=ue,this.appId=De}fetch(x){var M=this;return(0,U.Z)(function*(){const[j,X]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),De=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Be={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":x.eTag||"*"},$e={sdk_version:M.sdkVersion,app_instance_id:j,app_instance_id_token:X,app_id:M.appId,language_code:Wi()},Rt={method:"POST",headers:Be,body:JSON.stringify($e)},Qt=fetch(De,Rt),bn=new Promise((Nr,pn)=>{x.signal.addEventListener(()=>{const Hs=new Error("The operation was aborted.");Hs.name="AbortError",pn(Hs)})});let Ei;try{yield Promise.race([Qt,bn]),Ei=yield Qt}catch(Nr){let pn="fetch-client-network";throw"AbortError"===Nr.name&&(pn="fetch-timeout"),hr.create(pn,{originalErrorMessage:Nr.message})}let Xn=Ei.status;const es=Ei.headers.get("ETag")||void 0;let To,ec;if(200===Ei.status){let Nr;try{Nr=yield Ei.json()}catch(pn){throw hr.create("fetch-client-parse",{originalErrorMessage:pn.message})}To=Nr.entries,ec=Nr.state}if("INSTANCE_STATE_UNSPECIFIED"===ec?Xn=500:"NO_CHANGE"===ec?Xn=304:("NO_TEMPLATE"===ec||"EMPTY_CONFIG"===ec)&&(To={}),304!==Xn&&200!==Xn)throw hr.create("fetch-status",{httpStatus:Xn});return{status:Xn,eTag:es,config:To}})()}}class ld{constructor(x,M){this.client=x,this.storage=M}fetch(x){var M=this;return(0,U.Z)(function*(){const j=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(x,j)})()}attemptFetch(x,{throttleEndTimeMillis:M,backoffCount:j}){var X=this;return(0,U.Z)(function*(){yield function(T,x){return new Promise((M,j)=>{const X=Math.max(x-Date.now(),0),ue=setTimeout(M,X);T.addEventListener(()=>{clearTimeout(ue),j(hr.create("fetch-throttle",{throttleEndTimeMillis:x}))})})}(x.signal,M);try{const ue=yield X.client.fetch(x);return yield X.storage.deleteThrottleMetadata(),ue}catch(ue){if(!function(T){if(!(T instanceof se.ZR&&T.customData))return!1;const x=Number(T.customData.httpStatus);return 429===x||500===x||503===x||504===x}(ue))throw ue;const De={throttleEndTimeMillis:Date.now()+(0,se.$s)(j),backoffCount:j+1};return yield X.storage.setThrottleMetadata(De),X.attemptFetch(x,De)}})()}}class j_{constructor(x,M,j,X,ue){this.app=x,this._client=M,this._storageCache=j,this._storage=X,this._logger=ue,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Nl(T,x){const M=T.target.error||void 0;return hr.create(x,{originalErrorMessage:M&&M.message})}const Aa="app_namespace_store";class H_{constructor(x,M,j,X=function(){return new Promise((T,x)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=j=>{x(Nl(j,"storage-open"))},M.onsuccess=j=>{T(j.target.result)},M.onupgradeneeded=j=>{const X=j.target.result;switch(j.oldVersion){case 0:X.createObjectStore(Aa,{keyPath:"compositeKey"})}}}catch(M){x(hr.create("storage-open",{originalErrorMessage:M}))}})}()){this.appId=x,this.appName=M,this.namespace=j,this.openDbPromise=X}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(x){return this.set("last_fetch_status",x)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(x){return this.set("last_successful_fetch_timestamp_millis",x)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(x){return this.set("last_successful_fetch_response",x)}getActiveConfig(){return this.get("active_config")}setActiveConfig(x){return this.set("active_config",x)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(x){return this.set("active_config_etag",x)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(x){return this.set("throttle_metadata",x)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(x){var M=this;return(0,U.Z)(function*(){const j=yield M.openDbPromise;return new Promise((X,ue)=>{const Be=j.transaction([Aa],"readonly").objectStore(Aa),$e=M.createCompositeKey(x);try{const Rt=Be.get($e);Rt.onerror=Qt=>{ue(Nl(Qt,"storage-get"))},Rt.onsuccess=Qt=>{const bn=Qt.target.result;X(bn?bn.value:void 0)}}catch(Rt){ue(hr.create("storage-get",{originalErrorMessage:Rt&&Rt.message}))}})})()}set(x,M){var j=this;return(0,U.Z)(function*(){const X=yield j.openDbPromise;return new Promise((ue,De)=>{const $e=X.transaction([Aa],"readwrite").objectStore(Aa),Rt=j.createCompositeKey(x);try{const Qt=$e.put({compositeKey:Rt,value:M});Qt.onerror=bn=>{De(Nl(bn,"storage-set"))},Qt.onsuccess=()=>{ue()}}catch(Qt){De(hr.create("storage-set",{originalErrorMessage:Qt&&Qt.message}))}})})()}delete(x){var M=this;return(0,U.Z)(function*(){const j=yield M.openDbPromise;return new Promise((X,ue)=>{const Be=j.transaction([Aa],"readwrite").objectStore(Aa),$e=M.createCompositeKey(x);try{const Rt=Be.delete($e);Rt.onerror=Qt=>{ue(Nl(Qt,"storage-delete"))},Rt.onsuccess=()=>{X()}}catch(Rt){ue(hr.create("storage-delete",{originalErrorMessage:Rt&&Rt.message}))}})})()}createCompositeKey(x){return[this.appId,this.appName,this.namespace,x].join()}}class Hh{constructor(x){this.storage=x}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var x=this;return(0,U.Z)(function*(){const M=x.storage.getLastFetchStatus(),j=x.storage.getLastSuccessfulFetchTimestampMillis(),X=x.storage.getActiveConfig(),ue=yield M;ue&&(x.lastFetchStatus=ue);const De=yield j;De&&(x.lastSuccessfulFetchTimestampMillis=De);const Be=yield X;Be&&(x.activeConfig=Be)})()}setLastFetchStatus(x){return this.lastFetchStatus=x,this.storage.setLastFetchStatus(x)}setLastSuccessfulFetchTimestampMillis(x){return this.lastSuccessfulFetchTimestampMillis=x,this.storage.setLastSuccessfulFetchTimestampMillis(x)}setActiveConfig(x){return this.activeConfig=x,this.storage.setActiveConfig(x)}}function cd(){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,U.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch(T){return!1}})).apply(this,arguments)}(0,de._registerComponent)(new Q.wA("remote-config",function(x,{instanceIdentifier:M}){const j=x.getProvider("app").getImmediate(),X=x.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw hr.create("registration-window");if(!(0,se.hl)())throw hr.create("indexed-db-unavailable");const{projectId:ue,apiKey:De,appId:Be}=j.options;if(!ue)throw hr.create("registration-project-id");if(!De)throw hr.create("registration-api-key");if(!Be)throw hr.create("registration-app-id");const $e=new H_(Be,j.name,M=M||"firebase"),Rt=new Hh($e),Qt=new me.Yd(pi);Qt.logLevel=me.in.ERROR;const bn=new Ki(X,de.SDK_VERSION,M,ue,De,Be),Ei=new ld(bn,$e),Xn=new ku(Ei,$e,Rt,Qt),es=new j_(j,Xn,Rt,$e,Qt);return function(T){const x=(0,se.m9)(T);x._initializePromise||(x._initializePromise=x._storageCache.loadFromStorage().then(()=>{x._isInitializationComplete=!0}))}(es),es},"PUBLIC").setMultipleInstances(!0)),(0,de.registerVersion)(pi,"0.3.3"),(0,de.registerVersion)(pi,"0.3.3","esm2017");const Ml="/firebase-messaging-sw.js",Ol="/firebase-cloud-messaging-push-scope",Rl="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ys="google.c.a.c_id",kl="google.c.a.c_l",Vr="google.c.a.ts",Fl="google.c.a.e";var Ur=(()=>{return(T=Ur||(Ur={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",Ur;var T})();function vs(T){const x=new Uint8Array(T);return btoa(String.fromCharCode(...x)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function dd(T){const M=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),j=atob(M),X=new Uint8Array(j.length);for(let ue=0;ue<j.length;++ue)X[ue]=j.charCodeAt(ue);return X}const Lu="fcm_token_details_db",ug="fcm_token_object_Store";function gi(T){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,U.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ue=>ue.name).includes(Lu))return null;let x=null;return(yield(0,J.openDb)(Lu,5,function(){var j=(0,U.Z)(function*(X){var ue;if(X.oldVersion<2||!X.objectStoreNames.contains(ug))return;const De=X.transaction.objectStore(ug),Be=yield De.index("fcmSenderId").get(T);if(yield De.clear(),Be)if(2===X.oldVersion){const $e=Be;if(!$e.auth||!$e.p256dh||!$e.endpoint)return;x={token:$e.fcmToken,createTime:null!==(ue=$e.createTime)&&void 0!==ue?ue:Date.now(),subscriptionOptions:{auth:$e.auth,p256dh:$e.p256dh,endpoint:$e.endpoint,swScope:$e.swScope,vapidKey:"string"==typeof $e.vapidKey?$e.vapidKey:vs($e.vapidKey)}}}else if(3===X.oldVersion){const $e=Be;x={token:$e.fcmToken,createTime:$e.createTime,subscriptionOptions:{auth:vs($e.auth),p256dh:vs($e.p256dh),endpoint:$e.endpoint,swScope:$e.swScope,vapidKey:vs($e.vapidKey)}}}else if(4===X.oldVersion){const $e=Be;x={token:$e.fcmToken,createTime:$e.createTime,subscriptionOptions:{auth:vs($e.auth),p256dh:vs($e.p256dh),endpoint:$e.endpoint,swScope:$e.swScope,vapidKey:vs($e.vapidKey)}}}});return function(X){return j.apply(this,arguments)}}())).close(),yield(0,J.deleteDb)(Lu),yield(0,J.deleteDb)("fcm_vapid_details_db"),yield(0,J.deleteDb)("undefined"),Zh(x)?x:null})).apply(this,arguments)}function Zh(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:x}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof x.auth&&x.auth.length>0&&"string"==typeof x.p256dh&&x.p256dh.length>0&&"string"==typeof x.endpoint&&x.endpoint.length>0&&"string"==typeof x.swScope&&x.swScope.length>0&&"string"==typeof x.vapidKey&&x.vapidKey.length>0}const fo="firebase-messaging-store";let hd=null;function on(){return hd||(hd=(0,J.openDb)("firebase-messaging-database",1,T=>{switch(T.oldVersion){case 0:T.createObjectStore(fo)}})),hd}function Gh(T){return Es.apply(this,arguments)}function Es(){return(Es=(0,U.Z)(function*(T){const x=Go(T),j=yield(yield on()).transaction(fo).objectStore(fo).get(x);if(j)return j;{const X=yield gi(T.appConfig.senderId);if(X)return yield Yi(T,X),X}})).apply(this,arguments)}function Yi(T,x){return tn.apply(this,arguments)}function tn(){return(tn=(0,U.Z)(function*(T,x){const M=Go(T),X=(yield on()).transaction(fo,"readwrite");return yield X.objectStore(fo).put(x,M),yield X.complete,x})).apply(this,arguments)}function xa(T){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,U.Z)(function*(T){const x=Go(T),j=(yield on()).transaction(fo,"readwrite");yield j.objectStore(fo).delete(x),yield j.complete})).apply(this,arguments)}function Go({appConfig:T}){return T.appId}const Kn=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function po(T,x){return go.apply(this,arguments)}function go(){return(go=(0,U.Z)(function*(T,x){const M=yield Vl(T),j=at(x),X={method:"POST",headers:M,body:JSON.stringify(j)};let ue;try{ue=yield(yield fetch(jn(T.appConfig),X)).json()}catch(De){throw Kn.create("token-subscribe-failed",{errorInfo:De})}if(ue.error)throw Kn.create("token-subscribe-failed",{errorInfo:ue.error.message});if(!ue.token)throw Kn.create("token-subscribe-no-token");return ue.token})).apply(this,arguments)}function Pr(T,x){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,U.Z)(function*(T,x){const M=yield Vl(T),j=at(x.subscriptionOptions),X={method:"PATCH",headers:M,body:JSON.stringify(j)};let ue;try{ue=yield(yield fetch(`${jn(T.appConfig)}/${x.token}`,X)).json()}catch(De){throw Kn.create("token-update-failed",{errorInfo:De})}if(ue.error)throw Kn.create("token-update-failed",{errorInfo:ue.error.message});if(!ue.token)throw Kn.create("token-update-no-token");return ue.token})).apply(this,arguments)}function ju(T,x){return mo.apply(this,arguments)}function mo(){return(mo=(0,U.Z)(function*(T,x){const j={method:"DELETE",headers:yield Vl(T)};try{const ue=yield(yield fetch(`${jn(T.appConfig)}/${x}`,j)).json();if(ue.error)throw Kn.create("token-unsubscribe-failed",{errorInfo:ue.error.message})}catch(X){throw Kn.create("token-unsubscribe-failed",{errorInfo:X})}})).apply(this,arguments)}function jn({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function Vl(T){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,U.Z)(function*({appConfig:T,installations:x}){const M=yield x.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function at({p256dh:T,auth:x,endpoint:M,vapidKey:j}){const X={web:{endpoint:M,auth:x,p256dh:T}};return j!==Rl&&(X.web.applicationPubKey=j),X}const Hu=6048e5;function zh(T){return $u.apply(this,arguments)}function $u(){return($u=(0,U.Z)(function*(T){const x=yield qu(T.swRegistration,T.vapidKey),M={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:x.endpoint,auth:vs(x.getKey("auth")),p256dh:vs(x.getKey("p256dh"))},j=yield Gh(T.firebaseDependencies);if(j){if(Zu(j.subscriptionOptions,M))return Date.now()>=j.createTime+Hu?fd(T,{token:j.token,createTime:Date.now(),subscriptionOptions:M}):j.token;try{yield ju(T.firebaseDependencies,j.token)}catch(X){console.warn(X)}return Ie(T.firebaseDependencies,M)}return Ie(T.firebaseDependencies,M)})).apply(this,arguments)}function Wh(T){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,U.Z)(function*(T){const x=yield Gh(T.firebaseDependencies);x&&(yield ju(T.firebaseDependencies,x.token),yield xa(T.firebaseDependencies));const M=yield T.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function fd(T,x){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,U.Z)(function*(T,x){try{const M=yield Pr(T.firebaseDependencies,x),j=Object.assign(Object.assign({},x),{token:M,createTime:Date.now()});return yield Yi(T.firebaseDependencies,j),M}catch(M){throw yield Wh(T),M}})).apply(this,arguments)}function Ie(T,x){return At.apply(this,arguments)}function At(){return(At=(0,U.Z)(function*(T,x){const j={token:yield po(T,x),createTime:Date.now(),subscriptionOptions:x};return yield Yi(T,j),j.token})).apply(this,arguments)}function qu(T,x){return un.apply(this,arguments)}function un(){return(un=(0,U.Z)(function*(T,x){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:dd(x)})})).apply(this,arguments)}function Zu(T,x){return x.vapidKey===T.vapidKey&&x.endpoint===T.endpoint&&x.auth===T.auth&&x.p256dh===T.p256dh}function Cs(T){const x={from:T.from,collapseKey:T.collapse_key,messageId:T.fcm_message_id};return function(T,x){if(!x.notification)return;T.notification={};const M=x.notification.title;M&&(T.notification.title=M);const j=x.notification.body;j&&(T.notification.body=j);const X=x.notification.image;X&&(T.notification.image=X)}(x,T),function(T,x){!x.data||(T.data=x.data)}(x,T),function(T,x){if(!x.fcmOptions)return;T.fcmOptions={};const M=x.fcmOptions.link;M&&(T.fcmOptions.link=M);const j=x.fcmOptions.analytics_label;j&&(T.fcmOptions.analyticsLabel=j)}(x,T),x}function Kh(T){return"object"==typeof T&&!!T&&ys in T}function pd(T,x){const M=[];for(let j=0;j<T.length;j++)M.push(T.charAt(j)),j<x.length&&M.push(x.charAt(j));return M.join("")}function Ma(T){return Kn.create("missing-app-config-values",{valueName:T})}pd("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),pd("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Hn{constructor(x,M,j){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const X=function(T){if(!T||!T.options)throw Ma("App Configuration Object");if(!T.name)throw Ma("App Name");const x=["projectId","apiKey","appId","messagingSenderId"],{options:M}=T;for(const j of x)if(!M[j])throw Ma(j);return{appName:T.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(x);this.firebaseDependencies={app:x,appConfig:X,installations:M,analyticsProvider:j}}_delete(){return Promise.resolve()}}function Ni(T){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,U.Z)(function*(T){try{T.swRegistration=yield navigator.serviceWorker.register(Ml,{scope:Ol}),T.swRegistration.update().catch(()=>{})}catch(x){throw Kn.create("failed-service-worker-registration",{browserErrorMessage:x.message})}})).apply(this,arguments)}function Mi(T,x){return jr.apply(this,arguments)}function jr(){return(jr=(0,U.Z)(function*(T,x){if(!x&&!T.swRegistration&&(yield Ni(T)),x||!T.swRegistration){if(!(x instanceof ServiceWorkerRegistration))throw Kn.create("invalid-sw-registration");T.swRegistration=x}})).apply(this,arguments)}function gd(T,x){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,U.Z)(function*(T,x){x?T.vapidKey=x:T.vapidKey||(T.vapidKey=Rl)})).apply(this,arguments)}function md(){return(md=(0,U.Z)(function*(T,x){if(!navigator)throw Kn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Kn.create("permission-blocked");return yield gd(T,null==x?void 0:x.vapidKey),yield Mi(T,null==x?void 0:x.serviceWorkerRegistration),zh(T)})).apply(this,arguments)}function ql(T,x,M){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,U.Z)(function*(T,x,M){const j=zu(x);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(j,{message_id:M[ys],message_name:M[kl],message_time:M[Vr],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function zu(T){switch(T){case Ur.NOTIFICATION_CLICKED:return"notification_open";case Ur.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ra(){return(Ra=(0,U.Z)(function*(T,x){const M=x.data;if(!M.isFirebaseMessaging)return;T.onMessageHandler&&M.messageType===Ur.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(Cs(M)):T.onMessageHandler.next(Cs(M)));const j=M.data;Kh(j)&&"1"===j[Fl]&&(yield ql(T,M.messageType,j))})).apply(this,arguments)}const _d="@firebase/messaging";function Jh(){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,U.Z)(function*(){return"undefined"!=typeof window&&(0,se.hl)()&&(yield(0,se.eu)())&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,de._registerComponent)(new Q.wA("messaging",T=>{const x=new Hn(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function(T,x){return Ra.apply(this,arguments)}(x,M)),x},"PUBLIC")),(0,de._registerComponent)(new Q.wA("messaging-internal",T=>{const x=T.getProvider("messaging").getImmediate();return{getToken:j=>function(T,x){return md.apply(this,arguments)}(x,j)}},"PRIVATE")),(0,de.registerVersion)(_d,"0.9.4"),(0,de.registerVersion)(_d,"0.9.4","esm2017");const Fa="analytics",hg="firebase_id",_o="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Gl="https://www.googletagmanager.com/gtag/js",Mn=new me.Yd("@firebase/analytics");function Ed(T){return Promise.all(T.map(x=>x.catch(M=>M)))}function fg(T,x){const M=document.createElement("script");M.src=`${Gl}?l=${T}&id=${x}`,M.async=!0,document.head.appendChild(M)}function Va(T,x,M,j,X,ue){return ef.apply(this,arguments)}function ef(){return(ef=(0,U.Z)(function*(T,x,M,j,X,ue){const De=j[X];try{if(De)yield x[De];else{const $e=(yield Ed(M)).find(Rt=>Rt.measurementId===X);$e&&(yield x[$e.appId])}}catch(Be){Mn.error(Be)}T("config",X,ue)})).apply(this,arguments)}function Ua(T,x,M,j,X){return yo.apply(this,arguments)}function yo(){return(yo=(0,U.Z)(function*(T,x,M,j,X){try{let ue=[];if(X&&X.send_to){let De=X.send_to;Array.isArray(De)||(De=[De]);const Be=yield Ed(M);for(const $e of De){const Rt=Be.find(bn=>bn.measurementId===$e),Qt=Rt&&x[Rt.appId];if(!Qt){ue=[];break}ue.push(Qt)}}0===ue.length&&(ue=Object.values(x)),yield Promise.all(ue),T("event",j,X||{})}catch(ue){Mn.error(ue)}})).apply(this,arguments)}function G_(){const T=window.document.getElementsByTagName("script");for(const x of Object.values(T))if(x.src&&x.src.includes(Gl))return x;return null}const Qi=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ku=new class{constructor(x={},M=1e3){this.throttleMetadata=x,this.intervalMillis=M}getThrottleMetadata(x){return this.throttleMetadata[x]}setThrottleMetadata(x,M){this.throttleMetadata[x]=M}deleteThrottleMetadata(x){delete this.throttleMetadata[x]}};function gg(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function wd(T){return vo.apply(this,arguments)}function vo(){return(vo=(0,U.Z)(function*(T){var x;const{appId:M,apiKey:j}=T,X={method:"GET",headers:gg(j)},ue=_o.replace("{app-id}",M),De=yield fetch(ue,X);if(200!==De.status&&304!==De.status){let Be="";try{const $e=yield De.json();(null===(x=$e.error)||void 0===x?void 0:x.message)&&(Be=$e.error.message)}catch($e){}throw Qi.create("config-fetch-failed",{httpStatus:De.status,responseMessage:Be})}return De.json()})).apply(this,arguments)}function nf(T){return _i.apply(this,arguments)}function _i(){return(_i=(0,U.Z)(function*(T,x=Ku,M){const{appId:j,apiKey:X,measurementId:ue}=T.options;if(!j)throw Qi.create("no-app-id");if(!X){if(ue)return{measurementId:ue,appId:j};throw Qi.create("no-api-key")}const De=x.getThrottleMetadata(j)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Be=new mg;return setTimeout((0,U.Z)(function*(){Be.abort()}),void 0!==M?M:6e4),zl({appId:j,apiKey:X,measurementId:ue},De,Be,x)})).apply(this,arguments)}function zl(T,x,M){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,U.Z)(function*(T,{throttleEndTimeMillis:x,backoffCount:M},j,X=Ku){const{appId:ue,measurementId:De}=T;try{yield rC(j,x)}catch(Be){if(De)return Mn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${De} provided in the "measurementId" field in the local Firebase config. [${Be.message}]`),{appId:ue,measurementId:De};throw Be}try{const Be=yield wd(T);return X.deleteThrottleMetadata(ue),Be}catch(Be){if(!rf(Be)){if(X.deleteThrottleMetadata(ue),De)return Mn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${De} provided in the "measurementId" field in the local Firebase config. [${Be.message}]`),{appId:ue,measurementId:De};throw Be}const $e=503===Number(Be.customData.httpStatus)?(0,se.$s)(M,X.intervalMillis,30):(0,se.$s)(M,X.intervalMillis),Rt={throttleEndTimeMillis:Date.now()+$e,backoffCount:M+1};return X.setThrottleMetadata(ue,Rt),Mn.debug(`Calling attemptFetch again in ${$e} millis`),zl(T,Rt,j,X)}})).apply(this,arguments)}function rC(T,x){return new Promise((M,j)=>{const X=Math.max(x-Date.now(),0),ue=setTimeout(M,X);T.addEventListener(()=>{clearTimeout(ue),j(Qi.create("fetch-throttle",{throttleEndTimeMillis:x}))})})}function rf(T){if(!(T instanceof se.ZR&&T.customData))return!1;const x=Number(T.customData.httpStatus);return 429===x||500===x||503===x||504===x}class mg{constructor(){this.listeners=[]}addEventListener(x){this.listeners.push(x)}abort(){this.listeners.forEach(x=>x())}}function sf(){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,U.Z)(function*(){if(!(0,se.hl)())return Mn.warn(Qi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(T){return Mn.warn(Qi.create("indexeddb-unavailable",{errorInfo:T}).message),!1}return!0})).apply(this,arguments)}function Wo(){return(Wo=(0,U.Z)(function*(T,x,M,j,X,ue,De){var Be;const $e=nf(T);$e.then(Xn=>{M[Xn.measurementId]=Xn.appId,T.options.measurementId&&Xn.measurementId!==T.options.measurementId&&Mn.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${Xn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Xn=>Mn.error(Xn)),x.push($e);const Rt=sf().then(Xn=>{if(Xn)return j.getId()}),[Qt,bn]=yield Promise.all([$e,Rt]);G_()||fg(ue,Qt.measurementId),X("js",new Date);const Ei=null!==(Be=null==De?void 0:De.config)&&void 0!==Be?Be:{};return Ei.origin="firebase",Ei.update=!0,null!=bn&&(Ei[hg]=bn),X("config",Qt.measurementId,Ei),Qt.measurementId})).apply(this,arguments)}class rt{constructor(x){this.app=x}_delete(){return delete _n[this.app.options.appId],Promise.resolve()}}let _n={},Yn=[];const Ko={};let of,yi,Hr="dataLayer",ze=!1;function vi(T,x,M){!function(){const T=[];if((0,se.ru)()&&T.push("This is a browser extension environment."),(0,se.zI)()||T.push("Cookies are not available."),T.length>0){const x=T.map((j,X)=>`(${X+1}) ${j}`).join(" "),M=Qi.create("invalid-analytics-context",{errorInfo:x});Mn.warn(M.message)}}();const j=T.options.appId;if(!j)throw Qi.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw Qi.create("no-api-key");Mn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=_n[j])throw Qi.create("already-exists",{id:j});if(!ze){!function(T){let x=[];Array.isArray(window[T])?x=window[T]:window[T]=x}(Hr);const{wrappedGtag:ue,gtagCore:De}=function(T,x,M,j,X){let ue=function(...De){window[j].push(arguments)};return window[X]&&"function"==typeof window[X]&&(ue=window[X]),window[X]=function(T,x,M,j){function ue(){return(ue=(0,U.Z)(function*(De,Be,$e){try{"event"===De?yield Ua(T,x,M,Be,$e):"config"===De?yield Va(T,x,M,j,Be,$e):T("set",Be)}catch(Rt){Mn.error(Rt)}})).apply(this,arguments)}return function(De,Be,$e){return ue.apply(this,arguments)}}(ue,T,x,M),{gtagCore:ue,wrappedGtag:window[X]}}(_n,Yn,Ko,Hr,"gtag");yi=ue,of=De,ze=!0}return _n[j]=function(T,x,M,j,X,ue,De){return Wo.apply(this,arguments)}(T,Yn,Ko,x,of,Hr,M),new rt(T)}function Qu(){return(Qu=(0,U.Z)(function*(T,x,M,j,X){if(X&&X.global)T("event",M,j);else{const ue=yield x;T("event",M,Object.assign(Object.assign({},j),{send_to:ue}))}})).apply(this,arguments)}function Xi(){return af.apply(this,arguments)}function af(){return(af=(0,U.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch(T){return!1}})).apply(this,arguments)}const Xu="@firebase/analytics";(0,de._registerComponent)(new Q.wA(Fa,(x,{options:M})=>vi(x.getProvider("app").getImmediate(),x.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,de._registerComponent)(new Q.wA("analytics-internal",function(x){try{const M=x.getProvider(Fa).getImmediate();return{logEvent:(j,X,ue)=>function(T,x,M,j){T=(0,se.m9)(T),function(T,x,M,j,X){return Qu.apply(this,arguments)}(yi,_n[T.app.options.appId],x,M,j).catch(X=>Mn.error(X))}(M,j,X,ue)}}catch(M){throw Qi.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,de.registerVersion)(Xu,"0.7.4"),(0,de.registerVersion)(Xu,"0.7.4","esm2017");var W_=V(7771),Jl=V(3637),K_=V(3342),iC=V(3101),sC=V(309);const vg=new c.GfV("7.2.0"),uf="__angularfire_symbol__analyticsIsSupported",Eg="__angularfire_symbol__remoteConfigIsSupported",js="__angularfire_symbol__messagingIsSupported";function ws(T,x,M){if(x){if(1===x.length)return x[0];const ue=x.filter(De=>De.app===M);if(1===ue.length)return ue[0]}return M.container.getProvider(T).getImmediate({optional:!0})}globalThis[uf]||(globalThis[uf]=Xi().then(T=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=T)),globalThis[js]||(globalThis[js]=Jh().then(T=>globalThis.__angularfire_symbol__messagingIsSupportedValue=T)),globalThis[Eg]||(globalThis[Eg]=cd().then(T=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=T));const Za=(T,x)=>{const M=x?[x]:(0,ne.C6)(),j=[];return M.forEach(X=>{X.container.getProvider(T).instances.forEach(De=>{j.includes(De)||j.push(De)})}),j};function Oi(){}class wo{constructor(x,M=W_.N){this.zone=x,this.delegate=M}now(){return this.delegate.now()}schedule(x,M,j){const X=this.zone;return this.delegate.schedule(function(De){X.runGuarded(()=>{x.apply(this,[De])})},M,j)}}class bg{constructor(x){this.zone=x,this.task=null}call(x,M){const j=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Oi,{},Oi,Oi)),M.pipe((0,K_.b)({next:j,complete:j,error:j})).subscribe(x).add(j)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let df=(()=>{class T{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new wo(Zone.current)),this.insideAngular=M.run(()=>new wo(Zone.current,Jl.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(M){return new(M||T)(c.LFG(c.R0b))},T.\u0275prov=c.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function Qo(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function Jo(T){return Qo(),function(T){return function(M){return(M=M.lift(new bg(T.ngZone))).pipe((0,iC.R)(T.outsideAngular),(0,sC.QV)(T.insideAngular))}}(Qo())(T)}},3854:(je,ye,V)=>{"use strict";V.d(ye,{BH:()=>le,LL:()=>Ye,ZR:()=>Ut,gQ:()=>Ae,zI:()=>pt,hu:()=>ne,g5:()=>U,US:()=>Q,tV:()=>ee,h$:()=>me,$s:()=>en,r3:()=>fn,Sg:()=>he,ne:()=>dr,p$:()=>B,vZ:()=>Bt,ZB:()=>H,gK:()=>tt,pd:()=>_s,m9:()=>sd,z$:()=>we,GJ:()=>ms,jU:()=>re,ru:()=>fe,d:()=>Pe,xb:()=>Sn,w1:()=>Ke,hl:()=>An,uI:()=>ve,UG:()=>pe,Yr:()=>Ft,b$:()=>Ce,G6:()=>Tt,Mn:()=>Pt,w9:()=>lo,cI:()=>Os,UI:()=>or,xO:()=>Ca,zd:()=>Zi,DV:()=>Ea,ug:()=>Yt,dS:()=>Jr,Pz:()=>Sl,Dv:()=>Qr,Wj:()=>Nt,lb:()=>Mt,eu:()=>It});const ne=function(W,q){if(!W)throw U(q)},U=function(W){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+W)},de=function(W){const q=[];let K=0;for(let Te=0;Te<W.length;Te++){let oe=W.charCodeAt(Te);oe<128?q[K++]=oe:oe<2048?(q[K++]=oe>>6|192,q[K++]=63&oe|128):55296==(64512&oe)&&Te+1<W.length&&56320==(64512&W.charCodeAt(Te+1))?(oe=65536+((1023&oe)<<10)+(1023&W.charCodeAt(++Te)),q[K++]=oe>>18|240,q[K++]=oe>>12&63|128,q[K++]=oe>>6&63|128,q[K++]=63&oe|128):(q[K++]=oe>>12|224,q[K++]=oe>>6&63|128,q[K++]=63&oe|128)}return q},Q={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(W,q){if(!Array.isArray(W))throw Error("encodeByteArray takes an array as a parameter");this.init_();const K=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,Te=[];for(let oe=0;oe<W.length;oe+=3){const He=W[oe],_t=oe+1<W.length,jt=_t?W[oe+1]:0,Vn=oe+2<W.length,Un=Vn?W[oe+2]:0;let Dr=(15&jt)<<2|Un>>6,Bo=63&Un;Vn||(Bo=64,_t||(Dr=64)),Te.push(K[He>>2],K[(3&He)<<4|jt>>4],K[Dr],K[Bo])}return Te.join("")},encodeString(W,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(W):this.encodeByteArray(de(W),q)},decodeString(W,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(W):function(W){const q=[];let K=0,Te=0;for(;K<W.length;){const oe=W[K++];if(oe<128)q[Te++]=String.fromCharCode(oe);else if(oe>191&&oe<224){const He=W[K++];q[Te++]=String.fromCharCode((31&oe)<<6|63&He)}else if(oe>239&&oe<365){const Vn=((7&oe)<<18|(63&W[K++])<<12|(63&W[K++])<<6|63&W[K++])-65536;q[Te++]=String.fromCharCode(55296+(Vn>>10)),q[Te++]=String.fromCharCode(56320+(1023&Vn))}else{const He=W[K++],_t=W[K++];q[Te++]=String.fromCharCode((15&oe)<<12|(63&He)<<6|63&_t)}}return q.join("")}(this.decodeStringToByteArray(W,q))},decodeStringToByteArray(W,q){this.init_();const K=q?this.charToByteMapWebSafe_:this.charToByteMap_,Te=[];for(let oe=0;oe<W.length;){const He=K[W.charAt(oe++)],jt=oe<W.length?K[W.charAt(oe)]:0;++oe;const Un=oe<W.length?K[W.charAt(oe)]:64;++oe;const Lt=oe<W.length?K[W.charAt(oe)]:64;if(++oe,null==He||null==jt||null==Un||null==Lt)throw Error();Te.push(He<<2|jt>>4),64!==Un&&(Te.push(jt<<4&240|Un>>2),64!==Lt&&Te.push(Un<<6&192|Lt))}return Te},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let W=0;W<this.ENCODED_VALS.length;W++)this.byteToCharMap_[W]=this.ENCODED_VALS.charAt(W),this.charToByteMap_[this.byteToCharMap_[W]]=W,this.byteToCharMapWebSafe_[W]=this.ENCODED_VALS_WEBSAFE.charAt(W),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[W]]=W,W>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(W)]=W,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(W)]=W)}}},me=function(W){const q=de(W);return Q.encodeByteArray(q,!0)},J=function(W){return me(W).replace(/\./g,"")},ee=function(W){try{return Q.decodeString(W,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function B(W){return H(void 0,W)}function H(W,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===W&&(W={});break;case Array:W=[];break;default:return q}for(const K in q)!q.hasOwnProperty(K)||!G(K)||(W[K]=H(W[K],q[K]));return W}function G(W){return"__proto__"!==W}class le{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,K)=>{this.resolve=q,this.reject=K})}wrapCallback(q){return(K,Te)=>{K?this.reject(K):this.resolve(Te),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(K):q(K,Te))}}}function he(W,q){if(W.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Te=q||"demo-project",oe=W.iat||0,He=W.sub||W.user_id;if(!He)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const _t=Object.assign({iss:`https://securetoken.google.com/${Te}`,aud:Te,iat:oe,exp:oe+3600,auth_time:oe,sub:He,user_id:He,firebase:{sign_in_provider:"custom",identities:{}}},W);return[J(JSON.stringify({alg:"none",type:"JWT"})),J(JSON.stringify(_t)),""].join(".")}function we(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ve(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(we())}function pe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(W){return!1}}function re(){return"object"==typeof self&&self.self===self}function fe(){const W="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof W&&void 0!==W.id}function Ce(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Pe(){return we().indexOf("Electron/")>=0}function Ke(){const W=we();return W.indexOf("MSIE ")>=0||W.indexOf("Trident/")>=0}function Pt(){return we().indexOf("MSAppHost/")>=0}function Ft(){return!1}function Tt(){return!pe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function An(){return"object"==typeof indexedDB}function It(){return new Promise((W,q)=>{try{let K=!0;const Te="validate-browser-context-for-indexeddb-analytics-module",oe=self.indexedDB.open(Te);oe.onsuccess=()=>{oe.result.close(),K||self.indexedDB.deleteDatabase(Te),W(!0)},oe.onupgradeneeded=()=>{K=!1},oe.onerror=()=>{var He;q((null===(He=oe.error)||void 0===He?void 0:He.message)||"")}}catch(K){q(K)}})}function pt(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ut extends Error{constructor(q,K,Te){super(K),this.code=q,this.customData=Te,this.name="FirebaseError",Object.setPrototypeOf(this,Ut.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ye.prototype.create)}}class Ye{constructor(q,K,Te){this.service=q,this.serviceName=K,this.errors=Te}create(q,...K){const Te=K[0]||{},oe=`${this.service}/${q}`,He=this.errors[q],_t=He?function(W,q){return W.replace(ao,(K,Te)=>{const oe=q[Te];return null!=oe?String(oe):`<${Te}?>`})}(He,Te):"Error";return new Ut(oe,`${this.serviceName}: ${_t} (${oe}).`,Te)}}const ao=/\{\$([^}]+)}/g;function Os(W){return JSON.parse(W)}function Sl(W){return JSON.stringify(W)}const Gt=function(W){let q={},K={},Te={},oe="";try{const He=W.split(".");q=Os(ee(He[0])||""),K=Os(ee(He[1])||""),oe=He[2],Te=K.d||{},delete K.d}catch(He){}return{header:q,claims:K,data:Te,signature:oe}},lo=function(W){const K=Gt(W).claims;return!!K&&"object"==typeof K&&K.hasOwnProperty("iat")},ms=function(W){const q=Gt(W).claims;return"object"==typeof q&&!0===q.admin};function fn(W,q){return Object.prototype.hasOwnProperty.call(W,q)}function Ea(W,q){if(Object.prototype.hasOwnProperty.call(W,q))return W[q]}function Sn(W){for(const q in W)if(Object.prototype.hasOwnProperty.call(W,q))return!1;return!0}function or(W,q,K){const Te={};for(const oe in W)Object.prototype.hasOwnProperty.call(W,oe)&&(Te[oe]=q.call(K,W[oe],oe,W));return Te}function Bt(W,q){if(W===q)return!0;const K=Object.keys(W),Te=Object.keys(q);for(const oe of K){if(!Te.includes(oe))return!1;const He=W[oe],_t=q[oe];if(xn(He)&&xn(_t)){if(!Bt(He,_t))return!1}else if(He!==_t)return!1}for(const oe of Te)if(!K.includes(oe))return!1;return!0}function xn(W){return null!==W&&"object"==typeof W}function Ca(W){const q=[];for(const[K,Te]of Object.entries(W))Array.isArray(Te)?Te.forEach(oe=>{q.push(encodeURIComponent(K)+"="+encodeURIComponent(oe))}):q.push(encodeURIComponent(K)+"="+encodeURIComponent(Te));return q.length?"&"+q.join("&"):""}function Zi(W){const q={};return W.replace(/^\?/,"").split("&").forEach(Te=>{if(Te){const[oe,He]=Te.split("=");q[decodeURIComponent(oe)]=decodeURIComponent(He)}}),q}function _s(W){const q=W.indexOf("?");if(!q)return"";const K=W.indexOf("#",q);return W.substring(q,K>0?K:void 0)}class Ae{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let q=1;q<this.blockSize;++q)this.pad_[q]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(q,K){K||(K=0);const Te=this.W_;if("string"==typeof q)for(let Lt=0;Lt<16;Lt++)Te[Lt]=q.charCodeAt(K)<<24|q.charCodeAt(K+1)<<16|q.charCodeAt(K+2)<<8|q.charCodeAt(K+3),K+=4;else for(let Lt=0;Lt<16;Lt++)Te[Lt]=q[K]<<24|q[K+1]<<16|q[K+2]<<8|q[K+3],K+=4;for(let Lt=16;Lt<80;Lt++){const Dr=Te[Lt-3]^Te[Lt-8]^Te[Lt-14]^Te[Lt-16];Te[Lt]=4294967295&(Dr<<1|Dr>>>31)}let Un,kr,oe=this.chain_[0],He=this.chain_[1],_t=this.chain_[2],jt=this.chain_[3],Vn=this.chain_[4];for(let Lt=0;Lt<80;Lt++){Lt<40?Lt<20?(Un=jt^He&(_t^jt),kr=1518500249):(Un=He^_t^jt,kr=1859775393):Lt<60?(Un=He&_t|jt&(He|_t),kr=2400959708):(Un=He^_t^jt,kr=3395469782);const Dr=(oe<<5|oe>>>27)+Un+Vn+kr+Te[Lt]&4294967295;Vn=jt,jt=_t,_t=4294967295&(He<<30|He>>>2),He=oe,oe=Dr}this.chain_[0]=this.chain_[0]+oe&4294967295,this.chain_[1]=this.chain_[1]+He&4294967295,this.chain_[2]=this.chain_[2]+_t&4294967295,this.chain_[3]=this.chain_[3]+jt&4294967295,this.chain_[4]=this.chain_[4]+Vn&4294967295}update(q,K){if(null==q)return;void 0===K&&(K=q.length);const Te=K-this.blockSize;let oe=0;const He=this.buf_;let _t=this.inbuf_;for(;oe<K;){if(0===_t)for(;oe<=Te;)this.compress_(q,oe),oe+=this.blockSize;if("string"==typeof q){for(;oe<K;)if(He[_t]=q.charCodeAt(oe),++_t,++oe,_t===this.blockSize){this.compress_(He),_t=0;break}}else for(;oe<K;)if(He[_t]=q[oe],++_t,++oe,_t===this.blockSize){this.compress_(He),_t=0;break}}this.inbuf_=_t,this.total_+=K}digest(){const q=[];let K=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let oe=this.blockSize-1;oe>=56;oe--)this.buf_[oe]=255&K,K/=256;this.compress_(this.buf_);let Te=0;for(let oe=0;oe<5;oe++)for(let He=24;He>=0;He-=8)q[Te]=this.chain_[oe]>>He&255,++Te;return q}}function dr(W,q){const K=new Wn(W,q);return K.subscribe.bind(K)}class Wn{constructor(q,K){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=K,this.task.then(()=>{q(this)}).catch(Te=>{this.error(Te)})}next(q){this.forEachObserver(K=>{K.next(q)})}error(q){this.forEachObserver(K=>{K.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,K,Te){let oe;if(void 0===q&&void 0===K&&void 0===Te)throw new Error("Missing Observer.");oe=function(W,q){if("object"!=typeof W||null===W)return!1;for(const K of["next","error","complete"])if(K in W&&"function"==typeof W[K])return!0;return!1}(q)?q:{next:q,error:K,complete:Te},void 0===oe.next&&(oe.next=Gi),void 0===oe.error&&(oe.error=Gi),void 0===oe.complete&&(oe.complete=Gi);const He=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?oe.error(this.finalError):oe.complete()}catch(_t){}}),this.observers.push(oe),He}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let K=0;K<this.observers.length;K++)this.sendOne(K,q)}sendOne(q,K){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{K(this.observers[q])}catch(Te){"undefined"!=typeof console&&console.error&&console.error(Te)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Gi(){}const Qr=function(W,q,K,Te){let oe;if(Te<q?oe="at least "+q:Te>K&&(oe=0===K?"none":"no more than "+K),oe)throw new Error(W+" failed: Was called with "+Te+(1===Te?" argument.":" arguments.")+" Expects "+oe+".")};function tt(W,q){return`${W} failed: ${q} argument `}function Nt(W,q,K,Te){if((!Te||K)&&"function"!=typeof K)throw new Error(tt(W,q)+"must be a valid function.")}function Mt(W,q,K,Te){if((!Te||K)&&("object"!=typeof K||null===K))throw new Error(tt(W,q)+"must be a valid context object.")}const Jr=function(W){const q=[];let K=0;for(let Te=0;Te<W.length;Te++){let oe=W.charCodeAt(Te);if(oe>=55296&&oe<=56319){const He=oe-55296;Te++,ne(Te<W.length,"Surrogate pair missing trail surrogate."),oe=65536+(He<<10)+(W.charCodeAt(Te)-56320)}oe<128?q[K++]=oe:oe<2048?(q[K++]=oe>>6|192,q[K++]=63&oe|128):oe<65536?(q[K++]=oe>>12|224,q[K++]=oe>>6&63|128,q[K++]=63&oe|128):(q[K++]=oe>>18|240,q[K++]=oe>>12&63|128,q[K++]=oe>>6&63|128,q[K++]=63&oe|128)}return q},Yt=function(W){let q=0;for(let K=0;K<W.length;K++){const Te=W.charCodeAt(K);Te<128?q++:Te<2048?q+=2:Te>=55296&&Te<=56319?(q+=4,K++):q+=3}return q};function en(W,q=1e3,K=2){const Te=q*Math.pow(K,W),oe=Math.round(.5*Te*(Math.random()-.5)*2);return Math.min(144e5,Te+oe)}function sd(W){return W&&W._delegate?W._delegate:W}},2329:(je,ye,V)=>{"use strict";V.d(ye,{Mq:()=>c.getApp,C6:()=>c.getApps});var c=V(8026);(0,c.registerVersion)("firebase","9.4.1","app")},7841:(je,ye,V)=>{"use strict";V.d(ye,{Z:()=>c.Z});var c=V(3394);c.Z.registerVersion("firebase","9.4.1","app-compat")},941:(je,ye,V)=>{"use strict";V.r(ye);var c=V(8239),ne=V(3394),U=V(3854),de=V(8026);function J(v,g){var m={};for(var C in v)Object.prototype.hasOwnProperty.call(v,C)&&g.indexOf(C)<0&&(m[C]=v[C]);if(null!=v&&"function"==typeof Object.getOwnPropertySymbols){var A=0;for(C=Object.getOwnPropertySymbols(v);A<C.length;A++)g.indexOf(C[A])<0&&Object.prototype.propertyIsEnumerable.call(v,C[A])&&(m[C[A]]=v[C[A]])}return m}var Ut=V(5422),Ye=V(3910);const lo=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ms=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},fn=new U.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Sn=new Ut.Yd("@firebase/auth");function or(v,...g){Sn.logLevel<=Ut.in.ERROR&&Sn.error(`Auth (${de.SDK_VERSION}): ${v}`,...g)}function Bt(v,...g){throw _s(v,...g)}function xn(v,...g){return _s(v,...g)}function Ca(v,g,m){const C=Object.assign(Object.assign({},ms()),{[g]:m});return new U.LL("auth","Firebase",C).create(g,{appName:v.name})}function Zi(v,g,m){if(!(g instanceof m))throw m.name!==g.constructor.name&&Bt(v,"argument-error"),Ca(v,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function _s(v,...g){if("string"!=typeof v){const m=g[0],C=[...g.slice(1)];return C[0]&&(C[0].appName=v.name),v._errorFactory.create(m,...C)}return fn.create(v,...g)}function Ae(v,g,...m){if(!v)throw _s(g,...m)}function dr(v){const g="INTERNAL ASSERTION FAILED: "+v;throw or(g),new Error(g)}function Wn(v,g){v||dr(g)}const Ge=new Map;function Wt(v){Wn(v instanceof Function,"Expected a class definition");let g=Ge.get(v);return g?(Wn(g instanceof v,"Instance stored in cache mismatched with class"),g):(g=new v,Ge.set(v,g),g)}function tt(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function ot(){return"http:"===Nt()||"https:"===Nt()}function Nt(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Yt{constructor(g,m){this.shortDelay=g,this.longDelay=m,Wn(m>g,"Short delay should be less than long delay!"),this.isMobile=(0,U.uI)()||(0,U.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ot()||(0,U.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Fe(v,g){Wn(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return g?`${m}${g.startsWith("/")?g.slice(1):g}`:m}class Xe{static initialize(g,m,C){this.fetchImpl=g,m&&(this.headersImpl=m),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void dr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void dr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void dr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const id={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},uo=new Yt(3e4,6e4);function en(v,g){return v.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:v.tenantId}):g}function mt(v,g,m,C){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,c.Z)(function*(v,g,m,C,A={}){return sd(v,A,()=>{let N={},z={};C&&("GET"===g?z=C:N={body:JSON.stringify(C)});const ae=(0,U.xO)(Object.assign({key:v.config.apiKey},z)).slice(1),Oe=new(Xe.headers());return Oe.set("Content-Type","application/json"),Oe.set("X-Client-Version",v._getSdkClientVersion()),v.languageCode&&Oe.set("X-Firebase-Locale",v.languageCode),Xe.fetch()(Te(v,v.config.apiHost,m,ae),Object.assign({method:g,headers:Oe,referrerPolicy:"no-referrer"},N))})})).apply(this,arguments)}function sd(v,g,m){return W.apply(this,arguments)}function W(){return(W=(0,c.Z)(function*(v,g,m){v._canInitEmulator=!1;const C=Object.assign(Object.assign({},id),g);try{const A=new oe(v),N=yield Promise.race([m(),A.promise]);A.clearNetworkTimeout();const z=yield N.json();if("needConfirmation"in z)throw He(v,"account-exists-with-different-credential",z);if(N.ok&&!("errorMessage"in z))return z;{const ae=N.ok?z.errorMessage:z.error.message,[Oe,xe]=ae.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Oe)throw He(v,"credential-already-in-use",z);if("EMAIL_EXISTS"===Oe)throw He(v,"email-already-in-use",z);const Ue=C[Oe]||Oe.toLowerCase().replace(/[_\s]+/g,"-");if(xe)throw Ca(v,Ue,xe);Bt(v,Ue)}}catch(A){if(A instanceof U.ZR)throw A;Bt(v,"network-request-failed")}})).apply(this,arguments)}function q(v,g,m,C){return K.apply(this,arguments)}function K(){return(K=(0,c.Z)(function*(v,g,m,C,A={}){const N=yield mt(v,g,m,C,A);return"mfaPendingCredential"in N&&Bt(v,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function Te(v,g,m,C){const A=`${g}${m}?${C}`;return v.config.emulator?Fe(v.config,A):`${v.config.apiScheme}://${A}`}class oe{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((m,C)=>{this.timer=setTimeout(()=>C(xn(this.auth,"timeout")),uo.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function He(v,g,m){const C={appName:v.name};m.email&&(C.email=m.email),m.phoneNumber&&(C.phoneNumber=m.phoneNumber);const A=xn(v,g,C);return A.customData._tokenResponse=m,A}function jt(){return(jt=(0,c.Z)(function*(v,g){return mt(v,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Vn(v,g){return Un.apply(this,arguments)}function Un(){return(Un=(0,c.Z)(function*(v,g){return mt(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function kr(v,g){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,c.Z)(function*(v,g){return mt(v,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Dr(v){if(v)try{const g=new Date(Number(v));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function jo(){return(jo=(0,c.Z)(function*(v,g=!1){const m=(0,U.m9)(v),C=yield m.getIdToken(g),A=Ho(C);Ae(A&&A.exp&&A.auth_time&&A.iat,m.auth,"internal-error");const N="object"==typeof A.firebase?A.firebase:void 0,z=null==N?void 0:N.sign_in_provider;return{claims:A,token:C,authTime:Dr(Ru(A.auth_time)),issuedAtTime:Dr(Ru(A.iat)),expirationTime:Dr(Ru(A.exp)),signInProvider:z||null,signInSecondFactor:(null==N?void 0:N.sign_in_second_factor)||null}})).apply(this,arguments)}function Ru(v){return 1e3*Number(v)}function Ho(v){const[g,m,C]=v.split(".");if(void 0===g||void 0===m||void 0===C)return or("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,U.tV)(m);return A?JSON.parse(A):(or("Failed to decode base64 JWT payload"),null)}catch(A){return or("Caught error parsing JWT payload as JSON",A),null}}function Si(v,g){return ar.apply(this,arguments)}function ar(){return(ar=(0,c.Z)(function*(v,g,m=!1){if(m)return g;try{return yield g}catch(C){throw C instanceof U.ZR&&hi(C)&&v.auth.currentUser===v&&(yield v.auth.signOut()),C}})).apply(this,arguments)}function hi({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class zi{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var m;if(g){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const A=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(g=!1){var m=this;if(!this.isRunning)return;const C=this.getInterval(g);this.timerId=setTimeout((0,c.Z)(function*(){yield m.iteration()}),C)}iteration(){var g=this;return(0,c.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&g.schedule(!0))}g.schedule()})()}}class xi{constructor(g,m){this.createdAt=g,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dr(this.lastLoginAt),this.creationTime=Dr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function $o(v){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,c.Z)(function*(v){var g;const m=v.auth,C=yield v.getIdToken(),A=yield Si(v,kr(m,{idToken:C}));Ae(null==A?void 0:A.users.length,m,"internal-error");const N=A.users[0];v._notifyReloadListener(N);const z=(null===(g=N.providerUserInfo)||void 0===g?void 0:g.length)?ei(N.providerUserInfo):[],ae=rn(v.providerData,z),Ue=!!v.isAnonymous&&!(v.email&&N.passwordHash||(null==ae?void 0:ae.length)),We={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:ae,metadata:new xi(N.createdAt,N.lastLoginAt),isAnonymous:Ue};Object.assign(v,We)})).apply(this,arguments)}function Dt(){return(Dt=(0,c.Z)(function*(v){const g=(0,U.m9)(v);yield $o(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function rn(v,g){return[...v.filter(C=>!g.some(A=>A.providerId===C.providerId)),...g]}function ei(v){return v.map(g=>{var{providerId:m}=g,C=J(g,["providerId"]);return{providerId:m,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}function Bn(){return(Bn=(0,c.Z)(function*(v,g){const m=yield sd(v,{},()=>{const C=(0,U.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:A,apiKey:N}=v.config,z=Te(v,A,"/v1/token",`key=${N}`);return Xe.fetch()(z,{method:"POST",headers:{"X-Client-Version":v._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:C})});return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class fi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){Ae(g.idToken,"internal-error"),Ae(void 0!==g.idToken,"internal-error"),Ae(void 0!==g.refreshToken,"internal-error");const m="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function(v){const g=Ho(v);return Ae(g,"internal-error"),Ae(void 0!==g.exp,"internal-error"),Ae(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,m)}getToken(g,m=!1){var C=this;return(0,c.Z)(function*(){return Ae(!C.accessToken||C.refreshToken,g,"user-token-expired"),m||!C.accessToken||C.isExpired?C.refreshToken?(yield C.refresh(g,C.refreshToken),C.accessToken):null:C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,m){var C=this;return(0,c.Z)(function*(){const{accessToken:A,refreshToken:N,expiresIn:z}=yield function(v,g){return Bn.apply(this,arguments)}(g,m);C.updateTokensAndExpiration(A,N,Number(z))})()}updateTokensAndExpiration(g,m,C){this.refreshToken=m||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(g,m){const{refreshToken:C,accessToken:A,expirationTime:N}=m,z=new fi;return C&&(Ae("string"==typeof C,"internal-error",{appName:g}),z.refreshToken=C),A&&(Ae("string"==typeof A,"internal-error",{appName:g}),z.accessToken=A),N&&(Ae("number"==typeof N,"internal-error",{appName:g}),z.expirationTime=N),z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new fi,this.toJSON())}_performRefresh(){return dr("not implemented")}}function sn(v,g){Ae("string"==typeof v||void 0===v,"internal-error",{appName:g})}class pi{constructor(g){var{uid:m,auth:C,stsTokenManager:A}=g,N=J(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new zi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=C,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.metadata=new xi(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(g){var m=this;return(0,c.Z)(function*(){const C=yield Si(m,m.stsTokenManager.getToken(m.auth,g));return Ae(C,m.auth,"internal-error"),m.accessToken!==C&&(m.accessToken=C,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),C})()}getIdTokenResult(g){return function(v){return jo.apply(this,arguments)}(this,g)}reload(){return function(v){return Dt.apply(this,arguments)}(this)}_assign(g){this!==g&&(Ae(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(m=>Object.assign({},m)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new pi(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,m=!1){var C=this;return(0,c.Z)(function*(){let A=!1;g.idToken&&g.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(g),A=!0),m&&(yield $o(C)),yield C.auth._persistUserIfCurrent(C),A&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var g=this;return(0,c.Z)(function*(){const m=yield g.getIdToken();return yield Si(g,function(v,g){return jt.apply(this,arguments)}(g.auth,{idToken:m})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,m){var C,A,N,z,ae,Oe,xe,Ue;const We=null!==(C=m.displayName)&&void 0!==C?C:void 0,St=null!==(A=m.email)&&void 0!==A?A:void 0,On=null!==(N=m.phoneNumber)&&void 0!==N?N:void 0,As=null!==(z=m.photoURL)&&void 0!==z?z:void 0,Sf=null!==(ae=m.tenantId)&&void 0!==ae?ae:void 0,Bd=null!==(Oe=m._redirectEventId)&&void 0!==Oe?Oe:void 0,by=null!==(xe=m.createdAt)&&void 0!==xe?xe:void 0,wy=null!==(Ue=m.lastLoginAt)&&void 0!==Ue?Ue:void 0,{uid:uc,emailVerified:Hg,isAnonymous:$g,providerData:ou,stsTokenManager:xf}=m;Ae(uc&&xf,g,"internal-error");const cc=fi.fromJSON(this.name,xf);Ae("string"==typeof uc,g,"internal-error"),sn(We,g.name),sn(St,g.name),Ae("boolean"==typeof Hg,g,"internal-error"),Ae("boolean"==typeof $g,g,"internal-error"),sn(On,g.name),sn(As,g.name),sn(Sf,g.name),sn(Bd,g.name),sn(by,g.name),sn(wy,g.name);const jd=new pi({uid:uc,auth:g,email:St,emailVerified:Hg,displayName:We,isAnonymous:$g,photoURL:As,phoneNumber:On,tenantId:Sf,stsTokenManager:cc,createdAt:by,lastLoginAt:wy});return ou&&Array.isArray(ou)&&(jd.providerData=ou.map(qg=>Object.assign({},qg))),Bd&&(jd._redirectEventId=Bd),jd}static _fromIdTokenResponse(g,m,C=!1){return(0,c.Z)(function*(){const A=new fi;A.updateFromServerResponse(m);const N=new pi({uid:m.localId,auth:g,stsTokenManager:A,isAnonymous:C});return yield $o(N),N})()}}const ut=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,c.Z)(function*(){return!0})()}_set(m,C){var A=this;return(0,c.Z)(function*(){A.storage[m]=C})()}_get(m){var C=this;return(0,c.Z)(function*(){const A=C.storage[m];return void 0===A?null:A})()}_remove(m){var C=this;return(0,c.Z)(function*(){delete C.storage[m]})()}_addListener(m,C){}_removeListener(m,C){}}return v.type="NONE",v})();function ti(v,g,m){return`firebase:${v}:${g}:${m}`}class Pi{constructor(g,m,C){this.persistence=g,this.auth=m,this.userKey=C;const{config:A,name:N}=this.auth;this.fullUserKey=ti(this.userKey,A.apiKey,N),this.fullPersistenceKey=ti("persistence",A.apiKey,N),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,c.Z)(function*(){const m=yield g.persistence._get(g.fullUserKey);return m?pi._fromJSON(g.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var m=this;return(0,c.Z)(function*(){if(m.persistence===g)return;const C=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=g,C?m.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,m,C="authUser"){return(0,c.Z)(function*(){if(!m.length)return new Pi(Wt(ut),g,C);const A=(yield Promise.all(m.map(function(){var xe=(0,c.Z)(function*(Ue){if(yield Ue._isAvailable())return Ue});return function(Ue){return xe.apply(this,arguments)}}()))).filter(xe=>xe);let N=A[0]||Wt(ut);const z=ti(C,g.config.apiKey,g.name);let ae=null;for(const xe of m)try{const Ue=yield xe._get(z);if(Ue){const We=pi._fromJSON(g,Ue);xe!==N&&(ae=We),N=xe;break}}catch(Ue){}const Oe=A.filter(xe=>xe._shouldAllowMigration);return N._shouldAllowMigration&&Oe.length?(N=Oe[0],ae&&(yield N._set(z,ae.toJSON())),yield Promise.all(m.map(function(){var xe=(0,c.Z)(function*(Ue){if(Ue!==N)try{yield Ue._remove(z)}catch(We){}});return function(Ue){return xe.apply(this,arguments)}}())),new Pi(N,g,C)):new Pi(N,g,C)})()}}function hr(v){const g=v.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(co(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(wa(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Vt(g))return"Blackberry";if(Fh(g))return"Webos";if(fr(g))return"Safari";if((g.includes("chrome/")||Ta(g))&&!g.includes("edge/"))return"Chrome";if(Lr(g))return"Android";{const C=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==C?void 0:C.length))return C[1]}return"Other"}function wa(v=(0,U.z$)()){return/firefox\//i.test(v)}function fr(v=(0,U.z$)()){const g=v.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Ta(v=(0,U.z$)()){return/crios\//i.test(v)}function co(v=(0,U.z$)()){return/iemobile/i.test(v)}function Lr(v=(0,U.z$)()){return/android/i.test(v)}function Vt(v=(0,U.z$)()){return/blackberry/i.test(v)}function Fh(v=(0,U.z$)()){return/webos/i.test(v)}function Ia(v=(0,U.z$)()){return/iphone|ipad|ipod/i.test(v)}function ks(v=(0,U.z$)()){return Ia(v)||Lr(v)||Fh(v)||Vt(v)||/windows phone/i.test(v)||co(v)}function Sr(v,g=[]){let m;switch(v){case"Browser":m=hr((0,U.z$)());break;case"Worker":m=`${hr((0,U.z$)())}-${v}`;break;default:m=v}const C=g.length?g.join(","):"FirebaseCore-web";return`${m}/JsCore/${de.SDK_VERSION}/${C}`}class B_{constructor(g,m){this.app=g,this.config=m,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xr(this),this.idTokenSubscription=new xr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fn,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=m.sdkClientVersion}_initializeWithPersistence(g,m){var C=this;return m&&(this._popupRedirectResolver=Wt(m)),this._initializationPromise=this.queue((0,c.Z)(function*(){var A,N;C._deleted||(C.persistenceManager=yield Pi.create(C,g),!C._deleted&&((null===(A=C._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)&&(yield C._popupRedirectResolver._initialize(C)),yield C.initializeCurrentUser(m),C.lastNotifiedUid=(null===(N=C.currentUser)||void 0===N?void 0:N.uid)||null,!C._deleted&&(C._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,c.Z)(function*(){if(g._deleted)return;const m=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||m){if(g.currentUser&&m&&g.currentUser.uid===m.uid)return g._currentUser._assign(m),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(m)}})()}initializeCurrentUser(g){var m=this;return(0,c.Z)(function*(){var C;let A=yield m.assertedPersistence.getCurrentUser();if(g&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const N=null===(C=m.redirectUser)||void 0===C?void 0:C._redirectEventId,z=null==A?void 0:A._redirectEventId,ae=yield m.tryRedirectSignIn(g);(!N||N===z)&&(null==ae?void 0:ae.user)&&(A=ae.user)}return A?A._redirectEventId?(Ae(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===A._redirectEventId?m.directlySetCurrentUser(A):m.reloadAndSetCurrentUserOrClear(A)):m.reloadAndSetCurrentUserOrClear(A):m.directlySetCurrentUser(null)})()}tryRedirectSignIn(g){var m=this;return(0,c.Z)(function*(){let C=null;try{C=yield m._popupRedirectResolver._completeRedirectFn(m,g,!0)}catch(A){yield m._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(g){var m=this;return(0,c.Z)(function*(){try{yield $o(g)}catch(C){if("auth/network-request-failed"!==C.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var g=this;return(0,c.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var m=this;return(0,c.Z)(function*(){const C=g?(0,U.m9)(g):null;return C&&Ae(C.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(C&&C._clone(m))})()}_updateCurrentUser(g){var m=this;return(0,c.Z)(function*(){if(!m._deleted)return g&&Ae(m.tenantId===g.tenantId,m,"tenant-id-mismatch"),m.queue((0,c.Z)(function*(){yield m.directlySetCurrentUser(g),m.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,c.Z)(function*(){return(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null)})()}setPersistence(g){var m=this;return this.queue((0,c.Z)(function*(){yield m.assertedPersistence.setPersistence(Wt(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new U.LL("auth","Firebase",g())}onAuthStateChanged(g,m,C){return this.registerStateListener(this.authStateSubscription,g,m,C)}onIdTokenChanged(g,m,C){return this.registerStateListener(this.idTokenSubscription,g,m,C)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,m){var C=this;return(0,c.Z)(function*(){const A=yield C.getOrInitRedirectPersistenceManager(m);return null===g?A.removeCurrentUser():A.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var m=this;return(0,c.Z)(function*(){if(!m.redirectPersistenceManager){const C=g&&Wt(g)||m._popupRedirectResolver;Ae(C,m,"argument-error"),m.redirectPersistenceManager=yield Pi.create(m,[Wt(C._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(g){var m=this;return(0,c.Z)(function*(){var C,A;return m._isInitialized&&(yield m.queue((0,c.Z)(function*(){}))),(null===(C=m._currentUser)||void 0===C?void 0:C._redirectEventId)===g?m._currentUser:(null===(A=m.redirectUser)||void 0===A?void 0:A._redirectEventId)===g?m.redirectUser:null})()}_persistUserIfCurrent(g){var m=this;return(0,c.Z)(function*(){if(g===m.currentUser)return m.queue((0,c.Z)(function*(){return m.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(m=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,m,C,A){if(this._deleted)return()=>{};const N="function"==typeof m?m:m.next.bind(m),z=this._isInitialized?Promise.resolve():this._initializationPromise;return Ae(z,this,"internal-error"),z.then(()=>N(this.currentUser)),"function"==typeof m?g.addObserver(m,C,A):g.addObserver(m)}directlySetCurrentUser(g){var m=this;return(0,c.Z)(function*(){m.currentUser&&m.currentUser!==g&&(m._currentUser._stopProactiveRefresh(),g&&m.isProactiveRefreshEnabled&&g._startProactiveRefresh()),m.currentUser=g,g?yield m.assertedPersistence.setCurrentUser(g):yield m.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Sr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function mn(v){return(0,U.m9)(v)}class xr{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,U.ne)(m=>this.observer=m)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function xl(v){const g=v.indexOf(":");return g<0?"":v.substr(0,g+1)}function Wi(v){if(!v)return null;const g=Number(v);return isNaN(g)?null:g}class Pl{constructor(g,m){this.providerId=g,this.signInMethod=m}toJSON(){return dr("not implemented")}_getIdTokenResponse(g){return dr("not implemented")}_linkToIdToken(g,m){return dr("not implemented")}_getReauthenticationResolver(g){return dr("not implemented")}}function Vh(v,g){return ld.apply(this,arguments)}function ld(){return(ld=(0,c.Z)(function*(v,g){return mt(v,"POST","/v1/accounts:resetPassword",en(v,g))})).apply(this,arguments)}function ag(v,g){return Uh.apply(this,arguments)}function Uh(){return(Uh=(0,c.Z)(function*(v,g){return mt(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function j_(v,g){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,c.Z)(function*(v,g){return mt(v,"POST","/v1/accounts:update",en(v,g))})).apply(this,arguments)}function Bh(){return(Bh=(0,c.Z)(function*(v,g){return q(v,"POST","/v1/accounts:signInWithPassword",en(v,g))})).apply(this,arguments)}function ud(v,g){return jh.apply(this,arguments)}function jh(){return(jh=(0,c.Z)(function*(v,g){return mt(v,"POST","/v1/accounts:sendOobCode",en(v,g))})).apply(this,arguments)}function H_(v,g){return Hh.apply(this,arguments)}function Hh(){return(Hh=(0,c.Z)(function*(v,g){return ud(v,g)})).apply(this,arguments)}function $_(v,g){return lg.apply(this,arguments)}function lg(){return(lg=(0,c.Z)(function*(v,g){return ud(v,g)})).apply(this,arguments)}function $h(v,g){return cd.apply(this,arguments)}function cd(){return(cd=(0,c.Z)(function*(v,g){return ud(v,g)})).apply(this,arguments)}function Fu(v,g){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,c.Z)(function*(v,g){return ud(v,g)})).apply(this,arguments)}function Rl(){return(Rl=(0,c.Z)(function*(v,g){return q(v,"POST","/v1/accounts:signInWithEmailLink",en(v,g))})).apply(this,arguments)}function ys(){return(ys=(0,c.Z)(function*(v,g){return q(v,"POST","/v1/accounts:signInWithEmailLink",en(v,g))})).apply(this,arguments)}class kl extends Pl{constructor(g,m,C,A=null){super("password",C),this._email=g,this._password=m,this._tenantId=A}static _fromEmailAndPassword(g,m){return new kl(g,m,"password")}static _fromEmailAndCode(g,m,C=null){return new kl(g,m,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(g){var m=this;return(0,c.Z)(function*(){switch(m.signInMethod){case"password":return function(v,g){return Bh.apply(this,arguments)}(g,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function(v,g){return Rl.apply(this,arguments)}(g,{email:m._email,oobCode:m._password});default:Bt(g,"internal-error")}})()}_linkToIdToken(g,m){var C=this;return(0,c.Z)(function*(){switch(C.signInMethod){case"password":return ag(g,{idToken:m,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function(v,g){return ys.apply(this,arguments)}(g,{idToken:m,email:C._email,oobCode:C._password});default:Bt(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Vr(v,g){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,c.Z)(function*(v,g){return q(v,"POST","/v1/accounts:signInWithIdp",en(v,g))})).apply(this,arguments)}class Ur extends Pl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const m=new Ur(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(m.idToken=g.idToken),g.accessToken&&(m.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(m.nonce=g.nonce),g.pendingToken&&(m.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(m.accessToken=g.oauthToken,m.secret=g.oauthTokenSecret):Bt("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:C,signInMethod:A}=m,N=J(m,["providerId","signInMethod"]);if(!C||!A)return null;const z=new Ur(C,A);return z.idToken=N.idToken||void 0,z.accessToken=N.accessToken||void 0,z.secret=N.secret,z.nonce=N.nonce,z.pendingToken=N.pendingToken||null,z}_getIdTokenResponse(g){return Vr(g,this.buildRequest())}_linkToIdToken(g,m){const C=this.buildRequest();return C.idToken=m,Vr(g,C)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,Vr(g,m)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),g.postBody=(0,U.xO)(m)}return g}}function vs(v,g){return dd.apply(this,arguments)}function dd(){return(dd=(0,c.Z)(function*(v,g){return mt(v,"POST","/v1/accounts:sendVerificationCode",en(v,g))})).apply(this,arguments)}function Vu(){return(Vu=(0,c.Z)(function*(v,g){return q(v,"POST","/v1/accounts:signInWithPhoneNumber",en(v,g))})).apply(this,arguments)}function gi(){return(gi=(0,c.Z)(function*(v,g){const m=yield q(v,"POST","/v1/accounts:signInWithPhoneNumber",en(v,g));if(m.temporaryProof)throw He(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Ll={USER_NOT_FOUND:"user-not-found"};function Sa(){return(Sa=(0,c.Z)(function*(v,g){return q(v,"POST","/v1/accounts:signInWithPhoneNumber",en(v,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Ll)})).apply(this,arguments)}class Zo extends Pl{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,m){return new Zo({verificationId:g,verificationCode:m})}static _fromTokenResponse(g,m){return new Zo({phoneNumber:g,temporaryProof:m})}_getIdTokenResponse(g){return function(v,g){return Vu.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,m){return function(v,g){return gi.apply(this,arguments)}(g,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function(v,g){return Sa.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:m,verificationId:C,verificationCode:A}=this.params;return g&&m?{temporaryProof:g,phoneNumber:m}:{sessionInfo:C,code:A}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:m,verificationCode:C,phoneNumber:A,temporaryProof:N}=g;return C||m||A||N?new Zo({verificationId:m,verificationCode:C,phoneNumber:A,temporaryProof:N}):null}}class on{constructor(g){var m,C,A,N,z,ae;const Oe=(0,U.zd)((0,U.pd)(g)),xe=null!==(m=Oe.apiKey)&&void 0!==m?m:null,Ue=null!==(C=Oe.oobCode)&&void 0!==C?C:null,We=function(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Oe.mode)&&void 0!==A?A:null);Ae(xe&&Ue&&We,"argument-error"),this.apiKey=xe,this.operation=We,this.code=Ue,this.continueUrl=null!==(N=Oe.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(z=Oe.languageCode)&&void 0!==z?z:null,this.tenantId=null!==(ae=Oe.tenantId)&&void 0!==ae?ae:null}static parseLink(g){const m=function(v){const g=(0,U.zd)((0,U.pd)(v)).link,m=g?(0,U.zd)((0,U.pd)(g)).deep_link_id:null,C=(0,U.zd)((0,U.pd)(v)).deep_link_id;return(C?(0,U.zd)((0,U.pd)(C)).link:null)||C||m||g||v}(g);try{return new on(m)}catch(C){return null}}}let Es=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,C){return kl._fromEmailAndPassword(m,C)}static credentialWithLink(m,C){const A=on.parseLink(C);return Ae(A,"argument-error"),kl._fromEmailAndCode(m,A.code,A.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Yi{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class tn extends Yi{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class xa extends tn{static credentialFromJSON(g){const m="string"==typeof g?JSON.parse(g):g;return Ae("providerId"in m&&"signInMethod"in m,"argument-error"),Ur._fromParams(m)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return Ae(g.idToken||g.accessToken,"argument-error"),Ur._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return xa.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return xa.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:m,oauthAccessToken:C,oauthTokenSecret:A,pendingToken:N,nonce:z,providerId:ae}=g;if(!C&&!A&&!m&&!N||!ae)return null;try{return new xa(ae)._credential({idToken:m,accessToken:C,nonce:z,pendingToken:N})}catch(Oe){return null}}}let Uu=(()=>{class v extends tn{constructor(){super("facebook.com")}static credential(m){return Ur._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch(C){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Go=(()=>{class v extends tn{constructor(){super("google.com"),this.addScope("profile")}static credential(m,C){return Ur._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:C})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:C,oauthAccessToken:A}=m;if(!C&&!A)return null;try{return v.credential(C,A)}catch(N){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),mi=(()=>{class v extends tn{constructor(){super("github.com")}static credential(m){return Ur._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch(C){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class po extends Pl{constructor(g,m){super(g,g),this.pendingToken=m}_getIdTokenResponse(g){return Vr(g,this.buildRequest())}_linkToIdToken(g,m){const C=this.buildRequest();return C.idToken=m,Vr(g,C)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,Vr(g,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:C,signInMethod:A,pendingToken:N}=m;return C&&A&&N&&C===A?new po(C,N):null}static _create(g,m){return new po(g,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Pr extends Yi{constructor(g){Ae(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Pr.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Pr.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const m=po.fromJSON(g);return Ae(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:m,providerId:C}=g;if(!m||!C)return null;try{return po._create(C,m)}catch(A){return null}}}let Bu=(()=>{class v extends tn{constructor(){super("twitter.com")}static credential(m,C){return Ur._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:C})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:C,oauthTokenSecret:A}=m;if(!C||!A)return null;try{return v.credential(C,A)}catch(N){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function ju(v,g){return mo.apply(this,arguments)}function mo(){return(mo=(0,c.Z)(function*(v,g){return q(v,"POST","/v1/accounts:signUp",en(v,g))})).apply(this,arguments)}class jn{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,m,C,A=!1){return(0,c.Z)(function*(){const N=yield pi._fromIdTokenResponse(g,C,A),z=Vl(C);return new jn({user:N,providerId:z,_tokenResponse:C,operationType:m})})()}static _forOperation(g,m,C){return(0,c.Z)(function*(){yield g._updateTokensIfNecessary(C,!0);const A=Vl(C);return new jn({user:g,providerId:A,_tokenResponse:C,operationType:m})})()}}function Vl(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function at(){return(at=(0,c.Z)(function*(v){var g;const m=mn(v);if(yield m._initializationPromise,null===(g=m.currentUser)||void 0===g?void 0:g.isAnonymous)return new jn({user:m.currentUser,providerId:null,operationType:"signIn"});const C=yield ju(m,{returnSecureToken:!0}),A=yield jn._fromIdTokenResponse(m,"signIn",C,!0);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class Hu extends U.ZR{constructor(g,m,C,A){var N;super(m.code,m.message),this.operationType=C,this.user=A,Object.setPrototypeOf(this,Hu.prototype),this.customData={appName:g.name,tenantId:null!==(N=g.tenantId)&&void 0!==N?N:void 0,_serverResponse:m.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(g,m,C,A){return new Hu(g,m,C,A)}}function zh(v,g,m,C){return("reauthenticate"===g?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?Hu._fromErrorAndOperation(v,N,g,C):N})}function $u(v){return new Set(v.map(({providerId:g})=>g).filter(g=>!!g))}function Bl(){return(Bl=(0,c.Z)(function*(v,g){const m=(0,U.m9)(v);yield Ie(!0,m,g);const{providerUserInfo:C}=yield Vn(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[g]}),A=$u(C||[]);return m.providerData=m.providerData.filter(N=>A.has(N.providerId)),A.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function fd(v,g){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,c.Z)(function*(v,g,m=!1){const C=yield Si(v,g._linkToIdToken(v.auth,yield v.getIdToken()),m);return jn._forOperation(v,"link",C)})).apply(this,arguments)}function Ie(v,g,m){return At.apply(this,arguments)}function At(){return(At=(0,c.Z)(function*(v,g,m){yield $o(g);const A=!1===v?"provider-already-linked":"no-such-provider";Ae($u(g.providerData).has(m)===v,g.auth,A)})).apply(this,arguments)}function qu(v,g){return un.apply(this,arguments)}function un(){return(un=(0,c.Z)(function*(v,g,m=!1){const{auth:C}=v,A="reauthenticate";try{const N=yield Si(v,zh(C,A,g,v),m);Ae(N.idToken,C,"internal-error");const z=Ho(N.idToken);Ae(z,C,"internal-error");const{sub:ae}=z;return Ae(v.uid===ae,C,"user-mismatch"),jn._forOperation(v,A,N)}catch(N){throw"auth/user-not-found"===(null==N?void 0:N.code)&&Bt(C,"user-mismatch"),N}})).apply(this,arguments)}function Zu(v,g){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,c.Z)(function*(v,g,m=!1){const C="signIn",A=yield zh(v,C,g),N=yield jn._fromIdTokenResponse(v,C,A);return m||(yield v._updateCurrentUser(N.user)),N})).apply(this,arguments)}function Br(v,g){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,c.Z)(function*(v,g){return Zu(mn(v),g)})).apply(this,arguments)}function jl(v,g){return Kh.apply(this,arguments)}function Kh(){return(Kh=(0,c.Z)(function*(v,g){const m=(0,U.m9)(v);return yield Ie(!1,m,g.providerId),fd(m,g)})).apply(this,arguments)}function pd(v,g){return Na.apply(this,arguments)}function Na(){return(Na=(0,c.Z)(function*(v,g){return qu((0,U.m9)(v),g)})).apply(this,arguments)}function Ma(v,g){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,c.Z)(function*(v,g){return q(v,"POST","/v1/accounts:signInWithCustomToken",en(v,g))})).apply(this,arguments)}function Hl(){return(Hl=(0,c.Z)(function*(v,g){const m=mn(v),C=yield Ma(m,{token:g,returnSecureToken:!0}),A=yield jn._fromIdTokenResponse(m,"signIn",C);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class Mi{constructor(g,m){this.factorId=g,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(g,m){return"phoneInfo"in m?jr._fromServerResponse(g,m):Bt(g,"internal-error")}}class jr extends Mi{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,m){return new jr(m)}}function gd(v,g,m){var C;Ae((null===(C=m.url)||void 0===C?void 0:C.length)>0,v,"invalid-continue-uri"),Ae(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),g.continueUrl=m.url,g.dynamicLinkDomain=m.dynamicLinkDomain,g.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(Ae(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),g.iOSBundleId=m.iOS.bundleId),m.android&&(Ae(m.android.packageName.length>0,v,"missing-android-pkg-name"),g.androidInstallApp=m.android.installApp,g.androidMinimumVersionCode=m.android.minimumVersion,g.androidPackageName=m.android.packageName)}function $l(){return($l=(0,c.Z)(function*(v,g,m){const C=(0,U.m9)(v),A={requestType:"PASSWORD_RESET",email:g};m&&gd(C,A,m),yield $_(C,A)})).apply(this,arguments)}function ql(){return(ql=(0,c.Z)(function*(v,g,m){yield Vh((0,U.m9)(v),{oobCode:g,newPassword:m})})).apply(this,arguments)}function zu(){return(zu=(0,c.Z)(function*(v,g){yield j_((0,U.m9)(v),{oobCode:g})})).apply(this,arguments)}function Oa(v,g){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,c.Z)(function*(v,g){const m=(0,U.m9)(v),C=yield Vh(m,{oobCode:g}),A=C.requestType;switch(Ae(A,m,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ae(C.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ae(C.mfaInfo,m,"internal-error");default:Ae(C.email,m,"internal-error")}let N=null;return C.mfaInfo&&(N=Mi._fromServerResponse(mn(m),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:N},operation:A}})).apply(this,arguments)}function zo(){return(zo=(0,c.Z)(function*(v,g){const{data:m}=yield Oa((0,U.m9)(v),g);return m.email})).apply(this,arguments)}function yd(){return(yd=(0,c.Z)(function*(v,g,m){const C=mn(v),A=yield ju(C,{returnSecureToken:!0,email:g,password:m}),N=yield jn._fromIdTokenResponse(C,"signIn",A);return yield C._updateCurrentUser(N.user),N})).apply(this,arguments)}function Ls(){return(Ls=(0,c.Z)(function*(v,g,m){const C=(0,U.m9)(v),A={requestType:"EMAIL_SIGNIN",email:g};Ae(m.handleCodeInApp,C,"argument-error"),m&&gd(C,A,m),yield $h(C,A)})).apply(this,arguments)}function lr(){return(lr=(0,c.Z)(function*(v,g,m){const C=(0,U.m9)(v),A=Es.credentialWithLink(g,m||tt());return Ae(A._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),Br(C,A)})).apply(this,arguments)}function ka(v,g){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,c.Z)(function*(v,g){return mt(v,"POST","/v1/accounts:createAuthUri",en(v,g))})).apply(this,arguments)}function dg(){return(dg=(0,c.Z)(function*(v,g){const C={identifier:g,continueUri:ot()?tt():"http://localhost"},{signinMethods:A}=yield ka((0,U.m9)(v),C);return A||[]})).apply(this,arguments)}function Fa(){return(Fa=(0,c.Z)(function*(v,g){const m=(0,U.m9)(v),A={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};g&&gd(m.auth,A,g);const{email:N}=yield H_(m.auth,A);N!==v.email&&(yield v.reload())})).apply(this,arguments)}function La(){return(La=(0,c.Z)(function*(v,g,m){const C=(0,U.m9)(v),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:g};m&&gd(C.auth,N,m);const{email:z}=yield Fu(C.auth,N);z!==v.email&&(yield v.reload())})).apply(this,arguments)}function Wu(v,g){return _o.apply(this,arguments)}function _o(){return(_o=(0,c.Z)(function*(v,g){return mt(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Mn(){return(Mn=(0,c.Z)(function*(v,{displayName:g,photoURL:m}){if(void 0===g&&void 0===m)return;const C=(0,U.m9)(v),N={idToken:yield C.getIdToken(),displayName:g,photoUrl:m,returnSecureToken:!0},z=yield Si(C,Wu(C.auth,N));C.displayName=z.displayName||null,C.photoURL=z.photoUrl||null;const ae=C.providerData.find(({providerId:Oe})=>"password"===Oe);ae&&(ae.displayName=C.displayName,ae.photoURL=C.photoURL),yield C._updateTokensIfNecessary(z)})).apply(this,arguments)}function Vs(v,g,m){return Va.apply(this,arguments)}function Va(){return(Va=(0,c.Z)(function*(v,g,m){const{auth:C}=v,N={idToken:yield v.getIdToken(),returnSecureToken:!0};g&&(N.email=g),m&&(N.password=m);const z=yield Si(v,ag(C,N));yield v._updateTokensIfNecessary(z,!0)})).apply(this,arguments)}class Ua{constructor(g,m,C={}){this.isNewUser=g,this.providerId=m,this.profile=C}}class yo extends Ua{constructor(g,m,C,A){super(g,m,C),this.username=A}}class Cd extends Ua{constructor(g,m){super(g,"facebook.com",m)}}class bd extends yo{constructor(g,m){super(g,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class G_ extends Ua{constructor(g,m){super(g,"google.com",m)}}class z_ extends yo{constructor(g,m,C){super(g,"twitter.com",m,C)}}function Qi(v){const{user:g,_tokenResponse:m}=v;return g.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function(v){var g,m;if(!v)return null;const{providerId:C}=v,A=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},N=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!C&&(null==v?void 0:v.idToken)){const z=null===(m=null===(g=Ho(v.idToken))||void 0===g?void 0:g.firebase)||void 0===m?void 0:m.sign_in_provider;if(z)return new Ua(N,"anonymous"!==z&&"custom"!==z?z:null)}if(!C)return null;switch(C){case"facebook.com":return new Cd(N,A);case"github.com":return new bd(N,A);case"google.com":return new G_(N,A);case"twitter.com":return new z_(N,A,v.screenName||null);case"custom":case"anonymous":return new Ua(N,null);default:return new Ua(N,C,A)}}(m)}class _i{constructor(g,m){this.type=g,this.credential=m}static _fromIdtoken(g){return new _i("enroll",g)}static _fromMfaPendingCredential(g){return new _i("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var m,C;if(null==g?void 0:g.multiFactorSession){if(null===(m=g.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return _i._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(C=g.multiFactorSession)||void 0===C?void 0:C.idToken)return _i._fromIdtoken(g.multiFactorSession.idToken)}return null}}class zl{constructor(g,m,C){this.session=g,this.hints=m,this.signInResolver=C}static _fromError(g,m){const C=mn(g),A=m.customData._serverResponse,N=(A.mfaInfo||[]).map(ae=>Mi._fromServerResponse(C,ae));Ae(A.mfaPendingCredential,C,"internal-error");const z=_i._fromMfaPendingCredential(A.mfaPendingCredential);return new zl(z,N,function(){var ae=(0,c.Z)(function*(Oe){const xe=yield Oe._process(C,z);delete A.mfaInfo,delete A.mfaPendingCredential;const Ue=Object.assign(Object.assign({},A),{idToken:xe.idToken,refreshToken:xe.refreshToken});switch(m.operationType){case"signIn":const We=yield jn._fromIdTokenResponse(C,m.operationType,Ue);return yield C._updateCurrentUser(We.user),We;case"reauthenticate":return Ae(m.user,C,"internal-error"),jn._forOperation(m.user,m.operationType,Ue);default:Bt(C,"internal-error")}});return function(Oe){return ae.apply(this,arguments)}}())}resolveSignIn(g){var m=this;return(0,c.Z)(function*(){return m.signInResolver(g)})()}}function rC(v,g){return mt(v,"POST","/v2/accounts/mfaEnrollment:start",en(v,g))}class sf{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(C=>Mi._fromServerResponse(g.auth,C)))})}static _fromUser(g){return new sf(g)}getSession(){var g=this;return(0,c.Z)(function*(){return _i._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,m){var C=this;return(0,c.Z)(function*(){const A=g,N=yield C.getSession(),z=yield Si(C.user,A._process(C.user.auth,N,m));return yield C.user._updateTokensIfNecessary(z),C.user.reload()})()}unenroll(g){var m=this;return(0,c.Z)(function*(){const C="string"==typeof g?g:g.uid,A=yield m.user.getIdToken(),N=yield Si(m.user,function(v,g){return mt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",en(v,g))}(m.user.auth,{idToken:A,mfaEnrollmentId:C}));m.enrolledFactors=m.enrolledFactors.filter(({uid:z})=>z!==C),yield m.user._updateTokensIfNecessary(N);try{yield m.user.reload()}catch(z){if("auth/user-token-expired"!==z.code)throw z}})()}}const Yu=new WeakMap,Wo="__sak";class rt{constructor(g,m){this.storageRetriever=g,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Wo,"1"),this.storage.removeItem(Wo),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,m){return this.storage.setItem(g,JSON.stringify(m)),Promise.resolve()}_get(g){const m=this.storage.getItem(g);return Promise.resolve(m?JSON.parse(m):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const $r=(()=>{class v extends rt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,C)=>this.onStorageEvent(m,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const v=(0,U.z$)();return fr(v)||Ia(v)}()&&function(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=ks(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const C of Object.keys(this.listeners)){const A=this.storage.getItem(C),N=this.localCache[C];A!==N&&m(C,N,A)}}onStorageEvent(m,C=!1){if(!m.key)return void this.forAllChangedKeys((ae,Oe,xe)=>{this.notifyListeners(ae,xe)});const A=m.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ae=this.storage.getItem(A);if(m.newValue!==ae)null!==m.newValue?this.storage.setItem(A,m.newValue):this.storage.removeItem(A);else if(this.localCache[A]===m.newValue&&!C)return}const N=()=>{const ae=this.storage.getItem(A);!C&&this.localCache[A]===ae||this.notifyListeners(A,ae)},z=this.storage.getItem(A);(0,U.w1)()&&10===document.documentMode&&z!==m.newValue&&m.newValue!==m.oldValue?setTimeout(N,10):N()}notifyListeners(m,C){this.localCache[m]=C;const A=this.listeners[m];if(A)for(const N of Array.from(A))N(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,C,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:C,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(C)}_removeListener(m,C){this.listeners[m]&&(this.listeners[m].delete(C),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,C){var A=()=>super._set,N=this;return(0,c.Z)(function*(){yield A().call(N,m,C),N.localCache[m]=JSON.stringify(C)})()}_get(m){var C=()=>super._get,A=this;return(0,c.Z)(function*(){const N=yield C().call(A,m);return A.localCache[m]=JSON.stringify(N),N})()}_remove(m){var C=()=>super._remove,A=this;return(0,c.Z)(function*(){yield C().call(A,m),delete A.localCache[m]})()}}return v.type="LOCAL",v})(),yi=(()=>{class v extends rt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,C){}_removeListener(m,C){}}return v.type="SESSION",v})();let _g=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const C=this.receivers.find(N=>N.isListeningto(m));if(C)return C;const A=new v(m);return this.receivers.push(A),A}isListeningto(m){return this.eventTarget===m}handleEvent(m){var C=this;return(0,c.Z)(function*(){const A=m,{eventId:N,eventType:z,data:ae}=A.data,Oe=C.handlersMap[z];if(!(null==Oe?void 0:Oe.size))return;A.ports[0].postMessage({status:"ack",eventId:N,eventType:z});const xe=Array.from(Oe).map(function(){var We=(0,c.Z)(function*(St){return St(A.origin,ae)});return function(St){return We.apply(this,arguments)}}()),Ue=yield function(v){return Promise.all(v.map(function(){var g=(0,c.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(C){return{fulfilled:!1,reason:C}}});return function(m){return g.apply(this,arguments)}}()))}(xe);A.ports[0].postMessage({status:"done",eventId:N,eventType:z,response:Ue})})()}_subscribe(m,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(C)}_unsubscribe(m,C){this.handlersMap[m]&&C&&this.handlersMap[m].delete(C),(!C||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Bs(v="",g=10){let m="";for(let C=0;C<g;C++)m+=Math.floor(10*Math.random());return v+m}class vi{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,m,C=50){var A=this;return(0,c.Z)(function*(){const N="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let z,ae;return new Promise((Oe,xe)=>{const Ue=Bs("",20);N.port1.start();const We=setTimeout(()=>{xe(new Error("unsupported_event"))},C);ae={messageChannel:N,onMessage(St){const On=St;if(On.data.eventId===Ue)switch(On.data.status){case"ack":clearTimeout(We),z=setTimeout(()=>{xe(new Error("timeout"))},3e3);break;case"done":clearTimeout(z),Oe(On.data.response);break;default:clearTimeout(We),clearTimeout(z),xe(new Error("invalid_response"))}}},A.handlers.add(ae),N.port1.addEventListener("message",ae.onMessage),A.target.postMessage({eventType:g,eventId:Ue,data:m},[N.port2])}).finally(()=>{ae&&A.removeMessageHandler(ae)})})()}}function Qn(){return window}function Ju(){return void 0!==Qn().WorkerGlobalScope&&"function"==typeof Qn().importScripts}function Kl(){return(Kl=(0,c.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const Co="firebaseLocalStorageDb",Ji="firebaseLocalStorage",$a="fbase_key";class bo{constructor(g){this.request=g}toPromise(){return new Promise((g,m)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Xi(v,g){return v.transaction([Ji],g?"readwrite":"readonly").objectStore(Ji)}function Yl(){const v=indexedDB.open(Co,1);return new Promise((g,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const C=v.result;try{C.createObjectStore(Ji,{keyPath:$a})}catch(A){m(A)}}),v.addEventListener("success",(0,c.Z)(function*(){const C=v.result;C.objectStoreNames.contains(Ji)?g(C):(C.close(),yield function(){const v=indexedDB.deleteDatabase(Co);return new bo(v).toPromise()}(),g(yield Yl()))}))})}function $n(v,g,m){return Td.apply(this,arguments)}function Td(){return(Td=(0,c.Z)(function*(v,g,m){const C=Xi(v,!0).put({[$a]:g,value:m});return new bo(C).toPromise()})).apply(this,arguments)}function cn(){return(cn=(0,c.Z)(function*(v,g){const m=Xi(v,!1).get(g),C=yield new bo(m).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function Xu(v,g){const m=Xi(v,!0).delete(g);return new bo(m).toPromise()}const Jl=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,c.Z)(function*(){return m.db||(m.db=yield Yl()),m.db})()}_withRetries(m){var C=this;return(0,c.Z)(function*(){let A=0;for(;;)try{const N=yield C._openDb();return yield m(N)}catch(N){if(A++>3)throw N;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,c.Z)(function*(){return Ju()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,c.Z)(function*(){m.receiver=_g._getInstance(Ju()?self:null),m.receiver._subscribe("keyChanged",function(){var C=(0,c.Z)(function*(A,N){return{keyProcessed:(yield m._poll()).includes(N.key)}});return function(A,N){return C.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var C=(0,c.Z)(function*(A,N){return["keyChanged"]});return function(A,N){return C.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,c.Z)(function*(){var C,A;if(m.activeServiceWorker=yield function(){return Kl.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new vi(m.activeServiceWorker);const N=yield m.sender._send("ping",{},800);!N||(null===(C=N[0])||void 0===C?void 0:C.fulfilled)&&(null===(A=N[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var C=this;return(0,c.Z)(function*(){if(C.sender&&C.activeServiceWorker&&function(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:m},C.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,c.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Yl();return yield $n(m,Wo,"1"),yield Xu(m,Wo),!0}catch(m){}return!1})()}_withPendingWrite(m){var C=this;return(0,c.Z)(function*(){C.pendingWrites++;try{yield m()}finally{C.pendingWrites--}})()}_set(m,C){var A=this;return(0,c.Z)(function*(){return A._withPendingWrite((0,c.Z)(function*(){return yield A._withRetries(N=>$n(N,m,C)),A.localCache[m]=C,A.notifyServiceWorker(m)}))})()}_get(m){var C=this;return(0,c.Z)(function*(){const A=yield C._withRetries(N=>function(v,g){return cn.apply(this,arguments)}(N,m));return C.localCache[m]=A,A})()}_remove(m){var C=this;return(0,c.Z)(function*(){return C._withPendingWrite((0,c.Z)(function*(){return yield C._withRetries(A=>Xu(A,m)),delete C.localCache[m],C.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,c.Z)(function*(){const C=yield m._withRetries(z=>{const ae=Xi(z,!1).getAll();return new bo(ae).toPromise()});if(!C)return[];if(0!==m.pendingWrites)return[];const A=[],N=new Set;for(const{fbase_key:z,value:ae}of C)N.add(z),JSON.stringify(m.localCache[z])!==JSON.stringify(ae)&&(m.notifyListeners(z,ae),A.push(z));for(const z of Object.keys(m.localCache))m.localCache[z]&&!N.has(z)&&(m.notifyListeners(z,null),A.push(z));return A})()}notifyListeners(m,C){this.localCache[m]=C;const A=this.listeners[m];if(A)for(const N of Array.from(A))N(C)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,c.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(C)}_removeListener(m,C){this.listeners[m]&&(this.listeners[m].delete(C),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function K_(v,g){return mt(v,"POST","/v2/accounts/mfaSignIn:start",en(v,g))}function vg(){return(vg=(0,c.Z)(function*(v){return(yield mt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function uf(v){return new Promise((g,m)=>{const C=document.createElement("script");C.setAttribute("src",v),C.onload=g,C.onerror=A=>{const N=xn("internal-error");N.customData=A,m(N)},C.type="text/javascript",C.charset="UTF-8",function(){var v,g;return null!==(g=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==g?g:document}().appendChild(C)})}function qa(v){return`__${v}${Math.floor(1e6*Math.random())}`}const js=1e12;class Yo{constructor(g){this.auth=g,this.counter=js,this._widgets=new Map}render(g,m){const C=this.counter;return this._widgets.set(C,new Cg(g,this.auth.name,m||{})),this.counter++,C}reset(g){var m;const C=g||js;null===(m=this._widgets.get(C))||void 0===m||m.delete(),this._widgets.delete(C)}getResponse(g){var m;return(null===(m=this._widgets.get(g||js))||void 0===m?void 0:m.getResponse())||""}execute(g){var m=this;return(0,c.Z)(function*(){var C;return null===(C=m._widgets.get(g||js))||void 0===C||C.execute(),""})()}}class Cg{constructor(g,m,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof g?document.getElementById(g):g;Ae(A,"argument-error",{appName:m}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(v){const g=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<50;C++)g.push(m.charAt(Math.floor(Math.random()*m.length)));return g.join("")}();const{callback:g,"expired-callback":m}=this.params;if(g)try{g(this.responseToken)}catch(C){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(C){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ni=qa("rcb"),ws=new Yt(3e4,6e4);class Oi{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Qn().grecaptcha}load(g,m=""){return Ae((v=m).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v),g,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(Qn().grecaptcha):new Promise((C,A)=>{const N=Qn().setTimeout(()=>{A(xn(g,"network-request-failed"))},ws.get());Qn()[ni]=()=>{Qn().clearTimeout(N),delete Qn()[ni];const ae=Qn().grecaptcha;if(!ae)return void A(xn(g,"internal-error"));const Oe=ae.render;ae.render=(xe,Ue)=>{const We=Oe(xe,Ue);return this.counter++,We},this.hostLanguage=m,C(ae)},uf(`https://www.google.com/recaptcha/api.js??${(0,U.xO)({onload:ni,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(N),A(xn(g,"internal-error"))})});var v}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){return!!Qn().grecaptcha&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class bg{load(g){return(0,c.Z)(function*(){return new Yo(g)})()}clearedOneInstance(){}}const df="recaptcha",Qo={theme:"light",type:"image"};class oC{constructor(g,m=Object.assign({},Qo),C){this.parameters=m,this.type=df,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=mn(C),this.isInvisible="invisible"===this.parameters.size,Ae("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof g?document.getElementById(g):g;Ae(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new bg:new Oi,this.validateStartingState()}verify(){var g=this;return(0,c.Z)(function*(){g.assertNotDestroyed();const m=yield g.render(),C=g.getAssertedRecaptcha();return C.getResponse(m)||new Promise(N=>{const z=ae=>{!ae||(g.tokenChangeListeners.delete(z),N(ae))};g.tokenChangeListeners.add(z),g.isInvisible&&C.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){Ae(!this.parameters.sitekey,this.auth,"argument-error"),Ae(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ae("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return m=>{if(this.tokenChangeListeners.forEach(C=>C(m)),"function"==typeof g)g(m);else if("string"==typeof g){const C=Qn()[g];"function"==typeof C&&C(m)}}}assertNotDestroyed(){Ae(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,c.Z)(function*(){if(yield g.init(),!g.widgetId){let m=g.container;if(!g.isInvisible){const C=document.createElement("div");m.appendChild(C),m=C}g.widgetId=g.getAssertedRecaptcha().render(m,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,c.Z)(function*(){Ae(ot()&&!Ju(),g.auth,"internal-error"),yield function(){let v=null;return new Promise(g=>{"complete"!==document.readyState?(v=()=>g(),window.addEventListener("load",v)):g()}).catch(g=>{throw v&&window.removeEventListener("load",v),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const m=yield function(v){return vg.apply(this,arguments)}(g.auth);Ae(m,g.auth,"internal-error"),g.parameters.sitekey=m})()}getAssertedRecaptcha(){return Ae(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class yn{constructor(g,m){this.verificationId=g,this.onConfirmation=m}confirm(g){const m=Zo._fromVerification(this.verificationId,g);return this.onConfirmation(m)}}function Jo(){return(Jo=(0,c.Z)(function*(v,g,m){const C=mn(v),A=yield x(C,g,(0,U.m9)(m));return new yn(A,N=>Br(C,N))})).apply(this,arguments)}function Id(){return(Id=(0,c.Z)(function*(v,g,m){const C=(0,U.m9)(v);yield Ie(!1,C,"phone");const A=yield x(C.auth,g,(0,U.m9)(m));return new yn(A,N=>jl(C,N))})).apply(this,arguments)}function T(){return(T=(0,c.Z)(function*(v,g,m){const C=(0,U.m9)(v),A=yield x(C.auth,g,(0,U.m9)(m));return new yn(A,N=>pd(C,N))})).apply(this,arguments)}function x(v,g,m){return M.apply(this,arguments)}function M(){return(M=(0,c.Z)(function*(v,g,m){var C;const A=yield m.verify();try{let N;if(Ae("string"==typeof A,v,"argument-error"),Ae(m.type===df,v,"argument-error"),N="string"==typeof g?{phoneNumber:g}:g,"session"in N){const z=N.session;if("phoneNumber"in N)return Ae("enroll"===z.type,v,"internal-error"),(yield rC(v,{idToken:z.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{Ae("signin"===z.type,v,"internal-error");const ae=(null===(C=N.multiFactorHint)||void 0===C?void 0:C.uid)||N.multiFactorUid;return Ae(ae,v,"missing-multi-factor-info"),(yield K_(v,{mfaPendingCredential:z.credential,mfaEnrollmentId:ae,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:z}=yield vs(v,{phoneNumber:N.phoneNumber,recaptchaToken:A});return z}}finally{m._reset()}})).apply(this,arguments)}function X(){return(X=(0,c.Z)(function*(v,g){yield fd((0,U.m9)(v),g)})).apply(this,arguments)}let ue=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=mn(m)}verifyPhoneNumber(m,C){return x(this.auth,m,(0,U.m9)(C))}static credential(m,C){return Zo._fromVerification(m,C)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:C,temporaryProof:A}=m;return C&&A?Zo._fromTokenResponse(C,A):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function De(v,g){return g?Wt(g):(Ae(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Be extends Pl{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Vr(g,this._buildIdpRequest())}_linkToIdToken(g,m){return Vr(g,this._buildIdpRequest(m))}_getReauthenticationResolver(g){return Vr(g,this._buildIdpRequest())}_buildIdpRequest(g){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(m.idToken=g),m}}function $e(v){return Zu(v.auth,new Be(v),v.bypassAuthState)}function Rt(v){const{auth:g,user:m}=v;return Ae(m,g,"internal-error"),qu(m,new Be(v),v.bypassAuthState)}function Qt(v){return bn.apply(this,arguments)}function bn(){return(bn=(0,c.Z)(function*(v){const{auth:g,user:m}=v;return Ae(m,g,"internal-error"),fd(m,new Be(v),v.bypassAuthState)})).apply(this,arguments)}class Ei{constructor(g,m,C,A,N=!1){this.auth=g,this.resolver=C,this.user=A,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var g=this;return new Promise(function(){var m=(0,c.Z)(function*(C,A){g.pendingPromise={resolve:C,reject:A};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(N){g.reject(N)}});return function(C,A){return m.apply(this,arguments)}}())}onAuthEvent(g){var m=this;return(0,c.Z)(function*(){const{urlResponse:C,sessionId:A,postBody:N,tenantId:z,error:ae,type:Oe}=g;if(ae)return void m.reject(ae);const xe={auth:m.auth,requestUri:C,sessionId:A,tenantId:z||void 0,postBody:N||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Oe)(xe))}catch(Ue){m.reject(Ue)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return $e;case"linkViaPopup":case"linkViaRedirect":return Qt;case"reauthViaPopup":case"reauthViaRedirect":return Rt;default:Bt(this.auth,"internal-error")}}resolve(g){Wn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Wn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Xn=new Yt(2e3,1e4);function To(){return(To=(0,c.Z)(function*(v,g,m){const C=mn(v);Zi(v,g,Yi);const A=De(C,m);return new wg(C,"signInViaPopup",g,A).executeNotNull()})).apply(this,arguments)}function Nr(){return(Nr=(0,c.Z)(function*(v,g,m){const C=(0,U.m9)(v);Zi(C.auth,g,Yi);const A=De(C.auth,m);return new wg(C.auth,"reauthViaPopup",g,A,C).executeNotNull()})).apply(this,arguments)}function Hs(){return(Hs=(0,c.Z)(function*(v,g,m){const C=(0,U.m9)(v);Zi(C.auth,g,Yi);const A=De(C.auth,m);return new wg(C.auth,"linkViaPopup",g,A,C).executeNotNull()})).apply(this,arguments)}let wg=(()=>{class v extends Ei{constructor(m,C,A,N,z){super(m,C,N,z),this.provider=A,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,c.Z)(function*(){const C=yield m.execute();return Ae(C,m.auth,"internal-error"),C})()}onExecution(){var m=this;return(0,c.Z)(function*(){Wn(1===m.filter.length,"Popup operations only handle one event");const C=Bs();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],C),m.authWindow.associatedEvent=C,m.resolver._originValidation(m.auth).catch(A=>{m.reject(A)}),m.resolver._isIframeWebStorageSupported(m.auth,A=>{A||m.reject(xn(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(xn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var C,A;this.pollId=(null===(A=null===(C=this.authWindow)||void 0===C?void 0:C.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(xn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,Xn.get())};m()}}return v.currentPopupAction=null,v})();const tc=new Map;class Q_ extends Ei{constructor(g,m,C=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,C),this.eventId=null}execute(){var g=()=>super.execute,m=this;return(0,c.Z)(function*(){let C=tc.get(m.auth._key());if(!C){try{const N=(yield function(v,g){return tu.apply(this,arguments)}(m.resolver,m.auth))?yield g().call(m):null;C=()=>Promise.resolve(N)}catch(A){C=()=>Promise.reject(A)}tc.set(m.auth._key(),C)}return m.bypassAuthState||tc.set(m.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(g){var m=()=>super.onAuthEvent,C=this;return(0,c.Z)(function*(){if("signInViaRedirect"===g.type)return m().call(C,g);if("unknown"!==g.type){if(g.eventId){const A=yield C.auth._redirectUserForId(g.eventId);if(A)return C.user=A,m().call(C,g);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,c.Z)(function*(){})()}cleanUp(){}}function tu(){return(tu=(0,c.Z)(function*(v,g){const m=ts(g),C=aC(v);if(!(yield C._isAvailable()))return!1;const A="true"===(yield C._get(m));return yield C._remove(m),A})).apply(this,arguments)}function nc(v,g){return Io.apply(this,arguments)}function Io(){return(Io=(0,c.Z)(function*(v,g){return aC(v)._set(ts(g),"true")})).apply(this,arguments)}function aC(v){return Wt(v._redirectPersistence)}function ts(v){return ti("pendingRedirect",v.config.apiKey,v.name)}function Ts(){return(Ts=(0,c.Z)(function*(v,g,m){const C=mn(v);Zi(v,g,Yi);const A=De(C,m);return yield nc(A,C),A._openRedirect(C,g,"signInViaRedirect")})).apply(this,arguments)}function rc(){return(rc=(0,c.Z)(function*(v,g,m){const C=(0,U.m9)(v);Zi(C.auth,g,Yi);const A=De(C.auth,m);yield nc(A,C.auth);const N=yield uC(C);return A._openRedirect(C.auth,g,"reauthViaRedirect",N)})).apply(this,arguments)}function Tg(){return(Tg=(0,c.Z)(function*(v,g,m){const C=(0,U.m9)(v);Zi(C.auth,g,Yi);const A=De(C.auth,m);yield Ie(!1,C,g.providerId),yield nc(A,C.auth);const N=yield uC(C);return A._openRedirect(C.auth,g,"linkViaRedirect",N)})).apply(this,arguments)}function Ga(){return(Ga=(0,c.Z)(function*(v,g){return yield mn(v)._initializationPromise,za(v,g,!1)})).apply(this,arguments)}function za(v,g){return pf.apply(this,arguments)}function pf(){return(pf=(0,c.Z)(function*(v,g,m=!1){const C=mn(v),A=De(C,g),z=yield new Q_(C,A,m).execute();return z&&!m&&(delete z.user._redirectEventId,yield C._persistUserIfCurrent(z.user),yield C._setRedirectUser(null,g)),z})).apply(this,arguments)}function uC(v){return Do.apply(this,arguments)}function Do(){return(Do=(0,c.Z)(function*(v){const g=Bs(`${v.uid}:::`);return v._redirectEventId=g,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),g})).apply(this,arguments)}class cC{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let m=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(g,C)&&(m=!0,this.sendToConsumer(g,C),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ny(v);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=g,m=!0)),m}sendToConsumer(g,m){var C;if(g.error&&!ny(g)){const A=(null===(C=g.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";m.onError(xn(this.auth,A))}else m.onAuthEvent(g)}isEventForConsumer(g,m){const C=null===m.eventId||!!g.eventId&&g.eventId===m.eventId;return m.filter.includes(g.type)&&C}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ig(g))}saveEventToCache(g){this.cachedEventUids.add(Ig(g)),this.lastProcessedEventTime=Date.now()}}function Ig(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(g=>g).join("-")}function ny({type:v,error:g}){return"unknown"===v&&"auth/no-auth-event"===(null==g?void 0:g.code)}function Ad(v){return rs.apply(this,arguments)}function rs(){return(rs=(0,c.Z)(function*(v,g={}){return mt(v,"GET","/v1/projects",g)})).apply(this,arguments)}const Wa=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Sd=/^https?/;function iy(){return(iy=(0,c.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:g}=yield Ad(v);for(const m of g)try{if(gf(m))return}catch(C){}Bt(v,"unauthorized-domain")})).apply(this,arguments)}function gf(v){const g=tt(),{protocol:m,hostname:C}=new URL(g);if(v.startsWith("chrome-extension://")){const z=new URL(v);return""===z.hostname&&""===C?"chrome-extension:"===m&&v.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===m&&z.hostname===C}if(!Sd.test(m))return!1;if(Wa.test(v))return C===v;const A=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(C)}const Dg=new Yt(3e4,6e4);function Ag(){const v=Qn().___jsl;if(null==v?void 0:v.H)for(const g of Object.keys(v.H))if(v.H[g].r=v.H[g].r||[],v.H[g].L=v.H[g].L||[],v.H[g].r=[...v.H[g].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let xd=null;function Ka(v){return xd=xd||function(v){return new Promise((g,m)=>{var C,A,N;function z(){Ag(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Ag(),m(xn(v,"network-request-failed"))},timeout:Dg.get()})}if(null===(A=null===(C=Qn().gapi)||void 0===C?void 0:C.iframes)||void 0===A?void 0:A.Iframe)g(gapi.iframes.getContext());else{if(!(null===(N=Qn().gapi)||void 0===N?void 0:N.load)){const ae=qa("iframefcb");return Qn()[ae]=()=>{gapi.load?z():m(xn(v,"network-request-failed"))},uf(`https://apis.google.com/js/api.js?onload=${ae}`)}z()}}).catch(g=>{throw xd=null,g})}(v),xd}const oy=new Yt(5e3,15e3),pC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ao(v){const g=v.config;Ae(g.authDomain,v,"auth-domain-config-required");const m=g.emulator?Fe(g,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,C={apiKey:g.apiKey,appName:v.name,v:de.SDK_VERSION},A=gC.get(v.config.apiHost);A&&(C.eid=A);const N=v._getFrameworks();return N.length&&(C.fw=N.join(",")),`${m}?${(0,U.xO)(C).slice(1)}`}function mf(){return(mf=(0,c.Z)(function*(v){const g=yield Ka(v),m=Qn().gapi;return Ae(m,v,"internal-error"),g.open({where:document.body,url:Ao(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pC,dontclear:!0},C=>new Promise(function(){var A=(0,c.Z)(function*(N,z){yield C.restyle({setHideOnLeave:!1});const ae=xn(v,"network-request-failed"),Oe=Qn().setTimeout(()=>{z(ae)},oy.get());function xe(){Qn().clearTimeout(Oe),N(C)}C.ping(xe).then(xe,()=>{z(ae)})});return function(N,z){return A.apply(this,arguments)}}()))})).apply(this,arguments)}const ic={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class xg{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function yC(v,g,m,C,A,N){Ae(v.config.authDomain,v,"auth-domain-config-required"),Ae(v.config.apiKey,v,"invalid-api-key");const z={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:C,v:de.SDK_VERSION,eventId:A};if(g instanceof Yi){g.setDefaultLanguage(v.languageCode),z.providerId=g.providerId||"",(0,U.xb)(g.getCustomParameters())||(z.customParameters=JSON.stringify(g.getCustomParameters()));for(const[Oe,xe]of Object.entries(N||{}))z[Oe]=xe}if(g instanceof tn){const Oe=g.getScopes().filter(xe=>""!==xe);Oe.length>0&&(z.scopes=Oe.join(","))}v.tenantId&&(z.tid=v.tenantId);const ae=z;for(const Oe of Object.keys(ae))void 0===ae[Oe]&&delete ae[Oe];return`${function({config:v}){return v.emulator?Fe(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,U.xO)(ae).slice(1)}`}const ri="webStorageSupport";class Pd extends class{constructor(g){this.factorId=g}_process(g,m,C){switch(m.type){case"enroll":return this._finalizeEnroll(g,m.credential,C);case"signin":return this._finalizeSignIn(g,m.credential);default:return dr("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Pd(g)}_finalizeEnroll(g,m,C){return function(v,g){return mt(v,"POST","/v2/accounts/mfaEnrollment:finalize",en(v,g))}(g,{idToken:m,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,m){return function(v,g){return mt(v,"POST","/v2/accounts/mfaSignIn:finalize",en(v,g))}(g,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let hy=(()=>{class v{constructor(){}static assertion(m){return Pd._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var v,_f="@firebase/auth";class EC{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var m=this;return(0,c.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const m=this.auth.onIdTokenChanged(C=>{var A;g((null===(A=C)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,m),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const m=this.internalListeners.get(g);!m||(this.internalListeners.delete(g),m(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Et(){return window}function xo(){return(xo=(0,c.Z)(function*(v,g,m){var C;const{BuildInfo:A}=Et();Wn(g.sessionId,"AuthEvent did not contain a session ID");const N=yield Pg(g.sessionId),z={};return Ia()?z.ibi=A.packageName:Lr()?z.apn=A.packageName:Bt(v,"operation-not-supported-in-this-environment"),A.displayName&&(z.appDisplayName=A.displayName),z.sessionId=N,yC(v,m,g.type,void 0,null!==(C=g.eventId)&&void 0!==C?C:void 0,z)})).apply(this,arguments)}function Nd(){return(Nd=(0,c.Z)(function*(v){const{BuildInfo:g}=Et(),m={};Ia()?m.iosBundleId=g.packageName:Lr()?m.androidPackageName=g.packageName:Bt(v,"operation-not-supported-in-this-environment"),yield Ad(v,m)})).apply(this,arguments)}function nu(){return(nu=(0,c.Z)(function*(v,g,m){const{cordova:C}=Et();let A=()=>{};try{yield new Promise((N,z)=>{let ae=null;function Oe(){var We;N();const St=null===(We=C.plugins.browsertab)||void 0===We?void 0:We.close;"function"==typeof St&&St(),"function"==typeof(null==m?void 0:m.close)&&m.close()}function xe(){ae||(ae=window.setTimeout(()=>{z(xn(v,"redirect-cancelled-by-user"))},2e3))}function Ue(){"visible"===(null==document?void 0:document.visibilityState)&&xe()}g.addPassiveListener(Oe),document.addEventListener("resume",xe,!1),Lr()&&document.addEventListener("visibilitychange",Ue,!1),A=()=>{g.removePassiveListener(Oe),document.removeEventListener("resume",xe,!1),document.removeEventListener("visibilitychange",Ue,!1),ae&&window.clearTimeout(ae)}})}finally{A()}})).apply(this,arguments)}function Pg(v){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,c.Z)(function*(v){const g=TC(v),m=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(m)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function TC(v){if(Wn(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(v);const g=new ArrayBuffer(v.length),m=new Uint8Array(g);for(let C=0;C<v.length;C++)m[C]=v.charCodeAt(C);return m}v="Browser",(0,de._registerComponent)(new Ye.wA("auth",(g,{options:m})=>{const C=g.getProvider("app").getImmediate(),{apiKey:A,authDomain:N}=C.options;return(z=>{Ae(A&&!A.includes(":"),"invalid-api-key",{appName:z.name}),Ae(!(null==N?void 0:N.includes(":")),"argument-error",{appName:z.name});const ae={apiKey:A,authDomain:N,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Sr(v)},Oe=new B_(z,ae);return function(v,g){const m=(null==g?void 0:g.persistence)||[],C=(Array.isArray(m)?m:[m]).map(Wt);(null==g?void 0:g.errorMap)&&v._updateErrorMap(g.errorMap),v._initializeWithPersistence(C,null==g?void 0:g.popupRedirectResolver)}(Oe,m),Oe})(C)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,m,C)=>{g.getProvider("auth-internal").initialize()})),(0,de._registerComponent)(new Ye.wA("auth-internal",g=>{const m=mn(g.getProvider("auth").getImmediate());return new EC(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,de.registerVersion)(_f,"0.19.3",void 0),(0,de.registerVersion)(_f,"0.19.3","esm2017");class Md extends cC{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(g)),super.onEvent(g)}initialized(){var g=this;return(0,c.Z)(function*(){yield g.initPromise})()}}function Ng(v){return Mg.apply(this,arguments)}function Mg(){return(Mg=(0,c.Z)(function*(v){const g=yield Og()._get(Rg(v));return g&&(yield Og()._remove(Rg(v))),g})).apply(this,arguments)}function Ef(){const v=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const C=Math.floor(Math.random()*g.length);v.push(g.charAt(C))}return v.join("")}function Og(){return Wt($r)}function Rg(v){return ti("authEvent",v.config.apiKey,v.name)}function Xa(v){if(!(null==v?void 0:v.includes("?")))return{};const[g,...m]=v.split("?");return(0,U.zd)(m.join("?"))}function qs(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:xn("no-auth-event")}}function Is(){var v;return(null===(v=null==self?void 0:self.location)||void 0===v?void 0:v.protocol)||null}function gy(v=(0,U.z$)()){return!("file:"!==Is()&&"ionic:"!==Is()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function Tf(){try{const v=self.localStorage,g=Bs();if(v)return v.setItem(g,"1"),v.removeItem(g),!function(v=(0,U.z$)()){return(0,U.w1)()&&11===(null==document?void 0:document.documentMode)||function(v=(0,U.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,U.hl)()}catch(v){return kd()&&(0,U.hl)()}return!1}function kd(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function If(){return("http:"===Is()||"https:"===Is()||(0,U.ru)()||gy())&&!((0,U.b$)()||(0,U.UG)())&&Tf()&&!kd()}function ru(){return gy()&&"undefined"!=typeof document}function Lg(){return(Lg=(0,c.Z)(function*(){return!!ru()&&new Promise(v=>{const g=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),v(!0)})})})).apply(this,arguments)}const Ds={LOCAL:"local",NONE:"none",SESSION:"session"},lc=Ae,el="persistence";function Ld(v){return ea.apply(this,arguments)}function ea(){return(ea=(0,c.Z)(function*(v){yield v._initializationPromise;const g=vy(),m=ti(el,v.config.apiKey,v.name);(null==g?void 0:g.sessionStorage)&&g.sessionStorage.setItem(m,v._getPersistence())})).apply(this,arguments)}function vy(){return"undefined"!=typeof window?window:null}const Vg=Ae;class tl{constructor(){this.browserResolver=Wt(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yi,this._completeRedirectFn=za}_openPopup(g,m,C,A){var N=this;return(0,c.Z)(function*(){var z;Wn(null===(z=N.eventManagers[g._key()])||void 0===z?void 0:z.manager,"_initialize() not called before _openPopup()");const ae=yC(g,m,C,tt(),A);return function(v,g,m,C=500,A=600){const N=Math.max((window.screen.availHeight-A)/2,0).toString(),z=Math.max((window.screen.availWidth-C)/2,0).toString();let ae="";const Oe=Object.assign(Object.assign({},ic),{width:C.toString(),height:A.toString(),top:N,left:z}),xe=(0,U.z$)().toLowerCase();m&&(ae=Ta(xe)?"_blank":m),wa(xe)&&(g=g||"http://localhost",Oe.scrollbars="yes");const Ue=Object.entries(Oe).reduce((St,[On,As])=>`${St}${On}=${As},`,"");if(function(v=(0,U.z$)()){var g;return Ia(v)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(xe)&&"_self"!==ae)return function(v,g){const m=document.createElement("a");m.href=v,m.target=g;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(C)}(g||"",ae),new xg(null);const We=window.open(g||"",ae,Ue);Ae(We,v,"popup-blocked");try{We.focus()}catch(St){}return new xg(We)}(g,ae,Bs())})()}_openRedirect(g,m,C,A){var N=this;return(0,c.Z)(function*(){return yield N._originValidation(g),v=yC(g,m,C,tt(),A),Qn().location.href=v,new Promise(()=>{});var v})()}_initialize(g){const m=g._key();if(this.eventManagers[m]){const{manager:A,promise:N}=this.eventManagers[m];return A?Promise.resolve(A):(Wn(N,"If manager is not set, promise should be"),N)}const C=this.initAndGetManager(g);return this.eventManagers[m]={promise:C},C}initAndGetManager(g){var m=this;return(0,c.Z)(function*(){const C=yield function(v){return mf.apply(this,arguments)}(g),A=new cC(g);return C.register("authEvent",N=>(Ae(null==N?void 0:N.authEvent,g,"invalid-auth-event"),{status:A.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[g._key()]={manager:A},m.iframes[g._key()]=C,A})()}_isIframeWebStorageSupported(g,m){this.iframes[g._key()].send(ri,{type:ri},A=>{var N;const z=null===(N=null==A?void 0:A[0])||void 0===N?void 0:N[ri];void 0!==z&&m(!!z),Bt(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const m=g._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function(v){return iy.apply(this,arguments)}(g)),this.originValidationPromises[m]}get _shouldInitProactively(){return ks()||fr()||Ia()}}),this.cordovaResolver=Wt(class{constructor(){this._redirectPersistence=yi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=za}_initialize(g){var m=this;return(0,c.Z)(function*(){const C=g._key();let A=m.eventManagers.get(C);return A||(A=new Md(g),m.eventManagers.set(C,A),m.attachCallbackListeners(g,A)),A})()}_openPopup(g){Bt(g,"operation-not-supported-in-this-environment")}_openRedirect(g,m,C,A){var N=this;return(0,c.Z)(function*(){!function(v){var g,m,C,A,N,z,ae,Oe,xe,Ue;const We=Et();Ae("function"==typeof(null===(g=null==We?void 0:We.universalLinks)||void 0===g?void 0:g.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ae(void 0!==(null===(m=null==We?void 0:We.BuildInfo)||void 0===m?void 0:m.packageName),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ae("function"==typeof(null===(N=null===(A=null===(C=null==We?void 0:We.cordova)||void 0===C?void 0:C.plugins)||void 0===A?void 0:A.browsertab)||void 0===N?void 0:N.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ae("function"==typeof(null===(Oe=null===(ae=null===(z=null==We?void 0:We.cordova)||void 0===z?void 0:z.plugins)||void 0===ae?void 0:ae.browsertab)||void 0===Oe?void 0:Oe.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ae("function"==typeof(null===(Ue=null===(xe=null==We?void 0:We.cordova)||void 0===xe?void 0:xe.InAppBrowser)||void 0===Ue?void 0:Ue.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const z=yield N._initialize(g);yield z.initialized(),z.resetRedirect(),tc.clear(),yield N._originValidation(g);const ae=function(v,g,m=null){return{type:g,eventId:m,urlResponse:null,sessionId:Ef(),postBody:null,tenantId:v.tenantId,error:xn(v,"no-auth-event")}}(g,C,A);yield function(v,g){return Og()._set(Rg(v),g)}(g,ae);const Oe=yield function(v,g,m){return xo.apply(this,arguments)}(g,ae,m),xe=yield function(v){const{cordova:g}=Et();return new Promise(m=>{g.plugins.browsertab.isAvailable(C=>{let A=null;C?g.plugins.browsertab.openUrl(v):A=g.InAppBrowser.open(v,function(v=(0,U.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),m(A)})})}(Oe);return function(v,g,m){return nu.apply(this,arguments)}(g,z,xe)})()}_isIframeWebStorageSupported(g,m){throw new Error("Method not implemented.")}_originValidation(g){const m=g._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function(v){return Nd.apply(this,arguments)}(g)),this.originValidationPromises[m]}attachCallbackListeners(g,m){const{universalLinks:C,handleOpenURL:A,BuildInfo:N}=Et(),z=setTimeout((0,c.Z)(function*(){yield Ng(g),m.onEvent(qs())}),500),ae=function(){var Ue=(0,c.Z)(function*(We){clearTimeout(z);const St=yield Ng(g);let On=null;St&&(null==We?void 0:We.url)&&(On=function(v,g){var m,C;const A=function(v){const g=Xa(v),m=g.link?decodeURIComponent(g.link):void 0,C=Xa(m).link,A=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return Xa(A).link||A||C||m||v}(g);if(A.includes("/__/auth/callback")){const N=Xa(A),z=N.firebaseError?function(v){try{return JSON.parse(v)}catch(g){return null}}(decodeURIComponent(N.firebaseError)):null,ae=null===(C=null===(m=null==z?void 0:z.code)||void 0===m?void 0:m.split("auth/"))||void 0===C?void 0:C[1],Oe=ae?xn(ae):null;return Oe?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Oe,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:A,postBody:null}}return null}(St,We.url)),m.onEvent(On||qs())});return function(St){return Ue.apply(this,arguments)}}();void 0!==C&&"function"==typeof C.subscribe&&C.subscribe(null,ae);const Oe=A,xe=`${N.packageName.toLowerCase()}://`;Et().handleOpenURL=function(){var Ue=(0,c.Z)(function*(We){if(We.toLowerCase().startsWith(xe)&&ae({url:We}),"function"==typeof Oe)try{Oe(We)}catch(St){console.error(St)}});return function(We){return Ue.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=yi,this._completeRedirectFn=za}_initialize(g){var m=this;return(0,c.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,m,C,A){var N=this;return(0,c.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(g,m,C,A)})()}_openRedirect(g,m,C,A){var N=this;return(0,c.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(g,m,C,A)})()}_isIframeWebStorageSupported(g,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,m)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return ru()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Vg(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,c.Z)(function*(){if(g.underlyingResolver)return;const m=yield function(){return Lg.apply(this,arguments)}();g.underlyingResolver=m?g.cordovaResolver:g.browserResolver})()}}function Ey(v){return v.unwrap()}function is(v){return Cy(v)}function Cy(v){const{_tokenResponse:g}=v instanceof U.ZR?v.customData:v;if(!g)return null;if(!(v instanceof U.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return ue.credentialFromResult(v);const m=g.providerId;if(!m||"password"===m)return null;let C;switch(m){case"google.com":C=Go;break;case"facebook.com":C=Uu;break;case"github.com":C=mi;break;case"twitter.com":C=Bu;break;default:const{oauthIdToken:A,oauthAccessToken:N,oauthTokenSecret:z,pendingToken:ae,nonce:Oe}=g;return N||z||A||ae?ae?m.startsWith("saml.")?po._create(m,ae):Ur._fromParams({providerId:m,signInMethod:m,pendingToken:ae,idToken:A,accessToken:N}):new xa(m).credential({idToken:A,accessToken:N,rawNonce:Oe}):null}return v instanceof U.ZR?C.credentialFromError(v):C.credentialFromResult(v)}function si(v,g){return g.catch(m=>{throw m instanceof U.ZR&&function(v,g){var m;const C=null===(m=g.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===g.code)g.resolver=new Bg(v,function(v,g){var m;const C=(0,U.m9)(v),A=g;return Ae(g.customData.operationType,C,"argument-error"),Ae(null===(m=A.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,C,"argument-error"),zl._fromError(C,A)}(v,g));else if(C){const A=Cy(g),N=g;A&&(N.credential=A,N.tenantId=C.tenantId||void 0,N.email=C.email||void 0,N.phoneNumber=C.phoneNumber||void 0)}}(v,m),m}).then(m=>{const A=m.user;return{operationType:m.operationType,credential:is(m),additionalUserInfo:Qi(m),user:ta.getOrCreate(A)}})}function Af(v,g){return Ug.apply(this,arguments)}function Ug(){return(Ug=(0,c.Z)(function*(v,g){const m=yield g;return{verificationId:m.verificationId,confirm:C=>si(v,m.confirm(C))}})).apply(this,arguments)}class Bg{constructor(g,m){this.resolver=m,this.auth=function(v){return v.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return si(Ey(this.auth),this.resolver.resolveSignIn(g))}}class ta{constructor(g){this._delegate=g,this.multiFactor=function(v){const g=(0,U.m9)(v);return Yu.has(g)||Yu.set(g,sf._fromUser(g)),Yu.get(g)}(g)}static getOrCreate(g){return ta.USER_MAP.has(g)||ta.USER_MAP.set(g,new ta(g)),ta.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var m=this;return(0,c.Z)(function*(){return si(m.auth,jl(m._delegate,g))})()}linkWithPhoneNumber(g,m){var C=this;return(0,c.Z)(function*(){return Af(C.auth,function(v,g,m){return Id.apply(this,arguments)}(C._delegate,g,m))})()}linkWithPopup(g){var m=this;return(0,c.Z)(function*(){return si(m.auth,function(v,g,m){return Hs.apply(this,arguments)}(m._delegate,g,tl))})()}linkWithRedirect(g){var m=this;return(0,c.Z)(function*(){return yield Ld(mn(m.auth)),function(v,g,m){return function(v,g,m){return Tg.apply(this,arguments)}(v,g,m)}(m._delegate,g,tl)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var m=this;return(0,c.Z)(function*(){return si(m.auth,pd(m._delegate,g))})()}reauthenticateWithPhoneNumber(g,m){return Af(this.auth,function(v,g,m){return T.apply(this,arguments)}(this._delegate,g,m))}reauthenticateWithPopup(g){return si(this.auth,function(v,g,m){return Nr.apply(this,arguments)}(this._delegate,g,tl))}reauthenticateWithRedirect(g){var m=this;return(0,c.Z)(function*(){return yield Ld(mn(m.auth)),function(v,g,m){return function(v,g,m){return rc.apply(this,arguments)}(v,g,m)}(m._delegate,g,tl)})()}sendEmailVerification(g){return function(v,g){return Fa.apply(this,arguments)}(this._delegate,g)}unlink(g){var m=this;return(0,c.Z)(function*(){return yield function(v,g){return Bl.apply(this,arguments)}(m._delegate,g),m})()}updateEmail(g){return function(v,g){return Vs((0,U.m9)(v),g,null)}(this._delegate,g)}updatePassword(g){return function(v,g){return Vs((0,U.m9)(v),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function(v,g){return X.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function(v,g){return Mn.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,m){return function(v,g,m){return La.apply(this,arguments)}(this._delegate,g,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ta.USER_MAP=new WeakMap;const Ud=Ae;let jg=(()=>{class v{constructor(m,C){if(this.app=m,C.isInitialized())return this._delegate=C.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=m.options;Ud(A,"invalid-api-key",{appName:m.name});let N=[ut];if("undefined"!=typeof window){N=function(v,g){const m=vy();if(!(null==m?void 0:m.sessionStorage))return[];const C=ti(el,v,g);switch(m.sessionStorage.getItem(C)){case Ds.NONE:return[ut];case Ds.LOCAL:return[Jl,yi];case Ds.SESSION:return[yi];default:return[]}}(A,m.name);for(const ae of[Jl,$r,yi])N.includes(ae)||N.push(ae)}Ud(A,"invalid-api-key",{appName:m.name});const z="undefined"!=typeof window?tl:void 0;this._delegate=C.initialize({options:{persistence:N,popupRedirectResolver:z}}),this._delegate._updateErrorMap(lo),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ta.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,C){!function(v,g,m){const C=mn(v);Ae(C._canInitEmulator,C,"emulator-config-failed"),Ae(/^https?:\/\//.test(g),C,"invalid-emulator-scheme");const A=!!(null==m?void 0:m.disableWarnings),N=xl(g),{host:z,port:ae}=function(v){const g=xl(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(g.length));if(!m)return{host:"",port:null};const C=m[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(C);if(A){const N=A[1];return{host:N,port:Wi(C.substr(N.length+1))}}{const[N,z]=C.split(":");return{host:N,port:Wi(z)}}}(g);C.config.emulator={url:`${N}//${z}${null===ae?"":`:${ae}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:z,port:ae,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function(){function v(){const g=document.createElement("p"),m=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,m,C)}applyActionCode(m){return function(v,g){return zu.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Oa(this._delegate,m)}confirmPasswordReset(m,C){return function(v,g,m){return ql.apply(this,arguments)}(this._delegate,m,C)}createUserWithEmailAndPassword(m,C){var A=this;return(0,c.Z)(function*(){return si(A._delegate,function(v,g,m){return yd.apply(this,arguments)}(A._delegate,m,C))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function(v,g){return dg.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function(v,g){const m=on.parseLink(g);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}(0,m)}getRedirectResult(){var m=this;return(0,c.Z)(function*(){Ud(If(),m._delegate,"operation-not-supported-in-this-environment");const C=yield function(v,g){return Ga.apply(this,arguments)}(m._delegate,tl);return C?si(m._delegate,Promise.resolve(C)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function(v,g){mn(v)._logFramework(g)}(this._delegate,m)}onAuthStateChanged(m,C,A){const{next:N,error:z,complete:ae}=iu(m,C,A);return this._delegate.onAuthStateChanged(N,z,ae)}onIdTokenChanged(m,C,A){const{next:N,error:z,complete:ae}=iu(m,C,A);return this._delegate.onIdTokenChanged(N,z,ae)}sendSignInLinkToEmail(m,C){return function(v,g,m){return Ls.apply(this,arguments)}(this._delegate,m,C)}sendPasswordResetEmail(m,C){return function(v,g,m){return $l.apply(this,arguments)}(this._delegate,m,C||void 0)}setPersistence(m){var C=this;return(0,c.Z)(function*(){let A;switch(function(v,g){lc(Object.values(Ds).includes(g),v,"invalid-persistence-type"),(0,U.b$)()?lc(g!==Ds.SESSION,v,"unsupported-persistence-type"):(0,U.UG)()?lc(g===Ds.NONE,v,"unsupported-persistence-type"):kd()?lc(g===Ds.NONE||g===Ds.LOCAL&&(0,U.hl)(),v,"unsupported-persistence-type"):lc(g===Ds.NONE||Tf(),v,"unsupported-persistence-type")}(C._delegate,m),m){case Ds.SESSION:A=yi;break;case Ds.LOCAL:A=(yield Wt(Jl)._isAvailable())?Jl:$r;break;case Ds.NONE:A=ut;break;default:return Bt("argument-error",{appName:C._delegate.name})}return C._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return si(this._delegate,function(v){return at.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return si(this._delegate,Br(this._delegate,m))}signInWithCustomToken(m){return si(this._delegate,function(v,g){return Hl.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,C){return si(this._delegate,function(v,g,m){return Br((0,U.m9)(v),Es.credential(g,m))}(this._delegate,m,C))}signInWithEmailLink(m,C){return si(this._delegate,function(v,g,m){return lr.apply(this,arguments)}(this._delegate,m,C))}signInWithPhoneNumber(m,C){return Af(this._delegate,function(v,g,m){return Jo.apply(this,arguments)}(this._delegate,m,C))}signInWithPopup(m){var C=this;return(0,c.Z)(function*(){return Ud(If(),C._delegate,"operation-not-supported-in-this-environment"),si(C._delegate,function(v,g,m){return To.apply(this,arguments)}(C._delegate,m,tl))})()}signInWithRedirect(m){var C=this;return(0,c.Z)(function*(){return Ud(If(),C._delegate,"operation-not-supported-in-this-environment"),yield Ld(C._delegate),function(v,g,m){return function(v,g,m){return Ts.apply(this,arguments)}(v,g,m)}(C._delegate,m,tl)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function(v,g){return zo.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=Ds,v})();function iu(v,g,m){let C=v;"function"!=typeof v&&({next:C,error:g,complete:m}=v);const A=C;return{next:z=>A(z&&ta.getOrCreate(z)),error:g,complete:m}}class Ri{constructor(){this.providerId="phone",this._delegate=new ue(Ey(ne.Z.auth()))}static credential(g,m){return ue.credential(g,m)}verifyPhoneNumber(g,m){return this._delegate.verifyPhoneNumber(g,m)}unwrap(){return this._delegate}}Ri.PHONE_SIGN_IN_METHOD=ue.PHONE_SIGN_IN_METHOD,Ri.PROVIDER_ID=ue.PROVIDER_ID;const su=Ae;class OT{constructor(g,m,C=ne.Z.app()){var A;su(null===(A=C.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:C.name}),this._delegate=new oC(g,m,C.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(v){v.INTERNAL.registerComponent(new Ye.wA("auth-compat",g=>{const m=g.getProvider("app-compat").getImmediate(),C=g.getProvider("auth");return new jg(m,C)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Es,FacebookAuthProvider:Uu,GithubAuthProvider:mi,GoogleAuthProvider:Go,OAuthProvider:xa,SAMLAuthProvider:Pr,PhoneAuthProvider:Ri,PhoneMultiFactorGenerator:hy,RecaptchaVerifier:OT,TwitterAuthProvider:Bu,Auth:jg,AuthCredential:Pl,Error:U.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.2.3")}(ne.Z)},6676:function(je,ye){!function(V){"use strict";function c(pe){return Array.prototype.slice.call(pe)}function ne(pe){return new Promise(function(re,fe){pe.onsuccess=function(){re(pe.result)},pe.onerror=function(){fe(pe.error)}})}function U(pe,re,fe){var Ce,Pe=new Promise(function(Ke,Pt){ne(Ce=pe[re].apply(pe,fe)).then(Ke,Pt)});return Pe.request=Ce,Pe}function de(pe,re,fe){var Ce=U(pe,re,fe);return Ce.then(function(Pe){if(Pe)return new B(Pe,Ce.request)})}function se(pe,re,fe){fe.forEach(function(Ce){Object.defineProperty(pe.prototype,Ce,{get:function(){return this[re][Ce]},set:function(Pe){this[re][Ce]=Pe}})})}function Q(pe,re,fe,Ce){Ce.forEach(function(Pe){Pe in fe.prototype&&(pe.prototype[Pe]=function(){return U(this[re],Pe,arguments)})})}function me(pe,re,fe,Ce){Ce.forEach(function(Pe){Pe in fe.prototype&&(pe.prototype[Pe]=function(){return this[re][Pe].apply(this[re],arguments)})})}function J(pe,re,fe,Ce){Ce.forEach(function(Pe){Pe in fe.prototype&&(pe.prototype[Pe]=function(){return de(this[re],Pe,arguments)})})}function ee(pe){this._index=pe}function B(pe,re){this._cursor=pe,this._request=re}function H(pe){this._store=pe}function G(pe){this._tx=pe,this.complete=new Promise(function(re,fe){pe.oncomplete=function(){re()},pe.onerror=function(){fe(pe.error)},pe.onabort=function(){fe(pe.error)}})}function le(pe,re,fe){this._db=pe,this.oldVersion=re,this.transaction=new G(fe)}function he(pe){this._db=pe}se(ee,"_index",["name","keyPath","multiEntry","unique"]),Q(ee,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),J(ee,"_index",IDBIndex,["openCursor","openKeyCursor"]),se(B,"_cursor",["direction","key","primaryKey","value"]),Q(B,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(pe){pe in IDBCursor.prototype&&(B.prototype[pe]=function(){var re=this,fe=arguments;return Promise.resolve().then(function(){return re._cursor[pe].apply(re._cursor,fe),ne(re._request).then(function(Ce){if(Ce)return new B(Ce,re._request)})})})}),H.prototype.createIndex=function(){return new ee(this._store.createIndex.apply(this._store,arguments))},H.prototype.index=function(){return new ee(this._store.index.apply(this._store,arguments))},se(H,"_store",["name","keyPath","indexNames","autoIncrement"]),Q(H,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),J(H,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),me(H,"_store",IDBObjectStore,["deleteIndex"]),G.prototype.objectStore=function(){return new H(this._tx.objectStore.apply(this._tx,arguments))},se(G,"_tx",["objectStoreNames","mode"]),me(G,"_tx",IDBTransaction,["abort"]),le.prototype.createObjectStore=function(){return new H(this._db.createObjectStore.apply(this._db,arguments))},se(le,"_db",["name","version","objectStoreNames"]),me(le,"_db",IDBDatabase,["deleteObjectStore","close"]),he.prototype.transaction=function(){return new G(this._db.transaction.apply(this._db,arguments))},se(he,"_db",["name","version","objectStoreNames"]),me(he,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(pe){[H,ee].forEach(function(re){pe in re.prototype&&(re.prototype[pe.replace("open","iterate")]=function(){var fe=c(arguments),Ce=fe[fe.length-1],Pe=this._store||this._index,Ke=Pe[pe].apply(Pe,fe.slice(0,-1));Ke.onsuccess=function(){Ce(Ke.result)}})})}),[ee,H].forEach(function(pe){pe.prototype.getAll||(pe.prototype.getAll=function(re,fe){var Ce=this,Pe=[];return new Promise(function(Ke){Ce.iterateCursor(re,function(Pt){Pt?(Pe.push(Pt.value),void 0===fe||Pe.length!=fe?Pt.continue():Ke(Pe)):Ke(Pe)})})})}),V.openDb=function(pe,re,fe){var Ce=U(indexedDB,"open",[pe,re]),Pe=Ce.request;return Pe&&(Pe.onupgradeneeded=function(Ke){fe&&fe(new le(Pe.result,Ke.oldVersion,Pe.transaction))}),Ce.then(function(Ke){return new he(Ke)})},V.deleteDb=function(pe){return U(indexedDB,"deleteDatabase",[pe])},Object.defineProperty(V,"__esModule",{value:!0})}(ye)},7574:(je,ye,V)=>{"use strict";V.d(ye,{y:()=>H});var c=V(7393),U=V(9181),de=V(6490),Q=V(6554),me=V(4487);var B=V(2494);let H=(()=>{class le{constructor(we){this._isScalar=!1,we&&(this._subscribe=we)}lift(we){const ve=new le;return ve.source=this,ve.operator=we,ve}subscribe(we,ve,pe){const{operator:re}=this,fe=function(le,he,we){if(le){if(le instanceof c.L)return le;if(le[U.b])return le[U.b]()}return le||he||we?new c.L(le,he,we):new c.L(de.c)}(we,ve,pe);if(fe.add(re?re.call(fe,this.source):this.source||B.v.useDeprecatedSynchronousErrorHandling&&!fe.syncErrorThrowable?this._subscribe(fe):this._trySubscribe(fe)),B.v.useDeprecatedSynchronousErrorHandling&&fe.syncErrorThrowable&&(fe.syncErrorThrowable=!1,fe.syncErrorThrown))throw fe.syncErrorValue;return fe}_trySubscribe(we){try{return this._subscribe(we)}catch(ve){B.v.useDeprecatedSynchronousErrorHandling&&(we.syncErrorThrown=!0,we.syncErrorValue=ve),function(le){for(;le;){const{closed:he,destination:we,isStopped:ve}=le;if(he||ve)return!1;le=we&&we instanceof c.L?we:null}return!0}(we)?we.error(ve):console.warn(ve)}}forEach(we,ve){return new(ve=G(ve))((pe,re)=>{let fe;fe=this.subscribe(Ce=>{try{we(Ce)}catch(Pe){re(Pe),fe&&fe.unsubscribe()}},re,pe)})}_subscribe(we){const{source:ve}=this;return ve&&ve.subscribe(we)}[Q.L](){return this}pipe(...we){return 0===we.length?this:function(le){return 0===le.length?me.y:1===le.length?le[0]:function(we){return le.reduce((ve,pe)=>pe(ve),we)}}(we)(this)}toPromise(we){return new(we=G(we))((ve,pe)=>{let re;this.subscribe(fe=>re=fe,fe=>pe(fe),()=>ve(re))})}}return le.create=he=>new le(he),le})();function G(le){if(le||(le=B.v.Promise||Promise),!le)throw new Error("no Promise impl found");return le}},6490:(je,ye,V)=>{"use strict";V.d(ye,{c:()=>U});var c=V(2494),ne=V(4449);const U={closed:!0,next(de){},error(de){if(c.v.useDeprecatedSynchronousErrorHandling)throw de;(0,ne.z)(de)},complete(){}}},9765:(je,ye,V)=>{"use strict";V.d(ye,{Yc:()=>me,xQ:()=>J});var c=V(7574),ne=V(7393),U=V(5319),de=V(7971),se=V(8858),Q=V(9181);class me extends ne.L{constructor(H){super(H),this.destination=H}}let J=(()=>{class B extends c.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[Q.b](){return new me(this)}lift(G){const le=new ee(this,this);return le.operator=G,le}next(G){if(this.closed)throw new de.N;if(!this.isStopped){const{observers:le}=this,he=le.length,we=le.slice();for(let ve=0;ve<he;ve++)we[ve].next(G)}}error(G){if(this.closed)throw new de.N;this.hasError=!0,this.thrownError=G,this.isStopped=!0;const{observers:le}=this,he=le.length,we=le.slice();for(let ve=0;ve<he;ve++)we[ve].error(G);this.observers.length=0}complete(){if(this.closed)throw new de.N;this.isStopped=!0;const{observers:G}=this,le=G.length,he=G.slice();for(let we=0;we<le;we++)he[we].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(G){if(this.closed)throw new de.N;return super._trySubscribe(G)}_subscribe(G){if(this.closed)throw new de.N;return this.hasError?(G.error(this.thrownError),U.w.EMPTY):this.isStopped?(G.complete(),U.w.EMPTY):(this.observers.push(G),new se.W(this,G))}asObservable(){const G=new c.y;return G.source=this,G}}return B.create=(H,G)=>new ee(H,G),B})();class ee extends J{constructor(H,G){super(),this.destination=H,this.source=G}next(H){const{destination:G}=this;G&&G.next&&G.next(H)}error(H){const{destination:G}=this;G&&G.error&&this.destination.error(H)}complete(){const{destination:H}=this;H&&H.complete&&this.destination.complete()}_subscribe(H){const{source:G}=this;return G?this.source.subscribe(H):U.w.EMPTY}}},8858:(je,ye,V)=>{"use strict";V.d(ye,{W:()=>ne});var c=V(5319);class ne extends c.w{constructor(de,se){super(),this.subject=de,this.subscriber=se,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const de=this.subject,se=de.observers;if(this.subject=null,!se||0===se.length||de.isStopped||de.closed)return;const Q=se.indexOf(this.subscriber);-1!==Q&&se.splice(Q,1)}}},7393:(je,ye,V)=>{"use strict";V.d(ye,{L:()=>me});var c=V(9105),ne=V(6490),U=V(5319),de=V(9181),se=V(2494),Q=V(4449);class me extends U.w{constructor(B,H,G){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=ne.c;break;case 1:if(!B){this.destination=ne.c;break}if("object"==typeof B){B instanceof me?(this.syncErrorThrowable=B.syncErrorThrowable,this.destination=B,B.add(this)):(this.syncErrorThrowable=!0,this.destination=new J(this,B));break}default:this.syncErrorThrowable=!0,this.destination=new J(this,B,H,G)}}[de.b](){return this}static create(B,H,G){const le=new me(B,H,G);return le.syncErrorThrowable=!1,le}next(B){this.isStopped||this._next(B)}error(B){this.isStopped||(this.isStopped=!0,this._error(B))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(B){this.destination.next(B)}_error(B){this.destination.error(B),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:B}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=B,this}}class J extends me{constructor(B,H,G,le){super(),this._parentSubscriber=B;let he,we=this;(0,c.m)(H)?he=H:H&&(he=H.next,G=H.error,le=H.complete,H!==ne.c&&(we=Object.create(H),(0,c.m)(we.unsubscribe)&&this.add(we.unsubscribe.bind(we)),we.unsubscribe=this.unsubscribe.bind(this))),this._context=we,this._next=he,this._error=G,this._complete=le}next(B){if(!this.isStopped&&this._next){const{_parentSubscriber:H}=this;se.v.useDeprecatedSynchronousErrorHandling&&H.syncErrorThrowable?this.__tryOrSetError(H,this._next,B)&&this.unsubscribe():this.__tryOrUnsub(this._next,B)}}error(B){if(!this.isStopped){const{_parentSubscriber:H}=this,{useDeprecatedSynchronousErrorHandling:G}=se.v;if(this._error)G&&H.syncErrorThrowable?(this.__tryOrSetError(H,this._error,B),this.unsubscribe()):(this.__tryOrUnsub(this._error,B),this.unsubscribe());else if(H.syncErrorThrowable)G?(H.syncErrorValue=B,H.syncErrorThrown=!0):(0,Q.z)(B),this.unsubscribe();else{if(this.unsubscribe(),G)throw B;(0,Q.z)(B)}}}complete(){if(!this.isStopped){const{_parentSubscriber:B}=this;if(this._complete){const H=()=>this._complete.call(this._context);se.v.useDeprecatedSynchronousErrorHandling&&B.syncErrorThrowable?(this.__tryOrSetError(B,H),this.unsubscribe()):(this.__tryOrUnsub(H),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(B,H){try{B.call(this._context,H)}catch(G){if(this.unsubscribe(),se.v.useDeprecatedSynchronousErrorHandling)throw G;(0,Q.z)(G)}}__tryOrSetError(B,H,G){if(!se.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{H.call(this._context,G)}catch(le){return se.v.useDeprecatedSynchronousErrorHandling?(B.syncErrorValue=le,B.syncErrorThrown=!0,!0):((0,Q.z)(le),!0)}return!1}_unsubscribe(){const{_parentSubscriber:B}=this;this._context=null,this._parentSubscriber=null,B.unsubscribe()}}},5319:(je,ye,V)=>{"use strict";V.d(ye,{w:()=>Q});var c=V(9796),ne=V(1555),U=V(9105);const se=(()=>{function J(ee){return Error.call(this),this.message=ee?`${ee.length} errors occurred during unsubscription:\n${ee.map((B,H)=>`${H+1}) ${B.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ee,this}return J.prototype=Object.create(Error.prototype),J})();class Q{constructor(ee){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,ee&&(this._ctorUnsubscribe=!0,this._unsubscribe=ee)}unsubscribe(){let ee;if(this.closed)return;let{_parentOrParents:B,_ctorUnsubscribe:H,_unsubscribe:G,_subscriptions:le}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,B instanceof Q)B.remove(this);else if(null!==B)for(let he=0;he<B.length;++he)B[he].remove(this);if((0,U.m)(G)){H&&(this._unsubscribe=void 0);try{G.call(this)}catch(he){ee=he instanceof se?me(he.errors):[he]}}if((0,c.k)(le)){let he=-1,we=le.length;for(;++he<we;){const ve=le[he];if((0,ne.K)(ve))try{ve.unsubscribe()}catch(pe){ee=ee||[],pe instanceof se?ee=ee.concat(me(pe.errors)):ee.push(pe)}}}if(ee)throw new se(ee)}add(ee){let B=ee;if(!ee)return Q.EMPTY;switch(typeof ee){case"function":B=new Q(ee);case"object":if(B===this||B.closed||"function"!=typeof B.unsubscribe)return B;if(this.closed)return B.unsubscribe(),B;if(!(B instanceof Q)){const le=B;B=new Q,B._subscriptions=[le]}break;default:throw new Error("unrecognized teardown "+ee+" added to Subscription.")}let{_parentOrParents:H}=B;if(null===H)B._parentOrParents=this;else if(H instanceof Q){if(H===this)return B;B._parentOrParents=[H,this]}else{if(-1!==H.indexOf(this))return B;H.push(this)}const G=this._subscriptions;return null===G?this._subscriptions=[B]:G.push(B),B}remove(ee){const B=this._subscriptions;if(B){const H=B.indexOf(ee);-1!==H&&B.splice(H,1)}}}var J;function me(J){return J.reduce((ee,B)=>ee.concat(B instanceof se?B.errors:B),[])}Q.EMPTY=((J=new Q).closed=!0,J)},2494:(je,ye,V)=>{"use strict";V.d(ye,{v:()=>ne});let c=!1;const ne={Promise:void 0,set useDeprecatedSynchronousErrorHandling(U){if(U){const de=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+de.stack)}else c&&console.log("RxJS: Back to a better error behavior. Thank you. <3");c=U},get useDeprecatedSynchronousErrorHandling(){return c}}},5345:(je,ye,V)=>{"use strict";V.d(ye,{IY:()=>de,Ds:()=>Q,ft:()=>J});var c=V(7393),ne=V(7574),U=V(7444);class de extends c.L{constructor(B){super(),this.parent=B}_next(B){this.parent.notifyNext(B)}_error(B){this.parent.notifyError(B),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class Q extends c.L{notifyNext(B){this.destination.next(B)}notifyError(B){this.destination.error(B)}notifyComplete(){this.destination.complete()}}function J(ee,B){if(B.closed)return;if(ee instanceof ne.y)return ee.subscribe(B);let H;try{H=(0,U.s)(ee)(B)}catch(G){B.error(G)}return H}},2441:(je,ye,V)=>{"use strict";V.d(ye,{c:()=>se,N:()=>Q});var c=V(9765),ne=V(7574),U=V(5319),de=V(1307);class se extends ne.y{constructor(H,G){super(),this.source=H,this.subjectFactory=G,this._refCount=0,this._isComplete=!1}_subscribe(H){return this.getSubject().subscribe(H)}getSubject(){const H=this._subject;return(!H||H.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let H=this._connection;return H||(this._isComplete=!1,H=this._connection=new U.w,H.add(this.source.subscribe(new me(this.getSubject(),this))),H.closed&&(this._connection=null,H=U.w.EMPTY)),H}refCount(){return(0,de.x)()(this)}}const Q=(()=>{const B=se.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:B._subscribe},_isComplete:{value:B._isComplete,writable:!0},getSubject:{value:B.getSubject},connect:{value:B.connect},refCount:{value:B.refCount}}})();class me extends c.Yc{constructor(H,G){super(H),this.connectable=G}_error(H){this._unsubscribe(),super._error(H)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const H=this.connectable;if(H){this.connectable=null;const G=H._connection;H._refCount=0,H._subject=null,H._connection=null,G&&G.unsubscribe()}}}},9193:(je,ye,V)=>{"use strict";V.d(ye,{E:()=>ne,c:()=>U});var c=V(7574);const ne=new c.y(se=>se.complete());function U(se){return se?function(se){return new c.y(Q=>se.schedule(()=>Q.complete()))}(se):ne}},4402:(je,ye,V)=>{"use strict";V.d(ye,{D:()=>we});var c=V(7574),ne=V(7444),U=V(5319),de=V(6554),me=V(4087),J=V(377),H=V(4072),G=V(9489);function we(ve,pe){return pe?function(ve,pe){if(null!=ve){if(function(ve){return ve&&"function"==typeof ve[de.L]}(ve))return function(ve,pe){return new c.y(re=>{const fe=new U.w;return fe.add(pe.schedule(()=>{const Ce=ve[de.L]();fe.add(Ce.subscribe({next(Pe){fe.add(pe.schedule(()=>re.next(Pe)))},error(Pe){fe.add(pe.schedule(()=>re.error(Pe)))},complete(){fe.add(pe.schedule(()=>re.complete()))}}))})),fe})}(ve,pe);if((0,H.t)(ve))return function(ve,pe){return new c.y(re=>{const fe=new U.w;return fe.add(pe.schedule(()=>ve.then(Ce=>{fe.add(pe.schedule(()=>{re.next(Ce),fe.add(pe.schedule(()=>re.complete()))}))},Ce=>{fe.add(pe.schedule(()=>re.error(Ce)))}))),fe})}(ve,pe);if((0,G.z)(ve))return(0,me.r)(ve,pe);if(function(ve){return ve&&"function"==typeof ve[J.hZ]}(ve)||"string"==typeof ve)return function(ve,pe){if(!ve)throw new Error("Iterable cannot be null");return new c.y(re=>{const fe=new U.w;let Ce;return fe.add(()=>{Ce&&"function"==typeof Ce.return&&Ce.return()}),fe.add(pe.schedule(()=>{Ce=ve[J.hZ](),fe.add(pe.schedule(function(){if(re.closed)return;let Pe,Ke;try{const Pt=Ce.next();Pe=Pt.value,Ke=Pt.done}catch(Pt){return void re.error(Pt)}Ke?re.complete():(re.next(Pe),this.schedule())}))})),fe})}(ve,pe)}throw new TypeError((null!==ve&&typeof ve||ve)+" is not observable")}(ve,pe):ve instanceof c.y?ve:new c.y((0,ne.s)(ve))}},6693:(je,ye,V)=>{"use strict";V.d(ye,{n:()=>de});var c=V(7574),ne=V(5015),U=V(4087);function de(se,Q){return Q?(0,U.r)(se,Q):new c.y((0,ne.V)(se))}},6682:(je,ye,V)=>{"use strict";V.d(ye,{T:()=>se});var c=V(7574),ne=V(4869),U=V(3282),de=V(6693);function se(...Q){let me=Number.POSITIVE_INFINITY,J=null,ee=Q[Q.length-1];return(0,ne.K)(ee)?(J=Q.pop(),Q.length>1&&"number"==typeof Q[Q.length-1]&&(me=Q.pop())):"number"==typeof ee&&(me=Q.pop()),null===J&&1===Q.length&&Q[0]instanceof c.y?Q[0]:(0,U.J)(me)((0,de.n)(Q,J))}},5917:(je,ye,V)=>{"use strict";V.d(ye,{of:()=>de});var c=V(4869),ne=V(6693),U=V(4087);function de(...se){let Q=se[se.length-1];return(0,c.K)(Q)?(se.pop(),(0,U.r)(se,Q)):(0,ne.n)(se)}},8002:(je,ye,V)=>{"use strict";V.d(ye,{U:()=>ne});var c=V(7393);function ne(se,Q){return function(J){if("function"!=typeof se)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return J.lift(new U(se,Q))}}class U{constructor(Q,me){this.project=Q,this.thisArg=me}call(Q,me){return me.subscribe(new de(Q,this.project,this.thisArg))}}class de extends c.L{constructor(Q,me,J){super(Q),this.project=me,this.count=0,this.thisArg=J||this}_next(Q){let me;try{me=this.project.call(this.thisArg,Q,this.count++)}catch(J){return void this.destination.error(J)}this.destination.next(me)}}},3282:(je,ye,V)=>{"use strict";V.d(ye,{J:()=>U});var c=V(9773),ne=V(4487);function U(de=Number.POSITIVE_INFINITY){return(0,c.zg)(ne.y,de)}},9773:(je,ye,V)=>{"use strict";V.d(ye,{zg:()=>de});var c=V(8002),ne=V(4402),U=V(5345);function de(J,ee,B=Number.POSITIVE_INFINITY){return"function"==typeof ee?H=>H.pipe(de((G,le)=>(0,ne.D)(J(G,le)).pipe((0,c.U)((he,we)=>ee(G,he,le,we))),B)):("number"==typeof ee&&(B=ee),H=>H.lift(new se(J,B)))}class se{constructor(ee,B=Number.POSITIVE_INFINITY){this.project=ee,this.concurrent=B}call(ee,B){return B.subscribe(new Q(ee,this.project,this.concurrent))}}class Q extends U.Ds{constructor(ee,B,H=Number.POSITIVE_INFINITY){super(ee),this.project=B,this.concurrent=H,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(ee){this.active<this.concurrent?this._tryNext(ee):this.buffer.push(ee)}_tryNext(ee){let B;const H=this.index++;try{B=this.project(ee,H)}catch(G){return void this.destination.error(G)}this.active++,this._innerSub(B)}_innerSub(ee){const B=new U.IY(this),H=this.destination;H.add(B);const G=(0,U.ft)(ee,B);G!==B&&H.add(G)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(ee){this.destination.next(ee)}notifyComplete(){const ee=this.buffer;this.active--,ee.length>0?this._next(ee.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(je,ye,V)=>{"use strict";V.d(ye,{ht:()=>H,QV:()=>ee});var c=V(7393),ne=V(9193),U=V(5917),de=V(7574);class J{constructor(he,we,ve){this.kind=he,this.value=we,this.error=ve,this.hasValue="N"===he}observe(he){switch(this.kind){case"N":return he.next&&he.next(this.value);case"E":return he.error&&he.error(this.error);case"C":return he.complete&&he.complete()}}do(he,we,ve){switch(this.kind){case"N":return he&&he(this.value);case"E":return we&&we(this.error);case"C":return ve&&ve()}}accept(he,we,ve){return he&&"function"==typeof he.next?this.observe(he):this.do(he,we,ve)}toObservable(){switch(this.kind){case"N":return(0,U.of)(this.value);case"E":return le=this.error,new de.y(we=>we.error(le));case"C":return(0,ne.c)()}var le;throw new Error("unexpected notification kind value")}static createNext(he){return void 0!==he?new J("N",he):J.undefinedValueNotification}static createError(he){return new J("E",void 0,he)}static createComplete(){return J.completeNotification}}function ee(le,he=0){return function(ve){return ve.lift(new B(le,he))}}J.completeNotification=new J("C"),J.undefinedValueNotification=new J("N",void 0);class B{constructor(he,we=0){this.scheduler=he,this.delay=we}call(he,we){return we.subscribe(new H(he,this.scheduler,this.delay))}}class H extends c.L{constructor(he,we,ve=0){super(he),this.scheduler=we,this.delay=ve}static dispatch(he){const{notification:we,destination:ve}=he;we.observe(ve),this.unsubscribe()}scheduleMessage(he){this.destination.add(this.scheduler.schedule(H.dispatch,this.delay,new G(he,this.destination)))}_next(he){this.scheduleMessage(J.createNext(he))}_error(he){this.scheduleMessage(J.createError(he)),this.unsubscribe()}_complete(){this.scheduleMessage(J.createComplete()),this.unsubscribe()}}class G{constructor(he,we){this.notification=he,this.destination=we}}},1307:(je,ye,V)=>{"use strict";V.d(ye,{x:()=>ne});var c=V(7393);function ne(){return function(Q){return Q.lift(new U(Q))}}class U{constructor(Q){this.connectable=Q}call(Q,me){const{connectable:J}=this;J._refCount++;const ee=new de(Q,J),B=me.subscribe(ee);return ee.closed||(ee.connection=J.connect()),B}}class de extends c.L{constructor(Q,me){super(Q),this.connectable=me}_unsubscribe(){const{connectable:Q}=this;if(!Q)return void(this.connection=null);this.connectable=null;const me=Q._refCount;if(me<=0)return void(this.connection=null);if(Q._refCount=me-1,me>1)return void(this.connection=null);const{connection:J}=this,ee=Q._connection;this.connection=null,ee&&(!J||ee===J)&&ee.unsubscribe()}}},8819:(je,ye,V)=>{"use strict";V.d(ye,{B:()=>me});var c=V(2441);var de=V(1307),se=V(9765);function Q(){return new se.xQ}function me(){return J=>(0,de.x)()(function(J,ee){return function(H){let G;G="function"==typeof J?J:function(){return J};const le=Object.create(H,c.N);return le.source=H,le.subjectFactory=G,le}}(Q)(J))}},3101:(je,ye,V)=>{"use strict";V.d(ye,{R:()=>pe});var c=V(7574);let ne=1;const U=Promise.resolve(),de={};function se(fe){return fe in de&&(delete de[fe],!0)}const Q={setImmediate(fe){const Ce=ne++;return de[Ce]=!0,U.then(()=>se(Ce)&&fe()),Ce},clearImmediate(fe){se(fe)}};var J=V(6465),B=V(6102);const le=new class extends B.v{flush(Ce){this.active=!0,this.scheduled=void 0;const{actions:Pe}=this;let Ke,Pt=-1,Ft=Pe.length;Ce=Ce||Pe.shift();do{if(Ke=Ce.execute(Ce.state,Ce.delay))break}while(++Pt<Ft&&(Ce=Pe.shift()));if(this.active=!1,Ke){for(;++Pt<Ft&&(Ce=Pe.shift());)Ce.unsubscribe();throw Ke}}}(class extends J.o{constructor(Ce,Pe){super(Ce,Pe),this.scheduler=Ce,this.work=Pe}requestAsyncId(Ce,Pe,Ke=0){return null!==Ke&&Ke>0?super.requestAsyncId(Ce,Pe,Ke):(Ce.actions.push(this),Ce.scheduled||(Ce.scheduled=Q.setImmediate(Ce.flush.bind(Ce,null))))}recycleAsyncId(Ce,Pe,Ke=0){if(null!==Ke&&Ke>0||null===Ke&&this.delay>0)return super.recycleAsyncId(Ce,Pe,Ke);0===Ce.actions.length&&(Q.clearImmediate(Pe),Ce.scheduled=void 0)}});var he=V(9796);class ve extends c.y{constructor(Ce,Pe=0,Ke=le){var fe;super(),this.source=Ce,this.delayTime=Pe,this.scheduler=Ke,(!(!(0,he.k)(fe=Pe)&&fe-parseFloat(fe)+1>=0)||Pe<0)&&(this.delayTime=0),(!Ke||"function"!=typeof Ke.schedule)&&(this.scheduler=le)}static create(Ce,Pe=0,Ke=le){return new ve(Ce,Pe,Ke)}static dispatch(Ce){const{source:Pe,subscriber:Ke}=Ce;return this.add(Pe.subscribe(Ke))}_subscribe(Ce){return this.scheduler.schedule(ve.dispatch,this.delayTime,{source:this.source,subscriber:Ce})}}function pe(fe,Ce=0){return function(Ke){return Ke.lift(new re(fe,Ce))}}class re{constructor(Ce,Pe){this.scheduler=Ce,this.delay=Pe}call(Ce,Pe){return new ve(Pe,this.delay,this.scheduler).subscribe(Ce)}}},3342:(je,ye,V)=>{"use strict";V.d(ye,{b:()=>de});var c=V(7393);function ne(){}var U=V(9105);function de(me,J,ee){return function(H){return H.lift(new se(me,J,ee))}}class se{constructor(J,ee,B){this.nextOrObserver=J,this.error=ee,this.complete=B}call(J,ee){return ee.subscribe(new Q(J,this.nextOrObserver,this.error,this.complete))}}class Q extends c.L{constructor(J,ee,B,H){super(J),this._tapNext=ne,this._tapError=ne,this._tapComplete=ne,this._tapError=B||ne,this._tapComplete=H||ne,(0,U.m)(ee)?(this._context=this,this._tapNext=ee):ee&&(this._context=ee,this._tapNext=ee.next||ne,this._tapError=ee.error||ne,this._tapComplete=ee.complete||ne)}_next(J){try{this._tapNext.call(this._context,J)}catch(ee){return void this.destination.error(ee)}this.destination.next(J)}_error(J){try{this._tapError.call(this._context,J)}catch(ee){return void this.destination.error(ee)}this.destination.error(J)}_complete(){try{this._tapComplete.call(this._context)}catch(J){return void this.destination.error(J)}return this.destination.complete()}}},4087:(je,ye,V)=>{"use strict";V.d(ye,{r:()=>U});var c=V(7574),ne=V(5319);function U(de,se){return new c.y(Q=>{const me=new ne.w;let J=0;return me.add(se.schedule(function(){J!==de.length?(Q.next(de[J++]),Q.closed||me.add(this.schedule())):Q.complete()})),me})}},6465:(je,ye,V)=>{"use strict";V.d(ye,{o:()=>U});var c=V(5319);class ne extends c.w{constructor(se,Q){super()}schedule(se,Q=0){return this}}class U extends ne{constructor(se,Q){super(se,Q),this.scheduler=se,this.work=Q,this.pending=!1}schedule(se,Q=0){if(this.closed)return this;this.state=se;const me=this.id,J=this.scheduler;return null!=me&&(this.id=this.recycleAsyncId(J,me,Q)),this.pending=!0,this.delay=Q,this.id=this.id||this.requestAsyncId(J,this.id,Q),this}requestAsyncId(se,Q,me=0){return setInterval(se.flush.bind(se,this),me)}recycleAsyncId(se,Q,me=0){if(null!==me&&this.delay===me&&!1===this.pending)return Q;clearInterval(Q)}execute(se,Q){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const me=this._execute(se,Q);if(me)return me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(se,Q){let J,me=!1;try{this.work(se)}catch(ee){me=!0,J=!!ee&&ee||new Error(ee)}if(me)return this.unsubscribe(),J}_unsubscribe(){const se=this.id,Q=this.scheduler,me=Q.actions,J=me.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==J&&me.splice(J,1),null!=se&&(this.id=this.recycleAsyncId(Q,se,null)),this.delay=null}}},6102:(je,ye,V)=>{"use strict";V.d(ye,{v:()=>ne});let c=(()=>{class U{constructor(se,Q=U.now){this.SchedulerAction=se,this.now=Q}schedule(se,Q=0,me){return new this.SchedulerAction(this,se).schedule(me,Q)}}return U.now=()=>Date.now(),U})();class ne extends c{constructor(de,se=c.now){super(de,()=>ne.delegate&&ne.delegate!==this?ne.delegate.now():se()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(de,se=0,Q){return ne.delegate&&ne.delegate!==this?ne.delegate.schedule(de,se,Q):super.schedule(de,se,Q)}flush(de){const{actions:se}=this;if(this.active)return void se.push(de);let Q;this.active=!0;do{if(Q=de.execute(de.state,de.delay))break}while(de=se.shift());if(this.active=!1,Q){for(;de=se.shift();)de.unsubscribe();throw Q}}}},3637:(je,ye,V)=>{"use strict";V.d(ye,{z:()=>U});var c=V(6465);const U=new(V(6102).v)(c.o)},7771:(je,ye,V)=>{"use strict";V.d(ye,{c:()=>Q,N:()=>se});var c=V(6465),U=V(6102);const se=new class extends U.v{}(class extends c.o{constructor(J,ee){super(J,ee),this.scheduler=J,this.work=ee}schedule(J,ee=0){return ee>0?super.schedule(J,ee):(this.delay=ee,this.state=J,this.scheduler.flush(this),this)}execute(J,ee){return ee>0||this.closed?super.execute(J,ee):this._execute(J,ee)}requestAsyncId(J,ee,B=0){return null!==B&&B>0||null===B&&this.delay>0?super.requestAsyncId(J,ee,B):J.flush(this)}}),Q=se},377:(je,ye,V)=>{"use strict";V.d(ye,{hZ:()=>ne});const ne="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(je,ye,V)=>{"use strict";V.d(ye,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(je,ye,V)=>{"use strict";V.d(ye,{b:()=>c});const c="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(je,ye,V)=>{"use strict";V.d(ye,{N:()=>ne});const ne=(()=>{function U(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return U.prototype=Object.create(Error.prototype),U})()},4449:(je,ye,V)=>{"use strict";function c(ne){setTimeout(()=>{throw ne},0)}V.d(ye,{z:()=>c})},4487:(je,ye,V)=>{"use strict";function c(ne){return ne}V.d(ye,{y:()=>c})},9796:(je,ye,V)=>{"use strict";V.d(ye,{k:()=>c});const c=Array.isArray||(ne=>ne&&"number"==typeof ne.length)},9489:(je,ye,V)=>{"use strict";V.d(ye,{z:()=>c});const c=ne=>ne&&"number"==typeof ne.length&&"function"!=typeof ne},9105:(je,ye,V)=>{"use strict";function c(ne){return"function"==typeof ne}V.d(ye,{m:()=>c})},1555:(je,ye,V)=>{"use strict";function c(ne){return null!==ne&&"object"==typeof ne}V.d(ye,{K:()=>c})},4072:(je,ye,V)=>{"use strict";function c(ne){return!!ne&&"function"!=typeof ne.subscribe&&"function"==typeof ne.then}V.d(ye,{t:()=>c})},4869:(je,ye,V)=>{"use strict";function c(ne){return ne&&"function"==typeof ne.schedule}V.d(ye,{K:()=>c})},7444:(je,ye,V)=>{"use strict";V.d(ye,{s:()=>H});var c=V(5015),ne=V(4449),de=V(377),Q=V(6554),J=V(9489),ee=V(4072),B=V(1555);const H=G=>{if(G&&"function"==typeof G[Q.L])return(G=>le=>{const he=G[Q.L]();if("function"!=typeof he.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return he.subscribe(le)})(G);if((0,J.z)(G))return(0,c.V)(G);if((0,ee.t)(G))return(G=>le=>(G.then(he=>{le.closed||(le.next(he),le.complete())},he=>le.error(he)).then(null,ne.z),le))(G);if(G&&"function"==typeof G[de.hZ])return(G=>le=>{const he=G[de.hZ]();for(;;){let we;try{we=he.next()}catch(ve){return le.error(ve),le}if(we.done){le.complete();break}if(le.next(we.value),le.closed)break}return"function"==typeof he.return&&le.add(()=>{he.return&&he.return()}),le})(G);{const he=`You provided ${(0,B.K)(G)?"an invalid object":`'${G}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(he)}}},5015:(je,ye,V)=>{"use strict";V.d(ye,{V:()=>c});const c=ne=>U=>{for(let de=0,se=ne.length;de<se&&!U.closed;de++)U.next(ne[de]);U.complete()}},5537:(je,ye,V)=>{"use strict";var c=V(7716);let ne=null;function U(){return ne}const me=new c.OlP("DocumentToken");let J=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,c.Yz7)({factory:ee,token:n,providedIn:"platform"}),n})();function ee(){return(0,c.LFG)(H)}const B=new c.OlP("Location Initialized");let H=(()=>{class n extends J{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return U().getBaseHref(this._doc)}onPopState(t){const r=U().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=U().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){G()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){G()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(me))},n.\u0275prov=(0,c.Yz7)({factory:le,token:n,providedIn:"platform"}),n})();function G(){return!!window.history.pushState}function le(){return new H((0,c.LFG)(me))}function he(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function we(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ve(n){return n&&"?"!==n[0]?"?"+n:n}let pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,c.Yz7)({factory:re,token:n,providedIn:"root"}),n})();function re(n){const e=(0,c.LFG)(me).location;return new Ce((0,c.LFG)(J),e&&e.origin||"")}const fe=new c.OlP("appBaseHref");let Ce=(()=>{class n extends pe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return he(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ve(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,l){const d=this.prepareExternalUrl(o+ve(l));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,l){const d=this.prepareExternalUrl(o+ve(l));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(J),c.LFG(fe,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Pe=(()=>{class n extends pe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=he(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,l){let d=this.prepareExternalUrl(o+ve(l));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,l){let d=this.prepareExternalUrl(o+ve(l));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(J),c.LFG(fe,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Ke=(()=>{class n{constructor(t,r){this._subject=new c.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=we(Tt(o)),this._platformStrategy.onPopState(l=>{this._subject.emit({url:this.path(!0),pop:!0,state:l.state,type:l.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ve(r))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Tt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ve(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ve(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(pe),c.LFG(J))},n.normalizeQueryParams=ve,n.joinWithSlash=he,n.stripTrailingSlash=we,n.\u0275prov=(0,c.Yz7)({factory:Pt,token:n,providedIn:"root"}),n})();function Pt(){return new Ke((0,c.LFG)(pe),(0,c.LFG)(J))}function Tt(n){return n.replace(/\/index.html$/,"")}const An={ADP:[void 0,void 0,0],AFN:[void 0,void 0,0],ALL:[void 0,void 0,0],AMD:[void 0,void 0,2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,"\u0440.",2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:[void 0,"\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RUR:[void 0,"\u0440."],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["CFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var It=(()=>((It=It||{})[It.Decimal=0]="Decimal",It[It.Percent=1]="Percent",It[It.Currency=2]="Currency",It[It.Scientific=3]="Scientific",It))(),pt=(()=>((pt=pt||{})[pt.Zero=0]="Zero",pt[pt.One=1]="One",pt[pt.Two=2]="Two",pt[pt.Few=3]="Few",pt[pt.Many=4]="Many",pt[pt.Other=5]="Other",pt))(),Ye=(()=>((Ye=Ye||{})[Ye.Decimal=0]="Decimal",Ye[Ye.Group=1]="Group",Ye[Ye.List=2]="List",Ye[Ye.PercentSign=3]="PercentSign",Ye[Ye.PlusSign=4]="PlusSign",Ye[Ye.MinusSign=5]="MinusSign",Ye[Ye.Exponential=6]="Exponential",Ye[Ye.SuperscriptingExponent=7]="SuperscriptingExponent",Ye[Ye.PerMille=8]="PerMille",Ye[Ye.Infinity=9]="Infinity",Ye[Ye.NaN=10]="NaN",Ye[Ye.TimeSeparator=11]="TimeSeparator",Ye[Ye.CurrencyDecimal=12]="CurrencyDecimal",Ye[Ye.CurrencyGroup=13]="CurrencyGroup",Ye))();function Sn(n,e){const t=(0,c.cg1)(n),r=t[c.wAp.NumberSymbols][e];if(void 0===r){if(e===Ye.CurrencyDecimal)return t[c.wAp.NumberSymbols][Ye.Decimal];if(e===Ye.CurrencyGroup)return t[c.wAp.NumberSymbols][Ye.Group]}return r}const _s=c.kL8;const Si=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function ei(n,e,t,r,o){const d=function(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),o=r[0],l=r[1],d=-1!==o.indexOf(".")?o.split("."):[o.substring(0,o.lastIndexOf("0")+1),o.substring(o.lastIndexOf("0")+1)],p=d[0],y=d[1]||"";t.posPre=p.substr(0,p.indexOf("#"));for(let D=0;D<y.length;D++){const S=y.charAt(D);"0"===S?t.minFrac=t.maxFrac=D+1:"#"===S?t.maxFrac=D+1:t.posSuf+=S}const b=p.split(",");if(t.gSize=b[1]?b[1].length:0,t.lgSize=b[2]||b[1]?(b[2]||b[1]).length:0,l){const D=o.length-t.posPre.length-t.posSuf.length,S=l.indexOf("#");t.negPre=l.substr(0,S).replace(/'/g,""),t.negSuf=l.substr(S+D).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function(n,e){return(0,c.cg1)(n)[c.wAp.NumberFormats][e]}(e,It.Currency),Sn(e,Ye.MinusSign));return d.minFrac=function(n){let e;const t=An[n];return t&&(e=t[2]),"number"==typeof e?e:2}(r),d.maxFrac=d.minFrac,function(n,e,t,r,o,l,d=!1){let p="",y=!1;if(isFinite(n)){let b=function(n){let r,o,l,d,p,e=Math.abs(n)+"",t=0;for((o=e.indexOf("."))>-1&&(e=e.replace(".","")),(l=e.search(/e/i))>0?(o<0&&(o=l),o+=+e.slice(l+1),e=e.substring(0,l)):o<0&&(o=e.length),l=0;"0"===e.charAt(l);l++);if(l===(p=e.length))r=[0],o=1;else{for(p--;"0"===e.charAt(p);)p--;for(o-=l,r=[],d=0;l<=p;l++,d++)r[d]=Number(e.charAt(l))}return o>22&&(r=r.splice(0,21),t=o-1,o=1),{digits:r,exponent:t,integerLen:o}}(n);d&&(b=function(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(b));let D=e.minInt,S=e.minFrac,O=e.maxFrac;if(l){const Ze=l.match(Si);if(null===Ze)throw new Error(`${l} is not a valid digit info`);const ft=Ze[1],st=Ze[3],Dn=Ze[5];null!=ft&&(D=ut(ft)),null!=st&&(S=ut(st)),null!=Dn?O=ut(Dn):null!=st&&S>O&&(O=S)}!function(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,o=r.length-n.integerLen;const l=Math.min(Math.max(e,o),t);let d=l+n.integerLen,p=r[d];if(d>0){r.splice(Math.max(n.integerLen,d));for(let S=d;S<r.length;S++)r[S]=0}else{o=Math.max(0,o),n.integerLen=1,r.length=Math.max(1,d=l+1),r[0]=0;for(let S=1;S<d;S++)r[S]=0}if(p>=5)if(d-1<0){for(let S=0;S>d;S--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[d-1]++;for(;o<Math.max(0,l);o++)r.push(0);let y=0!==l;const b=e+n.integerLen,D=r.reduceRight(function(S,O,F,$){return $[F]=(O+=S)<10?O:O-10,y&&(0===$[F]&&F>=b?$.pop():y=!1),O>=10?1:0},0);D&&(r.unshift(D),n.integerLen++)}(b,S,O);let F=b.digits,$=b.integerLen;const ie=b.exponent;let Ee=[];for(y=F.every(Ze=>!Ze);$<D;$++)F.unshift(0);for(;$<0;$++)F.unshift(0);$>0?Ee=F.splice($,F.length):(Ee=F,F=[0]);const ke=[];for(F.length>=e.lgSize&&ke.unshift(F.splice(-e.lgSize,F.length).join(""));F.length>e.gSize;)ke.unshift(F.splice(-e.gSize,F.length).join(""));F.length&&ke.unshift(F.join("")),p=ke.join(Sn(t,r)),Ee.length&&(p+=Sn(t,o)+Ee.join("")),ie&&(p+=Sn(t,Ye.Exponential)+"+"+ie)}else p=Sn(t,Ye.Infinity);return p=n<0&&!y?e.negPre+p+e.negSuf:e.posPre+p+e.posSuf,p}(n,d,e,Ye.CurrencyGroup,Ye.CurrencyDecimal,o).replace("\xa4",t).replace("\xa4","").trim()}function ut(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}class ti{}let hr=(()=>{class n extends ti{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(_s(r||this.locale)(t)){case pt.Zero:return"zero";case pt.One:return"one";case pt.Two:return"two";case pt.Few:return"few";case pt.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.soG))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function fr(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,l]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(l)}return null}class Lr{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Vt=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=[];t.forEachOperation((o,l,d)=>{if(null==o.previousIndex){const p=this._viewContainer.createEmbeddedView(this._template,new Lr(null,this._ngForOf,-1,-1),null===d?void 0:d),y=new Fh(o,p);r.push(y)}else if(null==d)this._viewContainer.remove(null===l?void 0:l);else if(null!==l){const p=this._viewContainer.get(l);this._viewContainer.move(p,d);const y=new Fh(o,p);r.push(y)}});for(let o=0;o<r.length;o++)this._perViewChange(r[o].view,r[o].record);for(let o=0,l=this._viewContainer.length;o<l;o++){const d=this._viewContainer.get(o);d.context.index=o,d.context.count=l,d.context.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{this._viewContainer.get(o.currentIndex).context.$implicit=o.item})}_perViewChange(t,r){t.context.$implicit=r.item}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class Fh{constructor(e,t){this.record=e,this.view=t}}let Ar=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new ad,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Da("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Da("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class ad{constructor(){this.$implicit=null,this.ngIf=null}}function Da(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,c.AaK)(e)}'.`)}let Ol=(()=>{class n{constructor(t,r="USD"){this._locale=t,this._defaultCurrencyCode=r}transform(t,r=this._defaultCurrencyCode,o="symbol",l,d){if(!function(n){return!(null==n||""===n||n!=n)}(t))return null;d=d||this._locale,"boolean"==typeof o&&(o=o?"symbol":"code");let p=r||this._defaultCurrencyCode;"code"!==o&&(p="symbol"===o||"symbol-narrow"===o?function(n,e,t="en"){const r=function(n){return(0,c.cg1)(n)[c.wAp.Currencies]}(t)[n]||An[n]||[],o=r[1];return"narrow"===e&&"string"==typeof o?o:r[0]||n}(p,"symbol"===o?"wide":"narrow",d):o);try{return ei(function(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),d,p,r,l)}catch(y){throw function(n,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${(0,c.AaK)(n)}'`)}(n,y.message)}}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.soG,16),c.Y36(c.EJc,16))},n.\u0275pipe=c.Yjl({name:"currency",type:n,pure:!0}),n})();let Vr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[{provide:ti,useClass:hr}]}),n})();function Lu(n){return"server"===n}let Ll=(()=>{class n{}return n.\u0275prov=(0,c.Yz7)({token:n,providedIn:"root",factory:()=>new Zh((0,c.LFG)(me),window)}),n})();class Zh{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const l=o.shadowRoot;if(l){const d=l.getElementById(e)||l.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(r-l[0],o-l[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Sa(this.window.history)||Sa(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Sa(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class hd{}class Gh extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new Gh,ne||(ne=n)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(Es=Es||document.querySelector("base"),Es?Es.getAttribute("href"):null);return null==t?null:function(n){tn=tn||document.createElement("a"),tn.setAttribute("href",n);const e=tn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Es=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return fr(document.cookie,e)}}let tn,Es=null;const Uu=new c.OlP("TRANSITION_ID"),mi=[{provide:c.ip1,useFactory:function(n,e,t){return()=>{t.get(c.CZH).donePromise.then(()=>{const r=U(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<o.length;l++)r.remove(o[l])})}},deps:[Uu,me,c.zs3],multi:!0}];class Kn{static init(){(0,c.VLi)(new Kn)}addToWindow(e){c.dqk.getAngularTestability=(r,o=!0)=>{const l=e.findTestabilityInTree(r,o);if(null==l)throw new Error("Could not find testability for element.");return l},c.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(r=>{const o=c.dqk.getAllAngularTestabilities();let l=o.length,d=!1;const p=function(y){d=d||y,l--,0==l&&r(d)};o.forEach(function(y){y.whenStable(p)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?U().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let po=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Fs=new c.OlP("EventManagerPlugins");let Ie=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let l=0;l<o.length;l++){const d=o[l];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Fs),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class At{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=U().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let qu=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),un=(()=>{class n extends qu{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(l=>{const d=this._doc.createElement("style");d.textContent=l,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Zu),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Zu))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(me))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Zu(n){U().remove(n)}const Cs={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Br=/%COMP%/g;function Hn(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?Hn(n,o,t):(o=o.replace(Br,n),t.push(o))}return t}function Ni(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Mi=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new jr(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case c.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new md(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case c.ifc.ShadowDom:return new ql(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=Hn(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Ie),c.LFG(un),c.LFG(c.AFp))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class jr{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(Cs[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const l=Cs[o];l?e.setAttributeNS(l,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=Cs[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(c.JOm.DashCase|c.JOm.Important)?e.style.setProperty(t,r,o&c.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&c.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ni(r)):this.eventManager.addEventListener(e,t,Ni(r))}}class md extends jr{constructor(e,t,r,o){super(e),this.component=r;const l=Hn(o+"-"+r.id,r.styles,[]);t.addStyles(l),this.contentAttr="_ngcontent-%COMP%".replace(Br,o+"-"+r.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(Br,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class ql extends jr{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=Hn(o.id,o.styles,[]);for(let d=0;d<l.length;d++){const p=document.createElement("style");p.textContent=l[d],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Zl=(()=>{class n extends At{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(me))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Ls=["alt","control","meta","shift"],vd={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},lr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Z_={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Fa=(()=>{class n extends At{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const l=n.parseEventName(r),d=n.eventCallback(l.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>U().onAndCancel(t,l.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const l=n._normalizeKey(r.pop());let d="";if(Ls.forEach(y=>{const b=r.indexOf(y);b>-1&&(r.splice(b,1),d+=y+".")}),d+=l,0!=r.length||0===l.length)return null;const p={};return p.domEventName=o,p.fullKey=d,p}static getEventFullKey(t){let r="",o=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&lr.hasOwnProperty(e)&&(e=lr[e]))}return vd[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Ls.forEach(l=>{l!=o&&Z_[l](t)&&(r+=l+".")}),r+=o,r}static eventCallback(t,r,o){return l=>{n.getEventFullKey(l)===t&&o.runGuarded(()=>r(l))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(me))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),La=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,c.Yz7)({factory:function(){return(0,c.LFG)(_o)},token:n,providedIn:"root"}),n})(),_o=(()=>{class n extends La{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case c.q3G.NONE:return r;case c.q3G.HTML:return(0,c.qzn)(r,"HTML")?(0,c.z3N)(r):(0,c.EiD)(this._doc,String(r)).toString();case c.q3G.STYLE:return(0,c.qzn)(r,"Style")?(0,c.z3N)(r):r;case c.q3G.SCRIPT:if((0,c.qzn)(r,"Script"))return(0,c.z3N)(r);throw new Error("unsafe value used in a script context");case c.q3G.URL:return(0,c.yhl)(r),(0,c.qzn)(r,"URL")?(0,c.z3N)(r):(0,c.mCW)(String(r));case c.q3G.RESOURCE_URL:if((0,c.qzn)(r,"ResourceURL"))return(0,c.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,c.JVY)(t)}bypassSecurityTrustStyle(t){return(0,c.L6k)(t)}bypassSecurityTrustScript(t){return(0,c.eBb)(t)}bypassSecurityTrustUrl(t){return(0,c.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,c.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(me))},n.\u0275prov=(0,c.Yz7)({factory:function(){return function(n){return new _o(n.get(me))}((0,c.LFG)(c.gxx))},token:n,providedIn:"root"}),n})();const yo=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:"browser"},{provide:c.g9A,useValue:function(){Gh.makeCurrent(),Kn.init()},multi:!0},{provide:me,useFactory:function(){return(0,c.RDi)(document),document},deps:[]}]),Cd=[[],{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function(){return new c.qLn},deps:[]},{provide:Fs,useClass:Zl,multi:!0,deps:[me,c.R0b,c.Lbi]},{provide:Fs,useClass:Fa,multi:!0,deps:[me]},[],{provide:Mi,useClass:Mi,deps:[Ie,un,c.AFp]},{provide:c.FYo,useExisting:Mi},{provide:qu,useExisting:un},{provide:un,useClass:un,deps:[me]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b]},{provide:Ie,useClass:Ie,deps:[Fs,c.R0b]},{provide:hd,useClass:po,deps:[]},[]];let bd=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:c.AFp,useValue:t.appId},{provide:Uu,useExisting:c.AFp},mi]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(n,12))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:Cd,imports:[Vr,c.hGG]}),n})();"undefined"!=typeof window&&window;var rt=V(5917),_n=V(7574),Yn=V(9773);function Ko(n,e){return(0,Yn.zg)(n,e,1)}var Hr=V(7393);function $r(n,e){return function(r){return r.lift(new of(n,e))}}class of{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new yi(e,this.predicate,this.thisArg))}}class yi extends Hr.L{constructor(e,t,r){super(e),this.predicate=t,this.thisArg=r,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)}}var ze=V(8002);class _g{}class Bs{}class vi{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const o=t.slice(0,r),l=o.toLowerCase(),d=t.slice(r+1).trim();this.maybeSetNormalizedName(o,l),this.headers.has(l)?this.headers.get(l).push(d):this.headers.set(l,[d])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const o=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(o,r),this.maybeSetNormalizedName(t,o))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof vi?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new vi;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof vi?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const o=("a"===e.op?this.headers.get(t):void 0)||[];o.push(...r),this.headers.set(t,o);break;case"d":const l=e.value;if(l){let d=this.headers.get(t);if(!d)return;d=d.filter(p=>-1===l.indexOf(p)),0===d.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,d)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Qn{encodeKey(e){return Kl(e)}encodeValue(e){return Kl(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Ju=/%(\d[a-f0-9])/gi,Eo={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function Kl(n){return encodeURIComponent(n).replace(Ju,(e,t)=>{var r;return null!==(r=Eo[t])&&void 0!==r?r:e})}function ja(n){return`${n}`}class bs{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Qn,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{const l=o.indexOf("="),[d,p]=-1==l?[e.decodeKey(o),""]:[e.decodeKey(o.slice(0,l)),e.decodeValue(o.slice(l+1))],y=t.get(d)||[];y.push(p),t.set(d,y)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const o=e[r];Array.isArray(o)?o.forEach(l=>{t.push({param:r,value:l,op:"a"})}):t.push({param:r,value:o,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new bs({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(ja(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const o=r.indexOf(ja(e.value));-1!==o&&r.splice(o,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Ha{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function $a(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function bo(n){return"undefined"!=typeof Blob&&n instanceof Blob}function Xi(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Yl{constructor(e,t,r,o){let l;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,l=o):l=r,l&&(this.reportProgress=!!l.reportProgress,this.withCredentials=!!l.withCredentials,l.responseType&&(this.responseType=l.responseType),l.headers&&(this.headers=l.headers),l.context&&(this.context=l.context),l.params&&(this.params=l.params)),this.headers||(this.headers=new vi),this.context||(this.context=new Ha),this.params){const d=this.params.toString();if(0===d.length)this.urlWithParams=t;else{const p=t.indexOf("?");this.urlWithParams=t+(-1===p?"?":p<t.length-1?"&":"")+d}}else this.params=new bs,this.urlWithParams=t}serializeBody(){return null===this.body?null:$a(this.body)||bo(this.body)||Xi(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof bs?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Xi(this.body)?null:bo(this.body)?this.body.type||null:$a(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof bs?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,o=e.url||this.url,l=e.responseType||this.responseType,d=void 0!==e.body?e.body:this.body,p=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,y=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let b=e.headers||this.headers,D=e.params||this.params;const S=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(b=Object.keys(e.setHeaders).reduce((O,F)=>O.set(F,e.setHeaders[F]),b)),e.setParams&&(D=Object.keys(e.setParams).reduce((O,F)=>O.set(F,e.setParams[F]),D)),new Yl(r,o,d,{params:D,headers:b,context:S,reportProgress:y,responseType:l,withCredentials:p})}}var $n=(()=>(($n=$n||{})[$n.Sent=0]="Sent",$n[$n.UploadProgress=1]="UploadProgress",$n[$n.ResponseHeader=2]="ResponseHeader",$n[$n.DownloadProgress=3]="DownloadProgress",$n[$n.Response=4]="Response",$n[$n.User=5]="User",$n))();class Td{constructor(e,t=200,r="OK"){this.headers=e.headers||new vi,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class lf extends Td{constructor(e={}){super(e),this.type=$n.ResponseHeader}clone(e={}){return new lf({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class cn extends Td{constructor(e={}){super(e),this.type=$n.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new cn({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Xu extends Td{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Ql(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let yg=(()=>{class n{constructor(t){this.handler=t}request(t,r,o={}){let l;if(t instanceof Yl)l=t;else{let y,b;y=o.headers instanceof vi?o.headers:new vi(o.headers),o.params&&(b=o.params instanceof bs?o.params:new bs({fromObject:o.params})),l=new Yl(t,r,void 0!==o.body?o.body:null,{headers:y,context:o.context,params:b,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const d=(0,rt.of)(l).pipe(Ko(y=>this.handler.handle(y)));if(t instanceof Yl||"events"===o.observe)return d;const p=d.pipe($r(y=>y instanceof cn));switch(o.observe||"body"){case"body":switch(l.responseType){case"arraybuffer":return p.pipe((0,ze.U)(y=>{if(null!==y.body&&!(y.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return y.body}));case"blob":return p.pipe((0,ze.U)(y=>{if(null!==y.body&&!(y.body instanceof Blob))throw new Error("Response is not a Blob.");return y.body}));case"text":return p.pipe((0,ze.U)(y=>{if(null!==y.body&&"string"!=typeof y.body)throw new Error("Response is not a string.");return y.body}));case"json":default:return p.pipe((0,ze.U)(y=>y.body))}case"response":return p;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new bs).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,o={}){return this.request("PATCH",t,Ql(o,r))}post(t,r,o={}){return this.request("POST",t,Ql(o,r))}put(t,r,o={}){return this.request("PUT",t,Ql(o,r))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(_g))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class W_{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const Jl=new c.OlP("HTTP_INTERCEPTORS");let K_=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const qn=/^\)\]\}',?\n/;let Yo=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new _n.y(r=>{const o=this.xhrFactory.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((F,$)=>o.setRequestHeader(F,$.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const F=t.detectContentTypeHeader();null!==F&&o.setRequestHeader("Content-Type",F)}if(t.responseType){const F=t.responseType.toLowerCase();o.responseType="json"!==F?F:"text"}const l=t.serializeBody();let d=null;const p=()=>{if(null!==d)return d;const F=1223===o.status?204:o.status,$=o.statusText||"OK",ie=new vi(o.getAllResponseHeaders()),Ee=function(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return d=new lf({headers:ie,status:F,statusText:$,url:Ee}),d},y=()=>{let{headers:F,status:$,statusText:ie,url:Ee}=p(),ke=null;204!==$&&(ke=void 0===o.response?o.responseText:o.response),0===$&&($=ke?200:0);let Ze=$>=200&&$<300;if("json"===t.responseType&&"string"==typeof ke){const ft=ke;ke=ke.replace(qn,"");try{ke=""!==ke?JSON.parse(ke):null}catch(st){ke=ft,Ze&&(Ze=!1,ke={error:st,text:ke})}}Ze?(r.next(new cn({body:ke,headers:F,status:$,statusText:ie,url:Ee||void 0})),r.complete()):r.error(new Xu({error:ke,headers:F,status:$,statusText:ie,url:Ee||void 0}))},b=F=>{const{url:$}=p(),ie=new Xu({error:F,status:o.status||0,statusText:o.statusText||"Unknown Error",url:$||void 0});r.error(ie)};let D=!1;const S=F=>{D||(r.next(p()),D=!0);let $={type:$n.DownloadProgress,loaded:F.loaded};F.lengthComputable&&($.total=F.total),"text"===t.responseType&&!!o.responseText&&($.partialText=o.responseText),r.next($)},O=F=>{let $={type:$n.UploadProgress,loaded:F.loaded};F.lengthComputable&&($.total=F.total),r.next($)};return o.addEventListener("load",y),o.addEventListener("error",b),o.addEventListener("timeout",b),o.addEventListener("abort",b),t.reportProgress&&(o.addEventListener("progress",S),null!==l&&o.upload&&o.upload.addEventListener("progress",O)),o.send(l),r.next({type:$n.Sent}),()=>{o.removeEventListener("error",b),o.removeEventListener("abort",b),o.removeEventListener("load",y),o.removeEventListener("timeout",b),t.reportProgress&&(o.removeEventListener("progress",S),null!==l&&o.upload&&o.upload.removeEventListener("progress",O)),o.readyState!==o.DONE&&o.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(hd))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Cg=new c.OlP("XSRF_COOKIE_NAME"),cf=new c.OlP("XSRF_HEADER_NAME");class ni{}let ws=(()=>{class n{constructor(t,r,o){this.doc=t,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=fr(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(me),c.LFG(c.Lbi),c.LFG(Cg))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Za=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const o=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||o.startsWith("http://")||o.startsWith("https://"))return r.handle(t);const l=this.tokenService.getToken();return null!==l&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,l)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ni),c.LFG(cf))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Oi=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(Jl,[]);this.chain=r.reduceRight((o,l)=>new W_(o,l),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Bs),c.LFG(c.zs3))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),df=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:Za,useClass:K_}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:Cg,useValue:t.cookieName}:[],t.headerName?{provide:cf,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[Za,{provide:Jl,useExisting:Za,multi:!0},{provide:ni,useClass:ws},{provide:Cg,useValue:"XSRF-TOKEN"},{provide:cf,useValue:"X-XSRF-TOKEN"}]}),n})(),Qo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[yg,{provide:_g,useClass:Oi},Yo,{provide:Bs,useExisting:Yo}],imports:[[df.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();var yn=V(4402),dn=V(9765),Jo=V(7971);class Jn extends dn.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Jo.N;return this._value}next(e){super.next(this._value=e)}}var Id=V(4869),Dd=V(9796);class T extends Hr.L{notifyNext(e,t,r,o,l){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class x extends Hr.L{constructor(e,t,r){super(),this.parent=e,this.outerValue=t,this.outerIndex=r,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var M=V(7444);function j(n,e,t,r,o=new x(n,t,r)){if(!o.closed)return e instanceof _n.y?e.subscribe(o):(0,M.s)(e)(o)}var X=V(6693);const ue={};class Be{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new $e(e,this.resultSelector))}}class $e extends T{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(ue),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let r=0;r<t;r++)this.add(j(this,e[r],void 0,r))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,r){const o=this.values,d=this.toRespond?o[r]===ue?--this.toRespond:this.toRespond:0;o[r]=t,0===d&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}const Qt=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();var bn=V(3282);function Xn(...n){return(0,bn.J)(1)((0,rt.of)(...n))}var es=V(9193);function To(n){return new _n.y(e=>{let t;try{t=n()}catch(o){return void e.error(o)}return(t?(0,yn.D)(t):(0,es.c)()).subscribe(e)})}var ec=V(2441),Nr=V(5345);function pn(n,e){return"function"==typeof e?t=>t.pipe(pn((r,o)=>(0,yn.D)(n(r,o)).pipe((0,ze.U)((l,d)=>e(r,l,o,d))))):t=>t.lift(new Hs(n))}class Hs{constructor(e){this.project=e}call(e,t){return t.subscribe(new wg(e,this.project))}}class wg extends Nr.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(o){return void this.destination.error(o)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const r=new Nr.IY(this),o=this.destination;o.add(r),this.innerSubscription=(0,Nr.ft)(e,r),this.innerSubscription!==r&&o.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const tc=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function Q_(n){return e=>0===n?(0,es.c)():e.lift(new eu(n))}class eu{constructor(e){if(this.total=e,this.total<0)throw new tc}call(e,t){return t.subscribe(new tu(e,this.total))}}class tu extends Hr.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))}}function nc(...n){const e=n[n.length-1];return(0,Id.K)(e)?(n.pop(),t=>Xn(n,t,e)):t=>Xn(n,t)}function Io(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(o){return o.lift(new J_(n,e,t))}}class J_{constructor(e,t,r=!1){this.accumulator=e,this.seed=t,this.hasSeed=r}call(e,t){return t.subscribe(new aC(e,this.accumulator,this.seed,this.hasSeed))}}class aC extends Hr.L{constructor(e,t,r,o){super(e),this.accumulator=t,this._seed=r,this.hasSeed=o,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let r;try{r=this.accumulator(this.seed,e,t)}catch(o){this.destination.error(o)}this.seed=r,this.destination.next(r)}}function ts(n){return function(t){const r=new Xo(n),o=t.lift(r);return r.caught=o}}class Xo{constructor(e){this.selector=e}call(e,t){return t.subscribe(new hf(e,this.selector,this.caught))}}class hf extends Nr.Ds{constructor(e,t,r){super(e),this.selector=t,this.caught=r}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(l){return void super.error(l)}this._unsubscribeAndRecycle();const r=new Nr.IY(this);this.add(r);const o=(0,Nr.ft)(t,r);o!==r&&this.add(o)}}}function Ts(n){return function(t){return 0===n?(0,es.c)():t.lift(new lC(n))}}class lC{constructor(e){if(this.total=e,this.total<0)throw new tc}call(e,t){return t.subscribe(new X_(e,this.total))}}class X_ extends Hr.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,r=this.total,o=this.count++;t.length<r?t.push(e):t[o%r]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const r=this.count>=this.total?this.total:this.count,o=this.ring;for(let l=0;l<r;l++){const d=t++%r;e.next(o[d])}}e.complete()}}function rc(n=Tg){return e=>e.lift(new ff(n))}class ff{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new ey(e,this.errorFactory))}}class ey extends Hr.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function Tg(){return new Qt}function ty(n=null){return e=>e.lift(new Ga(n))}class Ga{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new za(e,this.defaultValue))}}class za extends Hr.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var pf=V(4487);function Do(n,e){const t=arguments.length>=2;return r=>r.pipe(n?$r((o,l)=>n(o,l,r)):pf.y,Q_(1),t?ty(e):rc(()=>new Qt))}var ns=V(3342),cC=V(1307),Ig=V(5319);class dC{constructor(e){this.callback=e}call(e,t){return t.subscribe(new Ad(e,this.callback))}}class Ad extends Hr.L{constructor(e,t){super(e),this.add(new Ig.w(t))}}class rs{constructor(e,t){this.id=e,this.url=t}}class Wa extends rs{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Sd extends rs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ry extends rs{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class iy extends rs{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class gf extends rs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Dg extends rs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ag extends rs{constructor(e,t,r,o,l){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=l}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class sy extends rs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xd extends rs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ka{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class oy{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class hC{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fC{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pC{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gC{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ao{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const bt="primary";class mf{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ic(n){return new mf(n)}const ay="ngNavigationCancelingError";function Sg(n){const e=Error("NavigationCancelingError: "+n);return e[ay]=!0,e}function _C(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let l=0;l<r.length;l++){const d=r[l],p=n[l];if(d.startsWith(":"))o[d.substring(1)]=p;else if(d!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function So(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let l=0;l<t.length;l++)if(o=t[l],!ly(n[o],e[o]))return!1;return!0}function ly(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,l)=>r[l]===o)}return n===e}function uy(n){return Array.prototype.concat.apply([],n)}function cy(n){return n.length>0?n[n.length-1]:null}function qr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ri(n){return(0,c.CqO)(n)?n:(0,c.QGY)(n)?(0,yn.D)(Promise.resolve(n)):(0,rt.of)(n)}const $s={exact:function _f(n,e,t){if(!xo(n.segments,e.segments)||!oc(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!_f(n.children[r],e.children[r],t))return!1;return!0},subset:EC},sc={exact:function(n,e){return So(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ly(n[t],e[t]))},ignored:()=>!0};function Pd(n,e,t){return $s[t.paths](n.root,e.root,t.matrixParams)&&sc[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function EC(n,e,t){return CC(n,e,e.segments,t)}function CC(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!xo(o,t)||e.hasChildren()||!oc(o,t,r))}if(n.segments.length===t.length){if(!xo(n.segments,t)||!oc(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!EC(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),l=t.slice(n.segments.length);return!!(xo(n.segments,o)&&oc(n.segments,o,r)&&n.children[bt])&&CC(n.children[bt],e,l,r)}}function oc(n,e,t){return e.every((r,o)=>sc[t](n[o].parameters,r.parameters))}class Ya{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ic(this.queryParams)),this._queryParamMap}toString(){return wC.serialize(this)}}class Et{constructor(e,t){this.segments=e,this.children=t,this.parent=null,qr(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return nu(this)}}class yf{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ic(this.parameters)),this._parameterMap}toString(){return vf(this)}}function xo(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Nd{}class fy{parse(e){const t=new Xa(e);return new Ya(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var n;return`${`/${Qa(e.root,!0)}`}${function(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Ja(t)}=${Ja(o)}`).join("&"):`${Ja(t)}=${Ja(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${n=e.fragment,encodeURI(n)}`:""}`}}const wC=new fy;function nu(n){return n.segments.map(e=>vf(e)).join("/")}function Qa(n,e){if(!n.hasChildren())return nu(n);if(e){const t=n.children[bt]?Qa(n.children[bt],!1):"",r=[];return qr(n.children,(o,l)=>{l!==bt&&r.push(`${l}:${Qa(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function(n,e){let t=[];return qr(n.children,(r,o)=>{o===bt&&(t=t.concat(e(r,o)))}),qr(n.children,(r,o)=>{o!==bt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===bt?[Qa(n.children[bt],!1)]:[`${o}:${Qa(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[bt]?`${nu(n)}/${t[0]}`:`${nu(n)}/(${t.join("//")})`}}function Pg(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ja(n){return Pg(n).replace(/%3B/gi,";")}function Nn(n){return Pg(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Md(n){return decodeURIComponent(n)}function py(n){return Md(n.replace(/\+/g,"%20"))}function vf(n){return`${Nn(n.path)}${function(n){return Object.keys(n).map(e=>`;${Nn(e)}=${Nn(n[e])}`).join("")}(n.parameters)}`}const IC=/^[^\/()?;=#]+/;function Ef(n){const e=n.match(IC);return e?e[0]:""}const Og=/^[^=?&#]+/,NT=/^[^?&#]+/;class Xa{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Et([],{}):new Et([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[bt]=new Et(e,t)),r}parseSegment(){const e=Ef(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new yf(Md(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Ef(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Ef(this.remaining);o&&(r=o,this.capture(r))}e[Md(t)]=Md(r)}parseQueryParam(e){const t=function(n){const e=n.match(Og);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function(n){const e=n.match(NT);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=py(t),l=py(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(l)}else e[o]=l}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Ef(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let l;r.indexOf(":")>-1?(l=r.substr(0,r.indexOf(":")),this.capture(l),this.capture(":")):e&&(l=bt);const d=this.parseChildren();t[l]=1===Object.keys(d).length?d[bt]:new Et([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class ii{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Od(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Od(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Cf(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Cf(e,this._root).map(t=>t.value)}}function Od(n,e){if(n===e.value)return e;for(const t of e.children){const r=Od(n,t);if(r)return r}return null}function Cf(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Cf(n,t);if(r.length)return r.unshift(e),r}return[]}class qs{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ur(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class ac extends ii{constructor(e,t){super(e),this.snapshot=t,wf(this,e)}toString(){return this.snapshot.toString()}}function bf(n,e){const t=function(n,e){const d=new Rd([],{},{},"",{},bt,e,null,n.root,-1,{});return new my("",new qs(d,[]))}(n,e),r=new Jn([new yf("",{})]),o=new Jn({}),l=new Jn({}),d=new Jn({}),p=new Jn(""),y=new Is(r,o,d,p,l,bt,e,t.root);return y.snapshot=t.root,new ac(new qs(y,[]),t)}class Is{constructor(e,t,r,o,l,d,p,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=l,this.outlet=d,this.component=p,this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ze.U)(e=>ic(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ze.U)(e=>ic(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function kg(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],l=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(l.component)break;r--}}return function(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Rd{constructor(e,t,r,o,l,d,p,y,b,D,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=l,this.outlet=d,this.component=p,this.routeConfig=y,this._urlSegment=b,this._lastPathIndex=D,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ic(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ic(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class my extends ii{constructor(e,t){super(t),this.url=e,wf(this,t)}toString(){return _y(this._root)}}function wf(n,e){e.value._routerState=n,e.children.forEach(t=>wf(n,t))}function _y(n){const e=n.children.length>0?` { ${n.children.map(_y).join(", ")} } `:"";return`${n.value}${e}`}function Tf(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,So(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),So(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!So(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),So(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function kd(n,e){return So(n.params,e.params)&&function(n,e){return xo(n,e)&&n.every((t,r)=>So(t.parameters,e[r].parameters))}(n.url,e.url)&&!(!n.parent!=!e.parent)&&(!n.parent||kd(n.parent,e.parent))}function ru(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return ru(n,r,o);return ru(n,r)})}(n,e,t);return new qs(r,o)}{if(n.shouldAttach(e.value)){const l=n.retrieve(e.value);if(null!==l){const d=l.route;return Fg(e,d),d}}const r=function(n){return new Is(new Jn(n.url),new Jn(n.params),new Jn(n.queryParams),new Jn(n.fragment),new Jn(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(l=>ru(n,l));return new qs(r,o)}}function Fg(n,e){if(n.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=n.value;for(let t=0;t<n.children.length;++t)Fg(n.children[t],e.children[t])}function el(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Fd(n){return"object"==typeof n&&null!=n&&n.outlets}function Ld(n,e,t,r,o){let l={};return r&&qr(r,(d,p)=>{l[p]=Array.isArray(d)?d.map(y=>`${y}`):`${d}`}),new Ya(t.root===n?e:ea(t.root,n,e),l,o)}function ea(n,e,t){const r={};return qr(n.children,(o,l)=>{r[l]=o===e?t:ea(o,e,t)}),new Et(n.segments,r)}class yy{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&el(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(Fd);if(o&&o!==cy(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Vg{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function is(n,e,t){if(n||(n=new Et([],{})),0===n.segments.length&&n.hasChildren())return Vd(n,e,t);const r=function(n,e,t){let r=0,o=e;const l={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return l;const d=n.segments[o],p=t[r];if(Fd(p))break;const y=`${p}`,b=r<t.length-1?t[r+1]:null;if(o>0&&void 0===y)break;if(y&&b&&"object"==typeof b&&void 0===b.outlets){if(!Bg(y,b,d))return l;r+=2}else{if(!Bg(y,{},d))return l;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const l=new Et(n.segments.slice(0,r.pathIndex),{});return l.children[bt]=new Et(n.segments.slice(r.pathIndex),n.children),Vd(l,0,o)}return r.match&&0===o.length?new Et(n.segments,{}):r.match&&!n.hasChildren()?si(n,e,t):r.match?Vd(n,0,o):si(n,e,t)}function Vd(n,e,t){if(0===t.length)return new Et(n.segments,{});{const r=function(n){return Fd(n[0])?n[0].outlets:{[bt]:n}}(t),o={};return qr(r,(l,d)=>{"string"==typeof l&&(l=[l]),null!==l&&(o[d]=is(n.children[d],e,l))}),qr(n.children,(l,d)=>{void 0===r[d]&&(o[d]=l)}),new Et(n.segments,o)}}function si(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const l=t[o];if(Fd(l)){const y=Af(l.outlets);return new Et(r,y)}if(0===o&&el(t[0])){r.push(new yf(n.segments[e].path,Ug(t[0]))),o++;continue}const d=Fd(l)?l.outlets[bt]:`${l}`,p=o<t.length-1?t[o+1]:null;d&&p&&el(p)?(r.push(new yf(d,Ug(p))),o+=2):(r.push(new yf(d,{})),o++)}return new Et(r,{})}function Af(n){const e={};return qr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=si(new Et([],{}),0,t))}),e}function Ug(n){const e={};return qr(n,(t,r)=>e[r]=`${t}`),e}function Bg(n,e,t){return n==t.path&&So(e,t.parameters)}class Ud{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Tf(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=ur(t);e.children.forEach(l=>{const d=l.value.outlet;this.deactivateRoutes(l,o[d],r),delete o[d]}),qr(o,(l,d)=>{this.deactivateRouteAndItsChildren(l,r)})}deactivateRoutes(e,t,r){const o=e.value,l=t?t.value:null;if(o===l)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else l&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet);if(r&&r.outlet){const o=r.outlet.detach(),l=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:l})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,l=ur(e);for(const d of Object.keys(l))this.deactivateRouteAndItsChildren(l[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=ur(t);e.children.forEach(l=>{this.activateRoutes(l,o[l.value.outlet],r),this.forwardEvent(new gC(l.value.snapshot))}),e.children.length&&this.forwardEvent(new fC(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,l=t?t.value:null;if(Tf(o),o===l)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const p=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(p.contexts),d.attachRef=p.componentRef,d.route=p.route.value,d.outlet&&d.outlet.attach(p.componentRef,p.route.value),jg(p.route)}else{const p=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),y=p?p.module.componentFactoryResolver:null;d.attachRef=null,d.route=o,d.resolver=y,d.outlet&&d.outlet.activateWith(o,y),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}function jg(n){Tf(n.value),n.children.forEach(jg)}class Ri{constructor(e,t){this.routes=e,this.module=t}}function su(n){return"function"==typeof n}function nl(n){return n instanceof Ya}const C=Symbol("INITIAL_VALUE");function A(){return pn(n=>function(...n){let e,t;return(0,Id.K)(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&(0,Dd.k)(n[0])&&(n=n[0]),(0,X.n)(n,t).lift(new Be(e))}(n.map(e=>e.pipe(Q_(1),nc(C)))).pipe(Io((e,t)=>{let r=!1;return t.reduce((o,l,d)=>o!==C?o:(l===C&&(r=!0),r||!1!==l&&d!==t.length-1&&!nl(l)?o:l),e)},C),$r(e=>e!==C),(0,ze.U)(e=>nl(e)?e:!0===e),Q_(1)))}let N=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&c._UZ(0,"router-outlet")},directives:function(){return[tI]},encapsulation:2}),n})();function z(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];ae(r,Oe(e,r))}}function ae(n,e){n.children&&z(n.children,e)}function Oe(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function xe(n){const e=n.children&&n.children.map(xe),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==bt&&(t.component=N),t}function Ue(n){return n.outlet||bt}function We(n,e){const t=n.filter(r=>Ue(r)===e);return t.push(...n.filter(r=>Ue(r)!==e)),t}const St={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function On(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},St):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const l=(e.matcher||_C)(t,n,e);if(!l)return Object.assign({},St);const d={};qr(l.posParams,(y,b)=>{d[b]=y.path});const p=l.consumed.length>0?Object.assign(Object.assign({},d),l.consumed[l.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:l.consumed,lastChild:l.consumed.length,parameters:p,positionalParamSegments:null!==(r=l.posParams)&&void 0!==r?r:{}}}function As(n,e,t,r,o="corrected"){if(t.length>0&&function(n,e,t){return t.some(r=>uc(n,e,r)&&Ue(r)!==bt)}(n,t,r)){const d=new Et(e,function(n,e,t,r){const o={};o[bt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const l of t)if(""===l.path&&Ue(l)!==bt){const d=new Et([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[Ue(l)]=d}return o}(n,e,r,new Et(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(r=>uc(n,e,r))}(n,t,r)){const d=new Et(n.segments,function(n,e,t,r,o,l){const d={};for(const p of r)if(uc(n,t,p)&&!o[Ue(p)]){const y=new Et([],{});y._sourceSegment=n,y._segmentIndexShift="legacy"===l?n.segments.length:e.length,d[Ue(p)]=y}return Object.assign(Object.assign({},o),d)}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const l=new Et(n.segments,n.children);return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}function uc(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Hg(n,e,t,r){return!!(Ue(n)===r||r!==bt&&uc(e,t,n))&&("**"===n.path||On(e,n,t).matched)}function $g(n,e,t){return 0===e.length&&!n.children[t]}class ou{constructor(e){this.segmentGroup=e||null}}class xf{constructor(e){this.urlTree=e}}function cc(n){return new _n.y(e=>e.error(new ou(n)))}function jd(n){return new _n.y(e=>e.error(new xf(n)))}function qg(n){return new _n.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class kT{constructor(e,t,r,o,l){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=l,this.allowRedirects=!0,this.ngModule=e.get(c.h0i)}apply(){const e=As(this.urlTree.root,[],[],this.config).segmentGroup,t=new Et(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,bt).pipe((0,ze.U)(l=>this.createUrlTree(au(l),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ts(l=>{if(l instanceof xf)return this.allowRedirects=!1,this.match(l.urlTree);throw l instanceof ou?this.noMatchError(l):l}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,bt).pipe((0,ze.U)(o=>this.createUrlTree(au(o),e.queryParams,e.fragment))).pipe(ts(o=>{throw o instanceof ou?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new Et([],{[bt]:e}):e;return new Ya(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,ze.U)(l=>new Et([],l))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const l of Object.keys(r.children))"primary"===l?o.unshift(l):o.push(l);return(0,yn.D)(o).pipe(Ko(l=>{const d=r.children[l],p=We(t,l);return this.expandSegmentGroup(e,p,d,l).pipe((0,ze.U)(y=>({segment:y,outlet:l})))}),Io((l,d)=>(l[d.outlet]=d.segment,l),{}),function(n,e){const t=arguments.length>=2;return r=>r.pipe(n?$r((o,l)=>n(o,l,r)):pf.y,Ts(1),t?ty(e):rc(()=>new Qt))}())}expandSegment(e,t,r,o,l,d){return(0,yn.D)(r).pipe(Ko(p=>this.expandSegmentAgainstRoute(e,t,r,p,o,l,d).pipe(ts(b=>{if(b instanceof ou)return(0,rt.of)(null);throw b}))),Do(p=>!!p),ts((p,y)=>{if(p instanceof Qt||"EmptyError"===p.name){if($g(t,o,l))return(0,rt.of)(new Et([],{}));throw new ou(t)}throw p}))}expandSegmentAgainstRoute(e,t,r,o,l,d,p){return Hg(o,t,l,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,l,d):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,l,d):cc(t):cc(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,l,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,l,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const l=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?jd(l):this.lineralizeSegments(r,l).pipe((0,Yn.zg)(d=>{const p=new Et(d,{});return this.expandSegment(e,p,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,l,d){const{matched:p,consumedSegments:y,lastChild:b,positionalParamSegments:D}=On(t,o,l);if(!p)return cc(t);const S=this.applyRedirectCommands(y,o.redirectTo,D);return o.redirectTo.startsWith("/")?jd(S):this.lineralizeSegments(o,S).pipe((0,Yn.zg)(O=>this.expandSegment(e,t,r,O.concat(l.slice(b)),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,l){if("**"===r.path)return r.loadChildren?(r._loadedConfig?(0,rt.of)(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,ze.U)(O=>(r._loadedConfig=O,new Et(o,{})))):(0,rt.of)(new Et(o,{}));const{matched:d,consumedSegments:p,lastChild:y}=On(t,r,o);if(!d)return cc(t);const b=o.slice(y);return this.getChildConfig(e,r,o).pipe((0,Yn.zg)(S=>{const O=S.module,F=S.routes,{segmentGroup:$,slicedSegments:ie}=As(t,p,b,F),Ee=new Et($.segments,$.children);if(0===ie.length&&Ee.hasChildren())return this.expandChildren(O,F,Ee).pipe((0,ze.U)(st=>new Et(p,st)));if(0===F.length&&0===ie.length)return(0,rt.of)(new Et(p,{}));const ke=Ue(r)===l;return this.expandSegment(O,Ee,F,ie,ke?bt:l,!0).pipe((0,ze.U)(ft=>new Et(p.concat(ft.segments),ft.children)))}))}getChildConfig(e,t,r){return t.children?(0,rt.of)(new Ri(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,rt.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Yn.zg)(o=>{return o?this.configLoader.load(e.injector,t).pipe((0,ze.U)(l=>(t._loadedConfig=l,l))):(n=t,new _n.y(e=>e.error(Sg(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):(0,rt.of)(new Ri([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;if(!o||0===o.length)return(0,rt.of)(!0);const l=o.map(d=>{const p=e.get(d);let y;if((n=p)&&su(n.canLoad))y=p.canLoad(t,r);else{if(!su(p))throw new Error("Invalid CanLoad guard");y=p(t,r)}var n;return ri(y)});return(0,rt.of)(l).pipe(A(),(0,ns.b)(d=>{if(!nl(d))return;const p=Sg(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw p.url=d,p}),(0,ze.U)(d=>!0===d))}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return(0,rt.of)(r);if(o.numberOfChildren>1||!o.children[bt])return qg(e.redirectTo);o=o.children[bt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const l=this.createSegmentGroup(e,t.root,r,o);return new Ya(l,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return qr(e,(o,l)=>{if("string"==typeof o&&o.startsWith(":")){const p=o.substring(1);r[l]=t[p]}else r[l]=o}),r}createSegmentGroup(e,t,r,o){const l=this.createSegments(e,t.segments,r,o);let d={};return qr(t.children,(p,y)=>{d[y]=this.createSegmentGroup(e,p,r,o)}),new Et(l,d)}createSegments(e,t,r,o){return t.map(l=>l.path.startsWith(":")?this.findPosParam(e,l,o):this.findOrReturn(l,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function au(n){const e={};for(const r of Object.keys(n.children)){const l=au(n.children[r]);(l.segments.length>0||l.hasChildren())&&(e[r]=l)}return function(n){if(1===n.numberOfChildren&&n.children[bt]){const e=n.children[bt];return new Et(n.segments.concat(e.segments),e.children)}return n}(new Et(n.segments,e))}class AC{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ty{constructor(e,t){this.component=e,this.route=t}}function Iy(n,e,t){const r=n._root;return Pf(r,e?e._root:null,t,[r.value])}function Zg(n,e,t){const r=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Pf(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const l=ur(e);return n.children.forEach(d=>{(function(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const l=n.value,d=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(d&&l.routeConfig===d.routeConfig){const y=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!xo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!xo(n.url,e.url)||!So(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!kd(n,e)||!So(n.queryParams,e.queryParams);case"paramsChange":default:return!kd(n,e)}}(d,l,l.routeConfig.runGuardsAndResolvers);y?o.canActivateChecks.push(new AC(r)):(l.data=d.data,l._resolvedData=d._resolvedData),Pf(n,e,l.component?p?p.children:null:t,r,o),y&&p&&p.outlet&&p.outlet.isActivated&&o.canDeactivateChecks.push(new Ty(p.outlet.component,d))}else d&&dc(e,p,o),o.canActivateChecks.push(new AC(r)),Pf(n,null,l.component?p?p.children:null:t,r,o)})(d,l[d.value.outlet],t,r.concat([d.value]),o),delete l[d.value.outlet]}),qr(l,(d,p)=>dc(d,t.getContext(p),o)),o}function dc(n,e,t){const r=ur(n),o=n.value;qr(r,(l,d)=>{dc(l,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new Ty(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class cP{}function $T(n){return new _n.y(e=>e.error(n))}class NC{constructor(e,t,r,o,l,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=d}recognize(){const e=As(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,bt);if(null===t)return null;const r=new Rd([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},bt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new qs(r,t),l=new my(this.url,o);return this.inheritParamsAndData(l._root),l}inheritParamsAndData(e){const t=e.value,r=kg(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const l of Object.keys(t.children)){const d=t.children[l],p=We(e,l),y=this.processSegmentGroup(p,d,l);if(null===y)return null;r.push(...y)}const o=zT(r);return o.sort((e,t)=>e.value.outlet===bt?-1:t.value.outlet===bt?1:e.value.outlet.localeCompare(t.value.outlet)),o}processSegment(e,t,r,o){for(const l of e){const d=this.processSegmentAgainstRoute(l,t,r,o);if(null!==d)return d}return $g(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!Hg(e,t,r,o))return null;let l,d=[],p=[];if("**"===e.path){const F=r.length>0?cy(r).parameters:{};l=new Rd(r,F,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Po(e),Ue(e),e.component,e,WT(t),KT(t)+r.length,YT(e))}else{const F=On(t,e,r);if(!F.matched)return null;d=F.consumedSegments,p=r.slice(F.lastChild),l=new Rd(d,F.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Po(e),Ue(e),e.component,e,WT(t),KT(t)+d.length,YT(e))}const y=(n=e).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:b,slicedSegments:D}=As(t,d,p,y.filter(F=>void 0===F.redirectTo),this.relativeLinkResolution);var n;if(0===D.length&&b.hasChildren()){const F=this.processChildren(y,b);return null===F?null:[new qs(l,F)]}if(0===y.length&&0===D.length)return[new qs(l,[])];const S=Ue(e)===o,O=this.processSegment(y,b,D,S?bt:o);return null===O?null:[new qs(l,O)]}}function GT(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function zT(n){const e=[],t=new Set;for(const r of n){if(!GT(r)){e.push(r);continue}const o=e.find(l=>r.value.routeConfig===l.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=zT(r.children);e.push(new qs(r.value,o))}return e.filter(r=>!t.has(r))}function WT(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function KT(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function Po(n){return n.data||{}}function YT(n){return n.resolve||{}}function Ay(n){return pn(e=>{const t=n(e);return t?(0,yn.D)(t).pipe((0,ze.U)(()=>e)):(0,rt.of)(e)})}class yP extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const vt=new c.OlP("ROUTES");class MC{constructor(e,t,r,o){this.loader=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,ze.U)(l=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=l.create(e);return new Ri(uy(d.injector.get(vt,void 0,c.XFs.Self|c.XFs.Optional)).map(xe),d)}),ts(l=>{throw t._loader$=void 0,l}));return t._loader$=new ec.c(o,()=>new dn.xQ).pipe((0,cC.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,yn.D)(this.loader.load(e)):ri(e()).pipe((0,Yn.zg)(t=>t instanceof c.YKP?(0,rt.of)(t):(0,yn.D)(this.compiler.compileModuleAsync(t))))}}class JT{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new lu,this.attachRef=null}}class lu{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new JT,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class XT{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function vP(n){throw n}function OC(n,e,t){return e.parse("/")}function rl(n,e){return(0,rt.of)(null)}const RC={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},eI={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let wn=(()=>{class n{constructor(t,r,o,l,d,p,y,b){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=l,this.config=b,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new dn.xQ,this.errorHandler=vP,this.malformedUriErrorHandler=OC,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:rl,afterPreactivation:rl},this.urlHandlingStrategy=new XT,this.routeReuseStrategy=new yP,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(c.h0i),this.console=d.get(c.c2e);const O=d.get(c.R0b);this.isNgZoneEnabled=O instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(b),this.currentUrlTree=new Ya(new Et([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new MC(p,y,F=>this.triggerEvent(new Ka(F)),F=>this.triggerEvent(new oy(F))),this.routerState=bf(this.currentUrlTree,this.rootComponentType),this.transitions=new Jn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe($r(o=>0!==o.id),(0,ze.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),pn(o=>{let l=!1,d=!1;return(0,rt.of)(o).pipe((0,ns.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.currentRawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),pn(p=>{const y=this.browserUrlTree.toString(),b=!this.navigated||p.extractedUrl.toString()!==y||y!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return zg(p.source)&&(this.browserUrlTree=p.extractedUrl),(0,rt.of)(p).pipe(pn(S=>{const O=this.transitions.getValue();return r.next(new Wa(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),O!==this.transitions.getValue()?es.E:Promise.resolve(S)}),function(n,e,t,r){return pn(o=>function(n,e,t,r,o){return new kT(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,ze.U)(l=>Object.assign(Object.assign({},o),{urlAfterRedirects:l}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ns.b)(S=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:S.urlAfterRedirects})}),function(n,e,t,r,o){return(0,Yn.zg)(l=>function(n,e,t,r,o="emptyOnly",l="legacy"){try{const d=new NC(n,e,t,r,o,l).recognize();return null===d?$T(new cP):(0,rt.of)(d)}catch(d){return $T(d)}}(n,e,l.urlAfterRedirects,t(l.urlAfterRedirects),r,o).pipe((0,ze.U)(d=>Object.assign(Object.assign({},l),{targetSnapshot:d}))))}(this.rootComponentType,this.config,S=>this.serializeUrl(S),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ns.b)(S=>{"eager"===this.urlUpdateStrategy&&(S.extras.skipLocationChange||this.setBrowserUrl(S.urlAfterRedirects,S),this.browserUrlTree=S.urlAfterRedirects);const O=new gf(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(O)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:O,extractedUrl:F,source:$,restoredState:ie,extras:Ee}=p,ke=new Wa(O,this.serializeUrl(F),$,ie);r.next(ke);const Ze=bf(F,this.rootComponentType).snapshot;return(0,rt.of)(Object.assign(Object.assign({},p),{targetSnapshot:Ze,urlAfterRedirects:F,extras:Object.assign(Object.assign({},Ee),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=p.rawUrl,this.browserUrlTree=p.urlAfterRedirects,p.resolve(null),es.E}),Ay(p=>{const{targetSnapshot:y,id:b,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:O,replaceUrl:F}}=p;return this.hooks.beforePreactivation(y,{navigationId:b,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!O,replaceUrl:!!F})}),(0,ns.b)(p=>{const y=new Dg(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}),(0,ze.U)(p=>Object.assign(Object.assign({},p),{guards:Iy(p.targetSnapshot,p.currentSnapshot,this.rootContexts)})),function(n,e){return(0,Yn.zg)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:l,canDeactivateChecks:d}}=t;return 0===d.length&&0===l.length?(0,rt.of)(Object.assign(Object.assign({},t),{guardsResult:!0})):function(n,e,t,r){return(0,yn.D)(n).pipe((0,Yn.zg)(o=>function(n,e,t,r,o){const l=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!l||0===l.length)return(0,rt.of)(!0);const d=l.map(p=>{const y=Zg(p,e,o);let b;if(function(n){return n&&su(n.canDeactivate)}(y))b=ri(y.canDeactivate(n,e,t,r));else{if(!su(y))throw new Error("Invalid CanDeactivate guard");b=ri(y(n,e,t,r))}return b.pipe(Do())});return(0,rt.of)(d).pipe(A())}(o.component,o.route,t,e,r)),Do(o=>!0!==o,!0))}(d,r,o,n).pipe((0,Yn.zg)(p=>p&&function(n){return"boolean"==typeof n}(p)?function(n,e,t,r){return(0,yn.D)(e).pipe(Ko(o=>Xn(function(n,e){return null!==n&&e&&e(new hC(n)),(0,rt.of)(!0)}(o.route.parent,r),function(n,e){return null!==n&&e&&e(new pC(n)),(0,rt.of)(!0)}(o.route,r),function(n,e,t){const r=e[e.length-1],l=e.slice(0,e.length-1).reverse().map(d=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>To(()=>{const p=d.guards.map(y=>{const b=Zg(y,d.node,t);let D;if(function(n){return n&&su(n.canActivateChild)}(b))D=ri(b.canActivateChild(r,n));else{if(!su(b))throw new Error("Invalid CanActivateChild guard");D=ri(b(r,n))}return D.pipe(Do())});return(0,rt.of)(p).pipe(A())}));return(0,rt.of)(l).pipe(A())}(n,o.path,t),function(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,rt.of)(!0);const o=r.map(l=>To(()=>{const d=Zg(l,e,t);let p;if(function(n){return n&&su(n.canActivate)}(d))p=ri(d.canActivate(e,n));else{if(!su(d))throw new Error("Invalid CanActivate guard");p=ri(d(e,n))}return p.pipe(Do())}));return(0,rt.of)(o).pipe(A())}(n,o.route,t))),Do(o=>!0!==o,!0))}(r,l,n,e):(0,rt.of)(p)),(0,ze.U)(p=>Object.assign(Object.assign({},t),{guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),(0,ns.b)(p=>{if(nl(p.guardsResult)){const b=Sg(`Redirecting to "${this.serializeUrl(p.guardsResult)}"`);throw b.url=p.guardsResult,b}const y=new Ag(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(y)}),$r(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,""),!1)),Ay(p=>{if(p.guards.canActivateChecks.length)return(0,rt.of)(p).pipe((0,ns.b)(y=>{const b=new sy(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(b)}),pn(y=>{let b=!1;return(0,rt.of)(y).pipe(function(n,e){return(0,Yn.zg)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return(0,rt.of)(t);let l=0;return(0,yn.D)(o).pipe(Ko(d=>function(n,e,t,r){return function(n,e,t,r){const o=Object.keys(n);if(0===o.length)return(0,rt.of)({});const l={};return(0,yn.D)(o).pipe((0,Yn.zg)(d=>function(n,e,t,r){const o=Zg(n,e,r);return ri(o.resolve?o.resolve(e,t):o(e,t))}(n[d],e,t,r).pipe((0,ns.b)(p=>{l[d]=p}))),Ts(1),(0,Yn.zg)(()=>Object.keys(l).length===o.length?(0,rt.of)(l):es.E))}(n._resolve,n,e,r).pipe((0,ze.U)(l=>(n._resolvedData=l,n.data=Object.assign(Object.assign({},n.data),kg(n,t).resolve),null)))}(d.route,r,n,e)),(0,ns.b)(()=>l++),Ts(1),(0,Yn.zg)(d=>l===o.length?(0,rt.of)(t):es.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ns.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(y),this.cancelNavigationTransition(y,"At least one route resolver didn't emit any value."))}}))}),(0,ns.b)(y=>{const b=new xd(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(b)}))}),Ay(p=>{const{targetSnapshot:y,id:b,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:O,replaceUrl:F}}=p;return this.hooks.afterPreactivation(y,{navigationId:b,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!O,replaceUrl:!!F})}),(0,ze.U)(p=>{const y=function(n,e,t){const r=ru(n,e._root,t?t._root:void 0);return new ac(r,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return Object.assign(Object.assign({},p),{targetRouterState:y})}),(0,ns.b)(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>(0,ze.U)(r=>(new Ud(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),(0,ns.b)({next(){l=!0},complete(){l=!0}}),function(n){return e=>e.lift(new dC(n))}(()=>{if(!l&&!d){const p=`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(o),this.cancelNavigationTransition(o,p)):this.cancelNavigationTransition(o,p)}this.currentNavigation=null}),ts(p=>{if(d=!0,function(n){return n&&n[ay]}(p)){const y=nl(p.url);y||(this.navigated=!0,this.restoreHistory(o,!0));const b=new ry(o.id,this.serializeUrl(o.extractedUrl),p.message);r.next(b),y?setTimeout(()=>{const D=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),S={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||zg(o.source)};this.scheduleNavigation(D,"imperative",null,S,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const y=new iy(o.id,this.serializeUrl(o.extractedUrl),p);r.next(y);try{o.resolve(this.errorHandler(p))}catch(b){o.reject(b)}}return es.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,r)&&setTimeout(()=>{const{source:o,state:l,urlTree:d}=r,p={replaceUrl:!0};if(l){const y=Object.assign({},l);delete y.navigationId,delete y.\u0275routerPageId,0!==Object.keys(y).length&&(p.state=y)}this.scheduleNavigation(d,o,l,p)},0),this.lastLocationChangeInfo=r}))}extractLocationChangeInfoFromEvent(t){var r;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(r=t.state)||void 0===r?void 0:r.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,r){if(!t)return!0;const o=r.urlTree.toString()===t.urlTree.toString();return r.transitionId!==t.transitionId||!o||!("hashchange"===r.source&&"popstate"===t.source||"popstate"===r.source&&"hashchange"===t.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){z(t),this.config=t.map(xe),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:l,fragment:d,queryParamsHandling:p,preserveFragment:y}=r,b=o||this.routerState.root,D=y?this.currentUrlTree.fragment:d;let S=null;switch(p){case"merge":S=Object.assign(Object.assign({},this.currentUrlTree.queryParams),l);break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=l||null}return null!==S&&(S=this.removeEmptyProps(S)),function(n,e,t,r,o){if(0===t.length)return Ld(e.root,e.root,e,r,o);const l=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new yy(!0,0,n);let e=0,t=!1;const r=n.reduce((o,l,d)=>{if("object"==typeof l&&null!=l){if(l.outlets){const p={};return qr(l.outlets,(y,b)=>{p[b]="string"==typeof y?y.split("/"):y}),[...o,{outlets:p}]}if(l.segmentPath)return[...o,l.segmentPath]}return"string"!=typeof l?[...o,l]:0===d?(l.split("/").forEach((p,y)=>{0==y&&"."===p||(0==y&&""===p?t=!0:".."===p?e++:""!=p&&o.push(p))}),o):[...o,l]},[]);return new yy(t,e,r)}(t);if(l.toRoot())return Ld(e.root,new Et([],{}),e,r,o);const d=function(n,e,t){if(n.isAbsolute)return new Vg(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const l=t.snapshot._urlSegment;return new Vg(l,l===e.root,0)}const r=el(n.commands[0])?0:1;return function(n,e,t){let r=n,o=e,l=t;for(;l>o;){if(l-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new Vg(r,!1,o-l)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(l,e,n),p=d.processChildren?Vd(d.segmentGroup,d.index,l.commands):is(d.segmentGroup,d.index,l.commands);return Ld(d.segmentGroup,p,e,r,o)}(b,this.currentUrlTree,t,S,null!=D?D:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=nl(t)?t:this.parseUrl(t),l=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(l,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},RC):!1===r?Object.assign({},eI):r,nl(t))return Pd(this.currentUrlTree,t,o);const l=this.parseUrl(t);return Pd(this.currentUrlTree,l,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const l=t[o];return null!=l&&(r[o]=l),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Sd(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,l,d){var p,y;if(this.disposed)return Promise.resolve(!1);const b=this.getTransition(),D=zg(r)&&b&&!zg(b.source),F=(this.lastSuccessfulId===b.id||this.currentNavigation?b.rawUrl:b.urlAfterRedirects).toString()===t.toString();if(D&&F)return Promise.resolve(!0);let $,ie,Ee;d?($=d.resolve,ie=d.reject,Ee=d.promise):Ee=new Promise((ft,st)=>{$=ft,ie=st});const ke=++this.navigationId;let Ze;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),Ze=o&&o.\u0275routerPageId?o.\u0275routerPageId:l.replaceUrl||l.skipLocationChange?null!==(p=this.browserPageId)&&void 0!==p?p:0:(null!==(y=this.browserPageId)&&void 0!==y?y:0)+1):Ze=0,this.setTransition({id:ke,targetPageId:Ze,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:l,resolve:$,reject:ie,promise:Ee,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ee.catch(ft=>Promise.reject(ft))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),l=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",l):this.location.go(o,"",l)}restoreHistory(t,r=!1){var o,l;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===d?this.currentUrlTree===(null===(l=this.currentNavigation)||void 0===l?void 0:l.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new ry(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.DyG),c.LFG(Nd),c.LFG(lu),c.LFG(Ke),c.LFG(c.zs3),c.LFG(c.v3s),c.LFG(c.Sil),c.LFG(void 0))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function zg(n){return"imperative"!==n}let kC=(()=>{class n{constructor(t,r,o,l,d){this.router=t,this.route=r,this.commands=[],this.onChanges=new dn.xQ,null==o&&l.setAttribute(d.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:uu(this.skipLocationChange),replaceUrl:uu(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:uu(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(wn),c.Y36(Is),c.$8M("tabindex"),c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&c.NdJ("click",function(){return r.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[c.TTD]}),n})(),ss=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.locationStrategy=o,this.commands=[],this.onChanges=new dn.xQ,this.subscription=t.events.subscribe(l=>{l instanceof Sd&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,o,l,d){if(0!==t||r||o||l||d||"string"==typeof this.target&&"_self"!=this.target)return!0;const p={skipLocationChange:uu(this.skipLocationChange),replaceUrl:uu(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,p),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:uu(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(wn),c.Y36(Is),c.Y36(pe))},n.\u0275dir=c.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&c.NdJ("click",function(l){return r.onClick(l.button,l.ctrlKey,l.shiftKey,l.altKey,l.metaKey)}),2&t&&(c.Ikx("href",r.href,c.LSH),c.uIk("target",r.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[c.TTD]}),n})();function uu(n){return""===n||!!n}let tI=(()=>{class n{constructor(t,r,o,l,d){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.name=l||bt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),p=this.parentContexts.getOrCreateContext(this.name).children,y=new EP(t,p,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,y),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(lu),c.Y36(c.s_b),c.Y36(c._Vd),c.$8M("name"),c.Y36(c.sBO))},n.\u0275dir=c.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class EP{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Is?this.route:e===lu?this.childContexts:this.parent.get(e,t)}}class LC{}class nI{preload(e,t){return(0,rt.of)(null)}}let CP=(()=>{class n{constructor(t,r,o,l,d){this.router=t,this.injector=l,this.preloadingStrategy=d,this.loader=new MC(r,o,b=>t.triggerEvent(new Ka(b)),b=>t.triggerEvent(new oy(b)))}setUpPreloading(){this.subscription=this.router.events.pipe($r(t=>t instanceof Sd),Ko(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(c.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const l of r)if(l.loadChildren&&!l.canLoad&&l._loadedConfig){const d=l._loadedConfig;o.push(this.processRoutes(d.module,d.routes))}else l.loadChildren&&!l.canLoad?o.push(this.preloadConfig(t,l)):l.children&&o.push(this.processRoutes(t,l.children));return(0,yn.D)(o).pipe((0,bn.J)(),(0,ze.U)(l=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?(0,rt.of)(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Yn.zg)(l=>(r._loadedConfig=l,this.processRoutes(l.module,l.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(wn),c.LFG(c.v3s),c.LFG(c.Sil),c.LFG(c.zs3),c.LFG(LC))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),xy=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Wa?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Sd&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ao&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Ao(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(wn),c.LFG(Ll),c.LFG(void 0))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Hd=new c.OlP("ROUTER_CONFIGURATION"),Py=new c.OlP("ROUTER_FORROOT_GUARD"),pk=[Ke,{provide:Nd,useClass:fy},{provide:wn,useFactory:function(n,e,t,r,o,l,d,p={},y,b){const D=new wn(null,n,e,t,r,o,l,uy(d));return y&&(D.urlHandlingStrategy=y),b&&(D.routeReuseStrategy=b),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy)}(p,D),p.enableTracing&&D.events.subscribe(S=>{var O,F;null===(O=console.group)||void 0===O||O.call(console,`Router Event: ${S.constructor.name}`),console.log(S.toString()),console.log(S),null===(F=console.groupEnd)||void 0===F||F.call(console)}),D},deps:[Nd,lu,Ke,c.zs3,c.v3s,c.Sil,vt,Hd,[class{},new c.FiY],[class{},new c.FiY]]},lu,{provide:Is,useFactory:function(n){return n.routerState.root},deps:[wn]},{provide:c.v3s,useClass:c.EAV},CP,nI,class{preload(e,t){return t().pipe(ts(()=>(0,rt.of)(null)))}},{provide:Hd,useValue:{enableTracing:!1}}];function gk(){return new c.PXZ("Router",wn)}let wP=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[pk,TP(t),{provide:Py,useFactory:yk,deps:[[wn,new c.FiY,new c.tp0]]},{provide:Hd,useValue:r||{}},{provide:pe,useFactory:_k,deps:[J,[new c.tBr(fe),new c.FiY],Hd]},{provide:xy,useFactory:mk,deps:[wn,Ll,Hd]},{provide:LC,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:nI},{provide:c.PXZ,multi:!0,useFactory:gk},[il,{provide:c.ip1,multi:!0,useFactory:VC,deps:[il]},{provide:UC,useFactory:IP,deps:[il]},{provide:c.tb,multi:!0,useExisting:UC}]]}}static forChild(t){return{ngModule:n,providers:[TP(t)]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Py,8),c.LFG(wn,8))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function mk(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new xy(n,e,t)}function _k(n,e,t={}){return t.useHash?new Pe(n,e):new Ce(n,e)}function yk(n){return"guarded"}function TP(n){return[{provide:c.deG,multi:!0,useValue:n},{provide:vt,multi:!0,useValue:n}]}let il=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new dn.xQ}appInitializer(){return this.injector.get(B,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(p=>r=p),l=this.injector.get(wn),d=this.injector.get(Hd);return"disabled"===d.initialNavigation?(l.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(l.hooks.afterPreactivation=()=>this.initNavigation?(0,rt.of)(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),l.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(Hd),o=this.injector.get(CP),l=this.injector.get(xy),d=this.injector.get(wn),p=this.injector.get(c.z2F);t===p.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),o.setUpPreloading(),l.init(),d.resetRootComponentType(p.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.zs3))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function VC(n){return n.appInitializer.bind(n)}function IP(n){return n.bootstrapListener.bind(n)}const UC=new c.OlP("Router Initializer");let jC=(()=>{class n{constructor(){this.title="ShoppingApp"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&c._UZ(0,"router-outlet")},directives:[tI],styles:[""]}),n})();var _e=V(8239);let Zs=(()=>{class n{constructor(){this.productList=[],this.totalOfProducts=[],this.cartProductsList=[],this.product$=new Jn([]),this.total$=new Jn([]),this.cartProducts$=new Jn([])}getProducts(){return this.product$.asObservable()}addProduct(t){if(!this.productList.some(r=>r.id===t.id)){let r=t.id,o=1,l=t.price;this.productList.push(t),this.totalOfProducts.push({id:r,quantity:o,price:l}),this.total$.next(this.totalOfProducts),this.product$.next(this.productList)}}totalPrice(t){if(0===this.totalOfProducts.length)this.totalOfProducts.push(t),this.total$.next(this.totalOfProducts);else{let r=this.totalOfProducts.filter(l=>l.id===t.id),o=this.totalOfProducts.indexOf(r[0]);0===r.length?(this.totalOfProducts.push(t),this.total$.next(this.totalOfProducts)):(this.totalOfProducts[o]=t,this.total$.next(this.totalOfProducts))}}getTotalPrice(){return this.total$.asObservable()}deleteCheckoutProduct(t){let r=this.totalOfProducts.filter(l=>l.id===t),o=this.totalOfProducts.indexOf(r[0]);this.totalOfProducts.splice(o,1),this.total$.next(this.totalOfProducts)}deleteProduct(t){let r=t.id,o=this.productList.indexOf(t);this.productList.splice(o,1),this.deleteCheckoutProduct(r)}getCartProducts(){return this.cartProducts$.asObservable()}cartProductSent(t){this.cartProductsList.push(t),this.cartProducts$.next(this.cartProductsList)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Ny=V(6682),Wg=V(309),bk=V(7771),HC=V(8858);class AP extends dn.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new rI(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,r=t?this._events:this._trimBufferThenGetEvents(),o=this.scheduler,l=r.length;let d;if(this.closed)throw new Jo.N;if(this.isStopped||this.hasError?d=Ig.w.EMPTY:(this.observers.push(e),d=new HC.W(this,e)),o&&e.add(e=new Wg.ht(e,o)),t)for(let p=0;p<l&&!e.closed;p++)e.next(r[p]);else for(let p=0;p<l&&!e.closed;p++)e.next(r[p].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),d}_getNow(){return(this.scheduler||bk.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,r=this._windowTime,o=this._events,l=o.length;let d=0;for(;d<l&&!(e-o[d].time<r);)d++;return l>t&&(d=Math.max(d,l-t)),d>0&&o.splice(0,d),o}}class rI{constructor(e,t){this.time=e,this.value=t}}function iI(n,e,t){let r;return r=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},o=>o.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:r}){let o,d,l=0,p=!1,y=!1;return function(D){let S;l++,!o||p?(p=!1,o=new AP(n,e,r),S=o.subscribe(this),d=D.subscribe({next(O){o.next(O)},error(O){p=!0,o.error(O)},complete(){y=!0,d=void 0,o.complete()}}),y&&(d=void 0)):S=o.subscribe(this),this.add(()=>{l--,S.unsubscribe(),S=void 0,d&&!y&&t&&0===l&&(d.unsubscribe(),d=void 0,o=void 0)})}}(r))}function Nf(n,e){return e?pn(()=>n,e):pn(()=>n)}var hc=V(3101),vn=V(2968),Mr=V(8939);V(2329);var er=V(8026),du=V(3910),L=V(3854),sl=V(5422);const LP=new Map,aI={activated:!1,tokenObservers:[]},Dk={initialized:!1,enabled:!1};function ki(n){return LP.get(n)||aI}function Gs(n,e){LP.set(n,e)}function Yg(){return Dk}class cI{constructor(e,t,r,o,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=o,o>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,_e.Z)(function*(){t.stop();try{t.pending=new L.BH,yield(n=t.getNextRun(e),new Promise(e=>{setTimeout(e,n)})),t.pending.resolve(),yield t.pending.promise,t.pending=new L.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}var n})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const zs=new L.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error."});function dI(n){if(!ki(n).activated)throw zs.create("use-before-activation",{appName:n.name})}function Jg(n,e){return qC.apply(this,arguments)}function qC(){return(qC=(0,_e.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});o&&(r["X-Firebase-Client"]=o.getPlatformInfoString());const l={method:"POST",body:JSON.stringify(e),headers:r};let d,p;try{d=yield fetch(n,l)}catch(S){throw zs.create("fetch-network-error",{originalErrorMessage:S.message})}if(200!==d.status)throw zs.create("fetch-status-error",{httpStatus:d.status});try{p=yield d.json()}catch(S){throw zs.create("fetch-parse-error",{originalErrorMessage:S.message})}const y=p.ttl.match(/^([\d.]+)(s)$/);if(!y||!y[2]||isNaN(Number(y[1])))throw zs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${p.ttl}`});const b=1e3*Number(y[1]),D=Date.now();return{token:p.attestationToken,expireTimeMillis:D+b,issuedAtTimeMillis:D}})).apply(this,arguments)}function hI(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const Xg="firebase-app-check-store";let Ry=null;function fI(){return Ry||(Ry=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(zs.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{const o=r.target.result;switch(r.oldVersion){case 0:o.createObjectStore(Xg,{keyPath:"compositeKey"})}}}catch(t){e(zs.create("storage-open",{originalErrorMessage:t.message}))}}),Ry)}function Ly(){return(Ly=(0,_e.Z)(function*(n,e){const r=(yield fI()).transaction(Xg,"readwrite"),l=r.objectStore(Xg).put({compositeKey:n,value:e});return new Promise((d,p)=>{l.onsuccess=y=>{d()},r.onerror=y=>{var b;p(zs.create("storage-set",{originalErrorMessage:null===(b=y.target.error)||void 0===b?void 0:b.message}))}})})).apply(this,arguments)}const WC=new sl.Yd("@firebase/app-check");function KC(n,e){return(0,L.hl)()?function(n,e){return function(n,e){return Ly.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{WC.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function YC(){return Yg().enabled}function al(){return Of.apply(this,arguments)}function Of(){return(Of=(0,_e.Z)(function*(){const n=Yg();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const WP={error:"UNKNOWN_ERROR"};function Sk(n){return L.US.encodeString(JSON.stringify(n),!1)}function hu(n){return jy.apply(this,arguments)}function jy(){return(jy=(0,_e.Z)(function*(n,e=!1){const t=n.app;dI(t);const r=ki(t);let l,d,o=r.token;if(!o){const p=yield r.cachedTokenPromise;p&&kf(p)&&(o=p,Gs(t,Object.assign(Object.assign({},r),{token:o})),Hy(t,{token:o.token}))}if(!e&&o&&kf(o))return{token:o.token};if(YC()){const p=yield Jg(hI(t,yield al()),n.platformLoggerProvider);return yield KC(t,p),Gs(t,Object.assign(Object.assign({},r),{token:p})),{token:p.token}}try{o=yield r.provider.getToken()}catch(p){WC.error(p),l=p}return o?(d={token:o.token},Gs(t,Object.assign(Object.assign({},r),{token:o})),yield KC(t,o)):d=YP(l),Hy(t,d),d})).apply(this,arguments)}function $d(n,e){const t=ki(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Gs(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function Hy(n,e){const t=ki(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function kf(n){return n.expireTimeMillis-Date.now()>0}function YP(n){return{token:Sk(WP),error:n}}class mI{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=ki(this.app);for(const t of e)$d(this.app,t.next);return Promise.resolve()}}const wI="app-check-internal";(0,er._registerComponent)(new du.wA("app-check",n=>function(n,e){return new mI(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(wI).initialize()})),(0,er._registerComponent)(new du.wA(wI,n=>function(n){return{getToken:e=>hu(n,e),addTokenListener:e=>function(n,e,t,r){const{app:o}=n,l=ki(o),d={next:t,error:r,type:e},p=Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,d]});if(!p.tokenRefresher){const y=function(n){const{app:e}=n;return new cI((0,_e.Z)(function*(){let r;if(r=ki(e).token?yield hu(n,!0):yield hu(n),r.error)throw r.error}),()=>!0,()=>{const t=ki(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n);p.tokenRefresher=y}if(!p.tokenRefresher.isRunning()&&l.isTokenAutoRefreshEnabled&&p.tokenRefresher.start(),l.token&&kf(l.token)){const y=l.token;Promise.resolve().then(()=>t({token:y.token})).catch(()=>{})}else null==l.token&&l.cachedTokenPromise.then(y=>{y&&kf(y)&&t({token:y.token})}).catch(()=>{});Gs(o,p)}(n,"INTERNAL",e),removeTokenListener:e=>$d(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,er.registerVersion)("@firebase/app-check","0.5.1");class tm{constructor(){return(0,vn.vb)("app-check")}}"undefined"!=typeof window&&window;var Lf=V(7841);const AI=new c.OlP("angularfire2.auth.use-emulator"),SI=new c.OlP("angularfire2.auth.settings"),nm=new c.OlP("angularfire2.auth.tenant-id"),r0=new c.OlP("angularfire2.auth.langugage-code"),Gy=new c.OlP("angularfire2.auth.use-device-language"),zy=new c.OlP("angularfire.auth.persistence"),xI=(n,e,t,r,o,l,d,p)=>(0,Mr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=o,l&&y.useDeviceLanguage(),d)for(const[b,D]of Object.entries(d))y.settings[b]=D;return p&&y.setPersistence(p),y},[t,r,o,l,d,p]);let os=(()=>{class n{constructor(t,r,o,l,d,p,y,b,D,S,O,F){const $=new dn.xQ,ie=(0,rt.of)(void 0).pipe((0,Wg.QV)(d.outsideAngular),pn(()=>l.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,941)))),(0,ze.U)(()=>(0,Mr.on)(t,l,r)),(0,ze.U)(Ee=>xI(Ee,l,p,b,D,S,y,O)),iI({bufferSize:1,refCount:!1}));if(Lu(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,rt.of)(null);else{ie.pipe(Do()).subscribe();const ke=ie.pipe(pn(st=>st.getRedirectResult().then(Dn=>Dn,()=>null)),vn.iC,iI({bufferSize:1,refCount:!1})),Ze=ie.pipe(pn(st=>new _n.y(Dn=>({unsubscribe:l.runOutsideAngular(()=>st.onAuthStateChanged(Ir=>Dn.next(Ir),Ir=>Dn.error(Ir),()=>Dn.complete()))})))),ft=ie.pipe(pn(st=>new _n.y(Dn=>({unsubscribe:l.runOutsideAngular(()=>st.onIdTokenChanged(Ir=>Dn.next(Ir),Ir=>Dn.error(Ir),()=>Dn.complete()))}))));this.authState=ke.pipe(Nf(Ze),(0,hc.R)(d.outsideAngular),(0,Wg.QV)(d.insideAngular)),this.user=ke.pipe(Nf(ft),(0,hc.R)(d.outsideAngular),(0,Wg.QV)(d.insideAngular)),this.idToken=this.user.pipe(pn(st=>st?(0,yn.D)(st.getIdToken()):(0,rt.of)(null))),this.idTokenResult=this.user.pipe(pn(st=>st?(0,yn.D)(st.getIdTokenResult()):(0,rt.of)(null))),this.credential=(0,Ny.T)(ke,$,this.authState.pipe($r(st=>!st))).pipe((0,ze.U)(st=>(null==st?void 0:st.user)?st:null),(0,hc.R)(d.outsideAngular),(0,Wg.QV)(d.insideAngular))}return(0,Mr.pX)(this,ie,l,{spy:{apply:(Ee,ke,Ze)=>{(Ee.startsWith("signIn")||Ee.startsWith("createUser"))&&Ze.then(ft=>$.next(ft))}}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Mr.Dh),c.LFG(Mr.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(vn.HU),c.LFG(AI,8),c.LFG(SI,8),c.LFG(nm,8),c.LFG(r0,8),c.LFG(Gy,8),c.LFG(zy,8),c.LFG(tm,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),kk=(()=>{class n{constructor(){Lf.Z.registerVersion("angularfire",vn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[os]}),n})(),Vf=(()=>{class n{constructor(t){this.auth=t}login(t,r){return this.auth.signInWithEmailAndPassword(t,r)}register(t,r){return this.auth.createUserWithEmailAndPassword(t,r)}getCurrentUser(){return this.auth.currentUser}authState(){return this.auth.authState}logout(){return this.auth.signOut()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(os))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Fk(n,e){1&n&&(c.TgZ(0,"div"),c._UZ(1,"i",26),c.TgZ(2,"a",27),c._uU(3,"Ingresar"),c.qZA(),c._UZ(4,"div",28),c.TgZ(5,"a",29),c._uU(6,"Registrarse"),c.qZA(),c.qZA())}function PI(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",22),c._UZ(1,"i",30),c.TgZ(2,"div",31),c.TgZ(3,"button",32),c._uU(4),c.qZA(),c.TgZ(5,"ul",33),c.TgZ(6,"li"),c.TgZ(7,"a",34),c._uU(8,"Favoritos"),c.qZA(),c.qZA(),c.TgZ(9,"li"),c.TgZ(10,"a",35),c.NdJ("click",function(){return c.CHM(t),c.oxw().logout()}),c._uU(11,"Cerrar sesi\xf3n"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&n){const t=c.oxw();c.xp6(4),c.hij(" ",t.username," ")}}let Fi=(()=>{class n{constructor(t,r,o){this.cart=t,this.auth=r,this.router=o,this.quantity=0,this.auth.authState().subscribe(l=>{null===l?this.sw=!1:(this.sw=!0,this.username=l.displayName)})}ngOnInit(){this.cart.getTotalPrice().subscribe(t=>this.quantity=t.length)}logout(){var t=this;return(0,_e.Z)(function*(){try{yield t.auth.logout(),yield t.router.navigate(["/"]),window.location.reload()}catch(r){alert(r)}})()}search(t){this.router.navigate(["/busqueda",t])}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Zs),c.Y36(Vf),c.Y36(wn))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-header"]],decls:36,vars:3,consts:[["id","initialNav",1,"navbar","navbar-expand-lg"],["id","initialCont",1,"container-fluid"],[4,"ngIf"],["class","d-flex",4,"ngIf"],["routerLink","/cart",1,"cart"],["routerLink","/cart",1,"d-inline"],["id","cartIcon",1,"fas","fa-shopping-cart"],[1,"d-inline",2,"color","#FFF","font-family","Lato"],["id","firstNav",1,"navbar","navbar-expand-lg"],["id","containerFirst",1,"container-fluid"],[1,"navbar-brand","mx-auto"],["routerLink","/"],["src","./assets/images/realLogoHeader.png","alt","..."],["id","lastNav",1,"navbar","navbar-expand-lg"],["id","containerLast",1,"container-fluid"],[1,"navbar-nav"],[1,"nav-item"],["href","#","routerLink","/mujeres"],["href","#","routerLink","/hombres"],["href","#","routerLink","/unisex"],["href","#","routerLink","/calzado"],["href","#","routerLink","/kids"],[1,"d-flex"],["type","search","placeholder","Buscar productos...","id","searchInput",1,"form-control",3,"keyup.enter"],["busqueda",""],["id","searchIcon",1,"fas","fa-search","fa-lg",3,"click"],["id","userIcon",1,"far","fa-user"],["routerLink","/login",1,"ingresar"],[1,"vl","d-inline"],["routerLink","/register",1,"registrarse"],["id","userIcon2",1,"far","fa-user"],[1,"dropdown"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-secondary","dropdown-toggle"],["aria-labelledby","dropdownMenuButton1",1,"dropdown-menu"],["routerLink","/favorites",1,"dropdown-item"],[1,"dropdown-item",3,"click"]],template:function(t,r){if(1&t){const o=c.EpF();c.TgZ(0,"nav",0),c.TgZ(1,"div",1),c.YNc(2,Fk,7,0,"div",2),c.YNc(3,PI,12,1,"div",3),c.TgZ(4,"div",4),c.TgZ(5,"a",5),c._UZ(6,"i",6),c.qZA(),c.TgZ(7,"p",7),c._uU(8),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(9,"nav",8),c.TgZ(10,"div",9),c.TgZ(11,"div",10),c.TgZ(12,"a",11),c._UZ(13,"img",12),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(14,"nav",13),c.TgZ(15,"div",14),c.TgZ(16,"ul",15),c.TgZ(17,"li",16),c.TgZ(18,"a",17),c._uU(19,"Mujeres"),c.qZA(),c.qZA(),c.TgZ(20,"li",16),c.TgZ(21,"a",18),c._uU(22,"Hombres"),c.qZA(),c.qZA(),c.TgZ(23,"li",16),c.TgZ(24,"a",19),c._uU(25,"Unisex"),c.qZA(),c.qZA(),c.TgZ(26,"li",16),c.TgZ(27,"a",20),c._uU(28,"Calzado"),c.qZA(),c.qZA(),c.TgZ(29,"li",16),c.TgZ(30,"a",21),c._uU(31,"Ni\xf1os"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(32,"div",22),c.TgZ(33,"input",23,24),c.NdJ("keyup.enter",function(){c.CHM(o);const d=c.MAs(34);return r.search(d.value)}),c.qZA(),c.TgZ(35,"i",25),c.NdJ("click",function(){c.CHM(o);const d=c.MAs(34);return r.search(d.value)}),c.qZA(),c.qZA(),c.qZA(),c.qZA()}2&t&&(c.xp6(2),c.Q6J("ngIf",!r.sw),c.xp6(1),c.Q6J("ngIf",r.sw),c.xp6(5),c.hij("(",r.quantity,")"))},directives:[Ar,kC,ss],styles:['#firstNav[_ngcontent-%COMP%]{background-color:#202020}#lastNav[_ngcontent-%COMP%]{background-color:#202020;box-shadow:0 0 7px}#initialNav[_ngcontent-%COMP%]{height:40px;background-color:#303030}#initialCont[_ngcontent-%COMP%]{margin:0 2rem}#containerFirst[_ngcontent-%COMP%]{margin:0 2rem}#containerLast[_ngcontent-%COMP%]{margin:0 2rem}li[_ngcontent-%COMP%]{margin-right:3rem}li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#fff;font-family:"Lato";font-size:20px;transition:.2s}li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#ccc}#searchInput[_ngcontent-%COMP%]{font-family:"Lato";font-size:18px;width:400px;border:none;border-radius:3px}input[type=search][_ngcontent-%COMP%]::-webkit-search-decoration, input[type=search][_ngcontent-%COMP%]::-webkit-search-cancel-button, input[type=search][_ngcontent-%COMP%]::-webkit-search-results-button, input[type=search][_ngcontent-%COMP%]::-webkit-search-results-decoration{display:none}#searchInput[_ngcontent-%COMP%]:focus{box-shadow:none}#searchIcon[_ngcontent-%COMP%]{color:#202020;position:relative;top:13px;right:30px}#searchIcon[_ngcontent-%COMP%]:hover{cursor:pointer}#userIcon[_ngcontent-%COMP%]{color:#fff}.vl[_ngcontent-%COMP%]{margin-left:10px;border-left:1px solid #FFF;height:30px}.registrarse[_ngcontent-%COMP%]{margin-left:10px;font-family:"Lato";color:#fff;text-decoration:none}.registrarse[_ngcontent-%COMP%]:hover{text-decoration:underline}.ingresar[_ngcontent-%COMP%]{margin-left:5px;color:#fff;font-family:"Lato";text-decoration:none}.ingresar[_ngcontent-%COMP%]:hover{text-decoration:underline}#cartIcon[_ngcontent-%COMP%]{color:#fff}.cart[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-right:5px}.cart[_ngcontent-%COMP%]:hover{cursor:pointer}.dropdown[_ngcontent-%COMP%]{position:relative}.dropdown-menu[_ngcontent-%COMP%]{position:absolute;background-color:#303030;left:0;top:100%;width:100%}.dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:100%}.dropdown-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:100%}.dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#404040;cursor:pointer}.dropdown[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;color:#fff;background-color:transparent}.dropdown[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{box-shadow:none}#userIcon2[_ngcontent-%COMP%]{position:relative;top:10px;color:#fff}']}),n})();var NI=V(1555);function s0(n,e){return new _n.y(t=>{const r=n.length;if(0===r)return void t.complete();const o=new Array(r);let l=0,d=0;for(let p=0;p<r;p++){const y=(0,yn.D)(n[p]);let b=!1;t.add(y.subscribe({next:D=>{b||(b=!0,d++),o[p]=D},error:D=>t.error(D),complete:()=>{l++,(l===r||!b)&&(d===r&&t.next(e?e.reduce((D,S,O)=>(D[S]=o[O],D),{}):o),t.complete())}}))}})}let o0=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n}),n})(),fu=(()=>{class n extends o0{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,features:[c.qOj]}),n})();const ll=new c.OlP("NgValueAccessor"),a0={provide:ll,useExisting:(0,c.Gpc)(()=>l0),multi:!0};let l0=(()=>{class n extends fu{writeValue(t){this.setProperty("checked",t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,r){1&t&&c.NdJ("change",function(l){return r.onChange(l.target.checked)})("blur",function(){return r.onTouched()})},features:[c._Bn([a0]),c.qOj]}),n})();const dN={provide:ll,useExisting:(0,c.Gpc)(()=>pc),multi:!0},fN=new c.OlP("CompositionEventMode");let pc=(()=>{class n extends o0{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=U()?U().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(fN,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&c.NdJ("input",function(l){return r._handleInput(l.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(l){return r._compositionEnd(l.target.value)})},features:[c._Bn([dN]),c.qOj]}),n})();function gc(n){return null==n||0===n.length}function rm(n){return null!=n&&"number"==typeof n.length}const gr=new c.OlP("NgValidators"),pu=new c.OlP("NgAsyncValidators"),ra=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class kt{static min(e){return function(n){return e=>{if(gc(e.value)||gc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function(n){return e=>{if(gc(e.value)||gc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function(n){return gc(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function(n){return gc(n.value)||ra.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function(n){return e=>gc(e.value)||!rm(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return mc(e)}static pattern(e){return function(n){if(!n)return Zr;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(gc(r.value))return null;const o=r.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}(e)}static nullValidator(e){return null}static compose(e){return Kd(e)}static composeAsync(e){return Yd(e)}}function mc(n){return e=>rm(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function Zr(n){return null}function Ky(n){return null!=n}function Zd(n){const e=(0,c.QGY)(n)?(0,yn.D)(n):n;return(0,c.CqO)(e),e}function Gd(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function zd(n,e){return e.map(t=>t(n))}function Wd(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function Kd(n){if(!n)return null;const e=n.filter(Ky);return 0==e.length?null:function(t){return Gd(zd(t,e))}}function _c(n){return null!=n?Kd(Wd(n)):null}function Yd(n){if(!n)return null;const e=n.filter(Ky);return 0==e.length?null:function(t){return function(...n){if(1===n.length){const e=n[0];if((0,Dd.k)(e))return s0(e,null);if((0,NI.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return s0(t.map(r=>e[r]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return s0(n=1===n.length&&(0,Dd.k)(n[0])?n[0]:n,null).pipe((0,ze.U)(t=>e(...t)))}return s0(n,null)}(zd(t,e).map(Zd)).pipe((0,ze.U)(Gd))}}function yc(n){return null!=n?Yd(Wd(n)):null}function u0(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function c0(n){return n._rawValidators}function d0(n){return n._rawAsyncValidators}function Yy(n){return n?Array.isArray(n)?n:[n]:[]}function sm(n,e){return Array.isArray(n)?n.includes(e):n===e}function h0(n,e){const t=Yy(e);return Yy(n).forEach(o=>{sm(t,o)||t.push(o)}),t}function f0(n,e){return Yy(e).filter(t=>!sm(n,t))}let p0=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=_c(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=yc(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,r){return!!this.control&&this.control.hasError(t,r)}getError(t,r){return this.control?this.control.getError(t,r):null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n}),n})(),Li=(()=>{class n extends p0{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,features:[c.qOj]}),n})();class vc extends p0{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class g0{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let Ec=(()=>{class n extends g0{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(vc,2))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[c.qOj]}),n})(),Qd=(()=>{class n extends g0{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Li,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[c.qOj]}),n})();function _0(n,e){return[...e.path,n]}function om(n,e){am(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&yN(n,e)})}(n,e),function(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&yN(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function y0(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),jf(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Jy(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function am(n,e){const t=c0(n);null!==e.validator?n.setValidators(u0(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=d0(n);null!==e.asyncValidator?n.setAsyncValidators(u0(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();Jy(e._rawValidators,o),Jy(e._rawAsyncValidators,o)}function jf(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=c0(n);if(Array.isArray(o)&&o.length>0){const l=o.filter(d=>d!==e.validator);l.length!==o.length&&(t=!0,n.setValidators(l))}}if(null!==e.asyncValidator){const o=d0(n);if(Array.isArray(o)&&o.length>0){const l=o.filter(d=>d!==e.asyncValidator);l.length!==o.length&&(t=!0,n.setAsyncValidators(l))}}}const r=()=>{};return Jy(e._rawValidators,r),Jy(e._rawAsyncValidators,r),t}function yN(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function LI(n,e){am(n,e)}function Cc(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function v0(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function E0(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(l=>{l.constructor===pc?t=l:function(n){return Object.getPrototypeOf(n.constructor)===fu}(l)?r=l:o=l}),o||r||t||null}function lm(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const um="VALID",cm="INVALID",Hf="PENDING",dm="DISABLED";function b0(n){return(ev(n)?n.validators:n)||null}function UI(n){return Array.isArray(n)?_c(n):n||null}function Xy(n,e){return(ev(e)?e.asyncValidators:n)||null}function BI(n){return Array.isArray(n)?yc(n):n||null}function ev(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class tv{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=UI(this._rawValidators),this._composedAsyncValidatorFn=BI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===um}get invalid(){return this.status===cm}get pending(){return this.status==Hf}get disabled(){return this.status===dm}get enabled(){return this.status!==dm}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=UI(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=BI(e)}addValidators(e){this.setValidators(h0(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(h0(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(f0(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(f0(e,this._rawAsyncValidators))}hasValidator(e){return sm(this._rawValidators,e)}hasAsyncValidator(e){return sm(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Hf,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=dm,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=um,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===um||this.status===Hf)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?dm:um}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Hf,this._hasOwnPendingAsyncValidator=!0;const t=Zd(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=r instanceof nv?r.controls.hasOwnProperty(o)?r.controls[o]:null:r instanceof hm&&r.at(o)||null}),r}(this,e)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new c.vpe,this.statusChanges=new c.vpe}_calculateStatus(){return this._allControlsDisabled()?dm:this.errors?cm:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Hf)?Hf:this._anyControlsHaveStatus(cm)?cm:um}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ev(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class bc extends tv{constructor(e=null,t,r){super(b0(t),Xy(r,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){lm(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){lm(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class nv extends tv{constructor(e,t,r){super(b0(t),Xy(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof bc?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,l)=>{r=t(r,o,l)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class hm extends tv{constructor(e,t,r){super(b0(t),Xy(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((r,o)=>{this._throwIfControlMissing(o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof bc?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const bN={provide:Li,useExisting:(0,c.Gpc)(()=>rv)},gu=(()=>Promise.resolve(null))();let rv=(()=>{class n extends Li{constructor(t,r){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new c.vpe,this.form=new nv({},_c(t),yc(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){gu.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),om(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){gu.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),lm(this._directives,t)})}addFormGroup(t){gu.then(()=>{const r=this._findContainer(t.path),o=new nv({});LI(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){gu.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){gu.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,v0(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(gr,10),c.Y36(pu,10))},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&c.NdJ("submit",function(l){return r.onSubmit(l)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([bN]),c.qOj]}),n})();const TN={provide:vc,useExisting:(0,c.Gpc)(()=>ov)},sv=(()=>Promise.resolve(null))();let ov=(()=>{class n extends vc{constructor(t,r,o,l){super(),this.control=new bc,this._registered=!1,this.update=new c.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=E0(0,l)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),Cc(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?_0(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){om(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){sv.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=""===r||r&&"false"!==r;sv.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Li,9),c.Y36(gr,10),c.Y36(pu,10),c.Y36(ll,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[c._Bn([TN]),c.qOj,c.TTD]}),n})(),wc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const w0={provide:ll,useExisting:(0,c.Gpc)(()=>fm),multi:!0};let fm=(()=>{class n extends fu{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&c.NdJ("input",function(l){return r.onChange(l.target.value)})("blur",function(){return r.onTouched()})},features:[c._Bn([w0]),c.qOj]}),n})(),I0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const lv=new c.OlP("NgModelWithFormControlWarning"),AN={provide:Li,useExisting:(0,c.Gpc)(()=>ul)};let ul=(()=>{class n extends Li{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new c.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(jf(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return om(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){y0(t.control||null,t,!1),lm(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,v0(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(y0(r||null,t),o instanceof bc&&(om(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);LI(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function(n,e){return jf(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){am(this.form,this),this._oldForm&&jf(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(gr,10),c.Y36(pu,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&c.NdJ("submit",function(l){return r.onSubmit(l)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([AN]),c.qOj,c.TTD]}),n})();const YI={provide:vc,useExisting:(0,c.Gpc)(()=>Tc)};let Tc=(()=>{class n extends vc{constructor(t,r,o,l,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.update=new c.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=E0(0,l)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),Cc(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return _0(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Li,13),c.Y36(gr,10),c.Y36(pu,10),c.Y36(ll,10),c.Y36(lv,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[c._Bn([YI]),c.qOj,c.TTD]}),n._ngModelWarningSentOnce=!1,n})();const QI={provide:ll,useExisting:(0,c.Gpc)(()=>pm),multi:!0};function x0(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let pm=(()=>{class n extends fu{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const r=this._getOptionId(t);null==r&&this.setProperty("selectedIndex",-1);const o=x0(r,t);this.setProperty("value",o)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&c.NdJ("change",function(l){return r.onChange(l.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[c._Bn([QI]),c.qOj]}),n})(),P0=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(x0(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(pm,9))},n.\u0275dir=c.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const JI={provide:ll,useExisting:(0,c.Gpc)(()=>N0),multi:!0};function XI(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let N0=(()=>{class n extends fu{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const o=t.map(l=>this._getOptionId(l));r=(l,d)=>{l._setSelected(o.indexOf(d.toString())>-1)}}else r=(o,l)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const o=[];if(void 0!==r.selectedOptions){const l=r.selectedOptions;for(let d=0;d<l.length;d++){const p=l.item(d),y=this._getOptionValue(p.value);o.push(y)}}else{const l=r.options;for(let d=0;d<l.length;d++){const p=l.item(d);if(p.selected){const y=this._getOptionValue(p.value);o.push(y)}}}this.value=o,t(o)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&c.NdJ("change",function(l){return r.onChange(l.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[c._Bn([JI]),c.qOj]}),n})(),M0=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(XI(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(XI(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(N0,9))},n.\u0275dir=c.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const PN={provide:gr,useExisting:(0,c.Gpc)(()=>gm),multi:!0};let gm=(()=>{class n{constructor(){this._validator=Zr}ngOnChanges(t){"maxlength"in t&&(this._createValidator(),this._onChange&&this._onChange())}validate(t){return this.enabled()?this._validator(t):null}registerOnValidatorChange(t){this._onChange=t}_createValidator(){this._validator=this.enabled()?mc(function(n){return"number"==typeof n?n:parseInt(n,10)}(this.maxlength)):Zr}enabled(){return null!=this.maxlength}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&c.uIk("maxlength",r.enabled()?r.maxlength:null)},inputs:{maxlength:"maxlength"},features:[c._Bn([PN]),c.TTD]}),n})(),iD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[I0]]}),n})(),sD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[iD]}),n})(),hv=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:lv,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[iD]}),n})(),Jd=(()=>{class n{group(t,r=null){const o=this._reduceControls(t);let p,l=null,d=null;return null!=r&&(function(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(l=null!=r.validators?r.validators:null,d=null!=r.asyncValidators?r.asyncValidators:null,p=null!=r.updateOn?r.updateOn:void 0):(l=null!=r.validator?r.validator:null,d=null!=r.asyncValidator?r.asyncValidator:null)),new nv(o,{asyncValidators:d,updateOn:p,validators:l})}control(t,r,o){return new bc(t,r,o)}array(t,r,o){const l=t.map(d=>this._createControl(d));return new hm(l,r,o)}_reduceControls(t){const r={};return Object.keys(t).forEach(o=>{r[o]=this._createControl(t[o])}),r}_createControl(t){return t instanceof bc||t instanceof nv||t instanceof hm?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,c.Yz7)({factory:function(){return new n},token:n,providedIn:hv}),n})();function RN(n,e){1&n&&(c.TgZ(0,"small"),c._uU(1," Este campo es obligatorio o es inv\xe1lido "),c.qZA())}function oD(n,e){1&n&&(c.TgZ(0,"small"),c._uU(1," Este campo es obligatorio o es inv\xe1lido "),c.qZA())}function kN(n,e){1&n&&(c.TgZ(0,"small"),c._uU(1," Este campo es obligatorio o es inv\xe1lido "),c.qZA())}function aD(n,e){1&n&&(c.TgZ(0,"small"),c._uU(1," Este campo es obligatorio o es inv\xe1lido "),c.qZA())}function lD(n,e){1&n&&(c.TgZ(0,"small"),c._uU(1," Este campo es obligatorio o es inv\xe1lido "),c.qZA())}function pv(n,e){1&n&&(c.TgZ(0,"small"),c._uU(1," Este campo es obligatorio o es inv\xe1lido "),c.qZA())}let FN=(()=>{class n{constructor(t,r){this.formBuilder=t,this.router=r}ngOnInit(){this.formBilling=this.formBuilder.group({name:["",[kt.required]],surname:["",[kt.required]],address:["",[kt.required]],city:["",[kt.required]],postal:["",[kt.required,kt.pattern("^[0-9]{5}$"),kt.min(5)]],phone:["",[kt.required,kt.pattern("^[0-9]{7,10}$")]]})}send(){let t=this.formBilling.get("name").value,r=this.formBilling.get("surname").value,o=this.formBilling.get("address").value,l=this.formBilling.get("city").value,d=this.formBilling.get("postal").value,p=this.formBilling.get("phone").value;console.log({name:t,surname:r,address:o,city:l,postal:d,phone:p}),this.router.navigate(["/payment"])}goBack(){this.router.navigate(["/cart"])}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Jd),c.Y36(wn))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-billing"]],decls:58,vars:8,consts:[[1,"container"],[1,"header"],[1,"btnAtras",3,"click"],[1,"title","text-center"],[1,"mx-auto",3,"formGroup","submit"],[1,"identity"],[1,"name"],[2,"color","red"],["type","text","formControlName","name",1,"form-control"],[4,"ngIf"],[1,"last-name"],["type","text","formControlName","surname",1,"form-control"],[1,"address"],["type","text","formControlName","address",1,"form-control"],[1,"city"],["type","text","formControlName","city",1,"form-control"],[1,"postal"],["type","number","formControlName","postal","oninput","this.value=this.value.slice(0,this.maxLength)","maxlength","5",1,"form-control"],[1,"d-flex","justify-content-between"],[2,"color","black"],[1,"phone"],["type","number","formControlName","phone",1,"form-control"],[1,"button","mx-auto"],["type","submit",3,"disabled"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"p"),c._uU(3,"2/3"),c.qZA(),c.TgZ(4,"button",2),c.NdJ("click",function(){return r.goBack()}),c._uU(5,"Atr\xe1s"),c.qZA(),c.qZA(),c.TgZ(6,"h1",3),c._uU(7,"Detalles de facturaci\xf3n"),c.qZA(),c.TgZ(8,"form",4),c.NdJ("submit",function(){return r.send()}),c.TgZ(9,"div",5),c.TgZ(10,"div",6),c.TgZ(11,"p"),c._uU(12,"Nombre "),c.TgZ(13,"a",7),c._uU(14,"*"),c.qZA(),c.qZA(),c._UZ(15,"input",8),c.YNc(16,RN,2,0,"small",9),c.qZA(),c.TgZ(17,"div",10),c.TgZ(18,"p"),c._uU(19,"Apellido "),c.TgZ(20,"a",7),c._uU(21,"*"),c.qZA(),c.qZA(),c._UZ(22,"input",11),c.YNc(23,oD,2,0,"small",9),c.qZA(),c.qZA(),c.TgZ(24,"div",12),c.TgZ(25,"p"),c._uU(26,"Direcci\xf3n "),c.TgZ(27,"a",7),c._uU(28,"*"),c.qZA(),c.qZA(),c._UZ(29,"input",13),c.YNc(30,kN,2,0,"small",9),c.qZA(),c.TgZ(31,"div",14),c.TgZ(32,"p"),c._uU(33,"Ciudad "),c.TgZ(34,"a",7),c._uU(35,"*"),c.qZA(),c.qZA(),c._UZ(36,"input",15),c.YNc(37,aD,2,0,"small",9),c.qZA(),c.TgZ(38,"div",16),c.TgZ(39,"p"),c._uU(40,"C\xf3digo Postal "),c.TgZ(41,"a",7),c._uU(42,"*"),c.qZA(),c.qZA(),c._UZ(43,"input",17),c.TgZ(44,"div",18),c.YNc(45,lD,2,0,"small",9),c.TgZ(46,"small",19),c._uU(47," C\xf3digo postal debe tener cinco d\xedgitos "),c.qZA(),c.qZA(),c.qZA(),c.TgZ(48,"div",20),c.TgZ(49,"p"),c._uU(50,"Tel\xe9fono "),c.TgZ(51,"a",7),c._uU(52,"*"),c.qZA(),c.qZA(),c._UZ(53,"input",21),c.YNc(54,pv,2,0,"small",9),c.qZA(),c.TgZ(55,"div",22),c.TgZ(56,"button",23),c._uU(57,"Continuar"),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(8),c.Q6J("formGroup",r.formBilling),c.xp6(8),c.Q6J("ngIf",r.formBilling.get("name").invalid&&r.formBilling.get("name").touched),c.xp6(7),c.Q6J("ngIf",r.formBilling.get("surname").invalid&&r.formBilling.get("surname").touched),c.xp6(7),c.Q6J("ngIf",r.formBilling.get("address").invalid&&r.formBilling.get("address").touched),c.xp6(7),c.Q6J("ngIf",r.formBilling.get("city").invalid&&r.formBilling.get("city").touched),c.xp6(8),c.Q6J("ngIf",r.formBilling.get("postal").invalid&&r.formBilling.get("postal").touched),c.xp6(9),c.Q6J("ngIf",r.formBilling.get("phone").invalid&&r.formBilling.get("phone").touched),c.xp6(2),c.Q6J("disabled",r.formBilling.invalid))},directives:[wc,Qd,ul,pc,Ec,Tc,Ar,fm,gm],styles:['.container[_ngcontent-%COMP%]{margin-top:2rem}form[_ngcontent-%COMP%]{max-width:35rem;display:flex;flex-direction:column}form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:"Lato";font-size:18px;font-weight:bold}form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-family:"Lato";border:1px solid black;border-radius:2px}form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{box-shadow:none}.identity[_ngcontent-%COMP%]{display:flex}.name[_ngcontent-%COMP%]{width:20rem}.last-name[_ngcontent-%COMP%]{margin-left:5rem;width:20rem}.address[_ngcontent-%COMP%]{margin-top:1rem}.city[_ngcontent-%COMP%]{margin-top:1rem}.postal[_ngcontent-%COMP%]{margin-top:1rem}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.phone[_ngcontent-%COMP%]{margin:1rem 0 2rem}.email[_ngcontent-%COMP%]{margin:1rem 0 2rem}.title[_ngcontent-%COMP%]{font-family:"Lato";margin-bottom:2rem}.check[_ngcontent-%COMP%]{margin-bottom:1rem}.button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:200px;border:none;height:45px;border-radius:5px;background-color:#060;color:#fff;font-family:"Lato";font-weight:bold;margin-bottom:3rem;transition:.2s}.button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:green}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:"Lato";font-size:18px;font-weight:bold}.btnAtras[_ngcontent-%COMP%]{border:none;border-radius:5px;background-color:#6495ed;font-family:"Lato";font-size:20px;color:#000;width:100px;transition:.2s}.name[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:red}.last-name[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:red}.address[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:red}.city[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:red}.phone[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:red}.postal[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:red}.email[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:red}.button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled, .button[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{background-color:#ccc}']}),n})();class V0{}const oa="*";function aa(n,e){return{type:7,name:n,definitions:e,options:{}}}function hl(n,e=null){return{type:4,styles:e,timings:n}}function U0(n,e=null){return{type:2,steps:n,options:e}}function Ws(n){return{type:6,styles:n,offset:null}}function gv(n,e,t){return{type:0,name:n,styles:e,options:t}}function fl(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function cD(n){Promise.resolve(null).then(n)}class qf{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){cD(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class dD{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,o=0;const l=this.players.length;0==l?cD(()=>this._onFinish()):this.players.forEach(d=>{d.onDone(()=>{++t==l&&this._onFinish()}),d.onDestroy(()=>{++r==l&&this._onDestroy()}),d.onStart(()=>{++o==l&&this._onStart()})}),this.totalTime=this.players.reduce((d,p)=>Math.max(d,p.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const o=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(o)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const hD=["toast-component",""];function BN(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",5),c.NdJ("click",function(){return c.CHM(t),c.oxw().remove()}),c.TgZ(1,"span",6),c._uU(2,"\xd7"),c.qZA(),c.qZA()}}function jN(n,e){if(1&n&&(c.ynx(0),c._uU(1),c.BQk()),2&n){const t=c.oxw(2);c.xp6(1),c.hij("[",t.duplicatesCount+1,"]")}}function HN(n,e){if(1&n&&(c.TgZ(0,"div"),c._uU(1),c.YNc(2,jN,2,1,"ng-container",4),c.qZA()),2&n){const t=c.oxw();c.Tol(t.options.titleClass),c.uIk("aria-label",t.title),c.xp6(1),c.hij(" ",t.title," "),c.xp6(1),c.Q6J("ngIf",t.duplicatesCount)}}function $N(n,e){if(1&n&&c._UZ(0,"div",7),2&n){const t=c.oxw();c.Tol(t.options.messageClass),c.Q6J("innerHTML",t.message,c.oJD)}}function qN(n,e){if(1&n&&(c.TgZ(0,"div",8),c._uU(1),c.qZA()),2&n){const t=c.oxw();c.Tol(t.options.messageClass),c.uIk("aria-label",t.message),c.xp6(1),c.hij(" ",t.message," ")}}function ZN(n,e){if(1&n&&(c.TgZ(0,"div"),c._UZ(1,"div",9),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.Udp("width",t.width+"%")}}function GN(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",5),c.NdJ("click",function(){return c.CHM(t),c.oxw().remove()}),c.TgZ(1,"span",6),c._uU(2,"\xd7"),c.qZA(),c.qZA()}}function zN(n,e){if(1&n&&(c.ynx(0),c._uU(1),c.BQk()),2&n){const t=c.oxw(2);c.xp6(1),c.hij("[",t.duplicatesCount+1,"]")}}function WN(n,e){if(1&n&&(c.TgZ(0,"div"),c._uU(1),c.YNc(2,zN,2,1,"ng-container",4),c.qZA()),2&n){const t=c.oxw();c.Tol(t.options.titleClass),c.uIk("aria-label",t.title),c.xp6(1),c.hij(" ",t.title," "),c.xp6(1),c.Q6J("ngIf",t.duplicatesCount)}}function fD(n,e){if(1&n&&c._UZ(0,"div",7),2&n){const t=c.oxw();c.Tol(t.options.messageClass),c.Q6J("innerHTML",t.message,c.oJD)}}function pD(n,e){if(1&n&&(c.TgZ(0,"div",8),c._uU(1),c.qZA()),2&n){const t=c.oxw();c.Tol(t.options.messageClass),c.uIk("aria-label",t.message),c.xp6(1),c.hij(" ",t.message," ")}}function gD(n,e){if(1&n&&(c.TgZ(0,"div"),c._UZ(1,"div",9),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.Udp("width",t.width+"%")}}class mD{constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class mm{constructor(e,t,r,o,l,d){this.toastId=e,this.config=t,this.message=r,this.title=o,this.toastType=l,this.toastRef=d,this._onTap=new dn.xQ,this._onAction=new dn.xQ,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const j0={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null},mv=new c.OlP("ToastConfig");class H0{constructor(e){this._overlayRef=e,this.duplicatesCount=0,this._afterClosed=new dn.xQ,this._activate=new dn.xQ,this._manualClose=new dn.xQ,this._resetTimeout=new dn.xQ,this._countDuplicate=new dn.xQ}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class Xd{constructor(e,t){this._toastPackage=e,this._parentInjector=t}get(e,t,r){return e===mm?this._toastPackage:this._parentInjector.get(e,t,r)}}class QN extends class{attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}{constructor(e,t,r){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=r}attachComponentPortal(e,t){const r=this._componentFactoryResolver.resolveComponentFactory(e.component);let o;return o=r.create(e.injector),this._appRef.attachView(o.hostView),this.setDisposeFn(()=>{this._appRef.detachView(o.hostView),o.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(o),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(o)),o}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}class JN{constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let Zf=(()=>{class n{constructor(t){this._document=t}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),this._document.body.appendChild(t),this._containerElement=t}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(me))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Qk=(()=>{class n{constructor(t,r,o,l){this._overlayContainer=t,this._componentFactoryResolver=r,this._appRef=o,this._document=l,this._paneElements=new Map}create(t,r){return this._createOverlayRef(this.getPaneElement(t,r))}getPaneElement(t="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[t]||(this._paneElements.get(r)[t]=this._createPaneElement(t,r)),this._paneElements.get(r)[t]}_createPaneElement(t,r){const o=this._document.createElement("div");return o.id="toast-container",o.classList.add(t),o.classList.add("toast-container"),r?r.getContainerElement().appendChild(o):this._overlayContainer.getContainerElement().appendChild(o),o}_createPortalHost(t){return new QN(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new JN(this._createPortalHost(t))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Zf),c.LFG(c._Vd),c.LFG(c.z2F),c.LFG(me))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),la=(()=>{class n{constructor(t,r,o,l,d){this.overlay=r,this._injector=o,this.sanitizer=l,this.ngZone=d,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Al(Al({},t.default),t.config),t.config.iconClasses&&(this.toastrConfig.iconClasses=Al(Al({},t.default.iconClasses),t.config.iconClasses))}show(t,r,o={},l=""){return this._preBuildNotification(l,t,r,this.applyConfig(o))}success(t,r,o={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,r,this.applyConfig(o))}error(t,r,o={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,r,this.applyConfig(o))}info(t,r,o={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,r,this.applyConfig(o))}warning(t,r,o={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,r,this.applyConfig(o))}clear(t){for(const r of this.toasts)if(void 0!==t){if(r.toastId===t)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}remove(t){const r=this._findToast(t);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const o=this.toasts[this.currentlyActive].toastRef;o.isInactive()||(this.currentlyActive=this.currentlyActive+1,o.activate())}return!0}findDuplicate(t="",r="",o,l){const{includeTitleDuplicates:d}=this.toastrConfig;for(const p of this.toasts){const y=d&&p.title===t;if((!d||y)&&p.message===r)return p.toastRef.onDuplicate(o,l),p}return null}applyConfig(t={}){return Al(Al({},this.toastrConfig),t)}_findToast(t){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===t)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(t,r,o,l){return l.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,r,o,l)):this._buildNotification(t,r,o,l)}_buildNotification(t,r,o,l){if(!l.toastComponent)throw new Error("toastComponent required");const d=this.findDuplicate(o,r,this.toastrConfig.resetTimeoutOnDuplicate&&l.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&o||r)&&this.toastrConfig.preventDuplicates&&null!==d)return d;this.previousToastMessage=r;let p=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(p=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const y=this.overlay.create(l.positionClass,this.overlayContainer);this.index=this.index+1;let b=r;r&&l.enableHtml&&(b=this.sanitizer.sanitize(c.q3G.HTML,r));const D=new H0(y),S=new mm(this.index,l,b,o,t,D),O=new Xd(S,this._injector),F=new mD(l.toastComponent,O),$=y.attach(F,this.toastrConfig.newestOnTop);D.componentInstance=$.instance;const ie={toastId:this.index,title:o||"",message:r||"",toastRef:D,onShown:D.afterActivate(),onHidden:D.afterClosed(),onTap:S.onTap(),onAction:S.onAction(),portal:$};return p||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{ie.toastRef.activate()})),this.toasts.push(ie),ie}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(mv),c.LFG(Qk),c.LFG(c.zs3),c.LFG(La),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Jk=(()=>{class n{constructor(t,r,o){this.toastrService=t,this.toastPackage=r,this.ngZone=o,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(l=>{this.duplicatesCount=l})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=nC(Al({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=nC(Al({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=nC(Al({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),r)):this.timeout=setTimeout(()=>t(),r)}outsideInterval(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),r)):this.intervalId=setInterval(()=>t(),r)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(la),c.Y36(mm),c.Y36(c.R0b))},n.\u0275cmp=c.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,r){1&t&&c.NdJ("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&t&&(c.d8E("@flyInOut",r.state),c.Tol(r.toastClasses),c.Udp("display",r.displayStyle))},attrs:hD,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alertdialog","aria-live","polite",3,"innerHTML"],["role","alertdialog","aria-live","polite"],[1,"toast-progress"]],template:function(t,r){1&t&&(c.YNc(0,BN,3,0,"button",0),c.YNc(1,HN,3,5,"div",1),c.YNc(2,$N,1,3,"div",2),c.YNc(3,qN,2,4,"div",3),c.YNc(4,ZN,2,2,"div",4)),2&t&&(c.Q6J("ngIf",r.options.closeButton),c.xp6(1),c.Q6J("ngIf",r.title),c.xp6(1),c.Q6J("ngIf",r.message&&r.options.enableHtml),c.xp6(1),c.Q6J("ngIf",r.message&&!r.options.enableHtml),c.xp6(1),c.Q6J("ngIf",r.options.progressBar))},directives:[Ar],encapsulation:2,data:{animation:[aa("flyInOut",[gv("inactive",Ws({opacity:0})),gv("active",Ws({opacity:1})),gv("removed",Ws({opacity:0})),fl("inactive => active",hl("{{ easeTime }}ms {{ easing }}")),fl("active => removed",hl("{{ easeTime }}ms {{ easing }}"))])]}}),n})();const yD=nC(Al({},j0),{toastComponent:Jk});let vD=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[{provide:mv,useValue:{default:yD,config:t}}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Vr]]}),n})(),lt=(()=>{class n{constructor(t,r,o){this.toastrService=t,this.toastPackage=r,this.appRef=o,this.width=-1,this.toastClasses="",this.state="inactive",this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(l=>{this.duplicatesCount=l})}get displayStyle(){if("inactive"===this.state)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(!0===this.options.disableTimeOut||"timeOut"===this.options.disableTimeOut)&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=(new Date).getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){"removed"!==this.state&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){"removed"!==this.state&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(la),c.Y36(mm),c.Y36(c.z2F))},n.\u0275cmp=c.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(t,r){1&t&&c.NdJ("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&t&&(c.Tol(r.toastClasses),c.Udp("display",r.displayStyle))},attrs:hD,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alert","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert","aria-live","polite",3,"innerHTML"],["role","alert","aria-live","polite"],[1,"toast-progress"]],template:function(t,r){1&t&&(c.YNc(0,GN,3,0,"button",0),c.YNc(1,WN,3,5,"div",1),c.YNc(2,fD,1,3,"div",2),c.YNc(3,pD,2,4,"div",3),c.YNc(4,gD,2,2,"div",4)),2&t&&(c.Q6J("ngIf",r.options.closeButton),c.xp6(1),c.Q6J("ngIf",r.title),c.xp6(1),c.Q6J("ngIf",r.message&&r.options.enableHtml),c.xp6(1),c.Q6J("ngIf",r.message&&!r.options.enableHtml),c.xp6(1),c.Q6J("ngIf",r.options.progressBar))},directives:[Ar],encapsulation:2}),n})();nC(Al({},j0),{toastComponent:lt});let as=(()=>{class n{constructor(t,r,o){this.toastr=t,this.router=r,this.formBuilder=o}ngOnInit(){this.form=this.formBuilder.group({name:["",[kt.required,kt.pattern("^[A-Za-z]{0,30}$")]],email:["",[kt.required,kt.email]],message:["",[kt.required]]})}submit(){this.router.navigate(["/"]),this.toastr.success("","Consulta enviada con \xe9xito"),this.form.reset()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(la),c.Y36(wn),c.Y36(Jd))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-footer"]],decls:57,vars:2,consts:[[1,"container-fluid"],[1,"row","mx-auto"],[1,"col-md-3"],[1,"text-center"],[1,"SobreNosotrosInfo","d-inline"],["routerLink","/terms-and-conditions",1,"mt-3"],["href","https://www.youtube.com/watch?v=dQw4w9WgXcQ","target","_blank"],["href","https://google.com/","target","_blank"],[1,"RedesSocialesCont"],["href","https://www.facebook.com","target","_blank"],["id","facebook",1,"fab","fa-facebook-square","fa-3x"],["href","https://www.twitter.com","target","_blank"],["id","twitter",1,"fab","fa-twitter","fa-3x"],["href","https://www.instagram.com","target","_blank"],["id","instagram",1,"fab","fa-instagram","fa-3x"],[1,"col-md-6","mx-auto"],[3,"formGroup"],[1,"nombre"],[1,"labelContact"],["type","text","formControlName","name",1,"form-control"],[1,"email"],["type","email","formControlName","email",1,"form-control"],[1,"mensaje"],["formControlName","message"],["type","submit",3,"disabled","click"],[1,"row"],[1,"info"],["href","https://github.com/brianmontero","target","_blank",1,"github"]],template:function(t,r){1&t&&(c.TgZ(0,"footer"),c.TgZ(1,"div",0),c.TgZ(2,"div",1),c.TgZ(3,"div",2),c.TgZ(4,"h3",3),c._uU(5,"Sobre Nosotros"),c.qZA(),c.TgZ(6,"div",4),c.TgZ(7,"a",5),c._uU(8,"T\xe9minos y condiciones"),c.qZA(),c.TgZ(9,"a",6),c._uU(10," Privacidad "),c.qZA(),c.TgZ(11,"a",6),c._uU(12," Trabaj\xe1 con nosotros "),c.qZA(),c.TgZ(13,"a",7),c._uU(14,"Ayuda"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(15,"div",2),c.TgZ(16,"h3",3),c._uU(17,"Redes Sociales"),c.qZA(),c.TgZ(18,"div",8),c.TgZ(19,"a",9),c._UZ(20,"i",10),c.qZA(),c.TgZ(21,"a",11),c._UZ(22,"i",12),c.qZA(),c.TgZ(23,"a",13),c._UZ(24,"i",14),c.qZA(),c.qZA(),c.qZA(),c.TgZ(25,"div",15),c.TgZ(26,"div"),c.TgZ(27,"h2",3),c._uU(28,"\xa1Comun\xedcate con nosotros!"),c.qZA(),c.TgZ(29,"div"),c.TgZ(30,"form",16),c.TgZ(31,"div",17),c.TgZ(32,"label",18),c._uU(33,"Nombre *"),c.qZA(),c._UZ(34,"br"),c._UZ(35,"input",19),c.qZA(),c.TgZ(36,"div",20),c.TgZ(37,"label",18),c._uU(38,"Email *"),c.qZA(),c._UZ(39,"br"),c._UZ(40,"input",21),c.qZA(),c.TgZ(41,"div",22),c.TgZ(42,"label",18),c._uU(43,"Mensaje *"),c.qZA(),c._UZ(44,"br"),c._UZ(45,"textarea",23),c.qZA(),c.TgZ(46,"div"),c.TgZ(47,"button",24),c.NdJ("click",function(){return r.submit()}),c._uU(48," Enviar "),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(49,"div",25),c.TgZ(50,"p",26),c._uU(51,"Copyrigth @ 2021 Tienda Irlandesa. Montevideo, Uruguay"),c.qZA(),c.qZA(),c.TgZ(52,"div",25),c.TgZ(53,"p",26),c._uU(54," P\xe1gina creada por "),c.TgZ(55,"a",27),c._uU(56," Brian Montero "),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(30),c.Q6J("formGroup",r.form),c.xp6(17),c.Q6J("disabled",r.form.invalid))},directives:[ss,wc,Qd,ul,pc,Ec,Tc],styles:['footer[_ngcontent-%COMP%]{background-color:#202020;box-shadow:7px}h3[_ngcontent-%COMP%]{margin-top:1rem;font-family:"Lato";font-weight:bold;color:#fff;font-size:24px}.SobreNosotrosInfo[_ngcontent-%COMP%]{display:flex;justify-content:center}.SobreNosotrosInfo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-bottom:10px;display:flex;justify-content:center;text-decoration:none;color:#fff}.SobreNosotrosInfo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.RedesSocialesCont[_ngcontent-%COMP%]{position:relative;right:-30px;padding:15px}.RedesSocialesCont[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:3rem;position:relative;right:5px}#facebook[_ngcontent-%COMP%]{color:#fff;transition:.2s}#twitter[_ngcontent-%COMP%]{color:#fff;transition:.2s}#instagram[_ngcontent-%COMP%]{color:#fff;transition:.2s}#instagram[_ngcontent-%COMP%]:hover{color:#fcaf45}#twitter[_ngcontent-%COMP%]:hover{color:#00acee}#facebook[_ngcontent-%COMP%]:hover{color:#3b5998}h2[_ngcontent-%COMP%]{margin-top:1rem;font-family:"Lato";font-weight:bold;font-size:22px;color:#fff}.labelContact[_ngcontent-%COMP%]{font-family:"Lato";font-size:18px;color:#fff}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:400px;border:none;border-radius:0;font-family:"Lato"}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{box-shadow:none}textarea[_ngcontent-%COMP%]{width:500px;height:100px;border:none;border-radius:0;font-family:"Lato"}textarea[_ngcontent-%COMP%]:focus{outline:none;text-indent:5px}.nombre[_ngcontent-%COMP%]{margin-bottom:1rem}.email[_ngcontent-%COMP%]{margin-top:1rem}.mensaje[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:1rem}button[_ngcontent-%COMP%]{border:none;border-radius:0;margin-bottom:1rem;width:90px;height:35px;font-family:"Lato";font-weight:bold;transition:.2s}button[_ngcontent-%COMP%]:hover{background-color:#ccc}.info[_ngcontent-%COMP%]{color:#ccc;text-align:center;font-family:"Lato";font-size:14px}.github[_ngcontent-%COMP%]{text-decoration:none;color:#fcaf45}.github[_ngcontent-%COMP%]:hover{text-decoration:underline}']}),n})(),_v=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-billing-page"]],decls:3,vars:0,template:function(t,r){1&t&&(c._UZ(0,"app-header"),c._UZ(1,"app-billing"),c._UZ(2,"app-footer"))},directives:[Fi,FN,as],styles:[""]}),n})(),_m=(()=>{class n{constructor(t){this.http=t,this._url="https://tiendairlandesa-default-rtdb.firebaseio.com/products.json"}getProducts(){return this.http.get(this._url)}showProd(t){return this.http.get(this._url).pipe((0,ze.U)(r=>r.filter(o=>o.id===t)))}getMujeresSection(){return this.http.get(this._url).pipe((0,ze.U)(t=>t.filter(r=>"Femenina"==r.category)))}getHombresSection(){return this.http.get(this._url).pipe((0,ze.U)(t=>t.filter(r=>"Masculina"==r.category)))}getKidsSection(){return this.http.get(this._url).pipe((0,ze.U)(t=>t.filter(r=>"Kids"==r.category)))}getUnisexSection(){return this.http.get(this._url).pipe((0,ze.U)(t=>t.filter(r=>"Femenina"==r.category||"Masculina"==r.category)))}getCalzadoSection(){return this.http.get(this._url).pipe((0,ze.U)(t=>t.filter(r=>1==r.features.calzado)))}getByFilterColor(t){return this.http.get(this._url).pipe((0,ze.U)(r=>r.filter(o=>o.features.color==t)))}getByFilterRange(t,r){return this.http.get(this._url).pipe((0,ze.U)(o=>o.filter(l=>l.price>=t&&l.price<=r)))}getSearch(t){return this.http.get(this._url).pipe((0,ze.U)(r=>r.filter(o=>o.title.toUpperCase().startsWith(t.toUpperCase()))))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(yg))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Gf=(()=>{class n{constructor(){this.filtValues={range1:0,range2:0,color:""},this.filter$=new dn.xQ}getFilters(){return this.filter$.asObservable()}executeFilters(t){this.filtValues={range1:t.range1,range2:t.range2,color:t.color},this.filter$.next(this.filtValues)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),yv=(()=>{class n{constructor(t,r){this.api=t,this.filter=r,this.productList=[],this.infinity=1/0}ngOnInit(){}applyFilters(t,r,o){this.filter.executeFilters({range1:t,range2:r,color:o})}refresh(){window.location.reload()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(_m),c.Y36(Gf))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-filters"]],decls:33,vars:0,consts:[[1,"container-fluid"],[1,"card"],[1,"card-body"],[1,"rango"],[3,"click"],["id","colorContainer",1,"d-flex","gap-3"],[1,"red",3,"click"],[1,"black",3,"click"],[1,"blue",3,"click"],[1,"green",3,"click"],[1,"grey",3,"click"],[1,"white",3,"click"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c.TgZ(4,"h4"),c._uU(5,"Rango de precios"),c.qZA(),c.TgZ(6,"a",4),c.NdJ("click",function(){return r.applyFilters(0,199,"null")}),c._uU(7,"$0-199"),c.qZA(),c._UZ(8,"br"),c.TgZ(9,"a",4),c.NdJ("click",function(){return r.applyFilters(200,399,"null")}),c._uU(10,"$200-399"),c.qZA(),c._UZ(11,"br"),c.TgZ(12,"a",4),c.NdJ("click",function(){return r.applyFilters(400,599,"null")}),c._uU(13,"$400-599"),c.qZA(),c._UZ(14,"br"),c.TgZ(15,"a",4),c.NdJ("click",function(){return r.applyFilters(600,799,"null")}),c._uU(16,"$600-799"),c.qZA(),c._UZ(17,"br"),c.TgZ(18,"a",4),c.NdJ("click",function(){return r.applyFilters(800,999,"null")}),c._uU(19,"$800-999"),c.qZA(),c._UZ(20,"br"),c.TgZ(21,"a",4),c.NdJ("click",function(){return r.applyFilters(1e3,r.infinity,"null")}),c._uU(22,"$1000-max"),c.qZA(),c.qZA(),c.TgZ(23,"div"),c.TgZ(24,"h4"),c._uU(25,"Color"),c.qZA(),c.TgZ(26,"div",5),c.TgZ(27,"div",6),c.NdJ("click",function(){return r.applyFilters(0,0,"red")}),c.qZA(),c.TgZ(28,"div",7),c.NdJ("click",function(){return r.applyFilters(0,0,"black")}),c.qZA(),c.TgZ(29,"div",8),c.NdJ("click",function(){return r.applyFilters(0,0,"blue")}),c.qZA(),c.TgZ(30,"div",9),c.NdJ("click",function(){return r.applyFilters(0,0,"green")}),c.qZA(),c.TgZ(31,"div",10),c.NdJ("click",function(){return r.applyFilters(0,0,"grey")}),c.qZA(),c.TgZ(32,"div",11),c.NdJ("click",function(){return r.applyFilters(0,0,"white")}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA())},styles:['*[_ngcontent-%COMP%]{font-family:"Lato"}.card[_ngcontent-%COMP%]{border:none}h4[_ngcontent-%COMP%]{font-weight:bold}.rango[_ngcontent-%COMP%]{margin-bottom:1rem}a[_ngcontent-%COMP%]{text-decoration:none;color:#000}a[_ngcontent-%COMP%]:hover{text-decoration:underline}.red[_ngcontent-%COMP%]{width:25px;height:25px;border-radius:3px;border:none;background-color:red}.black[_ngcontent-%COMP%]{width:25px;height:25px;border-radius:3px;border:none;background-color:#000}.blue[_ngcontent-%COMP%]{width:25px;height:25px;border-radius:3px;border:none;background-color:#00f}.green[_ngcontent-%COMP%]{width:25px;height:25px;border-radius:3px;border:none;background-color:green}.grey[_ngcontent-%COMP%]{width:25px;height:25px;border-radius:3px;border:none;background-color:gray}.white[_ngcontent-%COMP%]{width:25px;height:25px;border-radius:3px;border:1px solid #CCC;background-color:#fff}#colorContainer[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transition:.2s}#colorContainer[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{cursor:pointer;border:solid .5px black}.rango[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}.deleteFilters[_ngcontent-%COMP%]{font-size:22px;margin-top:1rem}.deleteFilters[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}']}),n})();var tr=V(3637);function ED(){return n=>n.lift(new CD)}class CD{call(e,t){return t.subscribe(new $0(e))}}class $0 extends Hr.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}function bD(n,e){return t=>t.lift(new wD(n,e))}class wD{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new TD(e,this.compare,this.keySelector))}}class TD extends Hr.L{constructor(e,t,r){super(e),this.keySelector=r,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:o}=this;t=o?o(e):e}catch(o){return this.destination.error(o)}let r=!1;if(this.hasKey)try{const{compare:o}=this;r=o(this.key,t)}catch(o){return this.destination.error(o)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}V(941);var qe,q0=V(3394),eM="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},mu={},eh=eh||{},wt=eM||self;function vv(){}function Z0(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Ic(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Ev="closure_uid_"+(1e9*Math.random()>>>0),DD=0;function tM(n,e,t){return n.call.apply(n.bind,arguments)}function ym(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function mr(n,e,t){return(mr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?tM:ym).apply(null,arguments)}function Cv(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function bi(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,l){for(var d=Array(arguments.length-2),p=2;p<arguments.length;p++)d[p-2]=arguments[p];return e.prototype[o].apply(r,d)}}function Dc(){this.s=this.s,this.o=this.o}var SD={};Dc.prototype.s=!1,Dc.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,Ev)&&n[Ev]||(n[Ev]=++DD)}(this);delete SD[n]}},Dc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const G0=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},xD=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let l=0;l<r;l++)l in o&&e.call(t,o[l],l,n)};function ND(n){return Array.prototype.concat.apply([],arguments)}function z0(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function W0(n){return/^[\s\xa0]*$/.test(n)}var Vi,nM=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Ss(n,e){return-1!=n.indexOf(e)}function MD(n,e){return n<e?-1:n>e?1:0}e:{var vm=wt.navigator;if(vm){var OD=vm.userAgent;if(OD){Vi=OD;break e}}Vi=""}function K0(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Y0(n){const e={};for(const t in n)e[t]=n[t];return e}var zf="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function RD(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let l=0;l<zf.length;l++)t=zf[l],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Q0(n){return Q0[" "](n),n}Q0[" "]=vv;var Em,n,iM=Ss(Vi,"Opera"),Wf=Ss(Vi,"Trident")||Ss(Vi,"MSIE"),J0=Ss(Vi,"Edge"),X0=J0||Wf,kD=Ss(Vi,"Gecko")&&!(Ss(Vi.toLowerCase(),"webkit")&&!Ss(Vi,"Edge"))&&!(Ss(Vi,"Trident")||Ss(Vi,"MSIE"))&&!Ss(Vi,"Edge"),Kf=Ss(Vi.toLowerCase(),"webkit")&&!Ss(Vi,"Edge");function FD(){var n=wt.document;return n?n.documentMode:void 0}e:{var eb="",bv=(n=Vi,kD?/rv:([^\);]+)(\)|;)/.exec(n):J0?/Edge\/([\d\.]+)/.exec(n):Wf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Kf?/WebKit\/(\S+)/.exec(n):iM?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(bv&&(eb=bv?bv[1]:""),Wf){var tb=FD();if(null!=tb&&tb>parseFloat(eb)){Em=String(tb);break e}}Em=eb}var LD={};function sM(){return e=LD,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=nM(String(Em)).split("."),t=nM("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",l=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==o[0].length&&0==l[0].length)break;n=MD(0==o[1].length?0:parseInt(o[1],10),0==l[1].length?0:parseInt(l[1],10))||MD(0==o[2].length,0==l[2].length)||MD(o[2],l[2]),o=o[3],l=l[3]}while(0==n)}return 0<=n}();var e}var UD=wt.document&&Wf&&(FD()||parseInt(Em,10))||void 0,BD=function(){if(!wt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{wt.addEventListener("test",vv,e),wt.removeEventListener("test",vv,e)}catch(t){}return n}();function Ui(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function bm(n,e){if(Ui.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(kD){e:{try{Q0(e.nodeName);var o=!0;break e}catch(l){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:oM[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&bm.Z.h.call(this)}}Ui.prototype.h=function(){this.defaultPrevented=!0},bi(bm,Ui);var oM={2:"touch",3:"pen",4:"mouse"};bm.prototype.h=function(){bm.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var th="closure_listenable_"+(1e6*Math.random()|0),aM=0;function jD(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++aM,this.ca=this.fa=!1}function wv(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Tv(n){this.src=n,this.g={},this.h=0}function nb(n,e){var t=e.type;if(t in n.g){var l,r=n.g[t],o=G0(r,e);(l=0<=o)&&Array.prototype.splice.call(r,o,1),l&&(wv(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function rb(n,e,t,r){for(var o=0;o<n.length;++o){var l=n[o];if(!l.ca&&l.listener==e&&l.capture==!!t&&l.ia==r)return o}return-1}Tv.prototype.add=function(n,e,t,r,o){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var d=rb(n,e,r,o);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new jD(e,this.src,l,!!r,o)).fa=t,n.push(e)),e};var ib="closure_lm_"+(1e6*Math.random()|0),sb={};function HD(n,e,t,r,o){if(r&&r.once)return ob(n,e,t,r,o);if(Array.isArray(e)){for(var l=0;l<e.length;l++)HD(n,e[l],t,r,o);return null}return t=wm(t),n&&n[th]?n.N(e,t,Ic(r)?!!r.capture:!!r,o):$D(n,e,t,!1,r,o)}function $D(n,e,t,r,o,l){if(!e)throw Error("Invalid event type");var d=Ic(o)?!!o.capture:!!o,p=ub(n);if(p||(n[ib]=p=new Tv(n)),(t=p.add(e,t,r,d,l)).proxy)return t;if(r=function(){var e=lM;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)BD||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(lb(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function ob(n,e,t,r,o){if(Array.isArray(e)){for(var l=0;l<e.length;l++)ob(n,e[l],t,r,o);return null}return t=wm(t),n&&n[th]?n.O(e,t,Ic(r)?!!r.capture:!!r,o):$D(n,e,t,!0,r,o)}function ZD(n,e,t,r,o){if(Array.isArray(e))for(var l=0;l<e.length;l++)ZD(n,e[l],t,r,o);else r=Ic(r)?!!r.capture:!!r,t=wm(t),n&&n[th]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=rb(l=n.g[e],t,r,o))&&(wv(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=ub(n))&&(e=n.g[e.toString()],n=-1,e&&(n=rb(e,t,r,o)),(t=-1<n?e[n]:null)&&ab(t))}function ab(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[th])nb(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(lb(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=ub(e))?(nb(t,n),0==t.h&&(t.src=null,e[ib]=null)):wv(n)}}}function lb(n){return n in sb?sb[n]:sb[n]="on"+n}function lM(n,e){if(n.ca)n=!0;else{e=new bm(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&ab(n),n=t.call(r,e)}return n}function ub(n){return(n=n[ib])instanceof Tv?n:null}var cb="__closure_events_fn_"+(1e9*Math.random()>>>0);function wm(n){return"function"==typeof n?n:(n[cb]||(n[cb]=function(e){return n.handleEvent(e)}),n[cb])}function Or(){Dc.call(this),this.i=new Tv(this),this.P=this,this.I=null}function oi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Ui(e,n);else if(e instanceof Ui)e.target=e.target||n;else{var o=e;RD(e=new Ui(r,n),o)}if(o=!0,t)for(var l=t.length-1;0<=l;l--){var d=e.g=t[l];o=Yf(d,r,!0,e)&&o}if(o=Yf(d=e.g=n,r,!0,e)&&o,o=Yf(d,r,!1,e)&&o,t)for(l=0;l<t.length;l++)o=Yf(d=e.g=t[l],r,!1,e)&&o}function Yf(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,l=0;l<e.length;++l){var d=e[l];if(d&&!d.ca&&d.capture==t){var p=d.listener,y=d.ia||d.src;d.fa&&nb(n.i,d),o=!1!==p.call(y,r)&&o}}return o&&!r.defaultPrevented}bi(Or,Dc),Or.prototype[th]=!0,Or.prototype.removeEventListener=function(n,e,t,r){ZD(this,n,e,t,r)},Or.prototype.M=function(){if(Or.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)wv(t[r]);delete n.g[e],n.h--}}this.I=null},Or.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Or.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var db=wt.JSON.stringify;function uM(){var n=YD;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Dv,GD=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new zD,n=>n.reset());class zD{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function cM(n){wt.setTimeout(()=>{throw n},0)}function Iv(n,e){Dv||function(){var n=wt.Promise.resolve(void 0);Dv=function(){n.then(Qf)}}(),KD||(Dv(),KD=!0),YD.add(n,e)}var KD=!1,YD=new class{constructor(){this.h=this.g=null}add(e,t){const r=GD.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Qf(){for(var n;n=uM();){try{n.h.call(n.g)}catch(t){cM(t)}var e=GD;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}KD=!1}function fb(n,e){Or.call(this),this.h=n||1,this.g=e||wt,this.j=mr(this.kb,this),this.l=Date.now()}function Tm(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Jf(n,e,t){if("function"==typeof n)t&&(n=mr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=mr(n.handleEvent,n)}return 2147483647<Number(e)?-1:wt.setTimeout(n,e||0)}function QD(n){n.g=Jf(()=>{n.g=null,n.i&&(n.i=!1,QD(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}bi(fb,Or),(qe=fb.prototype).da=!1,qe.S=null,qe.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),oi(this,"tick"),this.da&&(Tm(this),this.start()))}},qe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},qe.M=function(){fb.Z.M.call(this),Tm(this),delete this.g};class Xf extends Dc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:QD(this)}M(){super.M(),this.g&&(wt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Im(n){Dc.call(this),this.h=n,this.g={}}bi(Im,Dc);var dM=[];function JD(n,e,t,r){Array.isArray(t)||(t&&(dM[0]=t.toString()),t=dM);for(var o=0;o<t.length;o++){var l=HD(e,t[o],r||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function ua(n){K0(n.g,function(e,t){this.g.hasOwnProperty(t)&&ab(e)},n),n.g={}}function Dm(){this.g=!0}function ep(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var l=o[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var d=1;d<o.length;d++)o[d]=""}}}return db(t)}catch(p){return e}}(n,t)+(r?" "+r:"")})}Im.prototype.M=function(){Im.Z.M.call(this),ua(this)},Im.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Dm.prototype.Aa=function(){this.g=!1},Dm.prototype.info=function(){};var nh={},XD=null;function Sv(){return XD=XD||new Or}function xv(n){Ui.call(this,nh.Ma,n)}function tp(n){const e=Sv();oi(e,new xv(e,n))}function Pv(n,e){Ui.call(this,nh.STAT_EVENT,n),this.stat=e}function Bi(n){const e=Sv();oi(e,new Pv(e,n))}function eA(n,e){Ui.call(this,nh.Na,n),this.size=e}function Nv(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return wt.setTimeout(function(){n()},e)}nh.Ma="serverreachability",bi(xv,Ui),nh.STAT_EVENT="statevent",bi(Pv,Ui),nh.Na="timingevent",bi(eA,Ui);var Mv={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},tA={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function pb(){}function mb(){}pb.prototype.h=null;var Ov,np={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function _b(){Ui.call(this,"d")}function yb(){Ui.call(this,"c")}function rh(){}function Am(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Im(this),this.P=Rv,this.W=new fb(n=X0?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new vb}function vb(){this.i=null,this.g="",this.h=!1}bi(_b,Ui),bi(yb,Ui),bi(rh,pb),rh.prototype.g=function(){return new XMLHttpRequest},rh.prototype.i=function(){return{}},Ov=new rh;var Rv=45e3,rp={},Ac={};function Eb(n,e,t){n.K=1,n.v=Lv(ls(e)),n.s=t,n.U=!0,nA(n,null)}function nA(n,e){n.F=Date.now(),Sm(n),n.A=ls(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),ap(t.h,"t",r),n.C=0,t=n.l.H,n.h=new vb,n.g=AA(n.l,t?e:null,!n.s),0<n.O&&(n.L=new Xf(mr(n.Ia,n,n.g),n.O)),JD(n.V,n.g,"readystatechange",n.gb),e=n.H?Y0(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),tp(1),function(n,e,t,r,o,l){n.info(function(){if(n.g)if(l)for(var d="",p=l.split("&"),y=0;y<p.length;y++){var b=p[y].split("=");if(1<b.length){var D=b[0];b=b[1];var S=D.split("_");d=2<=S.length&&"type"==S[1]?d+(D+"=")+b+"&":d+(D+"=redacted&")}}else d=null;else d=l;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function fM(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function rA(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=pM(n,t),o==Ac){4==e&&(n.o=4,Bi(14),r=!1),ep(n.j,n.m,null,"[Incomplete Response]");break}if(o==rp){n.o=4,Bi(15),ep(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}ep(n.j,n.m,o,null),Cb(n,o)}fM(n)&&o!=Ac&&o!=rp&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Bi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),CA(e),e.L=!0,Bi(11))):(ep(n.j,n.m,t,"[Invalid Chunked Response]"),ih(n),xm(n))}function pM(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Ac:(t=Number(e.substring(t,r)),isNaN(t)?rp:(r+=1)+t>e.length?Ac:(e=e.substr(r,t),n.C=r+t,e))}function Sm(n){n.Y=Date.now()+n.P,iA(n,n.P)}function iA(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Nv(mr(n.eb,n),e)}function kv(n){n.B&&(wt.clearTimeout(n.B),n.B=null)}function xm(n){0==n.l.G||n.I||wA(n.l,n)}function ih(n){kv(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Tm(n.W),ua(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Cb(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Mm(t.i,n)))if(t.I=n.N,!n.J&&Mm(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=Nv(mr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;zr(t),fp(t)}EA(t),Bi(18)}if(1>=Ks(t.i)&&t.ka){try{t.ka()}catch(b){}t.ka=void 0}}else vu(t,11)}else if((n.J||t.g==n)&&zr(t),!W0(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let b=o[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const D=b[3];null!=D&&(t.ma=D,t.h.info("VER="+t.ma));const S=b[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const O=b[5];null!=O&&"number"==typeof O&&0<O&&(t.K=r=1.5*O,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const F=n.g;if(F){const $=F.g?F.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($){var l=r.i;!l.g&&(Ss($,"spdy")||Ss($,"quic")||Ss($,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(_u(l,l.h),l.h=null))}if(r.D){const ie=F.g?F.g.getResponseHeader("X-HTTP-Session-Id"):null;ie&&(r.sa=ie,Tn(r.F,r.D,ie))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=DA(r,r.H?r.la:null,r.W),d.J){bM(r.i,d);var p=d,y=r.K;y&&p.setTimeout(y),p.B&&(kv(p),Sm(p)),r.g=d}else vA(r);0<t.l.length&&ht(t)}else"stop"!=b[0]&&"close"!=b[0]||vu(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?vu(t,7):Om(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}tp(4)}catch(b){}}function sA(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Z0(n)||"string"==typeof n)xD(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Z0(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;o=(r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Z0(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n)).length;for(var l=0;l<o;l++)e.call(void 0,r[l],t&&t[l],n)}}function ip(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof ip)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function sh(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];oh(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)oh(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function oh(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(qe=Am.prototype).setTimeout=function(n){this.P=n},qe.gb=function(n){n=n.target;const e=this.L;e&&3==Mo(n)?e.l():this.Ia(n)},qe.Ia=function(n){try{if(n==this.g)e:{const D=Mo(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>D)&&(3!=D||X0||this.g&&(this.h.h||this.g.ga()||Ab(this.g)))){this.I||4!=D||7==e||tp(8==e||0>=S?3:2),kv(this);var t=this.g.ba();this.N=t;t:if(fM(this)){var r=Ab(this.g);n="";var o=r.length,l=4==Mo(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ih(this),xm(this);var d="";break t}this.h.i=new wt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:l&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function(n,e,t,r,o,l,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+l+" "+d})}(this.j,this.u,this.A,this.m,this.X,D,t),this.i){if(this.$&&!this.J){t:{if(this.g){var p,y=this.g;if((p=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W0(p)){var b=p;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Bi(12),ih(this),xm(this);break e}ep(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Cb(this,t)}this.U?(rA(this,D,d),X0&&this.i&&3==D&&(JD(this.V,this.W,"tick",this.fb),this.W.start())):(ep(this.j,this.m,d,null),Cb(this,d)),4==D&&ih(this),this.i&&!this.I&&(4==D?wA(this.l,this):(this.i=!1,Sm(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,Bi(12)):(this.o=0,Bi(13)),ih(this),xm(this)}}}catch(D){}},qe.fb=function(){if(this.g){var n=Mo(this.g),e=this.g.ga();this.C<e.length&&(kv(this),rA(this,n,e),this.i&&4!=n&&Sm(this))}},qe.cancel=function(){this.I=!0,ih(this)},qe.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(tp(3),Bi(17)),ih(this),this.o=2,xm(this)):iA(this,this.Y-n)},(qe=ip.prototype).R=function(){sh(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},qe.T=function(){return sh(this),this.g.concat()},qe.get=function(n,e){return oh(this.h,n)?this.h[n]:e},qe.set=function(n,e){oh(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},qe.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],l=this.get(o);n.call(e,l,o,this)}};var oA=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function pl(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof pl){this.g=void 0!==e?e:n.g,Pm(this,n.j),this.s=n.s,Fv(this,n.i),bb(this,n.m),this.l=n.l,e=n.h;var t=new op;t.i=e.i,e.g&&(t.g=new ip(e.g),t.h=e.h),aA(this,t),this.o=n.o}else n&&(t=String(n).match(oA))?(this.g=!!e,Pm(this,t[1]||"",!0),this.s=sp(t[2]||""),Fv(this,t[3]||"",!0),bb(this,t[4]),this.l=sp(t[5]||"",!0),aA(this,t[6]||"",!0),this.o=sp(t[7]||"")):(this.g=!!e,this.h=new op(null,this.g))}function ls(n){return new pl(n)}function Pm(n,e,t){n.j=t?sp(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Fv(n,e,t){n.i=t?sp(e,!0):e}function bb(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function aA(n,e,t){e instanceof op?(n.h=e,function(n,e){e&&!n.j&&(ca(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(Nm(this,r),ap(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=ah(e,cA)),n.h=new op(e,n.g))}function Tn(n,e,t){n.h.set(e,t)}function Lv(n){return Tn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function sp(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function ah(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,uA),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function uA(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}pl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(ah(e,wb,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(ah(e,wb,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(ah(t,"/"==t.charAt(0)?vM:yM,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",ah(t,EM)),n.join("")};var wb=/[#\/\?@]/g,yM=/[#\?:]/g,vM=/[#\?]/g,cA=/[#\?@]/g,EM=/#/g;function op(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function ca(n){n.g||(n.g=new ip,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var l=n[t].substring(0,r);o=n[t].substring(r+1)}else l=n[t];e(l,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Nm(n,e){ca(n),e=Jt(n,e),oh(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,oh((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&sh(n)))}function CM(n,e){return ca(n),e=Jt(n,e),oh(n.g.h,e)}function ap(n,e,t){Nm(n,e),0<t.length&&(n.i=null,n.g.set(Jt(n,e),z0(t)),n.h+=t.length)}function Jt(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function up(n){this.l=n||rF,n=wt.PerformanceNavigationTiming?0<(n=wt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(wt.g&&wt.g.Ea&&wt.g.Ea()&&wt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(qe=op.prototype).add=function(n,e){ca(this),this.i=null,n=Jt(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},qe.forEach=function(n,e){ca(this),this.g.forEach(function(t,r){xD(t,function(o){n.call(e,o,r,this)},this)},this)},qe.T=function(){ca(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],l=0;l<o.length;l++)t.push(e[r]);return t},qe.R=function(n){ca(this);var e=[];if("string"==typeof n)CM(this,n)&&(e=ND(e,this.g.get(Jt(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=ND(e,n[t])}return e},qe.set=function(n,e){return ca(this),this.i=null,CM(this,n=Jt(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},qe.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},qe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var l=0;l<r.length;l++){var d=o;""!==r[l]&&(d+="="+encodeURIComponent(String(r[l]))),n.push(d)}}return this.i=n.join("&")};var rF=10;function Ct(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Ks(n){return n.h?1:n.g?n.g.size:0}function Mm(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function _u(n,e){n.g?n.g.add(e):n.h=e}function bM(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Tb(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return z0(n.i)}function Vv(){}function iF(){this.g=new Vv}function wM(n,e,t){const r=t||"";try{sA(n,function(o,l){let d=o;Ic(o)&&(d=db(o)),e.push(r+l+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function us(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(l){}}function In(n){this.l=n.$b||null,this.j=n.ib||!1}function xs(n,e){Or.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Uv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}up.prototype.cancel=function(){if(this.i=Tb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Vv.prototype.stringify=function(n){return wt.JSON.stringify(n,void 0)},Vv.prototype.parse=function(n){return wt.JSON.parse(n,void 0)},bi(In,pb),In.prototype.g=function(){return new xs(this.l,this.j)},In.prototype.i=function(n){return function(){return n}}({}),bi(xs,Or);var Uv=0;function dA(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function cp(n){n.readyState=4,n.l=null,n.j=null,n.A=null,lh(n)}function lh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(qe=xs.prototype).open=function(n,e){if(this.readyState!=Uv)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,lh(this)},qe.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||wt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},qe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,cp(this)),this.readyState=Uv},qe.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,lh(this)),this.g&&(this.readyState=3,lh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==wt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;dA(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},qe.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?cp(this):lh(this),3==this.readyState&&dA(this)}},qe.Ua=function(n){this.g&&(this.response=this.responseText=n,cp(this))},qe.Ta=function(n){this.g&&(this.response=n,cp(this))},qe.ha=function(){this.g&&cp(this)},qe.setRequestHeader=function(n,e){this.v.append(n,e)},qe.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},qe.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(xs.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var dp=wt.JSON.parse;function Zn(n){Or.call(this),this.headers=new ip,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=hA,this.K=this.L=!1}bi(Zn,Or);var hA="",uh=/^https?$/i,IM=["POST","PUT"];function Ib(n){return"content-type"==n.toLowerCase()}function hp(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Bv(n),yu(n)}function Bv(n){n.D||(n.D=!0,oi(n,"complete"),oi(n,"error"))}function Db(n){if(n.h&&void 0!==eh&&(!n.C[1]||4!=Mo(n)||2!=n.ba()))if(n.v&&4==Mo(n))Jf(n.Fa,0,n);else if(oi(n,"readystatechange"),4==Mo(n)){n.h=!1;try{const p=n.ba();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var o=String(n.H).match(oA)[1]||null;if(!o&&wt.self&&wt.self.location){var l=wt.self.location.protocol;o=l.substr(0,l.length-1)}r=!uh.test(o?o.toLowerCase():"")}t=r}if(t)oi(n,"complete"),oi(n,"success");else{n.m=6;try{var d=2<Mo(n)?n.g.statusText:""}catch(y){d=""}n.j=d+" ["+n.ba()+"]",Bv(n)}}finally{yu(n)}}}function yu(n,e){if(n.g){pA(n);const t=n.g,r=n.C[0]?vv:null;n.g=null,n.C=null,e||oi(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function pA(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(wt.clearTimeout(n.A),n.A=null)}function Mo(n){return n.g?n.g.readyState:0}function Ab(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case hA:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function jv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function(n){let e="";return K0(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Tn(n,e,t))}function xc(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function mA(n){this.za=0,this.l=[],this.h=new Dm,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=xc("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=xc("baseRetryDelayMs",5e3,n),this.$a=xc("retryDelaySeedMs",1e4,n),this.Ya=xc("forwardChannelMaxRetries",2,n),this.ra=xc("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new up(n&&n.concurrentRequestLimit),this.Ca=new iF,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Om(n){if(DM(n),3==n.G){var e=n.V++,t=ls(n.F);Tn(t,"SID",n.J),Tn(t,"RID",e),Tn(t,"TYPE","terminate"),Rm(n,t),(e=new Am(n,n.h,e,void 0)).K=2,e.v=Lv(ls(t)),t=!1,wt.navigator&&wt.navigator.sendBeacon&&(t=wt.navigator.sendBeacon(e.v.toString(),"")),!t&&wt.Image&&((new Image).src=e.v,t=!0),t||(e.g=AA(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Sm(e)}IA(n)}function fp(n){n.g&&(CA(n),n.g.cancel(),n.g=null)}function DM(n){fp(n),n.u&&(wt.clearTimeout(n.u),n.u=null),zr(n),n.i.cancel(),n.m&&("number"==typeof n.m&&wt.clearTimeout(n.m),n.m=null)}function _A(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&ht(n)}function ht(n){Ct(n.i)||n.m||(n.m=!0,Iv(n.Ha,n),n.C=0)}function pp(n,e){var t;t=e?e.m:n.V++;const r=ls(n.F);Tn(r,"SID",n.J),Tn(r,"RID",t),Tn(r,"AID",n.U),Rm(n,r),n.o&&n.s&&jv(r,n.o,n.s),t=new Am(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=yA(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),_u(n.i,t),Eb(t,r,e)}function Rm(n,e){n.j&&sA({},function(t,r){Tn(e,r,t)})}function yA(n,e,t){t=Math.min(n.l.length,t);var r=n.j?mr(n.j.Oa,n.j,n):null;e:{var o=n.l;let l=-1;for(;;){const d=["count="+t];-1==l?0<t?(l=o[0].h,d.push("ofs="+l)):l=0:d.push("ofs="+l);let p=!0;for(let y=0;y<t;y++){let b=o[y].h;const D=o[y].g;if(b-=l,0>b)l=Math.max(0,o[y].h-100),p=!1;else try{wM(D,d,"req"+b+"_")}catch(S){r&&r(D)}}if(p){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function vA(n){n.g||n.u||(n.Y=1,Iv(n.Ga,n),n.A=0)}function EA(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Nv(mr(n.Ga,n),TA(n,n.A)),n.A++,0))}function CA(n){null!=n.B&&(wt.clearTimeout(n.B),n.B=null)}function bA(n){n.g=new Am(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=ls(n.oa);Tn(e,"RID","rpc"),Tn(e,"SID",n.J),Tn(e,"CI",n.N?"0":"1"),Tn(e,"AID",n.U),Rm(n,e),Tn(e,"TYPE","xmlhttp"),n.o&&n.s&&jv(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Lv(ls(e)),t.s=null,t.U=!0,nA(t,n)}function zr(n){null!=n.v&&(wt.clearTimeout(n.v),n.v=null)}function wA(n,e){var t=null;if(n.g==e){zr(n),CA(n),n.g=null;var r=2}else{if(!Mm(n.i,e))return;t=e.D,bM(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;oi(r=Sv(),new eA(r,t,e,o)),ht(n)}else vA(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function(n,e){return!(Ks(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Nv(mr(n.Ha,n,e),TA(n,n.C)),n.C++,0)))}(n,e)||2==r&&EA(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:vu(n,5);break;case 4:vu(n,10);break;case 3:vu(n,6);break;default:vu(n,2)}}function TA(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function vu(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=mr(n.jb,n);t||(t=new pl("//www.google.com/images/cleardot.gif"),wt.location&&"http"==wt.location.protocol||Pm(t,"https"),Lv(t)),function(n,e){const t=new Dm;if(wt.Image){const r=new Image;r.onload=Cv(us,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Cv(us,t,r,"TestLoadImage: error",!1,e),r.onabort=Cv(us,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Cv(us,t,r,"TestLoadImage: timeout",!1,e),wt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Bi(2);n.G=0,n.j&&n.j.va(e),IA(n),DM(n)}function IA(n){n.G=0,n.I=-1,n.j&&((0!=Tb(n.i).length||0!=n.l.length)&&(n.i.i.length=0,z0(n.l),n.l.length=0),n.j.ua())}function DA(n,e,t){let r=function(n){return n instanceof pl?ls(n):new pl(n,void 0)}(t);if(""!=r.i)e&&Fv(r,e+"."+r.i),bb(r,r.m);else{const o=wt.location;r=function(n,e,t,r){var o=new pl(null,void 0);return n&&Pm(o,n),e&&Fv(o,e),t&&bb(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&K0(n.aa,function(o,l){Tn(r,l,o)}),t=n.sa,(e=n.D)&&t&&Tn(r,e,t),Tn(r,"VER",n.ma),Rm(n,r),r}function AA(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Zn(t&&n.Ba&&!n.qa?new In({ib:!0}):n.qa)).L=n.H,e}function SA(){}function Hv(){if(Wf&&!(10<=Number(UD)))throw Error("Environmental error: no available transport.")}function Ys(n,e){Or.call(this),this.g=new mA(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!W0(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!W0(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new gp(this)}function $v(n){_b.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function xA(){yb.call(this),this.status=1}function gp(n){this.g=n}(qe=Zn.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ov.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:Ov),this.g.onreadystatechange=mr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(l){return void hp(this,l)}n=t||"";const o=new ip(this.headers);r&&sA(r,function(l,d){o.set(d,l)}),r=function(n){e:{var e=Ib;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=wt.FormData&&n instanceof wt.FormData,!(0<=G0(IM,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(l,d){this.g.setRequestHeader(d,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{pA(this),0<this.B&&((this.K=function(n){return Wf&&sM()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=mr(this.pa,this)):this.A=Jf(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){hp(this,l)}},qe.pa=function(){void 0!==eh&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,oi(this,"timeout"),this.abort(8))},qe.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,oi(this,"complete"),oi(this,"abort"),yu(this))},qe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),yu(this,!0)),Zn.Z.M.call(this)},qe.Fa=function(){this.s||(this.F||this.v||this.l?Db(this):this.cb())},qe.cb=function(){Db(this)},qe.ba=function(){try{return 2<Mo(this)?this.g.status:-1}catch(n){return-1}},qe.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},qe.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),dp(e)}},qe.Da=function(){return this.m},qe.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(qe=mA.prototype).ma=8,qe.G=1,qe.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},qe.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new Am(this,this.h,n,void 0);let l=this.s;if(this.P&&(l?(l=Y0(l),RD(l,this.P)):l=this.P),null===this.o&&(o.H=l),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=yA(this,o,e),Tn(t=ls(this.F),"RID",n),Tn(t,"CVER",22),this.D&&Tn(t,"X-HTTP-Session-Id",this.D),Rm(this,t),this.o&&l&&jv(t,this.o,l),_u(this.i,o),this.Ra&&Tn(t,"TYPE","init"),this.ja?(Tn(t,"$req",e),Tn(t,"SID","null"),o.$=!0,Eb(o,t,null)):Eb(o,t,e),this.G=2}}else 3==this.G&&(n?pp(this,n):0==this.l.length||Ct(this.i)||pp(this))},qe.Ga=function(){if(this.u=null,bA(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Nv(mr(this.bb,this),n)}},qe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Bi(10),fp(this),bA(this))},qe.ab=function(){null!=this.v&&(this.v=null,fp(this),EA(this),Bi(19))},qe.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Bi(2)):(this.h.info("Failed to ping google.com"),Bi(1))},(qe=SA.prototype).xa=function(){},qe.wa=function(){},qe.va=function(){},qe.ua=function(){},qe.Oa=function(){},Hv.prototype.g=function(n,e){return new Ys(n,e)},bi(Ys,Or),Ys.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Iv(mr(n.hb,n,e))),Bi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=DA(n,null,n.W),ht(n)},Ys.prototype.close=function(){Om(this.g)},Ys.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,_A(this.g,e)}else this.v?((e={}).__data__=db(n),_A(this.g,e)):_A(this.g,n)},Ys.prototype.M=function(){this.g.j=null,delete this.j,Om(this.g),delete this.g,Ys.Z.M.call(this)},bi($v,_b),bi(xA,yb),bi(gp,SA),gp.prototype.xa=function(){oi(this.g,"a")},gp.prototype.wa=function(n){oi(this.g,new $v(n))},gp.prototype.va=function(n){oi(this.g,new xA(n))},gp.prototype.ua=function(){oi(this.g,"b")},Hv.prototype.createWebChannel=Hv.prototype.g,Ys.prototype.send=Ys.prototype.u,Ys.prototype.open=Ys.prototype.m,Ys.prototype.close=Ys.prototype.close,Mv.NO_ERROR=0,Mv.TIMEOUT=8,Mv.HTTP_ERROR=6,tA.COMPLETE="complete",mb.EventType=np,np.OPEN="a",np.CLOSE="b",np.ERROR="c",np.MESSAGE="d",Or.prototype.listen=Or.prototype.N,Zn.prototype.listenOnce=Zn.prototype.O,Zn.prototype.getLastError=Zn.prototype.La,Zn.prototype.getLastErrorCode=Zn.prototype.Da,Zn.prototype.getStatus=Zn.prototype.ba,Zn.prototype.getResponseJson=Zn.prototype.Qa,Zn.prototype.getResponseText=Zn.prototype.ga,Zn.prototype.send=Zn.prototype.ea;var PA=mu.createWebChannelTransport=function(){return new Hv},Sb=mu.getStatEventTarget=function(){return Sv()},xb=mu.ErrorCode=Mv,oF=mu.EventType=tA,AM=mu.Event=nh,NA=mu.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},SM=mu.FetchXmlHttpFactory=In,qv=mu.WebChannel=mb,xM=mu.XhrIo=Zn;const MA="@firebase/firestore";class _r{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_r.UNAUTHENTICATED=new _r(null),_r.GOOGLE_CREDENTIALS=new _r("google-credentials-uid"),_r.FIRST_PARTY=new _r("first-party-uid"),_r.MOCK_USER=new _r("mock-user");let mp="9.4.0";const Pc=new sl.Yd("@firebase/firestore");function Zv(){return Pc.logLevel}function Re(n,...e){if(Pc.logLevel<=sl.in.DEBUG){const t=e.map(Pb);Pc.debug(`Firestore (${mp}): ${n}`,...t)}}function yr(n,...e){if(Pc.logLevel<=sl.in.ERROR){const t=e.map(Pb);Pc.error(`Firestore (${mp}): ${n}`,...t)}}function Fm(n,...e){if(Pc.logLevel<=sl.in.WARN){const t=e.map(Pb);Pc.warn(`Firestore (${mp}): ${n}`,...t)}}function Pb(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function nt(n="Unexpected state"){const e=`FIRESTORE (${mp}) INTERNAL ASSERTION FAILED: `+n;throw yr(e),new Error(e)}function yt(n,e){n||nt()}function Le(n,e){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class wi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class NM{constructor(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${e}`}}class aF{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(_r.UNAUTHENTICATED))}shutdown(){}}class Nb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class MM{constructor(e){this.t=e,this.currentUser=_r.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const l=b=>this.i!==o?(o=this.i,t(b)):Promise.resolve();let d=new wi;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new wi,e.enqueueRetryable(()=>l(this.currentUser))};const p=()=>{const b=d;e.enqueueRetryable((0,_e.Z)(function*(){yield b.promise,yield l(r.currentUser)}))},y=b=>{Re("FirebaseCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(b=>y(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?y(b):(Re("FirebaseCredentialsProvider","Auth not yet detected"),d.resolve(),d=new wi)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Re("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(yt("string"==typeof r.accessToken),new NM(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return yt(null===e||"string"==typeof e),new _r(e)}}class OM{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=_r.FIRST_PARTY}get authHeaders(){const e={"X-Goog-AuthUser":this.l},t=this.h.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.m&&(e["X-Goog-Iam-Authorization-Token"]=this.m),e}}class RM{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new OM(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(_r.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Qs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.g(r),this.p=r=>t.writeSequenceNumber(r))}g(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.p&&this.p(e),e}}function kM(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Qs.T=-1;class OA{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=kM(40);for(let l=0;l<o.length;++l)r.length<20&&o[l]<t&&(r+=e.charAt(o[l]%e.length))}return r}}function Ht(n,e){return n<e?-1:n>e?1:0}function Nc(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function RA(n){return n+"\0"}class nr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ne(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return nr.fromMillis(Date.now())}static fromDate(e){return nr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new nr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ht(this.nanoseconds,e.nanoseconds):Ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class it{constructor(e){this.timestamp=e}static fromTimestamp(e){return new it(e)}static min(){return new it(new nr(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Mb(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ti(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Gv(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Lm{constructor(e,t,r){void 0===t?t=0:t>e.length&&nt(),void 0===r?r=e.length-t:r>e.length-t&&nt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Lm.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Lm?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const l=e.get(o),d=t.get(o);if(l<d)return-1;if(l>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class an extends Lm{construct(e,t,r){return new an(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new an(t)}static emptyPath(){return new an([])}}const kA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ai extends Lm{construct(e,t,r){return new ai(e,t,r)}static isValidIdentifier(e){return kA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ai.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ai(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const l=()=>{if(0===r.length)throw new Ne(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const p=e[o];if("\\"===p){if(o+1===e.length)throw new Ne(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new Ne(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,o+=2}else"`"===p?(d=!d,o++):"."!==p||d?(r+=p,o++):(l(),o++)}if(l(),d)throw new Ne(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ai(t)}static emptyPath(){return new ai([])}}class _p{constructor(e){this.fields=e,e.sort(ai.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Nc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class li{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new li(t)}static fromUint8Array(e){const t=function(r){let o="";for(let l=0;l<r.length;++l)o+=String.fromCharCode(r[l]);return o}(e);return new li(t)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}li.EMPTY_BYTE_STRING=new li("");const FA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mc(n){if(yt(!!n),"string"==typeof n){let e=0;const t=FA.exec(n);if(yt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Wr(n.seconds),nanos:Wr(n.nanos)}}function Wr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function yp(n){return"string"==typeof n?li.fromBase64String(n):li.fromUint8Array(n)}function Ob(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function ch(n){const e=n.mapValue.fields.__previous_value__;return Ob(e)?ch(e):e}function zv(n){const e=Mc(n.mapValue.fields.__local_write_time__.timestampValue);return new nr(e.seconds,e.nanos)}function Oc(n){return null==n}function Wv(n){return 0===n&&1/n==-1/0}function LM(n){return"number"==typeof n&&Number.isInteger(n)&&!Wv(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Qe{constructor(e){this.path=e}static fromPath(e){return new Qe(an.fromString(e))}static fromName(e){return new Qe(an.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===an.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return an.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qe(new an(e.slice()))}}function dh(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ob(n)?4:10:nt()}function Oo(n,e){const t=dh(n);if(t!==dh(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return zv(n).isEqual(zv(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const l=Mc(r.timestampValue),d=Mc(o.timestampValue);return l.seconds===d.seconds&&l.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,yp(n.bytesValue).isEqual(yp(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Wr(r.geoPointValue.latitude)===Wr(o.geoPointValue.latitude)&&Wr(r.geoPointValue.longitude)===Wr(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Wr(r.integerValue)===Wr(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const l=Wr(r.doubleValue),d=Wr(o.doubleValue);return l===d?Wv(l)===Wv(d):isNaN(l)&&isNaN(d)}return!1}(n,e);case 9:return Nc(n.arrayValue.values||[],e.arrayValue.values||[],Oo);case 10:return function(r,o){const l=r.mapValue.fields||{},d=o.mapValue.fields||{};if(Mb(l)!==Mb(d))return!1;for(const p in l)if(l.hasOwnProperty(p)&&(void 0===d[p]||!Oo(l[p],d[p])))return!1;return!0}(n,e);default:return nt()}var o}function vp(n,e){return void 0!==(n.values||[]).find(t=>Oo(t,e))}function Ep(n,e){const t=dh(n),r=dh(e);if(t!==r)return Ht(t,r);switch(t){case 0:return 0;case 1:return Ht(n.booleanValue,e.booleanValue);case 2:return function(o,l){const d=Wr(o.integerValue||o.doubleValue),p=Wr(l.integerValue||l.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1}(n,e);case 3:return LA(n.timestampValue,e.timestampValue);case 4:return LA(zv(n),zv(e));case 5:return Ht(n.stringValue,e.stringValue);case 6:return function(o,l){const d=yp(o),p=yp(l);return d.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(o,l){const d=o.split("/"),p=l.split("/");for(let y=0;y<d.length&&y<p.length;y++){const b=Ht(d[y],p[y]);if(0!==b)return b}return Ht(d.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,l){const d=Ht(Wr(o.latitude),Wr(l.latitude));return 0!==d?d:Ht(Wr(o.longitude),Wr(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,l){const d=o.values||[],p=l.values||[];for(let y=0;y<d.length&&y<p.length;++y){const b=Ep(d[y],p[y]);if(b)return b}return Ht(d.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,l){const d=o.fields||{},p=Object.keys(d),y=l.fields||{},b=Object.keys(y);p.sort(),b.sort();for(let D=0;D<p.length&&D<b.length;++D){const S=Ht(p[D],b[D]);if(0!==S)return S;const O=Ep(d[p[D]],y[b[D]]);if(0!==O)return O}return Ht(p.length,b.length)}(n.mapValue,e.mapValue);default:throw nt()}}function LA(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ht(n,e);const t=Mc(n),r=Mc(e),o=Ht(t.seconds,r.seconds);return 0!==o?o:Ht(t.nanos,r.nanos)}function Rb(n){return kb(n)}function kb(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Mc(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?yp(n.bytesValue).toBase64():"referenceValue"in n?Qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",l=!0;for(const d of r.values||[])l?l=!1:o+=",",o+=kb(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let l="{",d=!0;for(const p of o)d?d=!1:l+=",",l+=`${p}:${kb(r.fields[p])}`;return l+"}"}(n.mapValue):nt();var e}function Kv(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Fb(n){return!!n&&"integerValue"in n}function Lb(n){return!!n&&"arrayValue"in n}function VA(n){return!!n&&"nullValue"in n}function UA(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Rc(n){return!!n&&"mapValue"in n}function Cp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ti(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Cp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Cp(n.arrayValue.values[t]);return e}return Object.assign({},n)}class Ii{constructor(e){this.value=e}static empty(){return new Ii({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Rc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cp(t)}setAll(e){let t=ai.emptyPath(),r={},o=[];e.forEach((d,p)=>{if(!t.isImmediateParentOf(p)){const y=this.getFieldsMap(t);this.applyChanges(y,r,o),r={},o=[],t=p.popLast()}d?r[p.lastSegment()]=Cp(d):o.push(p.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,o)}delete(e){const t=this.field(e.popLast());Rc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Oo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Rc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Ti(t,(o,l)=>e[o]=l);for(const o of r)delete e[o]}clone(){return new Ii(Cp(this.value))}}function Vb(n){const e=[];return Ti(n.fields,(t,r)=>{const o=new ai([t]);if(Rc(r)){const l=Vb(r.mapValue).fields;if(0===l.length)e.push(o);else for(const d of l)e.push(o.child(d))}else e.push(o)}),new _p(e)}class kn{constructor(e,t,r,o,l){this.key=e,this.documentType=t,this.version=r,this.data=o,this.documentState=l}static newInvalidDocument(e){return new kn(e,0,it.min(),Ii.empty(),0)}static newFoundDocument(e,t,r){return new kn(e,1,t,r,0)}static newNoDocument(e,t){return new kn(e,2,t,Ii.empty(),0)}static newUnknownDocument(e,t){return new kn(e,3,t,Ii.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ii.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ii.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof kn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new kn(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class BA{constructor(e,t=null,r=[],o=[],l=null,d=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=l,this.startAt=d,this.endAt=p,this.A=null}}function Ub(n,e=null,t=[],r=[],o=null,l=null,d=null){return new BA(n,e,t,r,o,l,d)}function Vm(n){const e=Le(n);if(null===e.A){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>function(n){return n.field.canonicalString()+n.op.toString()+Rb(n.value)}(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Oc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=Bb(e.startAt)),e.endAt&&(t+="|ub:",t+=Bb(e.endAt)),e.A=t}return e.A}function Yv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!jb(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!Oo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!eE(n.startAt,e.startAt)&&eE(n.endAt,e.endAt)}function Qv(n){return Qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class cs extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.R(e,t,r):new Um(e,t,r):"array-contains"===t?new gl(e,r):"in"===t?new BM(e,r):"not-in"===t?new Xv(e,r):"array-contains-any"===t?new jM(e,r):new cs(e,t,r)}static R(e,t,r){return"in"===t?new Bm(e,r):new UM(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.P(Ep(t,this.value)):null!==t&&dh(this.value)===dh(t)&&this.P(Ep(t,this.value))}P(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return nt()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Um extends cs{constructor(e,t,r){super(e,t,r),this.key=Qe.fromName(r.referenceValue)}matches(e){const t=Qe.comparator(e.key,this.key);return this.P(t)}}class Bm extends cs{constructor(e,t){super(e,"in",t),this.keys=Jv(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class UM extends cs{constructor(e,t){super(e,"not-in",t),this.keys=Jv(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Jv(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Qe.fromName(r.referenceValue))}class gl extends cs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Lb(t)&&vp(t.arrayValue,this.value)}}class BM extends cs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&vp(this.value.arrayValue,t)}}class Xv extends cs{constructor(e,t){super(e,"not-in",t)}matches(e){if(vp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!vp(this.value.arrayValue,t)}}class jM extends cs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Lb(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>vp(this.value.arrayValue,r))}}class jm{constructor(e,t){this.position=e,this.before=t}}function Bb(n){return`${n.before?"b":"a"}:${n.position.map(e=>Rb(e)).join(",")}`}class kc{constructor(e,t="asc"){this.field=e,this.dir=t}}function jb(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Hb(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const l=e[o],d=n.position[o];if(r=l.field.isKeyField()?Qe.comparator(Qe.fromName(d.referenceValue),t.key):Ep(d,t.data.field(l.field)),"desc"===l.dir&&(r*=-1),0!==r)break}return n.before?r<=0:r<0}function eE(n,e){if(null===n)return null===e;if(null===e||n.before!==e.before||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Oo(n.position[t],e.position[t]))return!1;return!0}class da{constructor(e,t=null,r=[],o=[],l=null,d="F",p=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=l,this.limitType=d,this.startAt=p,this.endAt=y,this.V=null,this.S=null}}function HA(n,e,t,r,o,l,d,p){return new da(n,e,t,r,o,l,d,p)}function bp(n){return new da(n)}function tE(n){return!Oc(n.limit)&&"F"===n.limitType}function nE(n){return!Oc(n.limit)&&"L"===n.limitType}function rE(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Hm(n){for(const e of n.filters)if(e.v())return e.field;return null}function iE(n){return null!==n.collectionGroup}function wp(n){const e=Le(n);if(null===e.V){e.V=[];const t=Hm(e),r=rE(e);if(null!==t&&null===r)t.isKeyField()||e.V.push(new kc(t)),e.V.push(new kc(ai.keyField(),"asc"));else{let o=!1;for(const l of e.explicitOrderBy)e.V.push(l),l.field.isKeyField()&&(o=!0);if(!o){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.V.push(new kc(ai.keyField(),l))}}}return e.V}function Js(n){const e=Le(n);if(!e.S)if("F"===e.limitType)e.S=Ub(e.path,e.collectionGroup,wp(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of wp(e))t.push(new kc(l.field,"desc"===l.dir?"asc":"desc"));const r=e.endAt?new jm(e.endAt.position,!e.endAt.before):null,o=e.startAt?new jm(e.startAt.position,!e.startAt.before):null;e.S=Ub(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.S}function $b(n,e,t){return new da(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function $m(n,e){return Yv(Js(n),Js(e))&&n.limitType===e.limitType}function qb(n){return`${Vm(Js(n))}|lt:${n.limitType}`}function sE(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Rb(r.value)}`;var r}).join(", ")}]`),Oc(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: "+Bb(n.startAt)),n.endAt&&(e+=", endAt: "+Bb(n.endAt)),`Target(${e})`}(Js(n))}; limitType=${n.limitType})`}function qm(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Qe.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!Hb(t.startAt,wp(t),r)||t.endAt&&Hb(t.endAt,wp(t),r)));var t,r}function Zb(n){return(e,t)=>{let r=!1;for(const o of wp(n)){const l=HM(o,e,t);if(0!==l)return l;r=r||o.field.isKeyField()}return 0}}function HM(n,e,t){const r=n.field.isKeyField()?Qe.comparator(e.key,t.key):function(o,l,d){const p=l.data.field(o),y=d.data.field(o);return null!==p&&null!==y?Ep(p,y):nt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return nt()}}function $M(n,e){if(n.D){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wv(e)?"-0":e}}function ji(n){return{integerValue:""+n}}function hh(n,e){return LM(e)?ji(e):$M(n,e)}class oE{constructor(){this._=void 0}}function qM(n,e,t){return n instanceof Ip?function(r,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(l.fields.__previous_value__=o),{mapValue:l}}(t,e):n instanceof Eu?$A(n,e):n instanceof Fc?qA(n,e):function(r,o){const l=Tp(r,o),d=aE(l)+aE(r.C);return Fb(l)&&Fb(r.C)?ji(d):$M(r.N,d)}(n,e)}function lF(n,e,t){return n instanceof Eu?$A(n,e):n instanceof Fc?qA(n,e):t}function Tp(n,e){return n instanceof Dp?Fb(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Ip extends oE{}class Eu extends oE{constructor(e){super(),this.elements=e}}function $A(n,e){const t=Gb(e);for(const r of n.elements)t.some(o=>Oo(o,r))||t.push(r);return{arrayValue:{values:t}}}class Fc extends oE{constructor(e){super(),this.elements=e}}function qA(n,e){let t=Gb(e);for(const r of n.elements)t=t.filter(o=>!Oo(o,r));return{arrayValue:{values:t}}}class Dp extends oE{constructor(e,t){super(),this.N=e,this.C=t}}function aE(n){return Wr(n.integerValue||n.doubleValue)}function Gb(n){return Lb(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Ap{constructor(e,t){this.field=e,this.transform=t}}class zb{constructor(e,t){this.version=e,this.transformResults=t}}class Kr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Kr}static exists(e){return new Kr(void 0,e)}static updateTime(e){return new Kr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zm(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class uE{}function ZA(n,e,t){n instanceof fh?function(r,o,l){const d=r.value.clone(),p=Wb(r.fieldTransforms,o,l.transformResults);d.setAll(p),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Lc?function(r,o,l){if(!Zm(r.precondition,o))return void o.convertToUnknownDocument(l.version);const d=Wb(r.fieldTransforms,o,l.transformResults),p=o.data;p.setAll(WA(r)),p.setAll(d),o.convertToFoundDocument(l.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Sp(n,e,t){var o;n instanceof fh?function(r,o,l){if(!Zm(r.precondition,o))return;const d=r.value.clone(),p=Kb(r.fieldTransforms,l,o);d.setAll(p),o.convertToFoundDocument(cE(o),d).setHasLocalMutations()}(n,e,t):n instanceof Lc?function(r,o,l){if(!Zm(r.precondition,o))return;const d=Kb(r.fieldTransforms,l,o),p=o.data;p.setAll(WA(r)),p.setAll(d),o.convertToFoundDocument(cE(o),p).setHasLocalMutations()}(n,e,t):Zm(n.precondition,o=e)&&o.convertToNoDocument(it.min())}function GA(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),l=Tp(r.transform,o||null);null!=l&&(null==t&&(t=Ii.empty()),t.set(r.field,l))}return t||null}function zA(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Nc(t,r,(o,l)=>function(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Eu&&r instanceof Eu||t instanceof Fc&&r instanceof Fc?Nc(t.elements,r.elements,Oo):t instanceof Dp&&r instanceof Dp?Oo(t.C,r.C):t instanceof Ip&&r instanceof Ip);var t,r}(o,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function cE(n){return n.isFoundDocument()?n.version:it.min()}class fh extends uE{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class Lc extends uE{constructor(e,t,r,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=l,this.type=1}}function WA(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Wb(n,e,t){const r=new Map;yt(n.length===t.length);for(let o=0;o<t.length;o++){const l=n[o],d=l.transform,p=e.data.field(l.field);r.set(l.field,lF(d,p,t[o]))}return r}function Kb(n,e,t){const r=new Map;for(const o of n){const l=o.transform,d=t.data.field(o.field);r.set(o.field,qM(l,d,e))}return r}class xp extends uE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Yb extends uE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class KA{constructor(e){this.count=e}}var vr,nn;function YA(n){switch(n){default:return nt();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function Qb(n){if(void 0===n)return yr("GRPC error has no .code"),ge.UNKNOWN;switch(n){case vr.OK:return ge.OK;case vr.CANCELLED:return ge.CANCELLED;case vr.UNKNOWN:return ge.UNKNOWN;case vr.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case vr.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case vr.INTERNAL:return ge.INTERNAL;case vr.UNAVAILABLE:return ge.UNAVAILABLE;case vr.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case vr.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case vr.NOT_FOUND:return ge.NOT_FOUND;case vr.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case vr.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case vr.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case vr.ABORTED:return ge.ABORTED;case vr.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case vr.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case vr.DATA_LOSS:return ge.DATA_LOSS;default:return nt()}}(nn=vr||(vr={}))[nn.OK=0]="OK",nn[nn.CANCELLED=1]="CANCELLED",nn[nn.UNKNOWN=2]="UNKNOWN",nn[nn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nn[nn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nn[nn.NOT_FOUND=5]="NOT_FOUND",nn[nn.ALREADY_EXISTS=6]="ALREADY_EXISTS",nn[nn.PERMISSION_DENIED=7]="PERMISSION_DENIED",nn[nn.UNAUTHENTICATED=16]="UNAUTHENTICATED",nn[nn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nn[nn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nn[nn.ABORTED=10]="ABORTED",nn[nn.OUT_OF_RANGE=11]="OUT_OF_RANGE",nn[nn.UNIMPLEMENTED=12]="UNIMPLEMENTED",nn[nn.INTERNAL=13]="INTERNAL",nn[nn.UNAVAILABLE=14]="UNAVAILABLE",nn[nn.DATA_LOSS=15]="DATA_LOSS";class Yr{constructor(e,t){this.comparator=e,this.root=t||ui.EMPTY}insert(e,t){return new Yr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ui.BLACK,null,null))}remove(e){return new Yr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ui.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gm(this.root,e,this.comparator,!0)}}class Gm{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ui{constructor(e,t,r,o,l){this.key=e,this.value=t,this.color=null!=r?r:ui.RED,this.left=null!=o?o:ui.EMPTY,this.right=null!=l?l:ui.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,l){return new ui(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=l?l:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const l=r(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===l?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return ui.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return ui.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ui.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ui.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw nt();const e=this.left.check();if(e!==this.right.check())throw nt();return e+(this.isRed()?0:1)}}ui.EMPTY=null,ui.RED=!0,ui.BLACK=!1,ui.EMPTY=new class{constructor(){this.size=0}get key(){throw nt()}get value(){throw nt()}get color(){throw nt()}get left(){throw nt()}get right(){throw nt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new ui(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class rr{constructor(e){this.comparator=e,this.data=new Yr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Jb(this.data.getIterator())}getIteratorFrom(e){return new Jb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof rr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(0!==this.comparator(o,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new rr(this.comparator);return t.data=e,t}}class Jb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const ZM=new Yr(Qe.comparator);function Ro(){return ZM}const GM=new Yr(Qe.comparator);function dE(){return GM}const uF=new Yr(Qe.comparator);function zM(){return uF}const cF=new rr(Qe.comparator);function En(...n){let e=cF;for(const t of n)e=e.add(t);return e}const dF=new rr(Ht);function Xb(){return dF}class hE{constructor(e,t,r,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,fE.createSynthesizedTargetChangeForCurrentChange(e,t)),new hE(it.min(),r,Xb(),Ro(),En())}}class fE{constructor(e,t,r,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t){return new fE(li.EMPTY_BYTE_STRING,t,En(),En(),En())}}class ew{constructor(e,t,r,o){this.k=e,this.removedTargetIds=t,this.key=r,this.$=o}}class WM{constructor(e,t){this.targetId=e,this.O=t}}class KM{constructor(e,t,r=li.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class YM{constructor(){this.F=0,this.M=JM(),this.L=li.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(e){e.approximateByteSize()>0&&(this.U=!0,this.L=e)}W(){let e=En(),t=En(),r=En();return this.M.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:nt()}}),new fE(this.L,this.B,e,t,r)}G(){this.U=!1,this.M=JM()}H(e,t){this.U=!0,this.M=this.M.insert(e,t)}J(e){this.U=!0,this.M=this.M.remove(e)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class hF{constructor(e){this.tt=e,this.et=new Map,this.nt=Ro(),this.st=QM(),this.it=new rr(Ht)}rt(e){for(const t of e.k)e.$&&e.$.isFoundDocument()?this.ot(t,e.$):this.ct(t,e.key,e.$);for(const t of e.removedTargetIds)this.ct(t,e.key,e.$)}at(e){this.forEachTarget(e,t=>{const r=this.ut(t);switch(e.state){case 0:this.ht(t)&&r.j(e.resumeToken);break;case 1:r.X(),r.q||r.G(),r.j(e.resumeToken);break;case 2:r.X(),r.q||this.removeTarget(t);break;case 3:this.ht(t)&&(r.Z(),r.j(e.resumeToken));break;case 4:this.ht(t)&&(this.lt(t),r.j(e.resumeToken));break;default:nt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.et.forEach((r,o)=>{this.ht(o)&&t(o)})}ft(e){const t=e.targetId,r=e.O.count,o=this.dt(t);if(o){const l=o.target;if(Qv(l))if(0===r){const d=new Qe(l.path);this.ct(t,d,kn.newNoDocument(d,it.min()))}else yt(1===r);else this.wt(t)!==r&&(this.lt(t),this.it=this.it.add(t))}}_t(e){const t=new Map;this.et.forEach((l,d)=>{const p=this.dt(d);if(p){if(l.current&&Qv(p.target)){const y=new Qe(p.target.path);null!==this.nt.get(y)||this.gt(d,y)||this.ct(d,y,kn.newNoDocument(y,e))}l.K&&(t.set(d,l.W()),l.G())}});let r=En();this.st.forEach((l,d)=>{let p=!0;d.forEachWhile(y=>{const b=this.dt(y);return!b||2===b.purpose||(p=!1,!1)}),p&&(r=r.add(l))});const o=new hE(e,t,this.it,this.nt,r);return this.nt=Ro(),this.st=QM(),this.it=new rr(Ht),o}ot(e,t){if(!this.ht(e))return;const r=this.gt(e,t.key)?2:0;this.ut(e).H(t.key,r),this.nt=this.nt.insert(t.key,t),this.st=this.st.insert(t.key,this.yt(t.key).add(e))}ct(e,t,r){if(!this.ht(e))return;const o=this.ut(e);this.gt(e,t)?o.H(t,1):o.J(t),this.st=this.st.insert(t,this.yt(t).delete(e)),r&&(this.nt=this.nt.insert(t,r))}removeTarget(e){this.et.delete(e)}wt(e){const t=this.ut(e).W();return this.tt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Y(e){this.ut(e).Y()}ut(e){let t=this.et.get(e);return t||(t=new YM,this.et.set(e,t)),t}yt(e){let t=this.st.get(e);return t||(t=new rr(Ht),this.st=this.st.insert(e,t)),t}ht(e){const t=null!==this.dt(e);return t||Re("WatchChangeAggregator","Detected inactive target",e),t}dt(e){const t=this.et.get(e);return t&&t.q?null:this.tt.Tt(e)}lt(e){this.et.set(e,new YM),this.tt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}gt(e,t){return this.tt.getRemoteKeysForTarget(e).has(t)}}function QM(){return new Yr(Qe.comparator)}function JM(){return new Yr(Qe.comparator)}const fF={asc:"ASCENDING",desc:"DESCENDING"},pF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class XM{constructor(e,t){this.databaseId=e,this.D=t}}function zm(n,e){return n.D?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function QA(n,e){return n.D?e.toBase64():e.toUint8Array()}function gF(n,e){return zm(n,e.toTimestamp())}function Di(n){return yt(!!n),it.fromTimestamp(function(e){const t=Mc(e);return new nr(t.seconds,t.nanos)}(n))}function JA(n,e){return(t=n,new an(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function XA(n){const e=an.fromString(n);return yt(Qm(e)),e}function Wm(n,e){return JA(n.databaseId,e.path)}function ml(n,e){const t=XA(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Qe(tO(t))}function eS(n,e){return JA(n.databaseId,e)}function eO(n){const e=XA(n);return 4===e.length?an.emptyPath():tO(e)}function pE(n){return new an(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function tO(n){return yt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function tS(n,e,t){return{name:Wm(n,e),fields:t.value.mapValue.fields}}function nO(n,e,t){const r=ml(n,e.name),o=Di(e.updateTime),l=new Ii({mapValue:{fields:e.fields}}),d=kn.newFoundDocument(r,o,l);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Cu(n,e){let t;if(e instanceof fh)t={update:tS(n,e.key,e.value)};else if(e instanceof xp)t={delete:Wm(n,e.key)};else if(e instanceof Lc)t={update:tS(n,e.key,e.data),updateMask:_F(e.fieldMask)};else{if(!(e instanceof Yb))return nt();t={verify:Wm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const d=l.transform;if(d instanceof Ip)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Eu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Fc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Dp)return{fieldPath:l.field.canonicalString(),increment:d.C};throw nt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:gF(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:nt()),t;var o}function nw(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Kr.updateTime(Di(o.updateTime)):void 0!==o.exists?Kr.exists(o.exists):Kr.none():Kr.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(l,d){let p=null;"setToServerValue"in d?(yt("REQUEST_TIME"===d.setToServerValue),p=new Ip):"appendMissingElements"in d?p=new Eu(d.appendMissingElements.values||[]):"removeAllFromArray"in d?p=new Fc(d.removeAllFromArray.values||[]):"increment"in d?p=new Dp(l,d.increment):nt();const y=ai.fromServerFormat(d.fieldPath);return new Ap(y,p)}(n,o)):[];var o;if(e.update){const o=ml(n,e.update.name),l=new Ii({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new _p((e.updateMask.fieldPaths||[]).map(b=>ai.fromServerFormat(b)));return new Lc(o,l,d,t,r)}return new fh(o,l,t,r)}if(e.delete){const o=ml(n,e.delete);return new xp(o,t)}if(e.verify){const o=ml(n,e.verify);return new Yb(o,t)}return nt()}function nS(n,e){return{documents:[eS(n,e.path)]}}function gE(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=eS(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=eS(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(p){if(0===p.length)return;const y=p.map(b=>function(D){if("=="===D.op){if(UA(D.value))return{unaryFilter:{field:Km(D.field),op:"IS_NAN"}};if(VA(D.value))return{unaryFilter:{field:Km(D.field),op:"IS_NULL"}}}else if("!="===D.op){if(UA(D.value))return{unaryFilter:{field:Km(D.field),op:"IS_NOT_NAN"}};if(VA(D.value))return{unaryFilter:{field:Km(D.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Km(D.field),op:iS(D.op),value:D.value}}}(b));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(e.filters);o&&(t.structuredQuery.where=o);const l=function(p){if(0!==p.length)return p.map(y=>{return{field:Km((b=y).field),direction:mE(b.dir)};var b})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const d=(y=e.limit,n.D||Oc(y)?y:{value:y});var y;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=sO(e.startAt)),e.endAt&&(t.structuredQuery.endAt=sO(e.endAt)),t}function rw(n){let e=eO(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){yt(1===r);const D=t.from[0];D.allDescendants?o=D.collectionId:e=e.child(D.collectionId)}let l=[];t.where&&(l=iw(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(D=>{return new kc(Ym((S=D).field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let p=null;t.limit&&(p=function(D){let S;return S="object"==typeof D?D.value:D,Oc(S)?null:S}(t.limit));let y=null;t.startAt&&(y=sw(t.startAt));let b=null;return t.endAt&&(b=sw(t.endAt)),HA(e,o,d,l,p,"F",y,b)}function iw(n){return n?void 0!==n.unaryFilter?[oO(n)]:void 0!==n.fieldFilter?[mF(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>iw(e)).reduce((e,t)=>e.concat(t)):nt():[]}function sO(n){return{before:n.before,values:n.position}}function sw(n){return new jm(n.values||[],!!n.before)}function mE(n){return fF[n]}function iS(n){return pF[n]}function Km(n){return{fieldPath:n.canonicalString()}}function Ym(n){return ai.fromServerFormat(n.fieldPath)}function mF(n){return cs.create(Ym(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return nt()}}(n.fieldFilter.op),n.fieldFilter.value)}function oO(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Ym(n.unaryFilter.field);return cs.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Ym(n.unaryFilter.field);return cs.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ym(n.unaryFilter.field);return cs.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ym(n.unaryFilter.field);return cs.create(o,"!=",{nullValue:"NULL_VALUE"});default:return nt()}}function _F(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Qm(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ha(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=aO(e)),e=yF(n.get(t),e);return aO(e)}function yF(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const l=n.charAt(o);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function aO(n){return n+"\x01\x01"}function fa(n){const e=n.length;if(yt(e>=2),2===e)return yt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),an.emptyPath();const t=e-2,r=[];let o="";for(let l=0;l<e;){const d=n.indexOf("\x01",l);switch((d<0||d>t)&&nt(),n.charAt(d+1)){case"\x01":const p=n.substring(l,d);let y;0===o.length?y=p:(o+=p,y=o,o=""),r.push(y);break;case"\x10":o+=n.substring(l,d),o+="\0";break;case"\x11":o+=n.substring(l,d+1);break;default:nt()}l=d+2}return new an(r)}class lO{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class ko{constructor(e,t,r){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=r}}ko.store="owner",ko.key="owner";class ph{constructor(e,t,r){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=r}}ph.store="mutationQueues",ph.keyPath="userId";class Fn{constructor(e,t,r,o,l){this.userId=e,this.batchId=t,this.localWriteTimeMs=r,this.baseMutations=o,this.mutations=l}}Fn.store="mutations",Fn.keyPath="batchId",Fn.userMutationsIndex="userMutationsIndex",Fn.userMutationsKeyPath=["userId","batchId"];class ds{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,ha(t)]}static key(e,t,r){return[e,ha(t),r]}}ds.store="documentMutations",ds.PLACEHOLDER=new ds;class sS{constructor(e,t){this.path=e,this.readTime=t}}class uO{constructor(e,t){this.path=e,this.version=t}}class Er{constructor(e,t,r,o,l,d){this.unknownDocument=e,this.noDocument=t,this.document=r,this.hasCommittedMutations=o,this.readTime=l,this.parentPath=d}}Er.store="remoteDocuments",Er.readTimeIndex="readTimeIndex",Er.readTimeIndexPath="readTime",Er.collectionReadTimeIndex="collectionReadTimeIndex",Er.collectionReadTimeIndexPath=["parentPath","readTime"];class bu{constructor(e){this.byteSize=e}}bu.store="remoteDocumentGlobal",bu.key="remoteDocumentGlobalKey";class Ps{constructor(e,t,r,o,l,d,p){this.targetId=e,this.canonicalId=t,this.readTime=r,this.resumeToken=o,this.lastListenSequenceNumber=l,this.lastLimboFreeSnapshotVersion=d,this.query=p}}Ps.store="targets",Ps.keyPath="targetId",Ps.queryTargetsIndexName="queryTargetsIndex",Ps.queryTargetsKeyPath=["canonicalId","targetId"];class Cr{constructor(e,t,r){this.targetId=e,this.path=t,this.sequenceNumber=r}}Cr.store="targetDocuments",Cr.keyPath=["targetId","path"],Cr.documentTargetsIndex="documentTargetsIndex",Cr.documentTargetsKeyPath=["path","targetId"];class Xs{constructor(e,t,r,o){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=r,this.targetCount=o}}Xs.key="targetGlobalKey",Xs.store="targetGlobal";class gh{constructor(e,t){this.collectionId=e,this.parent=t}}gh.store="collectionParents",gh.keyPath=["collectionId","parent"];class wu{constructor(e,t,r,o){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=r,this.inForeground=o}}wu.store="clientMetadata",wu.keyPath="clientId";class Vc{constructor(e,t,r){this.bundleId=e,this.createTime=t,this.version=r}}Vc.store="bundles",Vc.keyPath="bundleId";class Pp{constructor(e,t,r){this.name=e,this.readTime=t,this.bundledQuery=r}}Pp.store="namedQueries",Pp.keyPath="name";const eo=[ph.store,Fn.store,ds.store,Er.store,Ps.store,ko.store,Xs.store,Cr.store,wu.store,bu.store,gh.store,Vc.store,Pp.store],oS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _E{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&nt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Se((r,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Se?t:Se.resolve(t)}catch(t){return Se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Se.reject(t)}static resolve(e){return new Se((t,r)=>{t(e)})}static reject(e){return new Se((t,r)=>{r(e)})}static waitFor(e){return new Se((t,r)=>{let o=0,l=0,d=!1;e.forEach(p=>{++o,p.next(()=>{++l,d&&l===o&&t()},y=>r(y))}),d=!0,l===o&&t()})}static or(e){let t=Se.resolve(!1);for(const r of e)t=t.next(o=>o?Se.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,l)=>{r.push(t.call(this,o,l))}),this.waitFor(r)}}class yE{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.Et=new wi,this.transaction.oncomplete=()=>{this.Et.resolve()},this.transaction.onabort=()=>{t.error?this.Et.reject(new Np(e,t.error)):this.Et.resolve()},this.transaction.onerror=r=>{const o=ow(r.target.error);this.Et.reject(new Np(e,o))}}static open(e,t,r,o){try{return new yE(t,e.transaction(o,r))}catch(l){throw new Np(t,l)}}get It(){return this.Et.promise}abort(e){e&&this.Et.reject(e),this.aborted||(Re("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new lS(t)}}class to{constructor(e,t,r){this.name=e,this.version=t,this.At=r,12.2===to.Rt((0,L.z$)())&&yr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Re("SimpleDb","Removing database:",e),Uc(window.indexedDB.deleteDatabase(e)).toPromise()}static bt(){if(!(0,L.hl)())return!1;if(to.Pt())return!0;const e=(0,L.z$)(),t=to.Rt(e),r=0<t&&t<10,o=to.vt(e),l=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static Pt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Vt)}static St(e,t){return e.store(t)}static Rt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static vt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Dt(e){var t=this;return(0,_e.Z)(function*(){return t.db||(Re("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=d=>{r(d.target.result)},l.onblocked=()=>{o(new Np(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=d=>{const p=d.target.error;o("VersionError"===p.name?new Ne(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new Ne(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new Np(e,p))},l.onupgradeneeded=d=>{Re("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.At.Ct(d.target.result,l.transaction,d.oldVersion,t.version).next(()=>{Re("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Nt&&(t.db.onversionchange=r=>t.Nt(r)),t.db})()}xt(e){this.Nt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var l=this;return(0,_e.Z)(function*(){const d="readonly"===t;let p=0;for(;;){++p;try{l.db=yield l.Dt(e);const y=yE.open(l.db,e,d?"readonly":"readwrite",r),b=o(y).catch(D=>(y.abort(D),Se.reject(D))).toPromise();return b.catch(()=>{}),yield y.It,b}catch(y){const b="FirebaseError"!==y.name&&p<3;if(Re("SimpleDb","Transaction failed with error:",y.message,"Retrying:",b),l.close(),!b)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class aS{constructor(e){this.kt=e,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(e){this.kt=e}done(){this.$t=!0}Mt(e){this.Ot=e}delete(){return Uc(this.kt.delete())}}class Np extends Ne{constructor(e,t){super(ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function mh(n){return"IndexedDbTransactionError"===n.name}class lS{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Re("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Re("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Uc(r)}add(e){return Re("SimpleDb","ADD",this.store.name,e,e),Uc(this.store.add(e))}get(e){return Uc(this.store.get(e)).next(t=>(void 0===t&&(t=null),Re("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Re("SimpleDb","DELETE",this.store.name,e),Uc(this.store.delete(e))}count(){return Re("SimpleDb","COUNT",this.store.name),Uc(this.store.count())}Lt(e,t){const r=this.cursor(this.options(e,t)),o=[];return this.Bt(r,(l,d)=>{o.push(d)}).next(()=>o)}Ut(e,t){Re("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.qt=!1;const o=this.cursor(r);return this.Bt(o,(l,d,p)=>p.delete())}Kt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Bt(o,t)}jt(e){const t=this.cursor({});return new Se((r,o)=>{t.onerror=l=>{const d=ow(l.target.error);o(d)},t.onsuccess=l=>{const d=l.target.result;d?e(d.primaryKey,d.value).next(p=>{p?d.continue():r()}):r()}})}Bt(e,t){const r=[];return new Se((o,l)=>{e.onerror=d=>{l(d.target.error)},e.onsuccess=d=>{const p=d.target.result;if(!p)return void o();const y=new aS(p),b=t(p.primaryKey,p.value,y);if(b instanceof Se){const D=b.catch(S=>(y.done(),Se.reject(S)));r.push(D)}y.isDone?o():null===y.Ft?p.continue():p.continue(y.Ft)}}).next(()=>Se.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.qt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Uc(n){return new Se((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=ow(r.target.error);t(o)}})}let uS=!1;function ow(n){const e=to.Rt((0,L.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return uS||(uS=!0,setTimeout(()=>{throw r},0)),r}}return n}class vE extends _E{constructor(e,t){super(),this.Qt=e,this.currentSequenceNumber=t}}function hs(n,e){const t=Le(n);return to.St(t.Qt,e)}class EE{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&ZA(l,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Sp(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Sp(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(it.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),En())}isEqual(e){return this.batchId===e.batchId&&Nc(this.mutations,e.mutations,(t,r)=>zA(t,r))&&Nc(this.baseMutations,e.baseMutations,(t,r)=>zA(t,r))}}class Jm{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){yt(e.mutations.length===r.length);let o=zM();const l=e.mutations;for(let d=0;d<l.length;d++)o=o.insert(l[d].key,r[d].version);return new Jm(e,t,r,o)}}class Bc{constructor(e,t,r,o,l=it.min(),d=it.min(),p=li.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p}withSequenceNumber(e){return new Bc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Bc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Bc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Fo{constructor(e){this.Wt=e}}function aw(n,e){if(e.document)return nO(n.Wt,e.document,!!e.hasCommittedMutations);if(e.noDocument){const t=Qe.fromSegments(e.noDocument.path),r=Op(e.noDocument.readTime),o=kn.newNoDocument(t,r);return e.hasCommittedMutations?o.setHasCommittedMutations():o}if(e.unknownDocument){const t=Qe.fromSegments(e.unknownDocument.path),r=Op(e.unknownDocument.version);return kn.newUnknownDocument(t,r)}return nt()}function cO(n,e,t){const r=lw(t),o=e.key.path.popLast().toArray();if(e.isFoundDocument()){const l={name:Wm(p=n.Wt,(y=e).key),fields:y.data.value.mapValue.fields,updateTime:zm(p,y.version.toTimestamp())};return new Er(null,null,l,e.hasCommittedMutations,r,o)}var p,y;if(e.isNoDocument()){const l=e.key.path.toArray(),d=Mp(e.version),p=e.hasCommittedMutations;return new Er(null,new sS(l,d),null,p,r,o)}if(e.isUnknownDocument()){const l=e.key.path.toArray(),d=Mp(e.version);return new Er(new uO(l,d),null,null,!0,r,o)}return nt()}function lw(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function dO(n){const e=new nr(n[0],n[1]);return it.fromTimestamp(e)}function Mp(n){const e=n.toTimestamp();return new lO(e.seconds,e.nanoseconds)}function Op(n){const e=new nr(n.seconds,n.nanoseconds);return it.fromTimestamp(e)}function Rp(n,e){const t=(e.baseMutations||[]).map(l=>nw(n.Wt,l));for(let l=0;l<e.mutations.length-1;++l){const d=e.mutations[l];l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(d.updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l)}const r=e.mutations.map(l=>nw(n.Wt,l)),o=nr.fromMillis(e.localWriteTimeMs);return new EE(e.batchId,o,t,r)}function CE(n){const e=Op(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Op(n.lastLimboFreeSnapshotVersion):it.min();let r;var o;return void 0!==n.query.documents?(yt(1===(o=n.query).documents.length),r=Js(bp(eO(o.documents[0])))):r=Js(rw(n.query)),new Bc(r,n.targetId,0,n.lastListenSequenceNumber,e,t,li.fromBase64String(n.resumeToken))}function cS(n,e){const t=Mp(e.snapshotVersion),r=Mp(e.lastLimboFreeSnapshotVersion);let o;o=Qv(e.target)?nS(n.Wt,e.target):gE(n.Wt,e.target);const l=e.resumeToken.toBase64();return new Ps(e.targetId,Vm(e.target),t,l,e.sequenceNumber,r,o)}function bE(n){const e=rw({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?$b(e,e.limit,"L"):e}class hO{getBundleMetadata(e,t){return dS(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Op(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return dS(e).put({bundleId:(r=t).id,createTime:Mp(Di(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return uw(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:bE(o.bundledQuery),readTime:Op(o.readTime)};var o})}saveNamedQuery(e,t){return uw(e).put({name:(r=t).name,readTime:Mp(Di(r.readTime)),bundledQuery:r.bundledQuery});var r}}function dS(n){return hs(n,Vc.store)}function uw(n){return hs(n,Pp.store)}class fO{constructor(){this.Gt=new hS}addToCollectionParentIndex(e,t){return this.Gt.add(t),Se.resolve()}getCollectionParents(e,t){return Se.resolve(this.Gt.getEntries(t))}}class hS{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new rr(an.comparator),l=!o.has(r);return this.index[t]=o.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new rr(an.comparator)).toArray()}}class fS{constructor(){this.zt=new hS}addToCollectionParentIndex(e,t){if(!this.zt.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.zt.add(t)});const l={collectionId:r,parent:ha(o)};return cw(e).put(l)}return Se.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[RA(t),""],!1,!0);return cw(e).Lt(o).next(l=>{for(const d of l){if(d.collectionId!==t)break;r.push(fa(d.parent))}return r})}}function cw(n){return hs(n,gh.store)}const pS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ns{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ns(e,Ns.DEFAULT_COLLECTION_PERCENTILE,Ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function dw(n,e,t){const r=n.store(Fn.store),o=n.store(ds.store),l=[],d=IDBKeyRange.only(t.batchId);let p=0;const y=r.Kt({range:d},(D,S,O)=>(p++,O.delete()));l.push(y.next(()=>{yt(1===p)}));const b=[];for(const D of t.mutations){const S=ds.key(e,D.key.path,t.batchId);l.push(o.delete(S)),b.push(D.key)}return Se.waitFor(l).next(()=>b)}function jc(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw nt();e=n.noDocument}return JSON.stringify(e).length}Ns.DEFAULT_COLLECTION_PERCENTILE=10,Ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ns.DEFAULT=new Ns(41943040,Ns.DEFAULT_COLLECTION_PERCENTILE,Ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ns.DISABLED=new Ns(-1,0,0);class Xm{constructor(e,t,r,o){this.userId=e,this.N=t,this.Ht=r,this.referenceDelegate=o,this.Jt={}}static Yt(e,t,r,o){yt(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new Xm(l,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Hc(e).Kt({index:Fn.userMutationsIndex,range:r},(o,l,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const l=kp(e),d=Hc(e);return d.add({}).next(p=>{yt("number"==typeof p);const y=new EE(p,t,r,o),b=function(O,F,$){const ie=$.baseMutations.map(ke=>Cu(O.Wt,ke)),Ee=$.mutations.map(ke=>Cu(O.Wt,ke));return new Fn(F,$.batchId,$.localWriteTime.toMillis(),ie,Ee)}(this.N,this.userId,y),D=[];let S=new rr((O,F)=>Ht(O.canonicalString(),F.canonicalString()));for(const O of o){const F=ds.key(this.userId,O.key.path,p);S=S.add(O.key.path.popLast()),D.push(d.put(b)),D.push(l.put(F,ds.PLACEHOLDER))}return S.forEach(O=>{D.push(this.Ht.addToCollectionParentIndex(e,O))}),e.addOnCommittedListener(()=>{this.Jt[p]=y.keys()}),Se.waitFor(D).next(()=>y)})}lookupMutationBatch(e,t){return Hc(e).get(t).next(r=>r?(yt(r.userId===this.userId),Rp(this.N,r)):null)}Xt(e,t){return this.Jt[t]?Se.resolve(this.Jt[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.Jt[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return Hc(e).Kt({index:Fn.userMutationsIndex,range:o},(d,p,y)=>{p.userId===this.userId&&(yt(p.batchId>=r),l=Rp(this.N,p)),y.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Hc(e).Kt({index:Fn.userMutationsIndex,range:t,reverse:!0},(o,l,d)=>{r=l.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Hc(e).Lt(Fn.userMutationsIndex,t).next(r=>r.map(o=>Rp(this.N,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=ds.prefixForPath(this.userId,t.path),o=IDBKeyRange.lowerBound(r),l=[];return kp(e).Kt({range:o},(d,p,y)=>{const[b,D,S]=d,O=fa(D);if(b===this.userId&&t.path.isEqual(O))return Hc(e).get(S).next(F=>{if(!F)throw nt();yt(F.userId===this.userId),l.push(Rp(this.N,F))});y.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new rr(Ht);const o=[];return t.forEach(l=>{const d=ds.prefixForPath(this.userId,l.path),p=IDBKeyRange.lowerBound(d),y=kp(e).Kt({range:p},(b,D,S)=>{const[O,F,$]=b,ie=fa(F);O===this.userId&&l.path.isEqual(ie)?r=r.add($):S.done()});o.push(y)}),Se.waitFor(o).next(()=>this.Zt(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,l=ds.prefixForPath(this.userId,r),d=IDBKeyRange.lowerBound(l);let p=new rr(Ht);return kp(e).Kt({range:d},(y,b,D)=>{const[S,O,F]=y,$=fa(O);S===this.userId&&r.isPrefixOf($)?$.length===o&&(p=p.add(F)):D.done()}).next(()=>this.Zt(e,p))}Zt(e,t){const r=[],o=[];return t.forEach(l=>{o.push(Hc(e).get(l).next(d=>{if(null===d)throw nt();yt(d.userId===this.userId),r.push(Rp(this.N,d))}))}),Se.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return dw(e.Qt,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.te(t.batchId)}),Se.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}te(e){delete this.Jt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Se.resolve();const r=IDBKeyRange.lowerBound(ds.prefixForUser(this.userId)),o=[];return kp(e).Kt({range:r},(l,d,p)=>{if(l[0]===this.userId){const y=fa(l[1]);o.push(y)}else p.done()}).next(()=>{yt(0===o.length)})})}containsKey(e,t){return hw(e,this.userId,t)}ee(e){return pO(e).get(this.userId).next(t=>t||new ph(this.userId,-1,""))}}function hw(n,e,t){const r=ds.prefixForPath(e,t.path),o=r[1],l=IDBKeyRange.lowerBound(r);let d=!1;return kp(n).Kt({range:l,qt:!0},(p,y,b)=>{const[D,S,O]=p;D===e&&S===o&&(d=!0),b.done()}).next(()=>d)}function Hc(n){return hs(n,Fn.store)}function kp(n){return hs(n,ds.store)}function pO(n){return hs(n,ph.store)}class Fp{constructor(e){this.ne=e}next(){return this.ne+=2,this.ne}static se(){return new Fp(0)}static ie(){return new Fp(-1)}}class vF{constructor(e,t){this.referenceDelegate=e,this.N=t}allocateTargetId(e){return this.re(e).next(t=>{const r=new Fp(t.highestTargetId);return t.highestTargetId=r.next(),this.oe(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.re(e).next(t=>it.fromTimestamp(new nr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.re(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.re(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.oe(e,o)))}addTargetData(e,t){return this.ce(e,t).next(()=>this.re(e).next(r=>(r.targetCount+=1,this.ae(t,r),this.oe(e,r))))}updateTargetData(e,t){return this.ce(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>_h(e).delete(t.targetId)).next(()=>this.re(e)).next(r=>(yt(r.targetCount>0),r.targetCount-=1,this.oe(e,r)))}removeTargets(e,t,r){let o=0;const l=[];return _h(e).Kt((d,p)=>{const y=CE(p);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(o++,l.push(this.removeTargetData(e,y)))}).next(()=>Se.waitFor(l)).next(()=>o)}forEachTarget(e,t){return _h(e).Kt((r,o)=>{const l=CE(o);t(l)})}re(e){return fw(e).get(Xs.key).next(t=>(yt(null!==t),t))}oe(e,t){return fw(e).put(Xs.key,t)}ce(e,t){return _h(e).put(cS(this.N,t))}ae(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.re(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Vm(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return _h(e).Kt({range:o,index:Ps.queryTargetsIndexName},(d,p,y)=>{const b=CE(p);Yv(t,b.target)&&(l=b,y.done())}).next(()=>l)}addMatchingKeys(e,t,r){const o=[],l=$c(e);return t.forEach(d=>{const p=ha(d.path);o.push(l.put(new Cr(r,p))),o.push(this.referenceDelegate.addReference(e,r,d))}),Se.waitFor(o)}removeMatchingKeys(e,t,r){const o=$c(e);return Se.forEach(t,l=>{const d=ha(l.path);return Se.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,l)])})}removeMatchingKeysForTargetId(e,t){const r=$c(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=$c(e);let l=En();return o.Kt({range:r,qt:!0},(d,p,y)=>{const b=fa(d[1]),D=new Qe(b);l=l.add(D)}).next(()=>l)}containsKey(e,t){const r=ha(t.path),o=IDBKeyRange.bound([r],[RA(r)],!1,!0);let l=0;return $c(e).Kt({index:Cr.documentTargetsIndex,qt:!0,range:o},([d,p],y,b)=>{0!==d&&(l++,b.done())}).next(()=>l>0)}Tt(e,t){return _h(e).get(t).next(r=>r?CE(r):null)}}function _h(n){return hs(n,Ps.store)}function fw(n){return hs(n,Xs.store)}function $c(n){return hs(n,Cr.store)}function yh(n){return pw.apply(this,arguments)}function pw(){return(pw=(0,_e.Z)(function*(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==oS)throw n;Re("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function gS([n,e],[t,r]){const o=Ht(n,t);return 0===o?Ht(e,r):o}class mS{constructor(e){this.ue=e,this.buffer=new rr(gS),this.he=0}le(){return++this.he}fe(e){const t=[e,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();gS(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class EF{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.de=!1,this.we=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(e)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(e){var t=this;const r=this.de?3e5:6e4;Re("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,_e.Z)(function*(){t.we=null,t.de=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){mh(o)?Re("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield yh(o)}yield t._e(e)}))}}class CF{constructor(e,t){this.me=e,this.params=t}calculateTargetCount(e,t){return this.me.ge(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Se.resolve(Qs.T);const r=new mS(t);return this.me.forEachTarget(e,o=>r.fe(o.sequenceNumber)).next(()=>this.me.ye(e,o=>r.fe(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.me.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.me.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),Se.resolve(pS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pS):this.pe(e,t))}getCacheSize(e){return this.me.getCacheSize(e)}pe(e,t){let r,o,l,d,p,y,b;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,d=Date.now(),this.nthSequenceNumber(e,o))).next(S=>(r=S,p=Date.now(),this.removeTargets(e,r,t))).next(S=>(l=S,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(b=Date.now(),Zv()<=sl.in.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-D}ms\n\tDetermined least recently used ${o} in `+(p-d)+`ms\n\tRemoved ${l} targets in `+(y-p)+`ms\n\tRemoved ${S} documents in `+(b-y)+`ms\nTotal Duration: ${b-D}ms`),Se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:S})))}}class gO{constructor(e,t){this.db=e,this.garbageCollector=new CF(this,t)}ge(e){const t=this.Te(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Te(e){let t=0;return this.ye(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}ye(e,t){return this.Ee(e,(r,o)=>t(o))}addReference(e,t,r){return Lp(e,r)}removeReference(e,t,r){return Lp(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Lp(e,t)}Ie(e,t){return function(r,o){let l=!1;return pO(r).jt(d=>hw(r,d,o).next(p=>(p&&(l=!0),Se.resolve(!p)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let l=0;return this.Ee(e,(d,p)=>{if(p<=t){const y=this.Ie(e,d).next(b=>{if(!b)return l++,r.getEntry(e,d).next(()=>(r.removeEntry(d),$c(e).delete([0,ha(d.path)])))});o.push(y)}}).next(()=>Se.waitFor(o)).next(()=>r.apply(e)).next(()=>l)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Lp(e,t)}Ee(e,t){const r=$c(e);let o,l=Qs.T;return r.Kt({index:Cr.documentTargetsIndex},([d,p],{path:y,sequenceNumber:b})=>{0===d?(l!==Qs.T&&t(new Qe(fa(o)),l),l=b,o=y):l=Qs.T}).next(()=>{l!==Qs.T&&t(new Qe(fa(o)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Lp(n,e){return $c(n).put((r=n.currentSequenceNumber,new Cr(0,ha(e.path),r)));var r}class ir{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,l]of r)if(this.equalsFn(o,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0!==o){for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t])}else this.inner[r]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),!0;return!1}forEach(e){Ti(this.inner,(t,r)=>{for(const[o,l]of r)e(o,l)})}isEmpty(){return Gv(this.inner)}}class mO{constructor(){this.changes=new ir(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:it.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:kn.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Se.resolve(r.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class _S{constructor(e,t){this.N=e,this.Ht=t}addEntry(e,t,r){return pa(e).put(wE(t),r)}removeEntry(e,t){const r=pa(e),o=wE(t);return r.delete(o)}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Ae(e,r)))}getEntry(e,t){return pa(e).get(wE(t)).next(r=>this.Re(t,r))}be(e,t){return pa(e).get(wE(t)).next(r=>({document:this.Re(t,r),size:jc(r)}))}getEntries(e,t){let r=Ro();return this.Pe(e,t,(o,l)=>{const d=this.Re(o,l);r=r.insert(o,d)}).next(()=>r)}ve(e,t){let r=Ro(),o=new Yr(Qe.comparator);return this.Pe(e,t,(l,d)=>{const p=this.Re(l,d);r=r.insert(l,p),o=o.insert(l,jc(d))}).next(()=>({documents:r,Ve:o}))}Pe(e,t,r){if(t.isEmpty())return Se.resolve();const o=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),l=t.getIterator();let d=l.getNext();return pa(e).Kt({range:o},(p,y,b)=>{const D=Qe.fromSegments(p);for(;d&&Qe.comparator(d,D)<0;)r(d,null),d=l.getNext();d&&d.isEqual(D)&&(r(d,y),d=l.hasNext()?l.getNext():null),d?b.Mt(d.path.toArray()):b.done()}).next(()=>{for(;d;)r(d,null),d=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r){let o=Ro();const l=t.path.length+1,d={};if(r.isEqual(it.min())){const p=t.path.toArray();d.range=IDBKeyRange.lowerBound(p)}else{const p=t.path.toArray(),y=lw(r);d.range=IDBKeyRange.lowerBound([p,y],!0),d.index=Er.collectionReadTimeIndex}return pa(e).Kt(d,(p,y,b)=>{if(p.length!==l)return;const D=aw(this.N,y);t.path.isPrefixOf(D.key.path)?qm(t,D)&&(o=o.insert(D.key,D)):b.done()}).next(()=>o)}newChangeBuffer(e){return new yS(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return vS(e).get(bu.key).next(t=>(yt(!!t),t))}Ae(e,t){return vS(e).put(bu.key,t)}Re(e,t){if(t){const r=aw(this.N,t);if(!r.isNoDocument()||!r.version.isEqual(it.min()))return r}return kn.newInvalidDocument(e)}}class yS extends mO{constructor(e,t){super(),this.Se=e,this.trackRemovals=t,this.De=new ir(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new rr((l,d)=>Ht(l.canonicalString(),d.canonicalString()));return this.changes.forEach((l,d)=>{const p=this.De.get(l);if(d.document.isValidDocument()){const y=cO(this.Se.N,d.document,this.getReadTime(l));o=o.add(l.path.popLast()),r+=jc(y)-p,t.push(this.Se.addEntry(e,l,y))}else if(r-=p,this.trackRemovals){const y=cO(this.Se.N,kn.newNoDocument(l,it.min()),this.getReadTime(l));t.push(this.Se.addEntry(e,l,y))}else t.push(this.Se.removeEntry(e,l))}),o.forEach(l=>{t.push(this.Se.Ht.addToCollectionParentIndex(e,l))}),t.push(this.Se.updateMetadata(e,r)),Se.waitFor(t)}getFromCache(e,t){return this.Se.be(e,t).next(r=>(this.De.set(t,r.size),r.document))}getAllFromCache(e,t){return this.Se.ve(e,t).next(({documents:r,Ve:o})=>(o.forEach((l,d)=>{this.De.set(l,d)}),r))}}function vS(n){return hs(n,bu.store)}function pa(n){return hs(n,Er.store)}function wE(n){return n.path.toArray()}class _O{constructor(e){this.N=e}Ct(e,t,r,o){yt(r<o&&r>=0&&o<=11);const l=new yE("createOrUpgrade",t);var p;r<1&&o>=1&&(e.createObjectStore(ko.store),(p=e).createObjectStore(ph.store,{keyPath:ph.keyPath}),p.createObjectStore(Fn.store,{keyPath:Fn.keyPath,autoIncrement:!0}).createIndex(Fn.userMutationsIndex,Fn.userMutationsKeyPath,{unique:!0}),p.createObjectStore(ds.store),gw(e),function(p){p.createObjectStore(Er.store)}(e));let d=Se.resolve();return r<3&&o>=3&&(0!==r&&(function(p){p.deleteObjectStore(Cr.store),p.deleteObjectStore(Ps.store),p.deleteObjectStore(Xs.store)}(e),gw(e)),d=d.next(()=>function(p){const y=p.store(Xs.store),b=new Xs(0,0,it.min().toTimestamp(),0);return y.put(Xs.key,b)}(l))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(p,y){return y.store(Fn.store).Lt().next(b=>{p.deleteObjectStore(Fn.store),p.createObjectStore(Fn.store,{keyPath:Fn.keyPath,autoIncrement:!0}).createIndex(Fn.userMutationsIndex,Fn.userMutationsKeyPath,{unique:!0});const D=y.store(Fn.store),S=b.map(O=>D.put(O));return Se.waitFor(S)})}(e,l))),d=d.next(()=>{!function(p){p.createObjectStore(wu.store,{keyPath:wu.keyPath})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.Ce(l))),r<6&&o>=6&&(d=d.next(()=>(function(p){p.createObjectStore(bu.store)}(e),this.Ne(l)))),r<7&&o>=7&&(d=d.next(()=>this.xe(l))),r<8&&o>=8&&(d=d.next(()=>this.ke(e,l))),r<9&&o>=9&&(d=d.next(()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e),function(p){const y=p.objectStore(Er.store);y.createIndex(Er.readTimeIndex,Er.readTimeIndexPath,{unique:!1}),y.createIndex(Er.collectionReadTimeIndex,Er.collectionReadTimeIndexPath,{unique:!1})}(t)})),r<10&&o>=10&&(d=d.next(()=>this.$e(l))),r<11&&o>=11&&(d=d.next(()=>{(function(p){p.createObjectStore(Vc.store,{keyPath:Vc.keyPath})})(e),function(p){p.createObjectStore(Pp.store,{keyPath:Pp.keyPath})}(e)})),d}Ne(e){let t=0;return e.store(Er.store).Kt((r,o)=>{t+=jc(o)}).next(()=>{const r=new bu(t);return e.store(bu.store).put(bu.key,r)})}Ce(e){const t=e.store(ph.store),r=e.store(Fn.store);return t.Lt().next(o=>Se.forEach(o,l=>{const d=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return r.Lt(Fn.userMutationsIndex,d).next(p=>Se.forEach(p,y=>{yt(y.userId===l.userId);const b=Rp(this.N,y);return dw(e,l.userId,b).next(()=>{})}))}))}xe(e){const t=e.store(Cr.store),r=e.store(Er.store);return e.store(Xs.store).get(Xs.key).next(o=>{const l=[];return r.Kt((d,p)=>{const y=new an(d),b=[0,ha(y)];l.push(t.get(b).next(D=>D?Se.resolve():t.put(new Cr(0,ha(y),o.highestListenSequenceNumber))))}).next(()=>Se.waitFor(l))})}ke(e,t){e.createObjectStore(gh.store,{keyPath:gh.keyPath});const r=t.store(gh.store),o=new hS,l=d=>{if(o.add(d)){const p=d.lastSegment(),y=d.popLast();return r.put({collectionId:p,parent:ha(y)})}};return t.store(Er.store).Kt({qt:!0},(d,p)=>{const y=new an(d);return l(y.popLast())}).next(()=>t.store(ds.store).Kt({qt:!0},([d,p,y],b)=>{const D=fa(p);return l(D.popLast())}))}$e(e){const t=e.store(Ps.store);return t.Kt((r,o)=>{const l=CE(o),d=cS(this.N,l);return t.put(d)})}}function gw(n){n.createObjectStore(Cr.store,{keyPath:Cr.keyPath}).createIndex(Cr.documentTargetsIndex,Cr.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(Ps.store,{keyPath:Ps.keyPath}).createIndex(Ps.queryTargetsIndexName,Ps.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(Xs.store)}const Tu="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class TE{constructor(e,t,r,o,l,d,p,y,b,D){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Oe=l,this.window=d,this.document=p,this.Fe=b,this.Me=D,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=S=>Promise.resolve(),!TE.bt())throw new Ne(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new gO(this,o),this.We=t+"main",this.N=new Fo(y),this.Ge=new to(this.We,11,new _O(this.N)),this.ze=new vF(this.referenceDelegate,this.N),this.Ht=new fS,this.He=new _S(this.N,this.Ht),this.Je=new hO,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===D&&yr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(ge.FAILED_PRECONDITION,Tu);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ze.getHighestSequenceNumber(e))}).then(e=>{this.Le=new Qs(e,this.Fe)}).then(()=>{this.Be=!0}).catch(e=>(this.Ge&&this.Ge.close(),Promise.reject(e)))}nn(e){var t=this;return this.Qe=function(){var r=(0,_e.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ge.xt(function(){var t=(0,_e.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget((0,_e.Z)(function*(){t.started&&(yield t.Xe())})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Vp(e).put(new wu(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.sn(e).next(t=>{t||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)))})}).next(()=>this.rn(e)).next(t=>this.isPrimary&&!t?this.on(e).next(()=>!1):!!t&&this.cn(e).next(()=>!0))).catch(e=>{if(mh(e))return Re("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Re("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Oe.enqueueRetryable(()=>this.Qe(e)),this.isPrimary=e})}sn(e){return vh(e).get(ko.key).next(t=>Se.resolve(this.an(t)))}un(e){return Vp(e).delete(this.clientId)}hn(){var e=this;return(0,_e.Z)(function*(){if(e.isPrimary&&!e.ln(e.je,18e5)){e.je=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=hs(r,wu.store);return o.Lt().next(l=>{const d=e.fn(l,18e5),p=l.filter(y=>-1===d.indexOf(y));return Se.forEach(p,y=>o.delete(y.clientId)).next(()=>p)})}).catch(()=>[]);if(e.Ye)for(const r of t)e.Ye.removeItem(e.dn(r.clientId))}})()}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Xe().then(()=>this.hn()).then(()=>this.en()))}an(e){return!!e&&e.ownerId===this.clientId}rn(e){return this.Me?Se.resolve(!0):vh(e).get(ko.key).next(t=>{if(null!==t&&this.ln(t.leaseTimestampMs,5e3)&&!this.wn(t.ownerId)){if(this.an(t)&&this.networkEnabled)return!0;if(!this.an(t)){if(!t.allowTabSynchronization)throw new Ne(ge.FAILED_PRECONDITION,Tu);return!1}}return!(!this.networkEnabled||!this.inForeground)||Vp(e).Lt().next(r=>void 0===this.fn(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,p=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Re("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,_e.Z)(function*(){e.Be=!1,e._n(),e.Ke&&(e.Ke.cancel(),e.Ke=null),e.mn(),e.gn(),yield e.Ge.runTransaction("shutdown","readwrite",[ko.store,wu.store],t=>{const r=new vE(t,Qs.T);return e.on(r).next(()=>e.un(r))}),e.Ge.close(),e.yn()})()}fn(e,t){return e.filter(r=>this.ln(r.updateTimeMs,t)&&!this.wn(r.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",e=>Vp(e).Lt().next(t=>this.fn(t,18e5).map(r=>r.clientId)))}get started(){return this.Be}getMutationQueue(e){return Xm.Yt(e,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(e,t,r){let l;return Re("IndexedDbPersistence","Starting transaction:",e),this.Ge.runTransaction(e,"readonly"===t?"readonly":"readwrite",eo,d=>(l=new vE(d,this.Le?this.Le.next():Qs.T),"readwrite-primary"===t?this.sn(l).next(p=>!!p||this.rn(l)).next(p=>{if(!p)throw yr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)),new Ne(ge.FAILED_PRECONDITION,oS);return r(l)}).next(p=>this.cn(l).next(()=>p)):this.Tn(l).next(()=>r(l)))).then(d=>(l.raiseOnCommittedEvent(),d))}Tn(e){return vh(e).get(ko.key).next(t=>{if(null!==t&&this.ln(t.leaseTimestampMs,5e3)&&!this.wn(t.ownerId)&&!this.an(t)&&!(this.Me||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ne(ge.FAILED_PRECONDITION,Tu)})}cn(e){const t=new ko(this.clientId,this.allowTabSynchronization,Date.now());return vh(e).put(ko.key,t)}static bt(){return to.bt()}on(e){const t=vh(e);return t.get(ko.key).next(r=>this.an(r)?(Re("IndexedDbPersistence","Releasing primary lease."),t.delete(ko.key)):Se.resolve())}ln(e,t){const r=Date.now();return!(e<r-t||e>r&&(yr(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Ue=()=>{this._n(),(0,L.G6)()&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(e){var t;try{const r=null!==(null===(t=this.Ye)||void 0===t?void 0:t.getItem(this.dn(e)));return Re("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return yr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(e){yr("Failed to set zombie client id.",e)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(e){}}dn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function vh(n){return hs(n,ko.store)}function Vp(n){return hs(n,wu.store)}function mw(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class IE{constructor(e,t){this.progress=e,this.En=t}}class ES{constructor(e,t,r){this.He=e,this.In=t,this.Ht=r}An(e,t){return this.In.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Rn(e,t,r))}Rn(e,t,r){return this.He.getEntry(e,t).next(o=>{for(const l of r)l.applyToLocalView(o);return o})}bn(e,t){e.forEach((r,o)=>{for(const l of t)l.applyToLocalView(o)})}Pn(e,t){return this.He.getEntries(e,t).next(r=>this.vn(e,r).next(()=>r))}vn(e,t){return this.In.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.bn(t,r))}getDocumentsMatchingQuery(e,t,r){return Qe.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.Vn(e,t.path):iE(t)?this.Sn(e,t,r):this.Dn(e,t,r);var o}Vn(e,t){return this.An(e,new Qe(t)).next(r=>{let o=dE();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Sn(e,t,r){const o=t.collectionGroup;let l=dE();return this.Ht.getCollectionParents(e,o).next(d=>Se.forEach(d,p=>{const y=(b=t,D=p.child(o),new da(D,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,D;return this.Dn(e,y,r).next(b=>{b.forEach((D,S)=>{l=l.insert(D,S)})})}).next(()=>l))}Dn(e,t,r){let o,l;return this.He.getDocumentsMatchingQuery(e,t,r).next(d=>(o=d,this.In.getAllMutationBatchesAffectingQuery(e,t))).next(d=>(l=d,this.Cn(e,l,o).next(p=>{o=p;for(const y of l)for(const b of y.mutations){const D=b.key;let S=o.get(D);null==S&&(S=kn.newInvalidDocument(D),o=o.insert(D,S)),Sp(b,S,y.localWriteTime),S.isFoundDocument()||(o=o.remove(D))}}))).next(()=>(o.forEach((d,p)=>{qm(t,p)||(o=o.remove(d))}),o))}Cn(e,t,r){let o=En();for(const d of t)for(const p of d.mutations)p instanceof Lc&&null===r.get(p.key)&&(o=o.add(p.key));let l=r;return this.He.getEntries(e,o).next(d=>(d.forEach((p,y)=>{y.isFoundDocument()&&(l=l.insert(p,y))}),l))}}class e_{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Nn=r,this.xn=o}static kn(e,t){let r=En(),o=En();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new e_(e,t.fromCache,r,o)}}class _w{$n(e){this.On=e}getDocumentsMatchingQuery(e,t,r,o){return 0===(l=t).filters.length&&null===l.limit&&null==l.startAt&&null==l.endAt&&(0===l.explicitOrderBy.length||1===l.explicitOrderBy.length&&l.explicitOrderBy[0].field.isKeyField())||r.isEqual(it.min())?this.Fn(e,t):this.On.Pn(e,o).next(l=>{const d=this.Mn(t,l);return(tE(t)||nE(t))&&this.Ln(t.limitType,d,o,r)?this.Fn(e,t):(Zv()<=sl.in.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),sE(t)),this.On.getDocumentsMatchingQuery(e,t,r).next(p=>(d.forEach(y=>{p=p.insert(y.key,y)}),p)))});var l}Mn(e,t){let r=new rr(Zb(e));return t.forEach((o,l)=>{qm(e,l)&&(r=r.add(l))}),r}Ln(e,t,r,o){if(r.size!==t.size)return!0;const l="F"===e?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Fn(e,t){return Zv()<=sl.in.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",sE(t)),this.On.getDocumentsMatchingQuery(e,t,it.min())}}class ci{constructor(e,t,r,o){this.persistence=e,this.Bn=t,this.N=o,this.Un=new Yr(Ht),this.qn=new ir(l=>Vm(l),Yv),this.Kn=it.min(),this.In=e.getMutationQueue(r),this.jn=e.getRemoteDocumentCache(),this.ze=e.getTargetCache(),this.Qn=new ES(this.jn,this.In,this.persistence.getIndexManager()),this.Je=e.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Un))}}function yO(n,e,t,r){return new ci(n,e,t,r)}function CS(n,e){return yw.apply(this,arguments)}function yw(){return(yw=(0,_e.Z)(function*(n,e){const t=Le(n);let r=t.In,o=t.Qn;const l=yield t.persistence.runTransaction("Handle user change","readonly",d=>{let p;return t.In.getAllMutationBatches(d).next(y=>(p=y,r=t.persistence.getMutationQueue(e),o=new ES(t.jn,r,t.persistence.getIndexManager()),r.getAllMutationBatches(d))).next(y=>{const b=[],D=[];let S=En();for(const O of p){b.push(O.batchId);for(const F of O.mutations)S=S.add(F.key)}for(const O of y){D.push(O.batchId);for(const F of O.mutations)S=S.add(F.key)}return o.Pn(d,S).next(O=>({Wn:O,removedBatchIds:b,addedBatchIds:D}))})});return t.In=r,t.Qn=o,t.Bn.$n(t.Qn),l})).apply(this,arguments)}function bF(n,e){const t=Le(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),l=t.jn.newChangeBuffer({trackRemovals:!0});return function(d,p,y,b){const D=y.batch,S=D.keys();let O=Se.resolve();return S.forEach(F=>{O=O.next(()=>b.getEntry(p,F)).next($=>{const ie=y.docVersions.get(F);yt(null!==ie),$.version.compareTo(ie)<0&&(D.applyToRemoteDocument($,y),$.isValidDocument()&&b.addEntry($,y.commitVersion))})}),O.next(()=>d.In.removeMutationBatch(p,D))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.In.performConsistencyCheck(r)).next(()=>t.Qn.Pn(r,o))})}function t_(n){const e=Le(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ze.getLastRemoteSnapshotVersion(t))}function vO(n,e){const t=Le(n),r=e.snapshotVersion;let o=t.Un;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const d=t.jn.newChangeBuffer({trackRemovals:!0});o=t.Un;const p=[];e.targetChanges.forEach((b,D)=>{const S=o.get(D);if(!S)return;p.push(t.ze.removeMatchingKeys(l,b.removedDocuments,D).next(()=>t.ze.addMatchingKeys(l,b.addedDocuments,D)));const O=b.resumeToken;if(O.approximateByteSize()>0){const F=S.withResumeToken(O,r).withSequenceNumber(l.currentSequenceNumber);o=o.insert(D,F),$=S,Ee=b,yt((ie=F).resumeToken.approximateByteSize()>0),(0===$.resumeToken.approximateByteSize()||ie.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=3e8||Ee.addedDocuments.size+Ee.modifiedDocuments.size+Ee.removedDocuments.size>0)&&p.push(t.ze.updateTargetData(l,F))}var $,ie,Ee});let y=Ro();if(e.documentUpdates.forEach((b,D)=>{e.resolvedLimboDocuments.has(b)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(l,b))}),p.push(EO(l,d,e.documentUpdates,r,void 0).next(b=>{y=b})),!r.isEqual(it.min())){const b=t.ze.getLastRemoteSnapshotVersion(l).next(D=>t.ze.setTargetsMetadata(l,l.currentSequenceNumber,r));p.push(b)}return Se.waitFor(p).next(()=>d.apply(l)).next(()=>t.Qn.vn(l,y)).next(()=>y)}).then(l=>(t.Un=o,l))}function EO(n,e,t,r,o){let l=En();return t.forEach(d=>l=l.add(d)),e.getEntries(n,l).next(d=>{let p=Ro();return t.forEach((y,b)=>{const D=d.get(y),S=(null==o?void 0:o.get(y))||r;b.isNoDocument()&&b.version.isEqual(it.min())?(e.removeEntry(y,S),p=p.insert(y,b)):!D.isValidDocument()||b.version.compareTo(D.version)>0||0===b.version.compareTo(D.version)&&D.hasPendingWrites?(e.addEntry(b,S),p=p.insert(y,b)):Re("LocalStore","Ignoring outdated watch update for ",y,". Current version:",D.version," Watch version:",b.version)}),p})}function wF(n,e){const t=Le(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.In.getNextMutationBatchAfterBatchId(r,e)))}function n_(n,e){const t=Le(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.ze.getTargetData(r,e).next(l=>l?(o=l,Se.resolve(o)):t.ze.allocateTargetId(r).next(d=>(o=new Bc(e,d,0,r.currentSequenceNumber),t.ze.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Un.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Un=t.Un.insert(r.targetId,r),t.qn.set(e,r.targetId)),r})}function Up(n,e,t){return vw.apply(this,arguments)}function vw(){return(vw=(0,_e.Z)(function*(n,e,t){const r=Le(n),o=r.Un.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",l,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!mh(d))throw d;Re("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.Un=r.Un.remove(e),r.qn.delete(o.target)})).apply(this,arguments)}function DE(n,e,t){const r=Le(n);let o=it.min(),l=En();return r.persistence.runTransaction("Execute query","readonly",d=>function(p,y,b){const D=Le(p),S=D.qn.get(b);return void 0!==S?Se.resolve(D.Un.get(S)):D.ze.getTargetData(y,b)}(r,d,Js(e)).next(p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,r.ze.getMatchingKeysForTargetId(d,p.targetId).next(y=>{l=y})}).next(()=>r.Bn.getDocumentsMatchingQuery(d,e,t?o:it.min(),t?l:En())).next(p=>({documents:p,Gn:l})))}function bS(n,e){const t=Le(n),r=Le(t.ze),o=t.Un.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",l=>r.Tt(l,e).next(d=>d?d.target:null))}function wS(n){const e=Le(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(r,o,l){const d=Le(r);let p=Ro(),y=lw(l);const b=pa(o),D=IDBKeyRange.lowerBound(y,!0);return b.Kt({index:Er.readTimeIndex,range:D},(S,O)=>{const F=aw(d.N,O);p=p.insert(F.key,F),y=O.readTime}).next(()=>({En:p,readTime:dO(y)}))}(e.jn,t,e.Kn)).then(({En:t,readTime:r})=>(e.Kn=r,t))}function Ew(){return(Ew=(0,_e.Z)(function*(n){const e=Le(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(r){const o=pa(r);let l=it.min();return o.Kt({index:Er.readTimeIndex,reverse:!0},(d,p,y)=>{p.readTime&&(l=dO(p.readTime)),y.done()}).next(()=>l)}(t)).then(t=>{e.Kn=t})})).apply(this,arguments)}function Cw(){return(Cw=(0,_e.Z)(function*(n,e,t,r){const o=Le(n);let l=En(),d=Ro(),p=zM();for(const D of t){const S=e.zn(D.metadata.name);D.document&&(l=l.add(S)),d=d.insert(S,e.Hn(D)),p=p.insert(S,e.Jn(D.metadata.readTime))}const y=o.jn.newChangeBuffer({trackRemovals:!0}),b=yield n_(o,(D=r,Js(bp(an.fromString(`__bundle__/docs/${D}`)))));var D;return o.persistence.runTransaction("Apply bundle documents","readwrite",D=>EO(D,y,d,it.min(),p).next(S=>(y.apply(D),S)).next(S=>o.ze.removeMatchingKeysForTargetId(D,b.targetId).next(()=>o.ze.addMatchingKeys(D,l,b.targetId)).next(()=>o.Qn.vn(D,S)).next(()=>S)))})).apply(this,arguments)}function IF(n,e){return TS.apply(this,arguments)}function TS(){return(TS=(0,_e.Z)(function*(n,e,t=En()){const r=yield n_(n,Js(bE(e.bundledQuery))),o=Le(n);return o.persistence.runTransaction("Save named query","readwrite",l=>{const d=Di(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o.Je.saveNamedQuery(l,e);const p=r.withResumeToken(li.EMPTY_BYTE_STRING,d);return o.Un=o.Un.insert(p.targetId,p),o.ze.updateTargetData(l,p).next(()=>o.ze.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>o.ze.addMatchingKeys(l,t,r.targetId)).next(()=>o.Je.saveNamedQuery(l,e))})})).apply(this,arguments)}class bO{constructor(e){this.N=e,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(e,t){return Se.resolve(this.Yn.get(t))}saveBundleMetadata(e,t){var r;return this.Yn.set(t.id,{id:(r=t).id,version:r.version,createTime:Di(r.createTime)}),Se.resolve()}getNamedQuery(e,t){return Se.resolve(this.Xn.get(t))}saveNamedQuery(e,t){return this.Xn.set(t.name,{name:(r=t).name,query:bE(r.bundledQuery),readTime:Di(r.readTime)}),Se.resolve();var r}}class bw{constructor(){this.Zn=new rr(di.ts),this.es=new rr(di.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new di(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new di(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}cs(e){const t=new Qe(new an([])),r=new di(t,e),o=new di(t,e+1),l=[];return this.es.forEachInRange([r,o],d=>{this.rs(d),l.push(d.key)}),l}us(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new Qe(new an([])),r=new di(t,e),o=new di(t,e+1);let l=En();return this.es.forEachInRange([r,o],d=>{l=l.add(d.key)}),l}containsKey(e){const t=new di(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class di{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return Qe.comparator(e.key,t.key)||Ht(e.ls,t.ls)}static ns(e,t){return Ht(e.ls,t.ls)||Qe.comparator(e.key,t.key)}}class wO{constructor(e,t){this.Ht=e,this.referenceDelegate=t,this.In=[],this.fs=1,this.ds=new rr(di.ts)}checkEmpty(e){return Se.resolve(0===this.In.length)}addMutationBatch(e,t,r,o){const l=this.fs;this.fs++;const d=new EE(l,t,r,o);this.In.push(d);for(const p of o)this.ds=this.ds.add(new di(p.key,l)),this.Ht.addToCollectionParentIndex(e,p.key.path.popLast());return Se.resolve(d)}lookupMutationBatch(e,t){return Se.resolve(this.ws(t))}getNextMutationBatchAfterBatchId(e,t){const o=this._s(t+1),l=o<0?0:o;return Se.resolve(this.In.length>l?this.In[l]:null)}getHighestUnacknowledgedBatchId(){return Se.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(e){return Se.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new di(t,0),o=new di(t,Number.POSITIVE_INFINITY),l=[];return this.ds.forEachInRange([r,o],d=>{const p=this.ws(d.ls);l.push(p)}),Se.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new rr(Ht);return t.forEach(o=>{const l=new di(o,0),d=new di(o,Number.POSITIVE_INFINITY);this.ds.forEachInRange([l,d],p=>{r=r.add(p.ls)})}),Se.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let l=r;Qe.isDocumentKey(l)||(l=l.child(""));const d=new di(new Qe(l),0);let p=new rr(Ht);return this.ds.forEachWhile(y=>{const b=y.key.path;return!!r.isPrefixOf(b)&&(b.length===o&&(p=p.add(y.ls)),!0)},d),Se.resolve(this.gs(p))}gs(e){const t=[];return e.forEach(r=>{const o=this.ws(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){yt(0===this.ys(t.batchId,"removed")),this.In.shift();let r=this.ds;return Se.forEach(t.mutations,o=>{const l=new di(o.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.ds=r})}te(e){}containsKey(e,t){const r=new di(t,0),o=this.ds.firstAfterOrEqual(r);return Se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return Se.resolve()}ys(e,t){return this._s(e)}_s(e){return 0===this.In.length?0:e-this.In[0].batchId}ws(e){const t=this._s(e);return t<0||t>=this.In.length?null:this.In[t]}}class TO{constructor(e,t){this.Ht=e,this.ps=t,this.docs=new Yr(Qe.comparator),this.size=0}addEntry(e,t,r){const o=t.key,l=this.docs.get(o),d=l?l.size:0,p=this.ps(t);return this.docs=this.docs.insert(o,{document:t.clone(),size:p,readTime:r}),this.size+=p-d,this.Ht.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Se.resolve(r?r.document.clone():kn.newInvalidDocument(t))}getEntries(e,t){let r=Ro();return t.forEach(o=>{const l=this.docs.get(o);r=r.insert(o,l?l.document.clone():kn.newInvalidDocument(o))}),Se.resolve(r)}getDocumentsMatchingQuery(e,t,r){let o=Ro();const l=new Qe(t.path.child("")),d=this.docs.getIteratorFrom(l);for(;d.hasNext();){const{key:p,value:{document:y,readTime:b}}=d.getNext();if(!t.path.isPrefixOf(p.path))break;b.compareTo(r)<=0||qm(t,y)&&(o=o.insert(y.key,y.clone()))}return Se.resolve(o)}Ts(e,t){return Se.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new ga(this)}getSize(e){return Se.resolve(this.size)}}class ga extends mO{constructor(e){super(),this.Se=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.document.isValidDocument()?t.push(this.Se.addEntry(e,o.document,this.getReadTime(r))):this.Se.removeEntry(r)}),Se.waitFor(t)}getFromCache(e,t){return this.Se.getEntry(e,t)}getAllFromCache(e,t){return this.Se.getEntries(e,t)}}class IO{constructor(e){this.persistence=e,this.Es=new ir(t=>Vm(t),Yv),this.lastRemoteSnapshotVersion=it.min(),this.highestTargetId=0,this.Is=0,this.As=new bw,this.targetCount=0,this.Rs=Fp.se()}forEachTarget(e,t){return this.Es.forEach((r,o)=>t(o)),Se.resolve()}getLastRemoteSnapshotVersion(e){return Se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Se.resolve(this.Is)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),Se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Is&&(this.Is=t),Se.resolve()}ce(e){this.Es.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new Fp(t),this.highestTargetId=t),e.sequenceNumber>this.Is&&(this.Is=e.sequenceNumber)}addTargetData(e,t){return this.ce(t),this.targetCount+=1,Se.resolve()}updateTargetData(e,t){return this.ce(t),Se.resolve()}removeTargetData(e,t){return this.Es.delete(t.target),this.As.cs(t.targetId),this.targetCount-=1,Se.resolve()}removeTargets(e,t,r){let o=0;const l=[];return this.Es.forEach((d,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.Es.delete(d),l.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)}),Se.waitFor(l).next(()=>o)}getTargetCount(e){return Se.resolve(this.targetCount)}getTargetData(e,t){const r=this.Es.get(t)||null;return Se.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),Se.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(d=>{l.push(o.markPotentiallyOrphaned(e,d))}),Se.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.As.cs(t),Se.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return Se.resolve(r)}containsKey(e,t){return Se.resolve(this.As.containsKey(t))}}class DO{constructor(e,t){this.bs={},this.Le=new Qs(0),this.Be=!1,this.Be=!0,this.referenceDelegate=e(this),this.ze=new IO(this),this.Ht=new fO,this.He=new TO(this.Ht,r=>this.referenceDelegate.Ps(r)),this.N=new Fo(t),this.Je=new bO(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(e){let t=this.bs[e.toKey()];return t||(t=new wO(this.Ht,this.referenceDelegate),this.bs[e.toKey()]=t),t}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(e,t,r){Re("MemoryPersistence","Starting transaction:",e);const o=new AO(this.Le.next());return this.referenceDelegate.vs(),r(o).next(l=>this.referenceDelegate.Vs(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Ss(e,t){return Se.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class AO extends _E{constructor(e){super(),this.currentSequenceNumber=e}}class ww{constructor(e){this.persistence=e,this.Ds=new bw,this.Cs=null}static Ns(e){return new ww(e)}get xs(){if(this.Cs)return this.Cs;throw nt()}addReference(e,t,r){return this.Ds.addReference(r,t),this.xs.delete(r.toString()),Se.resolve()}removeReference(e,t,r){return this.Ds.removeReference(r,t),this.xs.add(r.toString()),Se.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),Se.resolve()}removeTarget(e,t){this.Ds.cs(t.targetId).forEach(o=>this.xs.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.xs.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}vs(){this.Cs=new Set}Vs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Se.forEach(this.xs,r=>{const o=Qe.fromPath(r);return this.ks(e,o).next(l=>{l||t.removeEntry(o)})}).next(()=>(this.Cs=null,t.apply(e)))}updateLimboDocument(e,t){return this.ks(e,t).next(r=>{r?this.xs.delete(t.toString()):this.xs.add(t.toString())})}Ps(e){return 0}ks(e,t){return Se.or([()=>Se.resolve(this.Ds.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ss(e,t)])}}function SO(n,e){return`firestore_clients_${n}_${e}`}function IS(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Tw(n,e){return`firestore_targets_${n}_${e}`}class AE{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static $s(e,t,r){const o=JSON.parse(r);let l,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(l=new Ne(o.error.code,o.error.message))),d?new AE(e,t,o.state,l):(yr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Iu{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static $s(e,t){const r=JSON.parse(t);let o,l="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(o=new Ne(r.error.code,r.error.message))),l?new Iu(e,r.state,o):(yr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class r_{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,l=Xb();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=LM(r.activeTargetIds[d]),l=l.add(r.activeTargetIds[d]);return o?new r_(e,l):(yr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class DS{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new DS(t.clientId,t.onlineState):(yr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Iw{constructor(){this.activeTargetIds=Xb()}Fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ms(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class AS{constructor(e,t,r,o,l){this.window=e,this.Oe=t,this.persistenceKey=r,this.Ls=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new Yr(Ht),this.started=!1,this.Ks=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.js=SO(this.persistenceKey,this.Ls),this.Qs=`firestore_sequence_number_${this.persistenceKey}`,this.qs=this.qs.insert(this.Ls,new Iw),this.Ws=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.Hs=`firestore_online_state_${this.persistenceKey}`,this.Js=function(p){return`firestore_bundle_loaded_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static bt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_e.Z)(function*(){const t=yield e.syncEngine.pn();for(const o of t){if(o===e.Ls)continue;const l=e.getItem(SO(e.persistenceKey,o));if(l){const d=r_.$s(o,l);d&&(e.qs=e.qs.insert(d.clientId,d))}}e.Ys();const r=e.storage.getItem(e.Hs);if(r){const o=e.Xs(r);o&&e.Zs(o)}for(const o of e.Ks)e.Us(o);e.Ks=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Qs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(e){let t=!1;return this.qs.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ei(e,"pending")}updateMutationState(e,t,r){this.ei(e,t,r),this.ni(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Tw(this.persistenceKey,e));if(r){const o=Iu.$s(e,r);o&&(t=o.state)}}return this.si.Fs(e),this.Ys(),t}removeLocalQueryTarget(e){this.si.Ms(e),this.Ys()}isLocalQueryTarget(e){return this.si.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Tw(this.persistenceKey,e))}updateQueryState(e,t,r){this.ii(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.ni(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.ri(e)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Re("SharedClientState","READ",e,t),t}setItem(e,t){Re("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Re("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Us(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Re("SharedClientState","EVENT",r.key,r.newValue),r.key===this.js)return void yr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,_e.Z)(function*(){if(t.started){if(null!==r.key)if(t.Ws.test(r.key)){if(null==r.newValue){const o=t.ci(r.key);return t.ai(o,null)}{const o=t.ui(r.key,r.newValue);if(o)return t.ai(o.clientId,o)}}else if(t.Gs.test(r.key)){if(null!==r.newValue){const o=t.hi(r.key,r.newValue);if(o)return t.li(o)}}else if(t.zs.test(r.key)){if(null!==r.newValue){const o=t.fi(r.key,r.newValue);if(o)return t.di(o)}}else if(r.key===t.Hs){if(null!==r.newValue){const o=t.Xs(r.newValue);if(o)return t.Zs(o)}}else if(r.key===t.Qs){const o=function(l){let d=Qs.T;if(null!=l)try{const p=JSON.parse(l);yt("number"==typeof p),d=p}catch(p){yr("SharedClientState","Failed to read sequence number from WebStorage",p)}return d}(r.newValue);o!==Qs.T&&t.sequenceNumberHandler(o)}else if(r.key===t.Js)return t.syncEngine.wi()}else t.Ks.push(r)}))}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(e,t,r){const o=new AE(this.currentUser,e,t,r),l=IS(this.persistenceKey,this.currentUser,e);this.setItem(l,o.Os())}ni(e){const t=IS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}ri(e){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:e}))}ii(e,t,r){const o=Tw(this.persistenceKey,e),l=new Iu(e,t,r);this.setItem(o,l.Os())}oi(){this.setItem(this.Js,"value-not-used")}ci(e){const t=this.Ws.exec(e);return t?t[1]:null}ui(e,t){const r=this.ci(e);return r_.$s(r,t)}hi(e,t){const r=this.Gs.exec(e),o=Number(r[1]);return AE.$s(new _r(void 0!==r[2]?r[2]:null),o,t)}fi(e,t){const r=this.zs.exec(e),o=Number(r[1]);return Iu.$s(o,t)}Xs(e){return DS.$s(e)}li(e){var t=this;return(0,_e.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine._i(e.batchId,e.state,e.error);Re("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}di(e){return this.syncEngine.mi(e.targetId,e.state,e.error)}ai(e,t){const r=t?this.qs.insert(e,t):this.qs.remove(e),o=this.ti(this.qs),l=this.ti(r),d=[],p=[];return l.forEach(y=>{o.has(y)||d.push(y)}),o.forEach(y=>{l.has(y)||p.push(y)}),this.syncEngine.gi(d,p).then(()=>{this.qs=r})}Zs(e){this.qs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ti(e){let t=Xb();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class xO{constructor(){this.yi=new Iw,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.yi.Fs(e),this.pi[e]||"not-current"}updateQueryState(e,t,r){this.pi[e]=t}removeLocalQueryTarget(e){this.yi.Ms(e)}isLocalQueryTarget(e){return this.yi.activeTargetIds.has(e)}clearQueryState(e){delete this.pi[e]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(e){return this.yi.activeTargetIds.has(e)}start(){return this.yi=new Iw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class DF{Ti(e){}shutdown(){}}class SE{constructor(){this.Ei=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ti(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ai)}Ii(){Re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Ri(){Re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const PO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class NO{constructor(e){this.vi=e.vi,this.Vi=e.Vi}Si(e){this.Di=e}Ci(e){this.Ni=e}onMessage(e){this.xi=e}close(){this.Vi()}send(e){this.vi(e)}ki(){this.Di()}$i(e){this.Ni(e)}Oi(e){this.xi(e)}}class MO extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Fi=(e.ssl?"https":"http")+"://"+e.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(e,t,r,o){const l=this.Bi(e,t);Re("RestConnection","Sending: ",l,r);const d={};return this.Ui(d,o),this.qi(e,l,d,r).then(p=>(Re("RestConnection","Received: ",p),p),p=>{throw Fm("RestConnection",`${e} failed with error: `,p,"url: ",l,"request:",r),p})}Ki(e,t,r,o){return this.Li(e,t,r,o)}Ui(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+mp,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(const r in t.authHeaders)t.authHeaders.hasOwnProperty(r)&&(e[r]=t.authHeaders[r])}Bi(e,t){return`${this.Fi}/v1/${t}:${PO[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}qi(e,t,r,o){return new Promise((l,d)=>{const p=new xM;p.listenOnce(oF.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case xb.NO_ERROR:const b=p.getResponseJson();Re("Connection","XHR received:",JSON.stringify(b)),l(b);break;case xb.TIMEOUT:Re("Connection",'RPC "'+e+'" timed out'),d(new Ne(ge.DEADLINE_EXCEEDED,"Request time out"));break;case xb.HTTP_ERROR:const D=p.getStatus();if(Re("Connection",'RPC "'+e+'" failed with status:',D,"response text:",p.getResponseText()),D>0){const S=p.getResponseJson().error;if(S&&S.status&&S.message){const O=function(F){const $=F.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf($)>=0?$:ge.UNKNOWN}(S.status);d(new Ne(O,S.message))}else d(new Ne(ge.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new Ne(ge.UNAVAILABLE,"Connection failed."));break;default:nt()}}finally{Re("Connection",'RPC "'+e+'" completed.')}});const y=JSON.stringify(o);p.send(t,"POST",y,r,15)})}ji(e,t){const r=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=PA(),l=Sb(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new SM({})),this.Ui(d.initMessageHeaders,t),(0,L.uI)()||(0,L.b$)()||(0,L.d)()||(0,L.w1)()||(0,L.Mn)()||(0,L.ru)()||(d.httpHeadersOverwriteParam="$httpHeaders");const p=r.join("");Re("Connection","Creating WebChannel: "+p,d);const y=o.createWebChannel(p,d);let b=!1,D=!1;const S=new NO({vi:F=>{D?Re("Connection","Not sending because WebChannel is closed:",F):(b||(Re("Connection","Opening WebChannel transport."),y.open(),b=!0),Re("Connection","WebChannel sending:",F),y.send(F))},Vi:()=>y.close()}),O=(F,$,ie)=>{F.listen($,Ee=>{try{ie(Ee)}catch(ke){setTimeout(()=>{throw ke},0)}})};return O(y,qv.EventType.OPEN,()=>{D||Re("Connection","WebChannel transport opened.")}),O(y,qv.EventType.CLOSE,()=>{D||(D=!0,Re("Connection","WebChannel transport closed"),S.$i())}),O(y,qv.EventType.ERROR,F=>{D||(D=!0,Fm("Connection","WebChannel transport errored:",F),S.$i(new Ne(ge.UNAVAILABLE,"The operation could not be completed")))}),O(y,qv.EventType.MESSAGE,F=>{var $;if(!D){const ie=F.data[0];yt(!!ie);const Ee=ie,ke=Ee.error||(null===($=Ee[0])||void 0===$?void 0:$.error);if(ke){Re("Connection","WebChannel received error:",ke);const Ze=ke.status;let ft=function(Dn){const Ir=vr[Dn];if(void 0!==Ir)return Qb(Ir)}(Ze),st=ke.message;void 0===ft&&(ft=ge.INTERNAL,st="Unknown error status: "+Ze+" with message "+ke.message),D=!0,S.$i(new Ne(ft,st)),y.close()}else Re("Connection","WebChannel received:",ie),S.Oi(ie)}}),O(l,AM.STAT_EVENT,F=>{F.stat===NA.PROXY?Re("Connection","Detected buffering proxy"):F.stat===NA.NOPROXY&&Re("Connection","Detected no buffering proxy")}),setTimeout(()=>{S.ki()},0),S}}function OO(){return"undefined"!=typeof window?window:null}function xE(){return"undefined"!=typeof document?document:null}function i_(n){return new XM(n,!0)}class Dw{constructor(e,t,r=1e3,o=1.5,l=6e4){this.Oe=e,this.timerId=t,this.Qi=r,this.Wi=o,this.Gi=l,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(e){this.cancel();const t=Math.floor(this.zi+this.Zi()),r=Math.max(0,Date.now()-this.Ji),o=Math.max(0,t-r);o>0&&Re("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.zi} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,o,()=>(this.Ji=Date.now(),e())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class Lo{constructor(e,t,r,o,l,d,p){this.Oe=e,this.er=r,this.nr=o,this.sr=l,this.credentialsProvider=d,this.listener=p,this.state=0,this.ir=0,this.rr=null,this.cr=null,this.stream=null,this.ar=new Dw(e,t)}ur(){return 1===this.state||5===this.state||this.hr()}hr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.lr()}stop(){var e=this;return(0,_e.Z)(function*(){e.ur()&&(yield e.close(0))})()}dr(){this.state=0,this.ar.reset()}wr(){this.hr()&&null===this.rr&&(this.rr=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this._r()))}mr(e){this.gr(),this.stream.send(e)}_r(){var e=this;return(0,_e.Z)(function*(){if(e.hr())return e.close(0)})()}gr(){this.rr&&(this.rr.cancel(),this.rr=null)}yr(){this.cr&&(this.cr.cancel(),this.cr=null)}close(e,t){var r=this;return(0,_e.Z)(function*(){r.gr(),r.yr(),r.ar.cancel(),r.ir++,4!==e?r.ar.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(yr(t.toString()),yr("Using maximum backoff delay to prevent overloading the backend."),r.ar.Yi()):t&&t.code===ge.UNAUTHENTICATED&&3!==r.state&&r.credentialsProvider.invalidateToken(),null!==r.stream&&(r.pr(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ci(t)})()}pr(){}auth(){this.state=1;const e=this.Tr(this.ir),t=this.ir;this.credentialsProvider.getToken().then(r=>{this.ir===t&&this.Er(r)},r=>{e(()=>{const o=new Ne(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ir(o)})})}Er(e){const t=this.Tr(this.ir);this.stream=this.Ar(e),this.stream.Si(()=>{t(()=>(this.state=2,this.cr=this.Oe.enqueueAfterDelay(this.nr,1e4,()=>(this.hr()&&(this.state=3),Promise.resolve())),this.listener.Si()))}),this.stream.Ci(r=>{t(()=>this.Ir(r))}),this.stream.onMessage(r=>{t(()=>this.onMessage(r))})}lr(){var e=this;this.state=5,this.ar.Xi((0,_e.Z)(function*(){e.state=0,e.start()}))}Ir(e){return Re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Tr(e){return t=>{this.Oe.enqueueAndForget(()=>this.ir===e?t():(Re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class AF extends Lo{constructor(e,t,r,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,l),this.N=o}Ar(e){return this.sr.ji("Listen",e)}onMessage(e){this.ar.reset();const t=function(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:nt(),o=e.targetChange.targetIds||[],l=function(y,b){return y.D?(yt(void 0===b||"string"==typeof b),li.fromBase64String(b||"")):(yt(void 0===b||b instanceof Uint8Array),li.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&function(y){const b=void 0===y.code?ge.UNKNOWN:Qb(y.code);return new Ne(b,y.message||"")}(d);t=new KM(r,o,l,p||null)}else if("documentChange"in e){const r=e.documentChange,o=ml(n,r.document.name),l=Di(r.document.updateTime),d=new Ii({mapValue:{fields:r.document.fields}}),p=kn.newFoundDocument(o,l,d);t=new ew(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,o=ml(n,r.document),l=r.readTime?Di(r.readTime):it.min(),d=kn.newNoDocument(o,l);t=new ew([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=ml(n,r.document);t=new ew([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return nt();{const r=e.filter,l=new KA(r.count||0);t=new WM(r.targetId,l)}}var y;return t}(this.N,e),r=function(o){if(!("targetChange"in o))return it.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?it.min():l.readTime?Di(l.readTime):it.min()}(e);return this.listener.Rr(t,r)}br(e){const t={};t.database=pE(this.N),t.addTarget=function(o,l){let d;const p=l.target;return d=Qv(p)?{documents:nS(o,p)}:{query:gE(o,p)},d.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?d.resumeToken=QA(o,l.resumeToken):l.snapshotVersion.compareTo(it.min())>0&&(d.readTime=zm(o,l.snapshotVersion.toTimestamp())),d}(this.N,e);const r=function(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return nt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.mr(t)}Pr(e){const t={};t.database=pE(this.N),t.removeTarget=e,this.mr(t)}}class SS extends Lo{constructor(e,t,r,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,l),this.N=o,this.vr=!1}get Vr(){return this.vr}start(){this.vr=!1,this.lastStreamToken=void 0,super.start()}pr(){this.vr&&this.Sr([])}Ar(e){return this.sr.ji("Write",e)}onMessage(e){if(yt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.vr){this.ar.reset();const t=function(n,e){return n&&n.length>0?(yt(void 0!==e),n.map(t=>function(r,o){let l=Di(r.updateTime?r.updateTime:o);return l.isEqual(it.min())&&(l=Di(o)),new zb(l,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Di(e.commitTime);return this.listener.Dr(r,t)}return yt(!e.writeResults||0===e.writeResults.length),this.vr=!0,this.listener.Cr()}Nr(){const e={};e.database=pE(this.N),this.mr(e)}Sr(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Cu(this.N,r))};this.mr(t)}}class RO extends class{}{constructor(e,t,r){super(),this.credentials=e,this.sr=t,this.N=r,this.kr=!1}$r(){if(this.kr)throw new Ne(ge.FAILED_PRECONDITION,"The client has already been terminated.")}Li(e,t,r){return this.$r(),this.credentials.getToken().then(o=>this.sr.Li(e,t,r,o)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ge.UNAUTHENTICATED&&this.credentials.invalidateToken(),o):new Ne(ge.UNKNOWN,o.toString())})}Ki(e,t,r){return this.$r(),this.credentials.getToken().then(o=>this.sr.Ki(e,t,r,o)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ge.UNAUTHENTICATED&&this.credentials.invalidateToken(),o):new Ne(ge.UNKNOWN,o.toString())})}terminate(){this.kr=!0}}class xS{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Or=0,this.Fr=null,this.Mr=!0}Lr(){0===this.Or&&(this.Br("Unknown"),this.Fr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Fr=null,this.Ur("Backend didn't respond within 10 seconds."),this.Br("Offline"),Promise.resolve())))}qr(e){"Online"===this.state?this.Br("Unknown"):(this.Or++,this.Or>=1&&(this.Kr(),this.Ur(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Br("Offline")))}set(e){this.Kr(),this.Or=0,"Online"===e&&(this.Mr=!1),this.Br(e)}Br(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Ur(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Mr?(yr(t),this.Mr=!1):Re("OnlineStateTracker",t)}Kr(){null!==this.Fr&&(this.Fr.cancel(),this.Fr=null)}}class PS{constructor(e,t,r,o,l){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.jr=[],this.Qr=new Map,this.Wr=new Set,this.Gr=[],this.zr=l,this.zr.Ti(p=>{r.enqueueAndForget((0,_e.Z)(function*(){var y;Du(d)&&(Re("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,_e.Z)(function*(b){const D=Le(b);D.Wr.add(4),yield qc(D),D.Hr.set("Unknown"),D.Wr.delete(4),yield Bp(D)}),function(b){return y.apply(this,arguments)})(d))}))}),this.Hr=new xS(r,o)}}function Bp(n){return s_.apply(this,arguments)}function s_(){return(s_=(0,_e.Z)(function*(n){if(Du(n))for(const e of n.Gr)yield e(!0)})).apply(this,arguments)}function qc(n){return o_.apply(this,arguments)}function o_(){return(o_=(0,_e.Z)(function*(n){for(const e of n.Gr)yield e(!1)})).apply(this,arguments)}function Eh(n,e){const t=Le(n);t.Qr.has(e.targetId)||(t.Qr.set(e.targetId,e),xw(t)?Sw(t):jp(t).hr()&&PE(t,e))}function Zc(n,e){const t=Le(n),r=jp(t);t.Qr.delete(e),r.hr()&&Aw(t,e),0===t.Qr.size&&(r.hr()?r.wr():Du(t)&&t.Hr.set("Unknown"))}function PE(n,e){n.Jr.Y(e.targetId),jp(n).br(e)}function Aw(n,e){n.Jr.Y(e),jp(n).Pr(e)}function Sw(n){n.Jr=new hF({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Tt:e=>n.Qr.get(e)||null}),jp(n).start(),n.Hr.Lr()}function xw(n){return Du(n)&&!jp(n).ur()&&n.Qr.size>0}function Du(n){return 0===Le(n).Wr.size}function NS(n){n.Jr=void 0}function kO(n){return Pw.apply(this,arguments)}function Pw(){return(Pw=(0,_e.Z)(function*(n){n.Qr.forEach((e,t)=>{PE(n,e)})})).apply(this,arguments)}function Nw(n,e){return Mw.apply(this,arguments)}function Mw(){return(Mw=(0,_e.Z)(function*(n,e){NS(n),xw(n)?(n.Hr.qr(e),Sw(n)):n.Hr.set("Unknown")})).apply(this,arguments)}function fs(n,e,t){return Ch.apply(this,arguments)}function Ch(){return(Ch=(0,_e.Z)(function*(n,e,t){if(n.Hr.set("Online"),e instanceof KM&&2===e.state&&e.cause)try{yield(r=(0,_e.Z)(function*(o,l){const d=l.cause;for(const p of l.targetIds)o.Qr.has(p)&&(yield o.remoteSyncer.rejectListen(p,d),o.Qr.delete(p),o.Jr.removeTarget(p))}),function(o,l){return r.apply(this,arguments)})(n,e)}catch(r){Re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield bh(n,r)}else if(e instanceof ew?n.Jr.rt(e):e instanceof WM?n.Jr.ft(e):n.Jr.at(e),!t.isEqual(it.min()))try{const r=yield t_(n.localStore);t.compareTo(r)>=0&&(yield function(o,l){const d=o.Jr._t(l);return d.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const b=o.Qr.get(y);b&&o.Qr.set(y,b.withResumeToken(p.resumeToken,l))}}),d.targetMismatches.forEach(p=>{const y=o.Qr.get(p);if(!y)return;o.Qr.set(p,y.withResumeToken(li.EMPTY_BYTE_STRING,y.snapshotVersion)),Aw(o,p);const b=new Bc(y.target,p,1,y.sequenceNumber);PE(o,b)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Re("RemoteStore","Failed to raise snapshot:",r),yield bh(n,r)}var r})).apply(this,arguments)}function bh(n,e,t){return NE.apply(this,arguments)}function NE(){return(NE=(0,_e.Z)(function*(n,e,t){if(!mh(e))throw e;n.Wr.add(1),yield qc(n),n.Hr.set("Offline"),t||(t=()=>t_(n.localStore)),n.asyncQueue.enqueueRetryable((0,_e.Z)(function*(){Re("RemoteStore","Retrying IndexedDB access"),yield t(),n.Wr.delete(1),yield Bp(n)}))})).apply(this,arguments)}function a_(n,e){return e().catch(t=>bh(n,t,e))}function Gc(n){return ME.apply(this,arguments)}function ME(){return(ME=(0,_e.Z)(function*(n){const e=Le(n),t=yl(e);let r=e.jr.length>0?e.jr[e.jr.length-1].batchId:-1;for(;OE(e);)try{const o=yield wF(e.localStore,r);if(null===o){0===e.jr.length&&t.wr();break}r=o.batchId,FO(e,o)}catch(o){yield bh(e,o)}MS(e)&&OS(e)})).apply(this,arguments)}function OE(n){return Du(n)&&n.jr.length<10}function FO(n,e){n.jr.push(e);const t=yl(n);t.hr()&&t.Vr&&t.Sr(e.mutations)}function MS(n){return Du(n)&&!yl(n).ur()&&n.jr.length>0}function OS(n){yl(n).start()}function LO(n){return RE.apply(this,arguments)}function RE(){return(RE=(0,_e.Z)(function*(n){yl(n).Nr()})).apply(this,arguments)}function VO(n){return Ow.apply(this,arguments)}function Ow(){return(Ow=(0,_e.Z)(function*(n){const e=yl(n);for(const t of n.jr)e.Sr(t.mutations)})).apply(this,arguments)}function UO(n,e,t){return _l.apply(this,arguments)}function _l(){return(_l=(0,_e.Z)(function*(n,e,t){const r=n.jr.shift(),o=Jm.from(r,e,t);yield a_(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Gc(n)})).apply(this,arguments)}function l_(n,e){return u_.apply(this,arguments)}function u_(){return(u_=(0,_e.Z)(function*(n,e){var t;e&&yl(n).Vr&&(yield(t=(0,_e.Z)(function*(r,o){if(YA(l=o.code)&&l!==ge.ABORTED){const d=r.jr.shift();yl(r).dr(),yield a_(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield Gc(r)}var l}),function(r,o){return t.apply(this,arguments)})(n,e)),MS(n)&&OS(n)})).apply(this,arguments)}function Rw(n,e){return kw.apply(this,arguments)}function kw(){return(kw=(0,_e.Z)(function*(n,e){const t=Le(n);e?(t.Wr.delete(2),yield Bp(t)):e||(t.Wr.add(2),yield qc(t),t.Hr.set("Unknown"))})).apply(this,arguments)}function jp(n){return n.Yr||(n.Yr=function(e,t,r){const o=Le(e);return o.$r(),new AF(t,o.sr,o.credentials,o.N,r)}(n.datastore,n.asyncQueue,{Si:kO.bind(null,n),Ci:Nw.bind(null,n),Rr:fs.bind(null,n)}),n.Gr.push(function(){var e=(0,_e.Z)(function*(t){t?(n.Yr.dr(),xw(n)?Sw(n):n.Hr.set("Unknown")):(yield n.Yr.stop(),NS(n))});return function(t){return e.apply(this,arguments)}}())),n.Yr}function yl(n){return n.Xr||(n.Xr=function(e,t,r){const o=Le(e);return o.$r(),new SS(t,o.sr,o.credentials,o.N,r)}(n.datastore,n.asyncQueue,{Si:LO.bind(null,n),Ci:l_.bind(null,n),Cr:VO.bind(null,n),Dr:UO.bind(null,n)}),n.Gr.push(function(){var e=(0,_e.Z)(function*(t){t?(n.Xr.dr(),yield Gc(n)):(yield n.Xr.stop(),n.jr.length>0&&(Re("RemoteStore",`Stopping write stream with ${n.jr.length} pending writes`),n.jr=[]))});return function(t){return e.apply(this,arguments)}}())),n.Xr}class Fw{constructor(e,t,r,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=l,this.deferred=new wi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,l){const d=Date.now()+r,p=new Fw(e,t,d,o,l);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wh(n,e){if(yr("AsyncQueue",`${e}: ${n}`),mh(n))return new Ne(ge.UNAVAILABLE,`${e}: ${n}`);throw n}class Th{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Qe.comparator(t.key,r.key):(t,r)=>Qe.comparator(t.key,r.key),this.keyedMap=dE(),this.sortedSet=new Yr(this.comparator)}static emptySet(e){return new Th(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Th)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Th;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class RS{constructor(){this.Zr=new Yr(Qe.comparator)}track(e){const t=e.doc.key,r=this.Zr.get(t);r?0!==e.type&&3===r.type?this.Zr=this.Zr.insert(t,e):3===e.type&&1!==r.type?this.Zr=this.Zr.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Zr=this.Zr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Zr=this.Zr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Zr=this.Zr.remove(t):1===e.type&&2===r.type?this.Zr=this.Zr.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Zr=this.Zr.insert(t,{type:2,doc:e.doc}):nt():this.Zr=this.Zr.insert(t,e)}eo(){const e=[];return this.Zr.inorderTraversal((t,r)=>{e.push(r)}),e}}class Hp{constructor(e,t,r,o,l,d,p,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=y}static fromInitialDocuments(e,t,r,o){const l=[];return t.forEach(d=>{l.push({type:0,doc:d})}),new Hp(e,t,Th.emptySet(t),l,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$m(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class BO{constructor(){this.no=void 0,this.listeners=[]}}class Au{constructor(){this.queries=new ir(e=>qb(e),$m),this.onlineState="Unknown",this.so=new Set}}function Ih(n,e){return zc.apply(this,arguments)}function zc(){return(zc=(0,_e.Z)(function*(n,e){const t=Le(n),r=e.query;let o=!1,l=t.queries.get(r);if(l||(o=!0,l=new BO),o)try{l.no=yield t.onListen(r)}catch(d){const p=wh(d,`Initialization of query '${sE(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,l),l.listeners.push(e),e.io(t.onlineState),l.no&&e.ro(l.no)&&Lw(t)})).apply(this,arguments)}function $p(n,e){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,_e.Z)(function*(n,e){const t=Le(n),r=e.query;let o=!1;const l=t.queries.get(r);if(l){const d=l.listeners.indexOf(e);d>=0&&(l.listeners.splice(d,1),o=0===l.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)})).apply(this,arguments)}function jO(n,e){const t=Le(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const p of d.listeners)p.ro(o)&&(r=!0);d.no=o}}r&&Lw(t)}function HO(n,e,t){const r=Le(n),o=r.queries.get(e);if(o)for(const l of o.listeners)l.onError(t);r.queries.delete(e)}function Lw(n){n.so.forEach(e=>{e.next()})}class kE{constructor(e,t,r){this.query=e,this.oo=t,this.co=!1,this.ao=null,this.onlineState="Unknown",this.options=r||{}}ro(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Hp(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.co?this.uo(e)&&(this.oo.next(e),t=!0):this.ho(e,this.onlineState)&&(this.lo(e),t=!0),this.ao=e,t}onError(e){this.oo.error(e)}io(e){this.onlineState=e;let t=!1;return this.ao&&!this.co&&this.ho(this.ao,e)&&(this.lo(this.ao),t=!0),t}ho(e,t){return!e.fromCache||!(this.options.fo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}uo(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ao&&this.ao.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}lo(e){e=Hp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.co=!0,this.oo.next(e)}}class kS{constructor(e,t){this.payload=e,this.byteLength=t}wo(){return"metadata"in this.payload}}class Vw{constructor(e){this.N=e}zn(e){return ml(this.N,e)}Hn(e){return e.metadata.exists?nO(this.N,e.document,!1):kn.newNoDocument(this.zn(e.metadata.name),this.Jn(e.metadata.readTime))}Jn(e){return Di(e)}}class FS{constructor(e,t,r){this._o=e,this.localStore=t,this.N=r,this.queries=[],this.documents=[],this.progress=FE(e)}mo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}yo(e){const t=new Map,r=new Vw(this.N);for(const o of e)if(o.metadata.queries){const l=r.zn(o.metadata.name);for(const d of o.metadata.queries){const p=(t.get(d)||En()).add(l);t.set(d,p)}}return t}complete(){var e=this;return(0,_e.Z)(function*(){const t=yield function(n,e,t,r){return Cw.apply(this,arguments)}(e.localStore,new Vw(e.N),e.documents,e._o.id),r=e.yo(e.documents);for(const o of e.queries)yield IF(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",new IE(Object.assign({},e.progress),t)})()}}function FE(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class LS{constructor(e){this.key=e}}class VS{constructor(e){this.key=e}}class Uw{constructor(e,t){this.query=e,this.po=t,this.To=null,this.current=!1,this.Eo=En(),this.mutatedKeys=En(),this.Io=Zb(e),this.Ao=new Th(this.Io)}get Ro(){return this.po}bo(e,t){const r=t?t.Po:new RS,o=t?t.Ao:this.Ao;let l=t?t.mutatedKeys:this.mutatedKeys,d=o,p=!1;const y=tE(this.query)&&o.size===this.query.limit?o.last():null,b=nE(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((D,S)=>{const O=o.get(D),F=qm(this.query,S)?S:null,$=!!O&&this.mutatedKeys.has(O.key),ie=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let Ee=!1;O&&F?O.data.isEqual(F.data)?$!==ie&&(r.track({type:3,doc:F}),Ee=!0):this.vo(O,F)||(r.track({type:2,doc:F}),Ee=!0,(y&&this.Io(F,y)>0||b&&this.Io(F,b)<0)&&(p=!0)):!O&&F?(r.track({type:0,doc:F}),Ee=!0):O&&!F&&(r.track({type:1,doc:O}),Ee=!0,(y||b)&&(p=!0)),Ee&&(F?(d=d.add(F),l=ie?l.add(D):l.delete(D)):(d=d.delete(D),l=l.delete(D)))}),tE(this.query)||nE(this.query))for(;d.size>this.query.limit;){const D=tE(this.query)?d.last():d.first();d=d.delete(D.key),l=l.delete(D.key),r.track({type:1,doc:D})}return{Ao:d,Po:r,Ln:p,mutatedKeys:l}}vo(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Ao;this.Ao=e.Ao,this.mutatedKeys=e.mutatedKeys;const l=e.Po.eo();l.sort((b,D)=>function(S,O){const F=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nt()}};return F(S)-F(O)}(b.type,D.type)||this.Io(b.doc,D.doc)),this.Vo(r);const d=t?this.So():[],p=0===this.Eo.size&&this.current?1:0,y=p!==this.To;return this.To=p,0!==l.length||y?{snapshot:new Hp(this.query,e.Ao,o,l,e.mutatedKeys,0===p,y,!1),Do:d}:{Do:d}}io(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ao:this.Ao,Po:new RS,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{Do:[]}}Co(e){return!this.po.has(e)&&!!this.Ao.has(e)&&!this.Ao.get(e).hasLocalMutations}Vo(e){e&&(e.addedDocuments.forEach(t=>this.po=this.po.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.po=this.po.delete(t)),this.current=e.current)}So(){if(!this.current)return[];const e=this.Eo;this.Eo=En(),this.Ao.forEach(r=>{this.Co(r.key)&&(this.Eo=this.Eo.add(r.key))});const t=[];return e.forEach(r=>{this.Eo.has(r)||t.push(new VS(r))}),this.Eo.forEach(r=>{e.has(r)||t.push(new LS(r))}),t}No(e){this.po=e.Gn,this.Eo=En();const t=this.bo(e.documents);return this.applyChanges(t,!0)}xo(){return Hp.fromInitialDocuments(this.query,this.Ao,this.mutatedKeys,0===this.To)}}class Dh{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Bw{constructor(e){this.key=e,this.ko=!1}}class $O{constructor(e,t,r,o,l,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.$o={},this.Oo=new ir(p=>qb(p),$m),this.Fo=new Map,this.Mo=new Set,this.Lo=new Yr(Qe.comparator),this.Bo=new Map,this.Uo=new bw,this.qo={},this.Ko=new Map,this.jo=Fp.ie(),this.onlineState="Unknown",this.Qo=void 0}get isPrimaryClient(){return!0===this.Qo}}function qO(n,e){return US.apply(this,arguments)}function US(){return(US=(0,_e.Z)(function*(n,e){const t=h_(n);let r,o;const l=t.Oo.get(e);if(l)r=l.targetId,t.sharedClientState.addLocalQueryTarget(r),o=l.view.xo();else{const d=yield n_(t.localStore,Js(e)),p=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield BS(t,e,r,"current"===p),t.isPrimaryClient&&Eh(t.remoteStore,d)}return o})).apply(this,arguments)}function BS(n,e,t,r){return jS.apply(this,arguments)}function jS(){return(jS=(0,_e.Z)(function*(n,e,t,r){n.Wo=(D,S,O)=>{return(F=(0,_e.Z)(function*($,ie,Ee,ke){let Ze=ie.view.bo(Ee);Ze.Ln&&(Ze=yield DE($.localStore,ie.query,!1).then(({documents:Dn})=>ie.view.bo(Dn,Ze)));const ft=ke&&ke.targetChanges.get(ie.targetId),st=ie.view.applyChanges(Ze,$.isPrimaryClient,ft);return E($,ie.targetId,st.Do),st.snapshot}),function($,ie,Ee,ke){return F.apply(this,arguments)})(n,D,S,O);var F};const o=yield DE(n.localStore,e,!0),l=new Uw(e,o.Gn),d=l.bo(o.documents),p=fE.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),y=l.applyChanges(d,n.isPrimaryClient,p);E(n,t,y.Do);const b=new Dh(e,t,l);return n.Oo.set(e,b),n.Fo.has(t)?n.Fo.get(t).push(e):n.Fo.set(t,[e]),y.snapshot})).apply(this,arguments)}function SF(n,e){return jw.apply(this,arguments)}function jw(){return(jw=(0,_e.Z)(function*(n,e){const t=Le(n),r=t.Oo.get(e),o=t.Fo.get(r.targetId);if(o.length>1)return t.Fo.set(r.targetId,o.filter(l=>!$m(l,e))),void t.Oo.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Up(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Zc(t.remoteStore,r.targetId),f(t,r.targetId)}).catch(yh))):(f(t,r.targetId),yield Up(t.localStore,r.targetId,!0))})).apply(this,arguments)}function HS(){return(HS=(0,_e.Z)(function*(n,e,t){const r=f_(n);try{const o=yield function(l,d){const p=Le(l),y=nr.now(),b=d.reduce((S,O)=>S.add(O.key),En());let D;return p.persistence.runTransaction("Locally write mutations","readwrite",S=>p.Qn.Pn(S,b).next(O=>{D=O;const F=[];for(const $ of d){const ie=GA($,D.get($.key));null!=ie&&F.push(new Lc($.key,ie,Vb(ie.value.mapValue),Kr.exists(!0)))}return p.In.addMutationBatch(S,y,F,d)})).then(S=>(S.applyToLocalDocumentSet(D),{batchId:S.batchId,changes:D}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(l,d,p){let y=l.qo[l.currentUser.toKey()];y||(y=new Yr(Ht)),y=y.insert(d,p),l.qo[l.currentUser.toKey()]=y}(r,o.batchId,t),yield P(r,o.changes),yield Gc(r.remoteStore)}catch(o){const l=wh(o,"Failed to persist write");t.reject(l)}})).apply(this,arguments)}function GO(n,e){return $S.apply(this,arguments)}function $S(){return($S=(0,_e.Z)(function*(n,e){const t=Le(n);try{const r=yield vO(t.localStore,e);e.targetChanges.forEach((o,l)=>{const d=t.Bo.get(l);d&&(yt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.ko=!0:o.modifiedDocuments.size>0?yt(d.ko):o.removedDocuments.size>0&&(yt(d.ko),d.ko=!1))}),yield P(t,r,e)}catch(r){yield yh(r)}})).apply(this,arguments)}function zO(n,e,t){const r=Le(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.Oo.forEach((l,d)=>{const p=d.view.io(e);p.snapshot&&o.push(p.snapshot)}),function(l,d){const p=Le(l);p.onlineState=d;let y=!1;p.queries.forEach((b,D)=>{for(const S of D.listeners)S.io(d)&&(y=!0)}),y&&Lw(p)}(r.eventManager,e),o.length&&r.$o.Rr(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function WO(n,e,t){return qS.apply(this,arguments)}function qS(){return(qS=(0,_e.Z)(function*(n,e,t){const r=Le(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Bo.get(e),l=o&&o.key;if(l){let d=new Yr(Qe.comparator);d=d.insert(l,kn.newNoDocument(l,it.min()));const p=En().add(l),y=new hE(it.min(),new Map,new rr(Ht),d,p);yield GO(r,y),r.Lo=r.Lo.remove(l),r.Bo.delete(e),I(r)}else yield Up(r.localStore,e,!1).then(()=>f(r,e,t)).catch(yh)})).apply(this,arguments)}function xF(n,e){return ZS.apply(this,arguments)}function ZS(){return(ZS=(0,_e.Z)(function*(n,e){const t=Le(n),r=e.batch.batchId;try{const o=yield bF(t.localStore,e);h(t,r,null),u(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield P(t,o)}catch(o){yield yh(o)}})).apply(this,arguments)}function PF(n,e,t){return i.apply(this,arguments)}function i(){return(i=(0,_e.Z)(function*(n,e,t){const r=Le(n);try{const o=yield function(l,d){const p=Le(l);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let b;return p.In.lookupMutationBatch(y,d).next(D=>(yt(null!==D),b=D.keys(),p.In.removeMutationBatch(y,D))).next(()=>p.In.performConsistencyCheck(y)).next(()=>p.Qn.Pn(y,b))})}(r.localStore,e);h(r,e,t),u(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield P(r,o)}catch(o){yield yh(o)}})).apply(this,arguments)}function a(){return(a=(0,_e.Z)(function*(n,e){const t=Le(n);Du(t.remoteStore)||Re("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(l){const d=Le(l);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>d.In.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const o=t.Ko.get(r)||[];o.push(e),t.Ko.set(r,o)}catch(r){const o=wh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}})).apply(this,arguments)}function u(n,e){(n.Ko.get(e)||[]).forEach(t=>{t.resolve()}),n.Ko.delete(e)}function h(n,e,t){const r=Le(n);let o=r.qo[r.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),r.qo[r.currentUser.toKey()]=o}}function f(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Fo.get(e))n.Oo.delete(r),t&&n.$o.Go(r,t);n.Fo.delete(e),n.isPrimaryClient&&n.Uo.cs(e).forEach(r=>{n.Uo.containsKey(r)||_(n,r)})}function _(n,e){n.Mo.delete(e.path.canonicalString());const t=n.Lo.get(e);null!==t&&(Zc(n.remoteStore,t),n.Lo=n.Lo.remove(e),n.Bo.delete(t),I(n))}function E(n,e,t){for(const r of t)r instanceof LS?(n.Uo.addReference(r.key,e),w(n,r)):r instanceof VS?(Re("SyncEngine","Document no longer in limbo: "+r.key),n.Uo.removeReference(r.key,e),n.Uo.containsKey(r.key)||_(n,r.key)):nt()}function w(n,e){const t=e.key,r=t.path.canonicalString();n.Lo.get(t)||n.Mo.has(r)||(Re("SyncEngine","New document in limbo: "+t),n.Mo.add(r),I(n))}function I(n){for(;n.Mo.size>0&&n.Lo.size<n.maxConcurrentLimboResolutions;){const e=n.Mo.values().next().value;n.Mo.delete(e);const t=new Qe(an.fromString(e)),r=n.jo.next();n.Bo.set(r,new Bw(t)),n.Lo=n.Lo.insert(t,r),Eh(n.remoteStore,new Bc(Js(bp(t.path)),r,2,Qs.T))}}function P(n,e,t){return R.apply(this,arguments)}function R(){return(R=(0,_e.Z)(function*(n,e,t){const r=Le(n),o=[],l=[],d=[];var p;r.Oo.isEmpty()||(r.Oo.forEach((p,y)=>{d.push(r.Wo(y,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,b.fromCache?"not-current":"current"),o.push(b);const D=e_.kn(y.targetId,b);l.push(D)}}))}),yield Promise.all(d),r.$o.Rr(o),yield(p=(0,_e.Z)(function*(y,b){const D=Le(y);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>Se.forEach(b,O=>Se.forEach(O.Nn,F=>D.persistence.referenceDelegate.addReference(S,O.targetId,F)).next(()=>Se.forEach(O.xn,F=>D.persistence.referenceDelegate.removeReference(S,O.targetId,F)))))}catch(S){if(!mh(S))throw S;Re("LocalStore","Failed to update sequence numbers: "+S)}for(const S of b){const O=S.targetId;if(!S.fromCache){const F=D.Un.get(O),ie=F.withLastLimboFreeSnapshotVersion(F.snapshotVersion);D.Un=D.Un.insert(O,ie)}}}),function(y,b){return p.apply(this,arguments)})(r.localStore,l))})).apply(this,arguments)}function k(n,e){return Z.apply(this,arguments)}function Z(){return(Z=(0,_e.Z)(function*(n,e){const t=Le(n);if(!t.currentUser.isEqual(e)){Re("SyncEngine","User change. New user:",e.toKey());const r=yield CS(t.localStore,e);t.currentUser=e,(o=t).Ko.forEach(d=>{d.forEach(p=>{p.reject(new Ne(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Ko.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield P(t,r.Wn)}var o})).apply(this,arguments)}function Y(n,e){const t=Le(n),r=t.Bo.get(e);if(r&&r.ko)return En().add(r.key);{let o=En();const l=t.Fo.get(e);if(!l)return o;for(const d of l){const p=t.Oo.get(d);o=o.unionWith(p.view.Ro)}return o}}function ce(n,e){return te.apply(this,arguments)}function te(){return(te=(0,_e.Z)(function*(n,e){const t=Le(n),r=yield DE(t.localStore,e.query,!0),o=e.view.No(r);return t.isPrimaryClient&&E(t,e.targetId,o.Do),o})).apply(this,arguments)}function Me(n){return be.apply(this,arguments)}function be(){return(be=(0,_e.Z)(function*(n){const e=Le(n);return wS(e.localStore).then(t=>P(e,t))})).apply(this,arguments)}function et(n,e,t,r){return ct.apply(this,arguments)}function ct(){return(ct=(0,_e.Z)(function*(n,e,t,r){const o=Le(n),l=yield function(d,p){const y=Le(d),b=Le(y.In);return y.persistence.runTransaction("Lookup mutation documents","readonly",D=>b.Xt(D,p).next(S=>S?y.Qn.Pn(D,S):Se.resolve(null)))}(o.localStore,e);var p;null!==l?("pending"===t?yield Gc(o.remoteStore):"acknowledged"===t||"rejected"===t?(h(o,e,r||null),u(o,e),p=e,Le(Le(o.localStore).In).te(p)):nt(),yield P(o,l)):Re("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function br(){return(br=(0,_e.Z)(function*(n,e){const t=Le(n);if(h_(t),f_(t),!0===e&&!0!==t.Qo){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield no(t,r.toArray());t.Qo=!0,yield Rw(t.remoteStore,!0);for(const l of o)Eh(t.remoteStore,l)}else if(!1===e&&!1!==t.Qo){const r=[];let o=Promise.resolve();t.Fo.forEach((l,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(f(t,d),Up(t.localStore,d,!0))),Zc(t.remoteStore,d)}),yield o,yield no(t,r),function(l){const d=Le(l);d.Bo.forEach((p,y)=>{Zc(d.remoteStore,y)}),d.Uo.us(),d.Bo=new Map,d.Lo=new Yr(Qe.comparator)}(t),t.Qo=!1,yield Rw(t.remoteStore,!1)}})).apply(this,arguments)}function no(n,e,t){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,_e.Z)(function*(n,e,t){const r=Le(n),o=[],l=[];for(const d of e){let p;const y=r.Fo.get(d);if(y&&0!==y.length){p=yield n_(r.localStore,Js(y[0]));for(const b of y){const D=r.Oo.get(b),S=yield ce(r,D);S.snapshot&&l.push(S.snapshot)}}else{const b=yield bS(r.localStore,d);p=yield n_(r.localStore,b),yield BS(r,Sh(b),d,!1)}o.push(p)}return r.$o.Rr(l),o})).apply(this,arguments)}function Sh(n){return HA(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function qp(n){const e=Le(n);return Le(Le(e.localStore).persistence).pn()}function Zp(n,e,t,r){return c_.apply(this,arguments)}function c_(){return(c_=(0,_e.Z)(function*(n,e,t,r){const o=Le(n);if(o.Qo)Re("SyncEngine","Ignoring unexpected query state notification.");else if(o.Fo.has(e))switch(t){case"current":case"not-current":{const l=yield wS(o.localStore),d=hE.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield P(o,l,d);break}case"rejected":yield Up(o.localStore,e,!0),f(o,e,r);break;default:nt()}})).apply(this,arguments)}function Hw(n,e,t){return d_.apply(this,arguments)}function d_(){return(d_=(0,_e.Z)(function*(n,e,t){const r=h_(n);if(r.Qo){for(const o of e){if(r.Fo.has(o)){Re("SyncEngine","Adding an already active target "+o);continue}const l=yield bS(r.localStore,o),d=yield n_(r.localStore,l);yield BS(r,Sh(l),d.targetId,!1),Eh(r.remoteStore,d)}for(const o of t)r.Fo.has(o)&&(yield Up(r.localStore,o,!1).then(()=>{Zc(r.remoteStore,o),f(r,o)}).catch(yh))}})).apply(this,arguments)}function h_(n){const e=Le(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=GO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Y.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WO.bind(null,e),e.$o.Rr=jO.bind(null,e.eventManager),e.$o.Go=HO.bind(null,e.eventManager),e}function f_(n){const e=Le(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=PF.bind(null,e),e}class NF{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,_e.Z)(function*(){t.N=i_(e.databaseInfo.databaseId),t.sharedClientState=t.Ho(e),t.persistence=t.Jo(e),yield t.persistence.start(),t.gcScheduler=t.Yo(e),t.localStore=t.Xo(e)})()}Yo(e){return null}Xo(e){return yO(this.persistence,new _w,e.initialUser,this.N)}Jo(e){return new DO(ww.Ns,this.N)}Ho(e){return new xO}terminate(){var e=this;return(0,_e.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class MF extends NF{constructor(e,t,r){super(),this.Zo=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e),yield function(n){return Ew.apply(this,arguments)}(r.localStore),yield r.Zo.initialize(r,e),yield f_(r.Zo.syncEngine),yield Gc(r.Zo.remoteStore),yield r.persistence.nn(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Xo(e){return yO(this.persistence,new _w,e.initialUser,this.N)}Yo(e){return new EF(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Jo(e){const t=mw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ns.withCacheSize(this.cacheSizeBytes):Ns.DEFAULT;return new TE(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,OO(),xE(),this.N,this.sharedClientState,!!this.forceOwnership)}Ho(e){return new xO}}class uB extends MF{constructor(e,t){super(e,t,!1),this.Zo=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e);const o=r.Zo.syncEngine;r.sharedClientState instanceof AS&&(r.sharedClientState.syncEngine={_i:et.bind(null,o),mi:Zp.bind(null,o),gi:Hw.bind(null,o),pn:qp.bind(null,o),wi:Me.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.nn(function(){var l=(0,_e.Z)(function*(d){yield function(n,e){return br.apply(this,arguments)}(r.Zo.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return l.apply(this,arguments)}}())})()}Ho(e){const t=OO();if(!AS.bt(t))throw new Ne(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=mw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new AS(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class KO{initialize(e,t){var r=this;return(0,_e.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>zO(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=k.bind(null,r.syncEngine),yield Rw(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Au}createDatastore(e){const t=i_(e.databaseInfo.databaseId),r=new MO(e.databaseInfo);return new RO(e.credentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,l=p=>zO(this.syncEngine,p,0),d=SE.bt()?new SE:new DF,new PS(t,r,o,l,d);var t,r,o,l,d}createSyncEngine(e,t){return function(r,o,l,d,p,y,b){const D=new $O(r,o,l,d,p,y);return b&&(D.Qo=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,_e.Z)(function*(t){const r=Le(t);Re("RemoteStore","RemoteStore shutting down."),r.Wr.add(5),yield qc(r),r.zr.shutdown(),r.Hr.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function OF(n,e=10240){let t=0;return{read:()=>(0,_e.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,_e.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class GS{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.tc(this.observer.next,e)}error(e){this.observer.error?this.tc(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}ec(){this.muted=!0}tc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class cB{constructor(e,t){this.nc=e,this.N=t,this.metadata=new wi,this.buffer=new Uint8Array,this.sc=new TextDecoder("utf-8"),this.ic().then(r=>{r&&r.wo()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.nc.cancel()}getMetadata(){var e=this;return(0,_e.Z)(function*(){return e.metadata.promise})()}zo(){var e=this;return(0,_e.Z)(function*(){return yield e.getMetadata(),e.ic()})()}ic(){var e=this;return(0,_e.Z)(function*(){const t=yield e.rc();if(null===t)return null;const r=e.sc.decode(t),o=Number(r);isNaN(o)&&e.oc(`length string (${r}) is not valid number`);const l=yield e.cc(o);return new kS(JSON.parse(l),t.length+o)})()}ac(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}rc(){var e=this;return(0,_e.Z)(function*(){for(;e.ac()<0&&!(yield e.uc()););if(0===e.buffer.length)return null;const t=e.ac();t<0&&e.oc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}cc(e){var t=this;return(0,_e.Z)(function*(){for(;t.buffer.length<e;)(yield t.uc())&&t.oc("Reached the end of bundle when more is expected.");const r=t.sc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}oc(e){throw this.nc.cancel(),new Error(`Invalid bundle format: ${e}`)}uc(){var e=this;return(0,_e.Z)(function*(){const t=yield e.nc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class dB{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,_e.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ne(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,_e.Z)(function*(l,d){const p=Le(l),y=pE(p.N)+"/documents",b={documents:d.map(F=>Wm(p.N,F))},D=yield p.Ki("BatchGetDocuments",y,b),S=new Map;D.forEach(F=>{const $=function(n,e){return"found"in e?function(t,r){yt(!!r.found);const o=ml(t,r.found.name),l=Di(r.found.updateTime),d=new Ii({mapValue:{fields:r.found.fields}});return kn.newFoundDocument(o,l,d)}(n,e):"missing"in e?function(t,r){yt(!!r.missing),yt(!!r.readTime);const o=ml(t,r.missing),l=Di(r.readTime);return kn.newNoDocument(o,l)}(n,e):nt()}(p.N,F);S.set($.key.toString(),$)});const O=[];return d.forEach(F=>{const $=S.get(F.toString());yt(!!$),O.push($)}),O}),function(l,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new xp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_e.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const l=Qe.fromPath(o);e.mutations.push(new Yb(l,e.precondition(l)))}),yield(r=(0,_e.Z)(function*(o,l){const d=Le(o),p=pE(d.N)+"/documents",y={writes:l.map(b=>Cu(d.N,b))};yield d.Li("Commit",p,y)}),function(o,l){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw nt();t=it.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ne(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Kr.updateTime(t):Kr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(it.min()))throw new Ne(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Kr.updateTime(t)}return Kr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class hB{constructor(e,t,r,o){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=o,this.hc=5,this.ar=new Dw(this.asyncQueue,"transaction_retry")}run(){this.hc-=1,this.lc()}lc(){var e=this;this.ar.Xi((0,_e.Z)(function*(){const t=new dB(e.datastore),r=e.fc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(l=>{e.dc(l)}))}).catch(o=>{e.dc(o)})}))}fc(e){try{const t=this.updateFunction(e);return!Oc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}dc(e){this.hc>0&&this.wc(e)?(this.hc-=1,this.asyncQueue.enqueueAndForget(()=>(this.lc(),Promise.resolve()))):this.deferred.reject(e)}wc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!YA(t)}return!1}}class fB{constructor(e,t,r){var o=this;this.credentials=e,this.asyncQueue=t,this.databaseInfo=r,this.user=_r.UNAUTHENTICATED,this.clientId=OA.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(t,function(){var l=(0,_e.Z)(function*(d){Re("FirestoreClient","Received user=",d.uid),yield o.credentialListener(d),o.user=d});return function(d){return l.apply(this,arguments)}}())}getConfiguration(){var e=this;return(0,_e.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,credentials:e.credentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.credentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ne(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new wi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.credentials.shutdown(),t.resolve()}catch(r){const o=wh(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function RF(n,e){return YO.apply(this,arguments)}function YO(){return(YO=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Re("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,_e.Z)(function*(l){r.isEqual(l)||(yield CS(e.localStore,l),r=l)});return function(l){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e})).apply(this,arguments)}function kF(n,e){return QO.apply(this,arguments)}function QO(){return(QO=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield JO(n);Re("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>{return(l=(0,_e.Z)(function*(d,p){const y=Le(d);y.asyncQueue.verifyOperationInProgress(),Re("RemoteStore","RemoteStore received new credentials");const b=Du(y);y.Wr.add(3),yield qc(y),b&&y.Hr.set("Unknown"),yield y.remoteSyncer.handleCredentialChange(p),y.Wr.delete(3),yield Bp(y)}),function(d,p){return l.apply(this,arguments)})(e.remoteStore,o);var l}),n.onlineComponents=e})).apply(this,arguments)}function JO(n){return XO.apply(this,arguments)}function XO(){return(XO=(0,_e.Z)(function*(n){return n.offlineComponents||(Re("FirestoreClient","Using default OfflineComponentProvider"),yield RF(n,new NF)),n.offlineComponents})).apply(this,arguments)}function zS(n){return eR.apply(this,arguments)}function eR(){return(eR=(0,_e.Z)(function*(n){return n.onlineComponents||(Re("FirestoreClient","Using default OnlineComponentProvider"),yield kF(n,new KO)),n.onlineComponents})).apply(this,arguments)}function FF(n){return JO(n).then(e=>e.persistence)}function tR(n){return JO(n).then(e=>e.localStore)}function LF(n){return zS(n).then(e=>e.remoteStore)}function nR(n){return zS(n).then(e=>e.syncEngine)}function LE(n){return rR.apply(this,arguments)}function rR(){return(rR=(0,_e.Z)(function*(n){const e=yield zS(n),t=e.eventManager;return t.onListen=qO.bind(null,e.syncEngine),t.onUnlisten=SF.bind(null,e.syncEngine),t})).apply(this,arguments)}function VF(n,e,t={}){const r=new wi;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(o,l,d,p,y){const b=new GS({next:S=>{l.enqueueAndForget(()=>$p(o,D));const O=S.docs.has(d);!O&&S.fromCache?y.reject(new Ne(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&S.fromCache&&p&&"server"===p.source?y.reject(new Ne(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(S)},error:S=>y.reject(S)}),D=new kE(bp(d.path),b,{includeMetadataChanges:!0,fo:!0});return Ih(o,D)}(yield LE(n),n.asyncQueue,e,t,r)})),r.promise}function UF(n,e,t={}){const r=new wi;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(o,l,d,p,y){const b=new GS({next:S=>{l.enqueueAndForget(()=>$p(o,D)),S.fromCache&&"server"===p.source?y.reject(new Ne(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),D=new kE(d,b,{includeMetadataChanges:!0,fo:!0});return Ih(o,D)}(yield LE(n),n.asyncQueue,e,t,r)})),r.promise}class bB{constructor(e,t,r,o,l,d,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.useFetchStreams=y}}class VE{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof VE&&e.projectId===this.projectId&&e.database===this.database}}const BF=new Map;function iR(n,e,t){if(!t)throw new Ne(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function jF(n,e,t,r){if(!0===e&&!0===r)throw new Ne(ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function HF(n){if(!Qe.isDocumentKey(n))throw new Ne(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function $F(n){if(Qe.isDocumentKey(n))throw new Ne(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function WS(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":nt()}function ln(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=WS(n);throw new Ne(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function qF(n,e){if(e<=0)throw new Ne(ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class ZF{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ne(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ne(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,jF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $w{constructor(e,t){this._credentials=t,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ZF({}),this._settingsFrozen=!1,e instanceof VE?this._databaseId=e:(this._app=e,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new Ne(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new VE(r.options.projectId)}(e))}get app(){if(!this._app)throw new Ne(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ne(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ZF(e),void 0!==e.credentials&&(this._credentials=function(t){if(!t)return new aF;switch(t.type){case"gapi":const r=t.client;return yt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new RM(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ne(ge.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=BF.get(e);t&&(Re("ComponentProvider","Removing Datastore"),BF.delete(e),t.terminate())}(this),Promise.resolve()}}class sr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Kc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sr(this.firestore,e,this._key)}}class Ms{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ms(this.firestore,e,this._query)}}class Kc extends Ms{constructor(e,t,r){super(e,t,bp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sr(this.firestore,null,new Qe(e))}withConverter(e){return new Kc(this.firestore,e,this._path)}}function GF(n,e,...t){if(n=(0,L.m9)(n),iR("collection","path",e),n instanceof $w){const r=an.fromString(e,...t);return $F(r),new Kc(n,null,r)}{if(!(n instanceof sr||n instanceof Kc))throw new Ne(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(an.fromString(e,...t));return $F(r),new Kc(n.firestore,null,r)}}function KS(n,e,...t){if(n=(0,L.m9)(n),1===arguments.length&&(e=OA.I()),iR("doc","path",e),n instanceof $w){const r=an.fromString(e,...t);return HF(r),new sr(n,null,new Qe(r))}{if(!(n instanceof sr||n instanceof Kc))throw new Ne(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(an.fromString(e,...t));return HF(r),new sr(n.firestore,n instanceof Kc?n.converter:null,new Qe(r))}}function zF(n,e){return n=(0,L.m9)(n),e=(0,L.m9)(e),(n instanceof sr||n instanceof Kc)&&(e instanceof sr||e instanceof Kc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function WF(n,e){return n=(0,L.m9)(n),e=(0,L.m9)(e),n instanceof Ms&&e instanceof Ms&&n.firestore===e.firestore&&$m(n._query,e._query)&&n.converter===e.converter}class IB{constructor(){this._c=Promise.resolve(),this.mc=[],this.gc=!1,this.yc=[],this.Tc=null,this.Ec=!1,this.Ic=!1,this.Ac=[],this.ar=new Dw(this,"async_queue_retry"),this.Rc=()=>{const t=xE();t&&Re("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ar.tr()};const e=xE();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Rc)}get isShuttingDown(){return this.gc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.bc(),this.Pc(e)}enterRestrictedMode(e){if(!this.gc){this.gc=!0,this.Ic=e||!1;const t=xE();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Rc)}}enqueue(e){if(this.bc(),this.gc)return new Promise(()=>{});const t=new wi;return this.Pc(()=>this.gc&&this.Ic?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.mc.push(e),this.vc()))}vc(){var e=this;return(0,_e.Z)(function*(){if(0!==e.mc.length){try{yield e.mc[0](),e.mc.shift(),e.ar.reset()}catch(t){if(!mh(t))throw t;Re("AsyncQueue","Operation failed with retryable error: "+t)}e.mc.length>0&&e.ar.Xi(()=>e.vc())}})()}Pc(e){const t=this._c.then(()=>(this.Ec=!0,e().catch(r=>{throw this.Tc=r,this.Ec=!1,yr("INTERNAL UNHANDLED ERROR: ",function(l){let d=l.message||"";return l.stack&&(d=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),d}(r)),r}).then(r=>(this.Ec=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.bc(),this.Ac.indexOf(e)>-1&&(t=0);const o=Fw.createAndSchedule(this,e,t,r,l=>this.Vc(l));return this.yc.push(o),o}bc(){this.Tc&&nt()}verifyOperationInProgress(){}Sc(){var e=this;return(0,_e.Z)(function*(){let t;do{t=e._c,yield t}while(t!==e._c)})()}Dc(e){for(const t of this.yc)if(t.timerId===e)return!0;return!1}Cc(e){return this.Sc().then(()=>{this.yc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.yc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Sc()})}Nc(e){this.Ac.push(e)}Vc(e){const t=this.yc.indexOf(e);this.yc.splice(t,1)}}function sR(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class DB{constructor(){this._progressObserver={},this._taskCompletionResolver=new wi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class wr extends $w{constructor(e,t){super(e,t),this.type="firestore",this._queue=new IB,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||KF(this),this._firestoreClient.terminate()}}function Ai(n){return n._firestoreClient||KF(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function KF(n){var e;const t=n._freezeSettings(),r=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new bB(n._databaseId,l,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var l,p;n._firestoreClient=new fB(n._credentials,n._queue,r)}function YF(n,e,t){const r=new wi;return n.asyncQueue.enqueue((0,_e.Z)(function*(){try{yield RF(n,t),yield kF(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(l=o).name?l.code===ge.FAILED_PRECONDITION||l.code===ge.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var l})).then(()=>r.promise)}function QF(n){if(n._initialized||n._terminated)throw new Ne(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class xh{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ne(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ai(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Yc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yc(li.fromBase64String(e))}catch(t){throw new Ne(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Yc(li.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class p_{constructor(e){this._methodName=e}}class YS{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ht(this._lat,e._lat)||Ht(this._long,e._long)}}const FB=/^__.*__$/;class LB{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Lc(e,this.data,this.fieldMask,t,this.fieldTransforms):new fh(e,this.data,t,this.fieldTransforms)}}class JF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Lc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function XF(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nt()}}class QS{constructor(e,t,r,o,l,d){this.settings=e,this.databaseId=t,this.N=r,this.ignoreUndefinedProperties=o,void 0===l&&this.xc(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get kc(){return this.settings.kc}$c(e){return new QS(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.$c({path:r,Fc:!1});return o.Mc(e),o}Lc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.$c({path:r,Fc:!1});return o.xc(),o}Bc(e){return this.$c({path:void 0,Fc:!0})}Uc(e){return XS(e,this.settings.methodName,this.settings.qc||!1,this.path,this.settings.Kc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.Mc(this.path.get(e))}Mc(e){if(0===e.length)throw this.Uc("Document fields must not be empty");if(XF(this.kc)&&FB.test(e))throw this.Uc('Document fields cannot begin and end with "__"')}}class VB{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.N=r||i_(e)}jc(e,t,r,o=!1){return new QS({kc:e,methodName:t,Kc:r,path:ai.emptyPath(),Fc:!1,qc:o},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function g_(n){const e=n._freezeSettings(),t=i_(n._databaseId);return new VB(n._databaseId,!!e.ignoreUndefinedProperties,t)}function JS(n,e,t,r,o,l={}){const d=n.jc(l.merge||l.mergeFields?2:0,e,t,o);uR("Data must be an object, but it was:",d,r);const p=nL(r,d);let y,b;if(l.merge)y=new _p(d.fieldMask),b=d.fieldTransforms;else if(l.mergeFields){const D=[];for(const S of l.mergeFields){const O=cR(e,S,t);if(!d.contains(O))throw new Ne(ge.INVALID_ARGUMENT,`Field '${O}' is specified in your field mask but missing from your input data.`);iL(D,O)||D.push(O)}y=new _p(D),b=d.fieldTransforms.filter(S=>y.covers(S.field))}else y=null,b=d.fieldTransforms;return new LB(new Ii(p),y,b)}class qw extends p_{_toFieldTransform(e){if(2!==e.kc)throw e.Uc(1===e.kc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qw}}function eL(n,e,t){return new QS({kc:3,Kc:e.settings.Kc,methodName:n._methodName,Fc:t},e.databaseId,e.N,e.ignoreUndefinedProperties)}class oR extends p_{_toFieldTransform(e){return new Ap(e.path,new Ip)}isEqual(e){return e instanceof oR}}class UB extends p_{constructor(e,t){super(e),this.Qc=t}_toFieldTransform(e){const t=eL(this,e,!0),r=this.Qc.map(l=>m_(l,t)),o=new Eu(r);return new Ap(e.path,o)}isEqual(e){return this===e}}class BB extends p_{constructor(e,t){super(e),this.Qc=t}_toFieldTransform(e){const t=eL(this,e,!0),r=this.Qc.map(l=>m_(l,t)),o=new Fc(r);return new Ap(e.path,o)}isEqual(e){return this===e}}class jB extends p_{constructor(e,t){super(e),this.Wc=t}_toFieldTransform(e){const t=new Dp(e.N,hh(e.N,this.Wc));return new Ap(e.path,t)}isEqual(e){return this===e}}function aR(n,e,t,r){const o=n.jc(1,e,t);uR("Data must be an object, but it was:",o,r);const l=[],d=Ii.empty();Ti(r,(y,b)=>{const D=dR(e,y,t);b=(0,L.m9)(b);const S=o.Lc(D);if(b instanceof qw)l.push(D);else{const O=m_(b,S);null!=O&&(l.push(D),d.set(D,O))}});const p=new _p(l);return new JF(d,p,o.fieldTransforms)}function lR(n,e,t,r,o,l){const d=n.jc(1,e,t),p=[cR(e,r,t)],y=[o];if(l.length%2!=0)throw new Ne(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let O=0;O<l.length;O+=2)p.push(cR(e,l[O])),y.push(l[O+1]);const b=[],D=Ii.empty();for(let O=p.length-1;O>=0;--O)if(!iL(b,p[O])){const F=p[O];let $=y[O];$=(0,L.m9)($);const ie=d.Lc(F);if($ instanceof qw)b.push(F);else{const Ee=m_($,ie);null!=Ee&&(b.push(F),D.set(F,Ee))}}const S=new _p(b);return new JF(D,S,d.fieldTransforms)}function tL(n,e,t,r=!1){return m_(t,n.jc(r?4:3,e))}function m_(n,e){if(rL(n=(0,L.m9)(n)))return uR("Unsupported field value:",e,n),nL(n,e);if(n instanceof p_)return function(t,r){if(!XF(r.kc))throw r.Uc(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Uc(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Fc&&4!==e.kc)throw e.Uc("Nested arrays are not supported");return function(t,r){const o=[];let l=0;for(const d of t){let p=m_(d,r.Bc(l));null==p&&(p={nullValue:"NULL_VALUE"}),o.push(p),l++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,L.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return hh(r.N,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=nr.fromDate(t);return{timestampValue:zm(r.N,o)}}if(t instanceof nr){const o=new nr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:zm(r.N,o)}}if(t instanceof YS)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Yc)return{bytesValue:QA(r.N,t._byteString)};if(t instanceof sr){const o=r.databaseId,l=t.firestore._databaseId;if(!l.isEqual(o))throw r.Uc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:JA(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.Uc(`Unsupported field value: ${WS(t)}`)}(n,e)}function nL(n,e){const t={};return Gv(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ti(n,(r,o)=>{const l=m_(o,e.Oc(r));null!=l&&(t[r]=l)}),{mapValue:{fields:t}}}function rL(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof nr||n instanceof YS||n instanceof Yc||n instanceof sr||n instanceof p_)}function uR(n,e,t){if(!rL(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=WS(t);throw e.Uc("an object"===r?n+" a custom object":n+" "+r)}var r}function cR(n,e,t){if((e=(0,L.m9)(e))instanceof xh)return e._internalPath;if("string"==typeof e)return dR(n,e);throw XS("Field path arguments must be of type string or FieldPath.",n,!1,void 0,t)}const HB=new RegExp("[~\\*/\\[\\]]");function dR(n,e,t){if(e.search(HB)>=0)throw XS(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new xh(...e.split("."))._internalPath}catch(r){throw XS(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function XS(n,e,t,r,o){const l=r&&!r.isEmpty(),d=void 0!==o;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(l||d)&&(y+=" (found",l&&(y+=` in field ${r}`),d&&(y+=` in document ${o}`),y+=")"),new Ne(ge.INVALID_ARGUMENT,p+n+y)}function iL(n,e){return n.some(t=>t.isEqual(e))}class Zw{constructor(e,t,r,o,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new sr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new $B(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ex("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class $B extends Zw{data(){return super.data()}}function ex(n,e){return"string"==typeof e?dR(n,e):e instanceof xh?e._internalPath:e._delegate._internalPath}class __{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ph extends Zw{constructor(e,t,r,o,l,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Gw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ex("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Gw extends Ph{data(e={}){return super.data(e)}}class Gp{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new __(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Gw(this._firestore,this._userDataWriter,r.key,r,new __(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new Gw(r._firestore,r._userDataWriter,d.doc.key,d.doc,new __(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:l++}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const p=new Gw(r._firestore,r._userDataWriter,d.doc.key,d.doc,new __(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,b=-1;return 0!==d.type&&(y=l.indexOf(d.doc.key),l=l.delete(d.doc.key)),1!==d.type&&(l=l.add(d.doc),b=l.indexOf(d.doc.key)),{type:qB(d.type),doc:p,oldIndex:y,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function qB(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nt()}}function sL(n,e){return n instanceof Ph&&e instanceof Ph?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Gp&&e instanceof Gp&&n._firestore===e._firestore&&WF(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function oL(n){if(nE(n)&&0===n.explicitOrderBy.length)throw new Ne(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zw{}function zp(n,...e){for(const t of e)n=t._apply(n);return n}class ZB extends zw{constructor(e,t,r){super(),this.Gc=e,this.zc=t,this.Hc=r,this.type="where"}_apply(e){const t=g_(e.firestore),r=function(o,l,d,p,y,b,D){let S;if(y.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Ne(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on FieldPath.documentId().`);if("in"===b||"not-in"===b){hL(D,b);const F=[];for(const $ of D)F.push(dL(p,o,$));S={arrayValue:{values:F}}}else S=dL(p,o,D)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||hL(D,b),S=tL(d,"where",D,"in"===b||"not-in"===b);const O=cs.create(y,b,S);return function(F,$){if($.v()){const Ee=Hm(F);if(null!==Ee&&!Ee.isEqual($.field))throw new Ne(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ee.toString()}' and '${$.field.toString()}'`);const ke=rE(F);null!==ke&&fL(0,$.field,ke)}const ie=function(Ee,ke){for(const Ze of Ee.filters)if(ke.indexOf(Ze.op)>=0)return Ze.op;return null}(F,function(Ee){switch(Ee){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}($.op));if(null!==ie)throw new Ne(ge.INVALID_ARGUMENT,ie===$.op?`Invalid query. You cannot use more than one '${$.op.toString()}' filter.`:`Invalid query. You cannot use '${$.op.toString()}' filters with '${ie.toString()}' filters.`)}(o,O),O}(e._query,0,t,e.firestore._databaseId,this.Gc,this.zc,this.Hc);return new Ms(e.firestore,e.converter,function(o,l){const d=o.filters.concat([l]);return new da(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class zB extends zw{constructor(e,t){super(),this.Gc=e,this.Jc=t,this.type="orderBy"}_apply(e){const t=function(r,o,l){if(null!==r.startAt)throw new Ne(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ne(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new kc(o,l);return function(p,y){if(null===rE(p)){const b=Hm(p);null!==b&&fL(0,b,y.field)}}(r,d),d}(e._query,this.Gc,this.Jc);return new Ms(e.firestore,e.converter,function(r,o){const l=r.explicitOrderBy.concat([o]);return new da(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class aL extends zw{constructor(e,t,r){super(),this.type=e,this.Yc=t,this.Xc=r}_apply(e){return new Ms(e.firestore,e.converter,$b(e._query,this.Yc,this.Xc))}}class lL extends zw{constructor(e,t,r){super(),this.type=e,this.Zc=t,this.ta=r}_apply(e){const t=cL(e,this.type,this.Zc,this.ta);return new Ms(e.firestore,e.converter,(o=t,new da((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class uL extends zw{constructor(e,t,r){super(),this.type=e,this.Zc=t,this.ta=r}_apply(e){const t=cL(e,this.type,this.Zc,this.ta);return new Ms(e.firestore,e.converter,(o=t,new da((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function cL(n,e,t,r){if(t[0]=(0,L.m9)(t[0]),t[0]instanceof Zw)return function(o,l,d,p,y){if(!p)throw new Ne(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const b=[];for(const D of wp(o))if(D.field.isKeyField())b.push(Kv(l,p.key));else{const S=p.data.field(D.field);if(Ob(S))throw new Ne(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const O=D.field.canonicalString();throw new Ne(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${O}' (used as the orderBy) does not exist.`)}b.push(S)}return new jm(b,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=g_(n.firestore);return function(l,d,p,y,b,D){const S=l.explicitOrderBy;if(b.length>S.length)throw new Ne(ge.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const O=[];for(let F=0;F<b.length;F++){const $=b[F];if(S[F].field.isKeyField()){if("string"!=typeof $)throw new Ne(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof $}`);if(!iE(l)&&-1!==$.indexOf("/"))throw new Ne(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${y}() must be a plain document ID, but '${$}' contains a slash.`);const ie=l.path.child(an.fromString($));if(!Qe.isDocumentKey(ie))throw new Ne(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${y}() must result in a valid document path, but '${ie}' is not because it contains an odd number of segments.`);const Ee=new Qe(ie);O.push(Kv(d,Ee))}else{const ie=tL(p,y,$);O.push(ie)}}return new jm(O,D)}(n._query,n.firestore._databaseId,o,e,t,r)}}function dL(n,e,t){if("string"==typeof(t=(0,L.m9)(t))){if(""===t)throw new Ne(ge.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!iE(e)&&-1!==t.indexOf("/"))throw new Ne(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(an.fromString(t));if(!Qe.isDocumentKey(r))throw new Ne(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Kv(n,new Qe(r))}if(t instanceof sr)return Kv(n,t._key);throw new Ne(ge.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${WS(t)}.`)}function hL(n,e){if(!Array.isArray(n)||0===n.length)throw new Ne(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ne(ge.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function fL(n,e,t){if(!t.isEqual(e))throw new Ne(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class hR{convertValue(e,t="none"){switch(dh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(yp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw nt()}}convertObject(e,t){const r={};return Ti(e.fields,(o,l)=>{r[o]=this.convertValue(l,t)}),r}convertGeoPoint(e){return new YS(Wr(e.latitude),Wr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ch(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(zv(e));default:return null}}convertTimestamp(e){const t=Mc(e);return new nr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=an.fromString(e);yt(Qm(r));const o=new VE(r.get(1),r.get(3)),l=new Qe(r.popFirst(5));return o.isEqual(t)||yr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function tx(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class tj extends hR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new sr(this.firestore,null,t)}}class pL{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=g_(e)}set(e,t,r){this._verifyNotCommitted();const o=Wp(e,this._firestore),l=tx(o.converter,t,r),d=JS(this._dataReader,"WriteBatch.set",o._key,l,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,Kr.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const l=Wp(e,this._firestore);let d;return d="string"==typeof(t=(0,L.m9)(t))||t instanceof xh?lR(this._dataReader,"WriteBatch.update",l._key,t,r,o):aR(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(d.toMutation(l._key,Kr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Wp(e,this._firestore);return this._mutations=this._mutations.concat(new xp(t._key,Kr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Wp(n,e){if((n=(0,L.m9)(n)).firestore!==e)throw new Ne(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class y_ extends hR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new sr(this.firestore,null,t)}}function gL(n,e,t){n=ln(n,sr);const r=ln(n.firestore,wr),o=tx(n.converter,e,t);return UE(r,[JS(g_(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Kr.none())])}function mL(n,e,t,...r){n=ln(n,sr);const o=ln(n.firestore,wr),l=g_(o);let d;return d="string"==typeof(e=(0,L.m9)(e))||e instanceof xh?lR(l,"updateDoc",n._key,e,t,r):aR(l,"updateDoc",n._key,e),UE(o,[d.toMutation(n._key,Kr.exists(!0))])}function _L(n,...e){var t,r,o;n=(0,L.m9)(n);let l={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||sR(e[d])||(l=e[d],d++);const p={includeMetadataChanges:l.includeMetadataChanges};if(sR(e[d])){const S=e[d];e[d]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[d+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[d+2]=null===(o=S.complete)||void 0===o?void 0:o.bind(S)}let y,b,D;if(n instanceof sr)b=ln(n.firestore,wr),D=bp(n._key.path),y={next:S=>{e[d]&&e[d](fR(b,n,S))},error:e[d+1],complete:e[d+2]};else{const S=ln(n,Ms);b=ln(S.firestore,wr),D=S._query;const O=new y_(b);y={next:F=>{e[d]&&e[d](new Gp(b,O,S,F))},error:e[d+1],complete:e[d+2]},oL(n._query)}return function(S,O,F,$){const ie=new GS($),Ee=new kE(O,ie,F);return S.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return Ih(yield LE(S),Ee)})),()=>{ie.ec(),S.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return $p(yield LE(S),Ee)}))}}(Ai(b),D,p,y)}function UE(n,e){return function(t,r){const o=new wi;return t.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(n,e,t){return HS.apply(this,arguments)}(yield nR(t),r,o)})),o.promise}(Ai(n),e)}function fR(n,e,t){const r=t.docs.get(e._key),o=new y_(n);return new Ph(n,o,e._key,r,new __(t.hasPendingWrites,t.fromCache),e.converter)}class dj extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=g_(e)}get(e){const t=Wp(e,this._firestore),r=new tj(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return nt();const l=o[0];if(l.isFoundDocument())return new Zw(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new Zw(this._firestore,r,t._key,null,t.converter);throw nt()})}set(e,t,r){const o=Wp(e,this._firestore),l=tx(o.converter,t,r),d=JS(this._dataReader,"Transaction.set",o._key,l,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const l=Wp(e,this._firestore);let d;return d="string"==typeof(t=(0,L.m9)(t))||t instanceof xh?lR(this._dataReader,"Transaction.update",l._key,t,r,o):aR(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,d),this}delete(e){const t=Wp(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Wp(e,this._firestore),r=new y_(this._firestore);return super.get(e).then(o=>new Ph(this._firestore,r,t._key,o._document,new __(!1,!1),t.converter))}}function pR(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ne("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function yL(){if("undefined"==typeof Uint8Array)throw new Ne("unimplemented","Uint8Arrays are not available in this environment.")}function vL(){if("undefined"==typeof atob)throw new Ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){mp=er.SDK_VERSION,(0,er._registerComponent)(new du.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),l=new wr(o,new MM(t.getProvider("auth-internal")));return r=Object.assign({useFetchStreams:e},r),l._setSettings(r),l},"PUBLIC")),(0,er.registerVersion)(MA,"3.3.0",n),(0,er.registerVersion)(MA,"3.3.0","esm2017")}();class Ww{constructor(e){this._delegate=e}static fromBase64String(e){return vL(),new Ww(Yc.fromBase64String(e))}static fromUint8Array(e){return yL(),new Ww(Yc.fromUint8Array(e))}toBase64(){return vL(),this._delegate.toBase64()}toUint8Array(){return yL(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function gR(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of["next","error","complete"])if(r in t&&"function"==typeof t[r])return!0;return!1}(n)}class Cj{enableIndexedDbPersistence(e,t){return function(n,e){QF(n=ln(n,wr));const t=Ai(n),r=n._freezeSettings(),o=new KO;return YF(t,o,new MF(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){QF(n=ln(n,wr));const e=Ai(n),t=n._freezeSettings(),r=new KO;return YF(e,r,new uB(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new Ne(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new wi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{yield(t=(0,_e.Z)(function*(r){if(!to.bt())return Promise.resolve();const o=r+"main";yield to.delete(o)}),function(r){return t.apply(this,arguments)})(mw(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class EL{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof VE||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Fm("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function(n,e,t,r={}){var o;const l=(n=ln(n,$w))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&Fm("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,p;if("string"==typeof r.mockUserToken)d=r.mockUserToken,p=_r.MOCK_USER;else{d=(0,L.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Ne(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new _r(y)}n._credentials=new Nb(new NM(d,p))}}(this._delegate,e,t,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield FF(n),t=yield LF(n);return e.setNetworkEnabled(!0),function(r){const o=Le(r);return o.Wr.delete(0),Bp(o)}(t)}))}(Ai(n=ln(n,wr)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield FF(n),t=yield LF(n);return e.setNetworkEnabled(!1),(r=(0,_e.Z)(function*(o){const l=Le(o);l.Wr.add(0),yield qc(l),l.Hr.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Ai(n=ln(n,wr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,jF("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new wi;return e.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(n,e){return a.apply(this,arguments)}(yield nR(e),t)})),t.promise}(Ai(n=ln(n,wr)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new GS(e);return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield LE(n),o=t,Le(r).so.add(o),void o.next();var r,o})),()=>{t.ec(),n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield LE(n),o=t,void Le(r).so.delete(o);var r,o}))}}(Ai(n=ln(n,wr)),sR(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new BE(this,GF(this._delegate,e))}catch(t){throw ro(t,"collection()","Firestore.collection()")}}doc(e){try{return new vl(this,KS(this._delegate,e))}catch(t){throw ro(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new io(this,function(n,e){if(n=ln(n,$w),iR("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ne(ge.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ms(n,null,(t=e,new da(an.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ro(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e){return function(n,e){const t=new wi;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){const r=yield(o=n,zS(o).then(l=>l.datastore));var o;new hB(n.asyncQueue,r,e,t).run()})),t.promise}(Ai(n=ln(n,wr)),t=>e(new dj(n,t)))}(this._delegate,t=>e(new CL(this,t)))}batch(){return Ai(this._delegate),new bL(new pL(this._delegate,e=>UE(this._delegate,e)))}loadBundle(e){return function(n,e){const t=Ai(n=ln(n,wr)),r=new DB;return function(n,e,t,r){const o=function(l,d){let p;return p="string"==typeof l?(new TextEncoder).encode(l):l,y=function(y,b){if(y instanceof Uint8Array)return OF(y,b);if(y instanceof ArrayBuffer)return OF(new Uint8Array(y),b);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new cB(y,d);var y}(t,i_(e));n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){!function(n,e,t){const r=Le(n);var o;(o=(0,_e.Z)(function*(l,d,p){try{const y=yield d.getMetadata();if(yield function(O,F){const $=Le(O),ie=Di(F.createTime);return $.persistence.runTransaction("hasNewerBundle","readonly",Ee=>$.Je.getBundleMetadata(Ee,F.id)).then(Ee=>!!Ee&&Ee.createTime.compareTo(ie)>=0)}(l.localStore,y))return yield d.close(),void p._completeWith((O=y,{taskState:"Success",documentsLoaded:O.totalDocuments,bytesLoaded:O.totalBytes,totalDocuments:O.totalDocuments,totalBytes:O.totalBytes}));p._updateProgress(FE(y));const b=new FS(y,l.localStore,d.N);let D=yield d.zo();for(;D;){const O=yield b.mo(D);O&&p._updateProgress(O),D=yield d.zo()}const S=yield b.complete();yield P(l,S.En,void 0),yield function(O,F){const $=Le(O);return $.persistence.runTransaction("Save bundle","readwrite",ie=>$.Je.saveBundleMetadata(ie,F))}(l.localStore,y),p._completeWith(S.progress)}catch(y){Fm("SyncEngine",`Loading bundle failed with ${y}`),p._failWith(y)}var O}),function(l,d,p){return o.apply(this,arguments)})(r,e,t).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield nR(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,_e.Z)(function*(){return function(t,r){const o=Le(t);return o.persistence.runTransaction("Get named query","readonly",l=>o.Je.getNamedQuery(l,r))}(yield tR(n),e)}))}(Ai(n=ln(n,wr)),e).then(t=>t?new Ms(n,null,t.query):null)}(this._delegate,e).then(t=>t?new io(this,t):null)}}class nx extends hR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ww(new Yc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return vl.forKey(t,this.firestore,null)}}class CL{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new nx(e)}get(e){const t=E_(e);return this._delegate.get(t).then(r=>new Kw(this._firestore,new Ph(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=E_(e);return r?(pR("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const l=E_(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...o),this}delete(e){const t=E_(e);return this._delegate.delete(t),this}}class bL{constructor(e){this._delegate=e}set(e,t,r){const o=E_(e);return r?(pR("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const l=E_(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...o),this}delete(e){const t=E_(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class v_{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Gw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Yw(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=v_.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let l=o.get(t);return l||(l=new v_(e,new nx(e),t),o.set(t,l)),l}}v_.INSTANCES=new WeakMap;class vl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new nx(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new vl(t,new sr(t._delegate,r,new Qe(e)))}static forKey(e,t,r){return new vl(t,new sr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new BE(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new BE(this.firestore,GF(this._delegate,e))}catch(t){throw ro(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,L.m9)(e))instanceof sr&&zF(this._delegate,e)}set(e,t){t=pR("DocumentReference.set",t);try{return t?gL(this._delegate,e,t):gL(this._delegate,e)}catch(r){throw ro(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?mL(this._delegate,e):mL(this._delegate,e,t,...r)}catch(o){throw ro(o,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return UE(ln(n.firestore,wr),[new xp(n._key,Kr.none())])}(this._delegate)}onSnapshot(...e){const t=wL(e),r=TL(e,o=>new Kw(this.firestore,new Ph(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return _L(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=ln(n,sr);const e=ln(n.firestore,wr),t=Ai(e),r=new y_(e);return function(n,e){const t=new wi;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(o,l,d){try{const p=yield function(y,b){const D=Le(y);return D.persistence.runTransaction("read document","readonly",S=>D.Qn.An(S,b))}(o,l);p.isFoundDocument()?d.resolve(p):p.isNoDocument()?d.resolve(null):d.reject(new Ne(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const y=wh(p,`Failed to get document '${l} from cache`);d.reject(y)}}),function(o,l,d){return r.apply(this,arguments)})(yield tR(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Ph(e,r,n._key,o,new __(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=ln(n,sr);const e=ln(n.firestore,wr);return VF(Ai(e),n._key,{source:"server"}).then(t=>fR(e,n,t))}(this._delegate):function(n){n=ln(n,sr);const e=ln(n.firestore,wr);return VF(Ai(e),n._key).then(t=>fR(e,n,t))}(this._delegate),t.then(r=>new Kw(this.firestore,new Ph(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new vl(this.firestore,this._delegate.withConverter(e?v_.getInstance(this.firestore,e):null))}}function ro(n,e,t){return n.message=n.message.replace(e,t),n}function wL(n){for(const e of n)if("object"==typeof e&&!gR(e))return e;return{}}function TL(n,e){var t,r;let o;return o=gR(n[0])?n[0]:gR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{o.next&&o.next(e(l))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class Kw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new vl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return sL(this._delegate,e._delegate)}}class Yw extends Kw{data(e){const t=this._delegate.data(e);return function(n,e){n||nt()}(void 0!==t),t}}class io{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new nx(e)}where(e,t,r){try{return new io(this.firestore,zp(this._delegate,function(n,e,t){const r=e,o=ex("where",n);return new ZB(o,r,t)}(e,t,r)))}catch(o){throw ro(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new io(this.firestore,zp(this._delegate,function(n,e="asc"){const t=e,r=ex("orderBy",n);return new zB(r,t)}(e,t)))}catch(r){throw ro(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new io(this.firestore,zp(this._delegate,function(n){return qF("limit",n),new aL("limit",n,"F")}(e)))}catch(t){throw ro(t,"limit()","Query.limit()")}}limitToLast(e){try{return new io(this.firestore,zp(this._delegate,function(n){return qF("limitToLast",n),new aL("limitToLast",n,"L")}(e)))}catch(t){throw ro(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new io(this.firestore,zp(this._delegate,function(...n){return new lL("startAt",n,!0)}(...e)))}catch(t){throw ro(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new io(this.firestore,zp(this._delegate,function(...n){return new lL("startAfter",n,!1)}(...e)))}catch(t){throw ro(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new io(this.firestore,zp(this._delegate,function(...n){return new uL("endBefore",n,!0)}(...e)))}catch(t){throw ro(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new io(this.firestore,zp(this._delegate,function(...n){return new uL("endAt",n,!1)}(...e)))}catch(t){throw ro(t,"endAt()","Query.endAt()")}}isEqual(e){return WF(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=ln(n,Ms);const e=ln(n.firestore,wr),t=Ai(e),r=new y_(e);return function(n,e){const t=new wi;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(o,l,d){try{const p=yield DE(o,l,!0),y=new Uw(l,p.Gn),b=y.bo(p.documents),D=y.applyChanges(b,!1);d.resolve(D.snapshot)}catch(p){const y=wh(p,`Failed to execute query '${l} against cache`);d.reject(y)}}),function(o,l,d){return r.apply(this,arguments)})(yield tR(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Gp(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=ln(n,Ms);const e=ln(n.firestore,wr),t=Ai(e),r=new y_(e);return UF(t,n._query,{source:"server"}).then(o=>new Gp(e,r,n,o))}(this._delegate):function(n){n=ln(n,Ms);const e=ln(n.firestore,wr),t=Ai(e),r=new y_(e);return oL(n._query),UF(t,n._query).then(o=>new Gp(e,r,n,o))}(this._delegate),t.then(r=>new mR(this.firestore,new Gp(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=wL(e),r=TL(e,o=>new mR(this.firestore,new Gp(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return _L(this._delegate,t,r)}withConverter(e){return new io(this.firestore,this._delegate.withConverter(e?v_.getInstance(this.firestore,e):null))}}class wj{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Yw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class mR{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new io(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Yw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new wj(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Yw(this._firestore,r))})}isEqual(e){return sL(this._delegate,e._delegate)}}class BE extends io{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new vl(this.firestore,e):null}doc(e){try{return new vl(this.firestore,void 0===e?KS(this._delegate):KS(this._delegate,e))}catch(t){throw ro(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=ln(n.firestore,wr),r=KS(n),o=tx(n.converter,e);return UE(t,[JS(g_(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Kr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new vl(this.firestore,t))}isEqual(e){return zF(this._delegate,e._delegate)}withConverter(e){return new BE(this.firestore,this._delegate.withConverter(e?v_.getInstance(this.firestore,e):null))}}function E_(n){return ln(n,sr)}class _R{constructor(...e){this._delegate=new xh(...e)}static documentId(){return new _R(ai.keyField().canonicalString())}isEqual(e){return(e=(0,L.m9)(e))instanceof xh&&this._delegate._internalPath.isEqual(e._internalPath)}}class C_{constructor(e){this._delegate=e}static serverTimestamp(){const e=new oR("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new C_(e)}static delete(){const e=new qw("deleteField");return e._methodName="FieldValue.delete",new C_(e)}static arrayUnion(...e){const t=function(...n){return new UB("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new C_(t)}static arrayRemove(...e){const t=function(...n){return new BB("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new C_(t)}static increment(e){const t=function(n){return new jB("increment",n)}(e);return t._methodName="FieldValue.increment",new C_(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Tj={Firestore:EL,GeoPoint:YS,Timestamp:nr,Blob:Ww,Transaction:CL,WriteBatch:bL,DocumentReference:vl,DocumentSnapshot:Kw,Query:io,QueryDocumentSnapshot:Yw,QuerySnapshot:mR,CollectionReference:BE,FieldPath:_R,FieldValue:C_,setLogLevel:function(n){!function(n){Pc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function IL(n,e){return function(n,e=tr.z){return new _n.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function yR(n,e){return IL(n,e).pipe((0,ze.U)(t=>({payload:t,type:"query"})))}function rx(n,e){return yR(n,e).pipe(nc(void 0),ED(),(0,ze.U)(([t,r])=>{const o=r.payload.docChanges(),l=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,p)=>{const y=o.find(D=>D.doc.ref.isEqual(d.ref)),b=null==t?void 0:t.payload.docs.find(D=>D.ref.isEqual(d.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(d.metadata)||!y&&b&&JSON.stringify(b.metadata)===JSON.stringify(d.metadata)||l.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:d}})}),l}))}function DL(n,e,t){return rx(n,t).pipe(Io((r,o)=>function(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return vR(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return vR(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return vR(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(l=>l.payload),e),[]),bD(),(0,ze.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function vR(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function AL(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function(n){(function(n,e){n.INTERNAL.registerComponent(new du.wA("firestore-compat",t=>((e,t)=>new EL(e,t,new Cj))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},Tj)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.7")}(q0.Z);class SL{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=rx(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ze.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(nc(void 0),ED(),$r(([r,o])=>o.length>0||!r),(0,ze.U)(([r,o])=>o),vn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Io((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=AL(e);return DL(this.query,t,this.afs.schedulers.outsideAngular).pipe(vn.iC)}valueChanges(e={}){return yR(this.query,this.afs.schedulers.outsideAngular).pipe((0,ze.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),vn.iC)}get(e){return(0,yn.D)(this.query.get(e)).pipe(vn.iC)}add(e){return this.ref.add(e)}doc(e){return new xL(this.ref.doc(e),this.afs)}}class xL{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:l}=ML(r,t);return new SL(o,l,this.afs)}snapshotChanges(){return function(n,e){return IL(n,e).pipe(nc(void 0),ED(),(0,ze.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(vn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ze.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,yn.D)(this.ref.get(e)).pipe(vn.iC)}}class Nj{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?rx(this.query,this.afs.schedulers.outsideAngular).pipe((0,ze.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),$r(t=>t.length>0),vn.iC):rx(this.query,this.afs.schedulers.outsideAngular).pipe(vn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Io((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=AL(e);return DL(this.query,t,this.afs.schedulers.outsideAngular).pipe(vn.iC)}valueChanges(e={}){return yR(this.query,this.afs.schedulers.outsideAngular).pipe((0,ze.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),vn.iC)}get(e){return(0,yn.D)(this.query.get(e)).pipe(vn.iC)}}const PL=new c.OlP("angularfire2.enableFirestorePersistence"),NL=new c.OlP("angularfire2.firestore.persistenceSettings"),Mj=new c.OlP("angularfire2.firestore.settings"),Oj=new c.OlP("angularfire2.firestore.use-emulator");function ML(n,e=(t=>t)){return{query:e(n),ref:n}}let ER=(()=>{class n{constructor(t,r,o,l,d,p,y,b,D,S,O,F,$,ie,Ee,ke,Ze){this.schedulers=y;const ft=(0,Mr.on)(t,p,r),st=D;S&&xI(ft,p,O,$,ie,Ee,F,ke),[this.firestore,this.persistenceEnabled$]=(0,Mr.cc)(`${ft.name}.firestore`,"AngularFirestore",ft.name,()=>{const Dn=p.runOutsideAngular(()=>ft.firestore());if(l&&Dn.settings(l),st&&Dn.useEmulator(...st),o&&!Lu(d)){const Ir=()=>{try{return(0,yn.D)(Dn.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(gs){return"undefined"!=typeof console&&console.warn(gs),(0,rt.of)(!1)}};return[Dn,p.runOutsideAngular(Ir)]}return[Dn,(0,rt.of)(!1)]},[l,st,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:d}=ML(o,r),p=this.schedulers.ngZone.run(()=>l);return new SL(p,d,this)}collectionGroup(t,r){const o=r||(d=>d),l=this.firestore.collectionGroup(t);return new Nj(o(l),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new xL(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Mr.Dh),c.LFG(Mr.xv,8),c.LFG(PL,8),c.LFG(Mj,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(vn.HU),c.LFG(NL,8),c.LFG(Oj,8),c.LFG(os,8),c.LFG(AI,8),c.LFG(SI,8),c.LFG(nm,8),c.LFG(r0,8),c.LFG(Gy,8),c.LFG(zy,8),c.LFG(tm,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Rj=(()=>{class n{constructor(){Lf.Z.registerVersion("angularfire",vn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:PL,useValue:!0},{provide:NL,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[ER]}),n})(),ix=(()=>{class n{constructor(t,r){this.firestore=t,this.toastr=r,this.idArr=[]}addId(t,r){var o=this;return(0,_e.Z)(function*(){(yield o.firestore.collection("favorites").doc(t).get()).subscribe(function(){var d=(0,_e.Z)(function*(p){return p.exists?(o.data=yield p.data(),3!=o.data.obj.length?(o.toastr.success("","Producto agragado a favoritos"),o.firestore.collection("favorites").doc(t).update({obj:Lf.Z.firestore.FieldValue.arrayUnion(r)})):void o.toastr.error("","Ya tienes tres favoritos, no puedes agregar m\xe1s")):(o.toastr.success("","Producto agragado a favoritos"),o.firestore.collection("favorites").doc(t).set({obj:Lf.Z.firestore.FieldValue.arrayUnion(r)}))});return function(p){return d.apply(this,arguments)}}())})()}deleteId(t,r){return this.firestore.collection("favorites").doc(t).update({obj:Lf.Z.firestore.FieldValue.arrayRemove(r)})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ER),c.LFG(la))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),kj=(()=>{class n{constructor(t,r,o,l,d){this.cart=t,this.toastr=r,this.auth=o,this.routes=l,this.firebase=d,this.products=[]}ngOnInit(){this.cart.getProducts().subscribe(t=>this.products=t),this.auth.authState().subscribe(t=>{this.aState=t,this.userUID=t.uid})}addProductToCart(t){null==this.aState?(this.routes.navigate(["/login"]),setTimeout(()=>{this.toastr.error("","Tenes que iniciar sesi\xf3n para usar el carrito")},300)):this.cart.addProduct(t)}stop(t){t.stopPropagation()}addToFavorites(t,r){null==this.aState?(this.routes.navigate(["/login"]),this.toastr.error("","S\xf3lo usuarios pueden tener favoritos")):(t.stopPropagation(),this.firebase.addId(this.userUID,r))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Zs),c.Y36(la),c.Y36(Vf),c.Y36(wn),c.Y36(ix))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-item"]],inputs:{productItem:"productItem",searchProducts:"searchProducts"},decls:16,vars:6,consts:[["id","tarjeta"],[1,"thumbnail","mx-auto"],["alt","...",3,"src"],[1,"card-body"],[1,"title"],[1,"d-flex","justify-content-between"],[1,"brand"],["id","favIcon",1,"fas","fa-heart",3,"click"],[1,"price"],[1,"add",3,"click"],["id","addBtn",3,"click"],["id","cartIcon",1,"fas","fa-cart-plus","fa-lg"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"img",2),c.qZA(),c.TgZ(3,"div",3),c.TgZ(4,"p",4),c._uU(5),c.qZA(),c.TgZ(6,"div",5),c.TgZ(7,"p",6),c._uU(8),c.qZA(),c.TgZ(9,"i",7),c.NdJ("click",function(l){return r.addToFavorites(l,r.productItem)}),c.qZA(),c.qZA(),c.TgZ(10,"p",8),c._uU(11),c.ALo(12,"currency"),c.qZA(),c.TgZ(13,"div",9),c.NdJ("click",function(l){return r.stop(l)}),c.TgZ(14,"button",10),c.NdJ("click",function(){return r.addProductToCart(r.productItem)}),c._UZ(15,"i",11),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(2),c.Q6J("src",r.productItem.imageLink,c.LSH),c.xp6(3),c.Oqu(r.productItem.title),c.xp6(3),c.Oqu(r.productItem.brand),c.xp6(3),c.Oqu(c.lcZ(12,4,r.productItem.price)))},pipes:[Ol],styles:['#tarjeta[_ngcontent-%COMP%]{cursor:pointer;width:12rem;border-radius:5px;border:1px solid #CCC;margin-bottom:1rem;transition:.2s}#tarjeta[_ngcontent-%COMP%]:hover{box-shadow:0 3px 5px;transform:scale(1.01)}.title[_ngcontent-%COMP%]{font-family:"Lato";font-weight:bold;font-size:18px}.brand[_ngcontent-%COMP%]{font-family:"Lato";font-size:18px}.price[_ngcontent-%COMP%]{font-family:"Lato";font-weight:bold;color:green}img[_ngcontent-%COMP%]{padding-top:5px;border-radius:5px;width:100%;height:15vw;object-fit:cover}.add[_ngcontent-%COMP%]{max-width:100%}#addBtn[_ngcontent-%COMP%]{background-color:#202020;border:none;height:30px;width:100%;border-radius:.5rem}i[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;color:#fff}#favIcon[_ngcontent-%COMP%]{transform:scale(1.5);position:relative;top:-5px;color:#000;transition:.1s}#favIcon[_ngcontent-%COMP%]:hover{transform:scale(1.8);color:red}']}),n})();function Fj(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",7),c.TgZ(1,"app-item",8),c.NdJ("click",function(){const l=c.CHM(t).$implicit;return c.oxw().showItem(l)}),c.qZA(),c.qZA()}if(2&n){const t=e.$implicit;c.xp6(1),c.Q6J("productItem",t)}}function Lj(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div"),c.TgZ(1,"div",9),c.TgZ(2,"p",10),c._uU(3,"No se encontraron productos"),c.qZA(),c.qZA(),c.TgZ(4,"div",11),c._UZ(5,"i",12),c.qZA(),c.TgZ(6,"div",13),c.TgZ(7,"button",14),c.NdJ("click",function(){return c.CHM(t),c.oxw().refreshFunction()}),c._uU(8,"Regresar al cat\xe1logo"),c.qZA(),c.qZA(),c.qZA()}}let b_=(()=>{class n{constructor(t,r,o,l){this.api=t,this.router=r,this.filter=o,this.route=l,this.category="",this.productList=[]}ngOnInit(){"mujeres"==this.category?this.getMujeres():"hombres"==this.category?this.getHombres():"kids"==this.category?this.getKids():"unisex"==this.category?this.getUnisex():"calzado"==this.category?this.getCalzado():"busqueda"==this.category?this.route.params.subscribe(t=>{this.searchValue=t.search,this.getSearchResults(this.searchValue)}):this.getGeneral(),this.filters()}filters(){this.filter.getFilters().subscribe(t=>{"null"==t.color?this.productList=this.productList.filter(r=>r.price>=t.range1&&r.price<=t.range2):0===t.range1&&0===t.range2&&(this.productList=this.productList.filter(r=>r.features.color==t.color))})}refreshFunction(){this.ngOnInit()}getGeneral(){return this.api.getProducts().subscribe(t=>{this.productList=t})}showItem(t){this.router.navigate(["/product",t.id])}getMujeres(){return this.api.getMujeresSection().subscribe(t=>this.productList=t)}getHombres(){return this.api.getHombresSection().subscribe(t=>this.productList=t)}getKids(){return this.api.getKidsSection().subscribe(t=>this.productList=t)}getUnisex(){return this.api.getUnisexSection().subscribe(t=>this.productList=t)}getCalzado(){return this.api.getCalzadoSection().subscribe(t=>this.productList=t)}getSearchResults(t){return this.api.getSearch(t).subscribe(r=>this.productList=r)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(_m),c.Y36(wn),c.Y36(Gf),c.Y36(Is))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-items-container"]],inputs:{category:"category"},decls:9,vars:2,consts:[[1,"container"],[1,"row"],[1,"col-md-4",2,"margin-top","1rem"],[1,"col-md-8"],[1,"container-fluid"],["class","col",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col"],[3,"productItem","click"],[1,"notFound"],[1,"notFoundText"],[1,"icon"],["id","boxIcon",1,"fas","fa-box-open","fa-5x"],[1,"d-flex","justify-content-center"],[1,"btnReturn",3,"click"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c._UZ(3,"app-filters"),c.qZA(),c.TgZ(4,"div",3),c.TgZ(5,"div",4),c.TgZ(6,"div",1),c.YNc(7,Fj,2,1,"div",5),c.qZA(),c.YNc(8,Lj,9,0,"div",6),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(7),c.Q6J("ngForOf",r.productList),c.xp6(1),c.Q6J("ngIf",0==r.productList.length))},directives:[yv,Vt,Ar,kj],styles:['.container-fluid[_ngcontent-%COMP%]{margin-top:2rem}.notFound[_ngcontent-%COMP%]{color:gray;display:flex;justify-content:center}.notFoundText[_ngcontent-%COMP%]{font-family:"Lato";font-size:25px}#boxIcon[_ngcontent-%COMP%]{display:flex;color:gray}.icon[_ngcontent-%COMP%]{display:flex;justify-content:center}.btnReturn[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:2rem;font-family:"Lato";font-weight:bold;font-size:18px;border-radius:5px;width:200px;height:40px;border:none;background-color:#fff}.btnReturn[_ngcontent-%COMP%]:hover{background-color:#ccc}']}),n})(),Vj=(()=>{class n{constructor(){this.calzado="calzado"}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-calzado-section"]],decls:4,vars:2,consts:[[3,"category"]],template:function(t,r){1&t&&(c._UZ(0,"app-header"),c.TgZ(1,"div"),c._UZ(2,"app-items-container",0),c._UZ(3,"app-footer"),c.qZA()),2&t&&(c.xp6(1),c.Q6J("@fade",void 0),c.xp6(1),c.Q6J("category",r.calzado))},directives:[Fi,b_,as],styles:[""],data:{animation:[aa("fade",[fl("void => *",[Ws({opacity:0}),hl(1e3)])])]}}),n})();function Uj(n,e){if(1&n&&(c.TgZ(0,"option",12),c._uU(1),c.qZA()),2&n){const t=e.$implicit;c.Q6J("value",t),c.xp6(1),c.hij(" ",t," ")}}let Bj=(()=>{class n{constructor(t,r,o){this.cart=t,this.toastr=r,this.route=o,this.totalPrice=[],this.location="Montevideo - $200",this.locationArr=["Montevideo",200],this.departamentos=["Artigas - $233","Canelones - $200","Cerro Largo - $221","Colonia - $219","Durazno - $221","Flores - $210","Florida - $208","Lavalleja - $219","Maldonado - $208","Montevideo - $200","Paysand\xfa - $227","R\xedo Negro - $213","Rivera - $230","Rocha - $221","Salto - $227","San Jos\xe9 - $200","Soriano - $213","Tacuaremb\xf3 - $230","Treinta y Tres - $208"]}ngOnInit(){this.cart.getTotalPrice().subscribe(t=>{this.totalPrice=t})}value(t){let r=t.split(" - $");r[1]=parseInt(r[1]),this.locationArr=r}total(){let t=0;return this.totalPrice.forEach(r=>{t=t+=r.price}),t}iva(){return this.totalPrice.map(r=>22*r.price/100).reduce((r,o)=>r+o)}send(t){if(0===this.totalPrice.length)this.toastr.error("No hay ning\xfan producto en el carrito","Error",{positionClass:"toast-bottom-left"});else{let r=parseInt(t.slice(2,-4).split(",").join(""));this.cart.cartProductSent({total:r,amount:this.totalPrice.length,location:this.location}),this.route.navigate(["/billing"])}}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Zs),c.Y36(la),c.Y36(wn))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-cart-details"]],decls:36,vars:15,consts:[["id","secondCard",1,"card"],["id","secondCardBody",1,"card-body"],[2,"font-family","Lato","font-weight","bold","margin-bottom","-3px"],[1,"d-flex","justify-content-between"],[2,"font-family","Lato"],[3,"submit"],[1,"iva"],[1,"location"],["name","select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["finalprice",""],["type","submit"],[3,"value"]],template:function(t,r){if(1&t){const o=c.EpF();c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"h3",2),c._uU(3,"Detalles"),c.qZA(),c._UZ(4,"hr"),c.TgZ(5,"div",3),c.TgZ(6,"p",4),c._uU(7,"Subtotal"),c.qZA(),c.TgZ(8,"p",4),c._uU(9),c.ALo(10,"currency"),c.qZA(),c.qZA(),c.TgZ(11,"form",5),c.NdJ("submit",function(){c.CHM(o);const d=c.MAs(30);return r.send(d.textContent)}),c.TgZ(12,"div",6),c.TgZ(13,"p"),c._uU(14,"IVA (22%)"),c.qZA(),c.TgZ(15,"p"),c._uU(16),c.ALo(17,"currency"),c.ALo(18,"currency"),c.qZA(),c.qZA(),c.TgZ(19,"div",7),c.TgZ(20,"p"),c._uU(21,"Departamento *"),c.qZA(),c.TgZ(22,"select",8),c.NdJ("ngModelChange",function(d){return r.location=d})("ngModelChange",function(d){return r.value(d)}),c.YNc(23,Uj,2,2,"option",9),c.qZA(),c.qZA(),c._UZ(24,"hr"),c.TgZ(25,"div",3),c.TgZ(26,"p"),c._uU(27,"Precio Total: "),c.qZA(),c.TgZ(28,"p"),c.TgZ(29,"strong",null,10),c._uU(31),c.ALo(32,"currency"),c.ALo(33,"currency"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(34,"button",11),c._uU(35,"Realizar compra"),c.qZA(),c.qZA(),c.qZA(),c.qZA()}2&t&&(c.xp6(9),c.Oqu(c.lcZ(10,5,r.total())),c.xp6(7),c.Oqu(0===r.totalPrice.length?c.lcZ(17,7,0):c.lcZ(18,9,r.iva())),c.xp6(6),c.Q6J("ngModel",r.location),c.xp6(1),c.Q6J("ngForOf",r.departamentos),c.xp6(8),c.hij(" ",0===r.totalPrice.length?c.lcZ(32,11,0):c.lcZ(33,13,r.total()+r.locationArr[1])," "))},directives:[wc,Qd,rv,pm,Ec,ov,Vt,P0,M0],pipes:[Ol],styles:['#secondCard[_ngcontent-%COMP%]{background-color:#e6e6e6;border:none;border-radius:0;margin-bottom:2rem}.iva[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:1rem}form[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{font-family:"Lato"}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-family:"Lato";font-size:20px;color:#fff;width:100%;height:40px;border:none;background-color:#2a7712;transition:.2s}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#2c8412}.location[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;height:40px;outline:none;font-weight:bold;margin-top:-5px}.location[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{font-weight:bold;outline:none}']}),n})(),jj=(()=>{class n{constructor(t){this.cart=t,this.prodQuant=1,this.products=[]}ngOnInit(){return this.cart.getTotalPrice().subscribe(t=>{this.products=t})}deleteProduct(t){this.cart.deleteProduct(t)}quantity(t,r){let o=t.id,l=parseInt(r.target.value);this.prodQuant=t.price*l,this.cart.totalPrice({id:o,quantity:l,price:this.prodQuant})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Zs))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-cart-items"]],inputs:{item:"item"},decls:22,vars:10,consts:[[1,"row","g-0"],[1,"col-md-4","d-flex","justify-content-center"],["alt","...",1,"img-fluid","rounded-start",3,"src"],[1,"col-md-8"],[1,"card-body"],[1,"d-flex","justify-content-between"],[1,"itemTitle"],["type","number","id","cantidadInput","value","1","min","1",3,"input"],["id","crossIcon",1,"fas","fa-times-circle",3,"click"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"img",2),c.qZA(),c.TgZ(3,"div",3),c.TgZ(4,"div",4),c.TgZ(5,"div",5),c.TgZ(6,"div"),c.TgZ(7,"p",6),c._uU(8),c.qZA(),c.qZA(),c.TgZ(9,"div"),c.TgZ(10,"input",7),c.NdJ("input",function(l){return r.quantity(r.item,l)}),c.qZA(),c.qZA(),c.TgZ(11,"div"),c.TgZ(12,"p"),c._uU(13),c.ALo(14,"currency"),c.qZA(),c.qZA(),c.TgZ(15,"div"),c.TgZ(16,"p"),c._uU(17),c.ALo(18,"currency"),c.ALo(19,"currency"),c.qZA(),c.qZA(),c.TgZ(20,"div"),c.TgZ(21,"i",8),c.NdJ("click",function(){return r.deleteProduct(r.item)}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(2),c.s9C("src",r.item.imageLink,c.LSH),c.xp6(6),c.Oqu(r.item.title),c.xp6(5),c.Oqu(c.lcZ(14,4,r.item.price)),c.xp6(4),c.Oqu(1===r.prodQuant?c.lcZ(18,6,r.item.price):c.lcZ(19,8,r.prodQuant)))},pipes:[Ol],styles:['.itemTitle[_ngcontent-%COMP%]{width:150px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}#crossIcon[_ngcontent-%COMP%]{color:red}#crossIcon[_ngcontent-%COMP%]:hover{cursor:pointer}#cantidadInput[_ngcontent-%COMP%]{width:65px;border-radius:0;border:solid black 1px}#cantidadInput[_ngcontent-%COMP%]:focus{outline:none}#titleDescriptions[_ngcontent-%COMP%]{font-family:"Lato";font-size:22px}img[_ngcontent-%COMP%]{width:400px;height:180px;object-fit:cover}']}),n})();function Hj(n,e){if(1&n&&(c.TgZ(0,"div",15),c._UZ(1,"app-cart-items",16),c.qZA()),2&n){const t=e.$implicit;c.xp6(1),c.Q6J("item",t)}}function $j(n,e){1&n&&(c.TgZ(0,"div"),c.TgZ(1,"div"),c._UZ(2,"i",17),c.TgZ(3,"p",18),c._uU(4,"No tienes ning\xfan producto en el carro"),c.qZA(),c.qZA(),c.qZA())}let qj=(()=>{class n{constructor(t){this.cart=t,this.list=[],this.totalAmount=0}ngOnInit(){this.cart.getProducts().subscribe(t=>{this.list=t})}deleteProduct(t){this.cart.deleteProduct(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Zs))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-cart-design"]],decls:28,vars:3,consts:[[1,"container"],[1,"row"],[1,"col-md-8"],[1,"d-flex","justify-content-between",2,"font-family","Lato"],[1,"hrBar"],[1,"d-flex","row","text-center","align-items-center",2,"width","100%"],[1,"d-flex","col"],[2,"margin","0 70px 0 280px","color","grey","font-family","Lato","display","flex","align-items","center"],[2,"margin","0 30px 0 30px","color","grey","font-family","Lato","display","flex","align-items","center"],[2,"margin","0 20px 0 0","color","grey","font-family","Lato"],[2,"margin","0 0 0 10px","color","grey","font-family","Lato"],[1,"scroll"],["class","card mb-3","id","firstCard",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-md-4"],["id","firstCard",1,"card","mb-3"],[3,"item"],["id","exclamationIcon",1,"fas","fa-exclamation","fa-3x"],["id","excalamationText",1,"text-center"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c.TgZ(4,"h2"),c._uU(5,"Carrito"),c.qZA(),c.TgZ(6,"h3"),c._uU(7),c.qZA(),c.qZA(),c._UZ(8,"hr",4),c.TgZ(9,"div",5),c.TgZ(10,"div",6),c.TgZ(11,"p",7),c._uU(12," T\xedtulo "),c.qZA(),c.TgZ(13,"p",8),c._uU(14,"Cantidad"),c.qZA(),c.TgZ(15,"p",9),c._uU(16," Precio "),c._UZ(17,"br"),c._uU(18," unitario "),c.qZA(),c.TgZ(19,"p",10),c._uU(20," Precio "),c._UZ(21,"br"),c._uU(22," total "),c.qZA(),c.qZA(),c.qZA(),c.TgZ(23,"div",11),c.YNc(24,Hj,2,1,"div",12),c.YNc(25,$j,5,0,"div",13),c.qZA(),c.qZA(),c.TgZ(26,"div",14),c._UZ(27,"app-cart-details"),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(7),c.hij("",r.list.length," Items"),c.xp6(17),c.Q6J("ngForOf",r.list),c.xp6(1),c.Q6J("ngIf",0===r.list.length))},directives:[Vt,Ar,Bj,jj],styles:['.container[_ngcontent-%COMP%]{margin-top:2rem}#firstCard[_ngcontent-%COMP%]{margin-bottom:2rem;font-family:"Lato";border:none;width:700px;height:180px}#secondCard[_ngcontent-%COMP%]{background-color:#e6e6e6;border:none;border-radius:0;margin-bottom:2rem}#firstCard[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:400px;height:180px;object-fit:cover}#cantidadInput[_ngcontent-%COMP%]{width:65px;border-radius:0;border:solid black 1px}#cantidadInput[_ngcontent-%COMP%]:focus{outline:none}#titleDescriptions[_ngcontent-%COMP%]{font-family:"Lato";font-size:22px}.hrBar[_ngcontent-%COMP%]{width:100%}#envio[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-family:"Lato";font-weight:bold;width:100%;border:none;height:40px}#envio[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none}#direccion[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-family:"Lato";font-size:18px;text-indent:5px;border:none;width:100%;height:40px}#direccion[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}#telefono[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{text-indent:5px;width:100%;height:40px;border:none}#telefono[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}#telefono[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button, #telefono[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}form[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{font-family:"Lato"}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-family:"Lato";font-size:20px;color:#fff;width:100%;height:40px;border:none;background-color:#2a7712;transition:.2s}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#2c8412}.itemTitle[_ngcontent-%COMP%]{width:150px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}#crossIcon[_ngcontent-%COMP%]{color:red}#crossIcon[_ngcontent-%COMP%]:hover{cursor:pointer}#exclamationIcon[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;color:#ccc;margin-top:1rem}#excalamationText[_ngcontent-%COMP%]{color:#404040;font-family:"Lato";font-size:24px;margin-top:1rem}#descContainer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:0 2rem 0 300px}#descContainer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-of-type{margin-right:3rem}.scroll[_ngcontent-%COMP%]{overflow-y:auto;width:100%;height:250px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#ccc;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#202020;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#000;border-radius:5px}']}),n})(),Zj=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-cart"]],decls:3,vars:0,template:function(t,r){1&t&&(c._UZ(0,"app-header"),c._UZ(1,"app-cart-design"),c._UZ(2,"app-footer"))},directives:[Fi,qj,as],styles:["hr[_ngcontent-%COMP%]{width:90%}"],data:{animation:[aa("fade",[fl("void => *",[Ws({opacity:0}),hl(2e3)])])]}}),n})(),Gj=(()=>{class n{constructor(){this.hombres="hombres"}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-hombres-section"]],decls:4,vars:2,consts:[[3,"category"]],template:function(t,r){1&t&&(c._UZ(0,"app-header"),c.TgZ(1,"div"),c._UZ(2,"app-items-container",0),c._UZ(3,"app-footer"),c.qZA()),2&t&&(c.xp6(1),c.Q6J("@fade",void 0),c.xp6(1),c.Q6J("category",r.hombres))},directives:[Fi,b_,as],styles:[""],data:{animation:[aa("fade",[fl("void => *",[Ws({opacity:0}),hl(1e3)])])]}}),n})(),zj=(()=>{class n{constructor(t,r,o,l,d,p,y){this.route=t,this.api=r,this.cart=o,this.toastr=l,this.routes=d,this.auth=p,this.firebase=y,this.item=[],this.productList=[],this.idUrl=this.route.snapshot.paramMap.get("id")}ngOnInit(){this.api.showProd(parseInt(this.idUrl)).subscribe(t=>this.item=t),this.cart.getProducts().subscribe(t=>this.productList=t),this.auth.authState().subscribe(t=>{this.aState=t,this.userUID=t.uid})}addProduct(t){null==this.aState?(this.routes.navigate(["/login"]),setTimeout(()=>{this.toastr.error("","Tenes que iniciar sesi\xf3n para usar el carrito")},300)):this.cart.addProduct(t)}addToFavorites(t,r){null==this.aState?(this.routes.navigate(["/login"]),this.toastr.error("","S\xf3lo usuarios pueden tener favoritos")):(t.stopPropagation(),this.firebase.addId(this.userUID,r))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Is),c.Y36(_m),c.Y36(Zs),c.Y36(la),c.Y36(wn),c.Y36(Vf),c.Y36(ix))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-item-design"]],decls:24,vars:5,consts:[[1,"container"],[1,"row"],[1,"col-md-8"],["alt","...",3,"src"],[1,"col-md-4"],[1,"card"],[1,"card-body"],[1,"cardContent"],[1,"d-flex","justify-content-between"],["id","favIcon",1,"fas","fa-heart","fa-2x",3,"click"],[1,"price"],[2,"font-size","16px"],[3,"click"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div"),c._UZ(4,"img",3),c.qZA(),c.qZA(),c.TgZ(5,"div",4),c.TgZ(6,"div",5),c.TgZ(7,"div",6),c.TgZ(8,"div",7),c.TgZ(9,"div",8),c.TgZ(10,"p"),c._uU(11),c.qZA(),c.TgZ(12,"i",9),c.NdJ("click",function(l){return r.addToFavorites(l,r.item[0])}),c.qZA(),c.qZA(),c.TgZ(13,"p",10),c._uU(14),c.ALo(15,"currency"),c.qZA(),c._UZ(16,"br"),c.TgZ(17,"p"),c._uU(18,"Descripci\xf3n:"),c.qZA(),c.TgZ(19,"p",11),c._uU(20,"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Tenetur, accusamus quia. Eligendi tempore iste quos error pariatur itaque tempora id rem perferendis labore expedita magnam culpa, ut quibusdam mollitia maiores placeat ipsum. Modi esse commodi quaerat aperiam culpa deleniti dolorum."),c.qZA(),c._UZ(21,"br"),c.TgZ(22,"button",12),c.NdJ("click",function(){return r.addProduct(r.item[0])}),c._uU(23,"Agregar al carro"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(4),c.Q6J("src",r.item[0].imageLink,c.LSH),c.xp6(7),c.Oqu(r.item[0].title),c.xp6(3),c.Oqu(c.lcZ(15,3,r.item[0].price)))},pipes:[Ol],styles:['.container[_ngcontent-%COMP%]{margin-top:2rem;margin-bottom:2rem}.cardContent[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:"Lato";font-size:24px}.desc[_ngcontent-%COMP%]{font-size:14px}.price[_ngcontent-%COMP%]{font-weight:bold;color:green}button[_ngcontent-%COMP%]{width:100%;height:40px;border-radius:5px;border:none;background-color:#202020;color:#fff;font-family:"Lato";font-size:20px;transition:.2s}button[_ngcontent-%COMP%]:hover{background-color:#404040}#favIcon[_ngcontent-%COMP%]{color:#000;margin-top:5px;transition:.1s}#favIcon[_ngcontent-%COMP%]:hover{color:red;cursor:pointer}']}),n})(),Wj=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-item-view"]],decls:3,vars:0,template:function(t,r){1&t&&(c._UZ(0,"app-header"),c._UZ(1,"app-item-design"),c._UZ(2,"app-footer"))},directives:[Fi,zj,as],styles:[""]}),n})(),Kj=(()=>{class n{constructor(){this.kids="kids"}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-kids-section"]],decls:4,vars:2,consts:[[3,"category"]],template:function(t,r){1&t&&(c._UZ(0,"app-header"),c.TgZ(1,"div"),c._UZ(2,"app-items-container",0),c._UZ(3,"app-footer"),c.qZA()),2&t&&(c.xp6(1),c.Q6J("@fade",void 0),c.xp6(1),c.Q6J("category",r.kids))},directives:[Fi,b_,as],styles:[""],data:{animation:[aa("fade",[fl("void => *",[Ws({opacity:0}),hl(1e3)])])]}}),n})(),Yj=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-landing-page"]],decls:4,vars:1,template:function(t,r){1&t&&(c._UZ(0,"app-header"),c.TgZ(1,"div"),c._UZ(2,"app-items-container"),c._UZ(3,"app-footer"),c.qZA()),2&t&&(c.xp6(1),c.Q6J("@fade",void 0))},directives:[Fi,b_,as],styles:[""],data:{animation:[aa("fade",[fl("void => *",[Ws({opacity:0}),hl(2e3)])])]}}),n})();function Qj(n,e){1&n&&(c.TgZ(0,"p",18),c._uU(1," El email es inv\xe1lido "),c.qZA())}function Jj(n,e){1&n&&(c.TgZ(0,"p",19),c._uU(1," La contrase\xf1a es incorrecta (debe tener m\xe1s de seis caract\xe9res) "),c.qZA())}let Xj=(()=>{class n{constructor(t,r,o){this.auth=t,this.formBuilder=r,this.router=o}ngOnInit(){this.formLogin=this.formBuilder.group({email:["",[kt.required,kt.email]],password:["",[kt.required,kt.minLength(6)]]})}login(t,r){var o=this;return(0,_e.Z)(function*(){try{yield o.auth.login(t,r),yield o.router.navigate(["/"]),window.location.reload()}catch(l){switch(l.code){case"auth/user-not-found":alert("El usuario no existe");break;case"auth/wrong-password":alert("La contrase\xf1a es incorrecta")}}})()}send(){this.login(this.formLogin.value.email,this.formLogin.value.password)}logout(){return this.auth.logout()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Vf),c.Y36(Jd),c.Y36(wn))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-login-design"]],decls:25,vars:4,consts:[[1,"container"],[1,"card","mx-auto"],[1,"text-center",2,"font-family","Lato"],["novalidate","",3,"formGroup","submit"],[1,"email","mx-auto"],["type","email","placeholder","Email","formControlName","email",1,"form-control"],["user",""],[1,"fas","fa-user"],["id","emailAlert",4,"ngIf"],[1,"pass","mx-auto"],["type","password","placeholder","Contrase\xf1a","formControlName","password",1,"form-control"],["pass",""],[1,"fas","fa-key"],["id","passwordAlert",4,"ngIf"],[1,"submit","mx-auto"],["type","submit",3,"disabled"],[1,"info","mx-auto"],["routerLink","/register"],["id","emailAlert"],["id","passwordAlert"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"h2",2),c._uU(3,"Ingresar"),c.qZA(),c.TgZ(4,"form",3),c.NdJ("submit",function(){return r.send()}),c.TgZ(5,"div",4),c.TgZ(6,"h4"),c._uU(7,"Email"),c.qZA(),c._UZ(8,"input",5,6),c._UZ(10,"i",7),c.YNc(11,Qj,2,0,"p",8),c.qZA(),c.TgZ(12,"div",9),c.TgZ(13,"h4"),c._uU(14,"Contrase\xf1a"),c.qZA(),c._UZ(15,"input",10,11),c._UZ(17,"i",12),c.YNc(18,Jj,2,0,"p",13),c.qZA(),c.TgZ(19,"div",14),c.TgZ(20,"button",15),c._uU(21," Ingresar "),c.qZA(),c.qZA(),c.qZA(),c.TgZ(22,"div",16),c.TgZ(23,"a",17),c._uU(24,"Registrarme"),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(4),c.Q6J("formGroup",r.formLogin),c.xp6(7),c.Q6J("ngIf",r.formLogin.get("email").invalid&&r.formLogin.get("email").touched),c.xp6(7),c.Q6J("ngIf",r.formLogin.get("password").invalid&&r.formLogin.get("password").touched),c.xp6(2),c.Q6J("disabled",r.formLogin.invalid))},directives:[wc,Qd,ul,pc,Ec,Tc,Ar,ss],styles:['.card[_ngcontent-%COMP%]{margin:2rem 0;width:40rem;border:none}.email[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;max-width:25rem;margin:2rem 0}.email[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-family:"Lato"}.pass[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;max-width:25rem}.pass[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-family:"Lato"}.submit[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-width:25rem;margin:2rem 0}.submit[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:40px;font-family:"Lato";font-size:20px;background-color:brown;color:#fff;border:none;border-radius:4px;transition:.3s}.submit[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#8b0000}.submit[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled, .submit[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{background-color:#ccc}input[_ngcontent-%COMP%]{border-radius:0}input[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}.email[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:375px;top:47px;color:#000}.pass[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:375px;top:47px;color:#000}.info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-family:"Lato";font-size:18px;text-decoration:none;color:#000}.info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}#emailAlert[_ngcontent-%COMP%]{color:red;margin-top:5px;font-family:"Lato"}#passwordAlert[_ngcontent-%COMP%]{color:red;margin-top:5px;font-family:"Lato"}']}),n})(),e3=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-login"]],decls:3,vars:0,template:function(t,r){1&t&&(c._UZ(0,"app-header"),c._UZ(1,"app-login-design"),c._UZ(2,"app-footer"))},directives:[Fi,Xj,as],styles:[""]}),n})(),t3=(()=>{class n{constructor(t){this.api=t,this.productList=[],this.mujeres="mujeres"}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(_m))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-mujeres-section"]],decls:4,vars:2,consts:[[3,"category"]],template:function(t,r){1&t&&(c._UZ(0,"app-header"),c.TgZ(1,"div"),c._UZ(2,"app-items-container",0),c._UZ(3,"app-footer"),c.qZA()),2&t&&(c.xp6(1),c.Q6J("@fade",void 0),c.xp6(1),c.Q6J("category",r.mujeres))},directives:[Fi,b_,as],styles:[""],data:{animation:[aa("fade",[fl("void => *",[Ws({opacity:0}),hl(1e3)])])]}}),n})();function n3(n,e){1&n&&(c.TgZ(0,"p",17),c._uU(1," El email no es v\xe1lido "),c.qZA())}function r3(n,e){1&n&&(c.TgZ(0,"p",18),c._uU(1," La contrase\xf1a no es v\xe1lida (debe tener al menos seis caract\xe9res) "),c.qZA())}let i3=(()=>{class n{constructor(t,r,o,l,d){this.auth=t,this.form=r,this.toastr=o,this.router=l,this.firebase=d,this.hide=!0}ngOnInit(){this.formRegister=this.form.group({email:["",[kt.required,kt.email]],password:["",[kt.required,kt.minLength(6)]],check:[!1,[kt.requiredTrue]]})}register(t,r){var o=this;return(0,_e.Z)(function*(){try{yield o.auth.register(t,r),yield o.auth.getCurrentUser().then(function(){var l=(0,_e.Z)(function*(d){let p=d.email.split("@")[0];yield d.updateProfile({displayName:p})});return function(d){return l.apply(this,arguments)}}()),o.toastr.success("","Usuario registrado exitosamente",{positionClass:"toast-bottom-right"}),setTimeout((0,_e.Z)(function*(){yield o.router.navigate(["/"]),window.location.reload()}),1e3)}catch(l){alert(l.message)}})()}send(){this.register(this.formRegister.value.email,this.formRegister.value.password)}passwordVisible(){this.hide=!this.hide}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Vf),c.Y36(Jd),c.Y36(la),c.Y36(wn),c.Y36(ix))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-register-design"]],decls:26,vars:5,consts:[[1,"container"],[1,"card"],[1,"text-center",2,"font-family","Lato"],["novalidate","",1,"mx-auto",3,"formGroup","submit"],[1,"email","mx-auto"],["type","email","placeholder","Email","formControlName","email",1,"form-control"],["email",""],["id","emailAlert",4,"ngIf"],[1,"pass","mx-auto"],["type","password","placeholder","Contrase\xf1a","formControlName","password",1,"form-control",3,"type"],["id","eyeIcon",1,"fas","fa-eye",3,"click"],["id","passwordAlert",4,"ngIf"],[1,"terms","d-flex","mx-auto"],["type","checkbox","formControlName","check"],["routerLink","/terms-and-conditions"],[1,"register","mx-auto"],["type","submit",3,"disabled"],["id","emailAlert"],["id","passwordAlert"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"h2",2),c._uU(3,"Registro"),c.qZA(),c.TgZ(4,"form",3),c.NdJ("submit",function(){return r.send()}),c.TgZ(5,"div",4),c.TgZ(6,"h4"),c._uU(7,"Email"),c.qZA(),c._UZ(8,"input",5,6),c.YNc(10,n3,2,0,"p",7),c.qZA(),c.TgZ(11,"div",8),c.TgZ(12,"h4"),c._uU(13,"Contrase\xf1a"),c.qZA(),c._UZ(14,"input",9),c.TgZ(15,"i",10),c.NdJ("click",function(){return r.passwordVisible()}),c.qZA(),c.YNc(16,r3,2,0,"p",11),c.qZA(),c.TgZ(17,"div",12),c._UZ(18,"input",13),c.TgZ(19,"h6"),c._uU(20,"He le\xeddo y estoy de acuerdo con los "),c.TgZ(21,"a",14),c._uU(22," t\xe9rminos y condiciones "),c.qZA(),c.qZA(),c.qZA(),c.TgZ(23,"div",15),c.TgZ(24,"button",16),c._uU(25,"Registrarme"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(4),c.Q6J("formGroup",r.formRegister),c.xp6(6),c.Q6J("ngIf",r.formRegister.get("email").invalid&&r.formRegister.get("email").touched),c.xp6(4),c.Q6J("type",r.hide?"password":"text"),c.xp6(2),c.Q6J("ngIf",r.formRegister.get("password").invalid&&r.formRegister.get("password").touched),c.xp6(8),c.Q6J("disabled",r.formRegister.invalid))},directives:[wc,Qd,ul,pc,Ec,Tc,Ar,l0,ss],styles:['.card[_ngcontent-%COMP%]{margin:2rem 0;border:none}form[_ngcontent-%COMP%]{width:30rem}.email[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-width:25rem}.pass[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;max-width:25rem;margin-top:1rem}.repeatPass[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-width:25rem;margin-top:1rem}.register[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-width:25rem;margin:2rem 0 0}.terms[_ngcontent-%COMP%]{margin-top:1rem;display:flex;justify-content:center;align-items:center}.terms[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{position:relative;top:4px;margin-left:5px;font-family:"Lato";font-size:15px;font-weight:bold}.terms[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#00f}.terms[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-family:"Lato";font-size:18px;border-radius:0}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{box-shadow:none}form[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-family:"Lato";font-size:20px;font-weight:bold}.register[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:0;font-family:"Lato";font-size:18px;color:#fff;background-color:brown;border:none;height:40px}.register[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled, .register[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{background-color:#ccc}#emailAlert[_ngcontent-%COMP%]{color:red;margin-top:5px;font-family:"Lato"}#passwordAlert[_ngcontent-%COMP%]{color:red;margin-top:5px;font-family:"Lato"}#repeatPasswordAlert[_ngcontent-%COMP%]{color:red;margin-top:5px;font-family:"Lato"}#eyeIcon[_ngcontent-%COMP%]{position:absolute;color:gray;left:370px;top:45px}#eyeIcon[_ngcontent-%COMP%]:hover{cursor:pointer;color:#000}']}),n})(),s3=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-register"]],decls:3,vars:0,template:function(t,r){1&t&&(c._UZ(0,"app-header"),c._UZ(1,"app-register-design"),c._UZ(2,"app-footer"))},directives:[Fi,i3,as],styles:[""]}),n})(),o3=(()=>{class n{constructor(t,r){this.route=t,this.api=r,this.busqueda="busqueda"}ngOnInit(){this.data()}data(){this.route.params.subscribe(t=>{this.search=t.search,this.api.getSearch(this.search).subscribe(r=>this.productList=r)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Is),c.Y36(_m))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-search-design"]],decls:7,vars:3,consts:[[1,"container"],[3,"category"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"h1"),c._uU(2),c.qZA(),c.TgZ(3,"h3"),c._uU(4),c.qZA(),c._UZ(5,"hr"),c._UZ(6,"app-items-container",1),c.qZA()),2&t&&(c.xp6(2),c.hij("B\xfasqueda: ",r.search,""),c.xp6(2),c.hij("Total de resultados: ",r.productList.length,""),c.xp6(2),c.Q6J("category",r.busqueda))},directives:[b_],styles:['.container[_ngcontent-%COMP%]{margin-top:2rem}h1[_ngcontent-%COMP%]{font-family:"Lato"}h3[_ngcontent-%COMP%]{font-family:"Lato"}']}),n})(),a3=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-search"]],decls:3,vars:0,template:function(t,r){1&t&&(c._UZ(0,"app-header"),c._UZ(1,"app-search-design"),c._UZ(2,"app-footer"))},directives:[Fi,o3,as],styles:[""]}),n})(),l3=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-terms"]],decls:24,vars:0,consts:[[1,"container"],[1,"terms","mx-auto"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"h1"),c._uU(2,"T\xe9rminos y condiciones"),c.qZA(),c.TgZ(3,"div",1),c.TgZ(4,"p"),c.TgZ(5,"strong"),c._uU(6,"1."),c.qZA(),c._uU(7," Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur gravida nisi lorem, eget aliquet purus placerat placerat. Phasellus iaculis massa magna, et gravida arcu ultrices eget. Quisque ultricies mi nec eleifend pellentesque. Nunc rutrum, purus a dignissim finibus, justo ante efficitur nisl, eget mattis felis velit at erat. Quisque viverra laoreet eros, sed ornare nisl vestibulum eu. Aliquam velit lorem, maximus eget semper vitae, gravida id tellus. Nam sollicitudin libero leo, quis pellentesque metus consequat nec. Etiam eleifend laoreet quam non fermentum. Morbi turpis eros, tempus eu maximus id, volutpat eget ex. Phasellus vitae dictum ex, interdum sodales tortor. Proin et velit ante. Etiam vel consequat lacus, id suscipit est. Mauris et massa diam. Curabitur ut interdum augue. Integer ultricies et justo vel hendrerit. "),c.qZA(),c.TgZ(8,"p"),c.TgZ(9,"strong"),c._uU(10,"2. "),c.qZA(),c._uU(11," Nulla sit amet turpis odio. Aenean pretium diam sed dui eleifend bibendum vitae interdum ex. Cras at dapibus eros, id laoreet dolor. Proin ullamcorper cursus ultrices. Nam interdum purus fermentum luctus bibendum. Curabitur convallis bibendum nunc, in posuere erat viverra et. Integer facilisis ut nunc vitae cursus. Duis congue, ipsum ullamcorper tristique finibus, ex orci vehicula magna, sed ornare augue velit ut velit. Nullam leo sapien, bibendum eget erat interdum, efficitur varius diam. "),c.qZA(),c.TgZ(12,"p"),c.TgZ(13,"strong"),c._uU(14,"3. "),c.qZA(),c._uU(15," Suspendisse id mollis nisl, ac rhoncus augue. Quisque consectetur dictum leo eu fringilla. Donec nec quam auctor, eleifend justo sit amet, malesuada quam. Nam rhoncus a mi sed tincidunt. Ut tincidunt ac felis nec pulvinar. Etiam efficitur maximus ultrices. Sed a porta eros, vitae sodales nisi. Nunc dignissim mollis leo sit amet vestibulum. Ut vulputate vehicula neque, sed interdum odio condimentum et. Maecenas laoreet nisi ac ligula lobortis ultricies. Ut magna velit, sodales quis placerat vel, interdum accumsan dolor. Aliquam et semper lacus. Ut ante est, luctus eu dui nec, volutpat blandit mauris. Quisque pretium diam eget nisi hendrerit efficitur. Pellentesque vehicula ullamcorper lorem consectetur bibendum. Quisque placerat porttitor libero quis mollis. "),c.qZA(),c.TgZ(16,"p"),c.TgZ(17,"strong"),c._uU(18,"4. "),c.qZA(),c._uU(19," Aliquam blandit lectus in tortor tempor finibus. Sed vel odio tincidunt, rutrum est sit amet, sagittis velit. Vivamus commodo faucibus turpis at tincidunt. Curabitur pellentesque nisl convallis ante pulvinar ornare. Sed elementum id augue at auctor. Maecenas ut suscipit nulla. Donec fringilla gravida interdum. Ut viverra rutrum velit. "),c.qZA(),c.TgZ(20,"p"),c.TgZ(21,"strong"),c._uU(22,"5. "),c.qZA(),c._uU(23," Donec non convallis sapien. Vivamus bibendum felis eget velit laoreet bibendum. Phasellus sed massa odio. Pellentesque sed nisl et ex consequat auctor. Pellentesque maximus accumsan arcu, sed posuere eros elementum sed. Suspendisse fermentum non dui non cursus. Phasellus in elit fringilla, pharetra leo aliquet, vehicula magna. Pellentesque sodales velit eget lacinia ultrices. Aliquam erat volutpat. Donec euismod, eros sed fermentum lacinia, velit lacus dignissim ex, eu luctus dolor leo venenatis dolor. Phasellus eget gravida risus, eget aliquet lorem. Morbi tincidunt, velit sit amet suscipit lacinia, lectus nisi lacinia risus, sed malesuada eros dolor non leo. Quisque vitae pellentesque ligula, id ultrices ligula. "),c.qZA(),c.qZA(),c.qZA())},styles:['.terms[_ngcontent-%COMP%]{width:800px;height:700px;overflow-y:scroll;margin:2rem 0;border:#CCC 1px solid;border-radius:5px}h1[_ngcontent-%COMP%]{font-family:"Lato";margin-top:2rem;text-align:center}p[_ngcontent-%COMP%]{font-family:"Lato";font-size:18px;padding:5px 10px}']}),n})(),u3=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-terms-and-conditions"]],decls:3,vars:0,template:function(t,r){1&t&&(c._UZ(0,"app-header"),c._UZ(1,"app-terms"),c._UZ(2,"app-footer"))},directives:[Fi,l3,as],styles:[""]}),n})(),c3=(()=>{class n{constructor(){this.unisex="unisex"}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-unisex-section"]],decls:4,vars:2,consts:[[3,"category"]],template:function(t,r){1&t&&(c._UZ(0,"app-header"),c.TgZ(1,"div"),c._UZ(2,"app-items-container",0),c._UZ(3,"app-footer"),c.qZA()),2&t&&(c.xp6(1),c.Q6J("@fade",void 0),c.xp6(1),c.Q6J("category",r.unisex))},directives:[Fi,b_,as],styles:[""],data:{animation:[aa("fade",[fl("void => *",[Ws({opacity:0}),hl(1e3)])])]}}),n})();function d3(n,e){if(1&n&&(c.TgZ(0,"option",28),c._uU(1),c.qZA()),2&n){const t=e.$implicit;c.Q6J("value",t),c.xp6(1),c.Oqu(t)}}function h3(n,e){1&n&&(c.TgZ(0,"small",29),c._uU(1," Este campo es obligatorio o es inv\xe1lido "),c.qZA())}function f3(n,e){1&n&&(c.TgZ(0,"small",29),c._uU(1," Este campo es obligatorio o es inv\xe1lido "),c.qZA())}function p3(n,e){1&n&&(c.TgZ(0,"small",29),c._uU(1," Este campo es obligatorio o es inv\xe1lido "),c.qZA())}const g3=function(){return{standalone:!0}};function m3(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",12),c.TgZ(1,"form",13),c.TgZ(2,"div",14),c.TgZ(3,"p"),c._uU(4,"Eliga su tarjeta *"),c.qZA(),c.TgZ(5,"select",15),c.NdJ("ngModelChange",function(o){return c.CHM(t),c.oxw().selected=o})("ngModelChange",function(){return c.CHM(t),c.oxw().value()}),c.YNc(6,d3,2,2,"option",16),c.qZA(),c.qZA(),c.TgZ(7,"div",17),c.TgZ(8,"p"),c._uU(9,"N\xfamero de tarjeta *"),c.qZA(),c.TgZ(10,"span"),c._UZ(11,"input",18),c.qZA(),c._UZ(12,"br"),c.YNc(13,h3,2,0,"small",19),c.qZA(),c.TgZ(14,"div",20),c.TgZ(15,"p"),c._uU(16,"Fecha de expiraci\xf3n *"),c.qZA(),c.TgZ(17,"span",21),c._UZ(18,"input",22),c.TgZ(19,"span"),c._uU(20,"/"),c.qZA(),c._UZ(21,"input",23),c.qZA(),c.YNc(22,f3,2,0,"small",19),c.qZA(),c.TgZ(23,"div",24),c.TgZ(24,"p"),c._uU(25,"N\xfamero verificador *"),c.qZA(),c._UZ(26,"input",25),c._uU(27," \xa0 "),c.YNc(28,p3,2,0,"small",19),c.qZA(),c.TgZ(29,"div",26),c.TgZ(30,"button",27),c.NdJ("click",function(){return c.CHM(t),c.oxw().cardDone()}),c._uU(31,"Continuar"),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&n){const t=c.oxw();c.xp6(1),c.Q6J("formGroup",t.formPayment),c.xp6(4),c.Q6J("ngModel",t.selected)("ngModelOptions",c.DdM(8,g3)),c.xp6(1),c.Q6J("ngForOf",t.cards),c.xp6(7),c.Q6J("ngIf",t.formPayment.get("cardNumber").invalid&&t.formPayment.get("cardNumber").touched),c.xp6(9),c.Q6J("ngIf",t.formPayment.get("month").invalid&&t.formPayment.get("month").touched&&t.formPayment.get("year").invalid&&t.formPayment.get("year").touched),c.xp6(6),c.Q6J("ngIf",t.formPayment.get("verificationNumber").invalid&&t.formPayment.get("verificationNumber").touched),c.xp6(2),c.Q6J("disabled",t.formPayment.invalid)}}let _3=(()=>{class n{constructor(t,r,o){this.formBuilder=t,this.router=r,this.toastr=o,this.credit=!1,this.cards=["VISA","BROU","MasterCard","OCA"],this.selected="VISA"}ngOnInit(){this.formPayment=this.formBuilder.group({cardNumber:[null,[kt.required,kt.pattern("^[0-9]{16}$")]],month:[null,[kt.required,kt.pattern("^[0-9]{2}$"),kt.min(1),kt.max(12)]],year:[null,[kt.required,kt.pattern("^[0-9]{2}$"),kt.min(1),kt.max(29)]],verificationNumber:[null,[kt.required,kt.pattern("^[0-9]{3}$")]]})}creditSelected(){this.credit=!this.credit}value(){console.log(this.selected)}cardDone(){this.router.navigate(["/"]),this.toastr.success("","Compra realizada con \xe9xito")}goBack(){this.router.navigate(["/billing"])}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Jd),c.Y36(wn),c.Y36(la))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-payment"]],decls:23,vars:1,consts:[[1,"container","mt-4","mb-4"],[1,"header"],[3,"click"],[1,"card","mx-auto"],[1,"paypal","mx-auto"],["href","https://www.paypal.com/signin","target","_blank"],[1,"fab","fa-paypal","fa-2x"],[1,"paytext"],[1,"credit","mx-auto"],[1,"fas","fa-credit-card","fa-2x"],[1,"cardtext"],["class","cardForm",4,"ngIf"],[1,"cardForm"],[3,"formGroup"],[1,"cardType"],["name","select",3,"ngModel","ngModelOptions","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"cardNumber"],["type","number","oninput","this.value=this.value.slice(0,this.maxLength)","maxlength","16","formControlName","cardNumber","placeholder","0000 0000 0000 0000"],["style","color: red;",4,"ngIf"],[1,"cardExp"],[1,"expiration"],["type","text","placeholder","MM","maxlength","2","size","2","formControlName","month",1,"expMonth"],["type","text","placeholder","AA","maxlength","2","size","2","formControlName","year",1,"expYear"],[1,"verificator"],["type","number","oninput","this.value=this.value.slice(0,this.maxLength)","maxlength","3","placeholder","xxx","formControlName","verificationNumber"],[1,"btnContainer"],[3,"disabled","click"],[3,"value"],[2,"color","red"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"p"),c._uU(3,"3/3"),c.qZA(),c.TgZ(4,"button",2),c.NdJ("click",function(){return r.goBack()}),c._uU(5,"Atr\xe1s"),c.qZA(),c.qZA(),c.TgZ(6,"h1"),c._uU(7,"M\xe9todo de pago"),c.qZA(),c.TgZ(8,"div",3),c.TgZ(9,"div",4),c.TgZ(10,"a",5),c.TgZ(11,"button"),c._UZ(12,"i",6),c._uU(13," \xa0 "),c.TgZ(14,"a",7),c._uU(15,"Paypal"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(16,"div",8),c.TgZ(17,"button",2),c.NdJ("click",function(){return r.creditSelected()}),c._UZ(18,"i",9),c._uU(19," \xa0 "),c.TgZ(20,"a",10),c._uU(21,"Tarjeta"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(22,m3,32,9,"div",11),c.qZA()),2&t&&(c.xp6(22),c.Q6J("ngIf",r.credit))},directives:[Ar,wc,Qd,ul,pm,Ec,ov,Vt,fm,pc,gm,Tc,P0,M0],styles:['.card[_ngcontent-%COMP%]{width:50%;border-radius:0;border:none}h1[_ngcontent-%COMP%]{font-family:"Lato";text-align:center;margin-bottom:1rem}.paypal[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background-color:#6495ed;border-radius:5px;width:500px;height:50px;margin:1rem 0}.paytext[_ngcontent-%COMP%]{position:relative;top:-3px;text-decoration:none;color:#000;font-family:"Lato";font-weight:bold;font-size:25px}.credit[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:500px;height:50px;border:none;border-radius:5px;background-color:#deb887;margin-bottom:1rem}.credit[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:relative;top:3px}.cardtext[_ngcontent-%COMP%]{position:relative;top:-1px;text-decoration:none;color:#000;font-family:"Lato";font-weight:bold;font-size:25px}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;border-radius:5px;background-color:#6495ed;font-family:"Lato";font-size:20px;color:#000;width:100px;transition:.2s}.cardForm[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:2rem 0}.cardForm[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:"Lato";font-size:18px}.cardType[_ngcontent-%COMP%]{margin-bottom:1rem}.cardType[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;margin-bottom:1rem}.cardType[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:300px;height:40px;font-family:"Lato"}.cardType[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none}.cardType[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{font-family:"Lato"}.cardNumber[_ngcontent-%COMP%]{margin-bottom:1rem}.cardNumber[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:40px;font-family:"Lato"}.cardNumber[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none}.cardExp[_ngcontent-%COMP%]{margin-bottom:1rem}.cardExp[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-family:"Lato";font-weight:bold;height:30px}.cardExp[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{font-weight:bold}.cardExp[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;font-family:"Lato"}.btnContainer[_ngcontent-%COMP%]{display:flex;justify-content:center}.verificator[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100px}.verificator[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.btnContainer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:1rem;border-radius:5px;border:none;background-color:#202020;color:#fff;width:100px;height:40px;font-family:"Lato";font-size:18px;transition:.2s}.btnContainer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:green}.header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:"Lato";font-size:18px}.btnContainer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled, .btnContainer[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{background-color:#ccc}.expiration[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:0}.expYear[_ngcontent-%COMP%]{margin-left:10px;width:35px}.expMonth[_ngcontent-%COMP%]{width:35px}']}),n})(),y3=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-payment-page"]],decls:3,vars:0,template:function(t,r){1&t&&(c._UZ(0,"app-header"),c._UZ(1,"app-payment"),c._UZ(2,"app-footer"))},directives:[Fi,_3,as],styles:[""]}),n})(),v3=(()=>{class n{constructor(t,r){this.auth=t,this.firestore=r}ngOnInit(){this.auth.authState().subscribe(t=>this.userUID=t.uid)}deleteItem(t,r){var o=this;return(0,_e.Z)(function*(){r.stopPropagation(),yield o.firestore.deleteId(o.userUID,t),window.location.reload()})()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Vf),c.Y36(ix))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-favorites-item"]],inputs:{list:"list"},decls:13,vars:6,consts:[[1,"card","mx-auto"],["alt","...",1,"card-img-top",3,"src"],[1,"card-body"],[1,"card-title","text-center"],[1,"text-center",2,"font-size","18px"],[1,"text-center",2,"color","green","font-size","18px","font-weight","bold"],[1,"d-flex","justify-content-center","mx-auto",3,"click"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c._UZ(1,"img",1),c.TgZ(2,"div",2),c.TgZ(3,"h4",3),c._uU(4),c.qZA(),c.TgZ(5,"p",4),c._uU(6),c.qZA(),c.TgZ(7,"p",5),c._uU(8),c.ALo(9,"currency"),c.qZA(),c.TgZ(10,"button",6),c.NdJ("click",function(l){return r.deleteItem(r.list,l)}),c.TgZ(11,"p"),c._uU(12,"Eliminar de favoritos"),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(1),c.s9C("src",r.list.imageLink,c.LSH),c.xp6(3),c.Oqu(r.list.title),c.xp6(2),c.Oqu(r.list.brand),c.xp6(2),c.hij(" ",c.lcZ(9,4,r.list.price)," "))},pipes:[Ol],styles:['.card[_ngcontent-%COMP%]{width:14rem;display:flex;justify-content:center;transition:.2s}.card[_ngcontent-%COMP%]:hover{border:1px black solid;cursor:pointer}.card-body[_ngcontent-%COMP%]{font-family:"Lato"}.card-body[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{position:relative;top:3px}.card-body[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;height:35px;border:none;border-radius:3px;background-color:#dc143c;color:#fff}.card-body[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:red}img[_ngcontent-%COMP%]{padding-top:5px;border-radius:5px;width:100%;height:15vw;object-fit:cover}']}),n})();function E3(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",4),c.TgZ(1,"app-favorites-item",5),c.NdJ("click",function(){const l=c.CHM(t).$implicit;return c.oxw().showItem(l.id)}),c.qZA(),c.qZA()}if(2&n){const t=e.$implicit;c.xp6(1),c.Q6J("list",t)}}function C3(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div"),c.TgZ(1,"div",6),c.TgZ(2,"div",7),c.TgZ(3,"p",8),c._uU(4,"No hay favoritos"),c.qZA(),c.TgZ(5,"button",9),c.NdJ("click",function(){return c.CHM(t),c.oxw().goToStore()}),c._uU(6,"Explorar cat\xe1logo"),c.qZA(),c.qZA(),c.qZA(),c.qZA()}}let b3=(()=>{class n{constructor(t,r,o){this.auth=t,this.firestore=r,this.router=o,this.products=[]}ngOnInit(){this.auth.authState().subscribe(t=>{this.firestore.collection("favorites").doc(t.uid).get().subscribe(r=>{this.products=r.data().obj})})}showItem(t){this.router.navigate(["/product",t])}goToStore(){this.router.navigate(["/"])}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Vf),c.Y36(ER),c.Y36(wn))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-favorites-design"]],decls:7,vars:2,consts:[[1,"container"],[1,"row"],["class","col",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col"],[3,"list","click"],[1,"d-flex","justify-content-center"],[1,"notFound"],[1,"text-center"],[3,"click"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"h2"),c._uU(2,"Favoritos"),c.qZA(),c._UZ(3,"hr"),c.TgZ(4,"div",1),c.YNc(5,E3,2,1,"div",2),c.YNc(6,C3,7,0,"div",3),c.qZA(),c.qZA()),2&t&&(c.xp6(5),c.Q6J("ngForOf",r.products),c.xp6(1),c.Q6J("ngIf",0===r.products.length))},directives:[Vt,Ar,v3],styles:['.container[_ngcontent-%COMP%]{margin-top:2rem;margin-bottom:2rem}.col[_ngcontent-%COMP%]{width:14rem}h2[_ngcontent-%COMP%]{font-family:"Lato"}.notFound[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:150px;height:35px;font-family:"Lato";border:none;font-size:18px;font-weight:bold;border-radius:4px}.notFound[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#ccc}.notFound[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:"Lato";font-size:22px;font-weight:bold}']}),n})();const w3=[{path:"",component:Yj},{path:"login",component:e3},{path:"register",component:s3},{path:"product/:id",component:Wj},{path:"mujeres",component:t3},{path:"hombres",component:Gj},{path:"kids",component:Kj},{path:"calzado",component:Vj},{path:"unisex",component:c3},{path:"cart",component:Zj},{path:"terms-and-conditions",component:u3},{path:"busqueda/:search",component:a3},{path:"billing",component:_v},{path:"payment",component:y3},{path:"favorites",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-favorites-page"]],decls:3,vars:0,template:function(t,r){1&t&&(c._UZ(0,"app-header"),c._UZ(1,"app-favorites-design"),c._UZ(2,"app-footer"))},directives:[Fi,b3,as],styles:[""]}),n})()}];let CR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[],imports:[[wP.forRoot(w3,{scrollPositionRestoration:"enabled"})],wP]}),n})(),T3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[Gf],imports:[[Vr,CR]]}),n})();function OL(){return"undefined"!=typeof window&&void 0!==window.document}function bR(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Kp(n){switch(n.length){case 0:return new qf;case 1:return n[0];default:return new dD(n)}}function RL(n,e,t,r,o={},l={}){const d=[],p=[];let y=-1,b=null;if(r.forEach(D=>{const S=D.offset,O=S==y,F=O&&b||{};Object.keys(D).forEach($=>{let ie=$,Ee=D[$];if("offset"!==$)switch(ie=e.normalizePropertyName(ie,d),Ee){case"!":Ee=o[$];break;case oa:Ee=l[$];break;default:Ee=e.normalizeStyleValue($,ie,Ee,d)}F[ie]=Ee}),O||p.push(F),b=F,y=S}),d.length){const D="\n - ";throw new Error(`Unable to animate due to the following errors:${D}${d.join(D)}`)}return p}function wR(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&TR(t,"start",n)));break;case"done":n.onDone(()=>r(t&&TR(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&TR(t,"destroy",n)))}}function TR(n,e,t){const r=t.totalTime,l=IR(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),d=n._data;return null!=d&&(l._data=d),l}function IR(n,e,t,r,o="",l=0,d){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:o,totalTime:l,disabled:!!d}}function ma(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function kL(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let DR=(n,e)=>!1,AR=(n,e)=>!1,FL=(n,e,t)=>[];const LL=bR();(LL||"undefined"!=typeof Element)&&(DR=OL()?(n,e)=>{for(;e&&e!==document.documentElement;){if(e===n)return!0;e=e.parentNode||e.host}return!1}:(n,e)=>n.contains(e),AR=(()=>{if(LL||Element.prototype.matches)return(n,e)=>n.matches(e);{const n=Element.prototype,e=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector;return e?(t,r)=>e.apply(t,[r]):AR}})(),FL=(n,e,t)=>{let r=[];if(t){const o=n.querySelectorAll(e);for(let l=0;l<o.length;l++)r.push(o[l])}else{const o=n.querySelector(e);o&&r.push(o)}return r});let w_=null,VL=!1;function SR(n){w_||(w_=("undefined"!=typeof document?document.body:null)||{},VL=!!w_.style&&"WebkitAppearance"in w_.style);let e=!0;return w_.style&&!function(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in w_.style,!e&&VL&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in w_.style)),e}const xR=AR,PR=DR,NR=FL;function UL(n){const e={};return Object.keys(n).forEach(t=>{const r=t.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=n[t]}),e}let BL=(()=>{class n{validateStyleProperty(t){return SR(t)}matchesElement(t,r){return xR(t,r)}containsElement(t,r){return PR(t,r)}query(t,r,o){return NR(t,r,o)}computeStyle(t,r,o){return o||""}animate(t,r,o,l,d,p=[],y){return new qf(o,l)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),MR=(()=>{class n{}return n.NOOP=new BL,n})();const OR="ng-enter",sx="ng-leave",ox="ng-trigger",ax=".ng-trigger",HL="ng-animating",RR=".ng-animating";function T_(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:kR(parseFloat(e[1]),e[2])}function kR(n,e){switch(e){case"s":return 1e3*n;default:return n}}function lx(n,e,t){return n.hasOwnProperty("duration")?n:function(n,e,t){let o,l=0,d="";if("string"==typeof n){const p=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===p)return e.push(`The provided timing value "${n}" is invalid.`),{duration:0,delay:0,easing:""};o=kR(parseFloat(p[1]),p[2]);const y=p[3];null!=y&&(l=kR(parseFloat(y),p[4]));const b=p[5];b&&(d=b)}else o=n;if(!t){let p=!1,y=e.length;o<0&&(e.push("Duration values below 0 are not allowed for this animation step."),p=!0),l<0&&(e.push("Delay values below 0 are not allowed for this animation step."),p=!0),p&&e.splice(y,0,`The provided timing value "${n}" is invalid.`)}return{duration:o,delay:l,easing:d}}(n,e,t)}function jE(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Yp(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else jE(n,t);return t}function qL(n,e,t){return t?e+":"+t+";":""}function ZL(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=qL(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=qL(0,M3(t),n.style[t]));n.setAttribute("style",e)}function Qc(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const o=LR(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[o]),n.style[o]=e[r]}),bR()&&ZL(n))}function I_(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=LR(t);n.style[r]=""}),bR()&&ZL(n))}function Qw(n){return Array.isArray(n)?1==n.length?n[0]:U0(n):n}const FR=new RegExp("{{\\s*(.+?)\\s*}}","g");function GL(n){let e=[];if("string"==typeof n){let t;for(;t=FR.exec(n);)e.push(t[1]);FR.lastIndex=0}return e}function ux(n,e,t){const r=n.toString(),o=r.replace(FR,(l,d)=>{let p=e[d];return e.hasOwnProperty(d)||(t.push(`Please provide a value for the animation param ${d}`),p=""),p.toString()});return o==r?n:o}function cx(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const N3=/-+([a-z0-9])/g;function LR(n){return n.replace(N3,(...e)=>e[1].toUpperCase())}function M3(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function zL(n,e){return 0===n||0===e}function WL(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let l=e[0],d=[];if(r.forEach(p=>{l.hasOwnProperty(p)||d.push(p),l[p]=t[p]}),d.length)for(var o=1;o<e.length;o++){let p=e[o];d.forEach(function(y){p[y]=VR(n,y)})}}return e}function _a(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function VR(n,e){return window.getComputedStyle(n)[e]}function O3(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function(n,e,t){if(":"==n[0]){const y=function(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(`The transition alias value "${n}" is not supported`),"* => *"}}(n,t);if("function"==typeof y)return void e.push(y);n=y}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(`The provided transition expression "${n}" is not supported`),e;const o=r[1],l=r[2],d=r[3];e.push(KL(o,d));"<"==l[0]&&!("*"==o&&"*"==d)&&e.push(KL(d,o))}(r,t,e)):t.push(n),t}const hx=new Set(["true","1"]),fx=new Set(["false","0"]);function KL(n,e){const t=hx.has(n)||fx.has(n),r=hx.has(e)||fx.has(e);return(o,l)=>{let d="*"==n||n==o,p="*"==e||e==l;return!d&&t&&"boolean"==typeof o&&(d=o?hx.has(n):fx.has(n)),!p&&r&&"boolean"==typeof l&&(p=l?hx.has(e):fx.has(e)),d&&p}}const F3=new RegExp("s*:selfs*,?","g");function UR(n,e,t){return new L3(n).build(e,t)}class L3{constructor(e){this._driver=e}build(e,t){const r=new B3(t);return this._resetContextStyleTimingState(r),_a(this,Qw(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,o=t.depCount=0;const l=[],d=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(p=>{if(this._resetContextStyleTimingState(t),0==p.type){const y=p,b=y.name;b.toString().split(/\s*,\s*/).forEach(D=>{y.name=D,l.push(this.visitState(y,t))}),y.name=b}else if(1==p.type){const y=this.visitTransition(p,t);r+=y.queryCount,o+=y.depCount,d.push(y)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:l,transitions:d,queryCount:r,depCount:o,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),o=e.options&&e.options.params||null;if(r.containsDynamicStyles){const l=new Set,d=o||{};if(r.styles.forEach(p=>{if(px(p)){const y=p;Object.keys(y).forEach(b=>{GL(y[b]).forEach(D=>{d.hasOwnProperty(D)||l.add(D)})})}}),l.size){const p=cx(l.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${p.join(", ")}`)}}return{type:0,name:e.name,style:r,options:o?{params:o}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=_a(this,Qw(e.animation),t);return{type:1,matchers:O3(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:D_(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>_a(this,r,t)),options:D_(e.options)}}visitGroup(e,t){const r=t.currentTime;let o=0;const l=e.steps.map(d=>{t.currentTime=r;const p=_a(this,d,t);return o=Math.max(o,t.currentTime),p});return t.currentTime=o,{type:3,steps:l,options:D_(e.options)}}visitAnimate(e,t){const r=function(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return BR(lx(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(l=>"{"==l.charAt(0)&&"{"==l.charAt(1))){const l=BR(0,0,"");return l.dynamic=!0,l.strValue=r,l}return t=t||lx(r,e),BR(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let o,l=e.styles?e.styles:Ws({});if(5==l.type)o=this.visitKeyframes(l,t);else{let d=e.styles,p=!1;if(!d){p=!0;const b={};r.easing&&(b.easing=r.easing),d=Ws(b)}t.currentTime+=r.duration+r.delay;const y=this.visitStyle(d,t);y.isEmptyStep=p,o=y}return t.currentAnimateTimings=null,{type:4,timings:r,style:o,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(d=>{"string"==typeof d?d==oa?r.push(d):t.errors.push(`The provided style string value ${d} is not allowed.`):r.push(d)}):r.push(e.styles);let o=!1,l=null;return r.forEach(d=>{if(px(d)){const p=d,y=p.easing;if(y&&(l=y,delete p.easing),!o)for(let b in p)if(p[b].toString().indexOf("{{")>=0){o=!0;break}}}),{type:6,styles:r,easing:l,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let o=t.currentTime,l=t.currentTime;r&&l>0&&(l-=r.duration+r.delay),e.styles.forEach(d=>{"string"!=typeof d&&Object.keys(d).forEach(p=>{if(!this._driver.validateStyleProperty(p))return void t.errors.push(`The provided animation property "${p}" is not a supported CSS property for animations`);const y=t.collectedStyles[t.currentQuerySelector],b=y[p];let D=!0;b&&(l!=o&&l>=b.startTime&&o<=b.endTime&&(t.errors.push(`The CSS property "${p}" that exists between the times of "${b.startTime}ms" and "${b.endTime}ms" is also being animated in a parallel animation between the times of "${l}ms" and "${o}ms"`),D=!1),l=b.startTime),D&&(y[p]={startTime:l,endTime:o}),t.options&&function(n,e,t){const r=e.params||{},o=GL(n);o.length&&o.forEach(l=>{r.hasOwnProperty(l)||t.push(`Unable to resolve the local animation param ${l} in the given list of values`)})}(d[p],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),r;let l=0;const d=[];let p=!1,y=!1,b=0;const D=e.steps.map(ke=>{const Ze=this._makeStyleAst(ke,t);let ft=null!=Ze.offset?Ze.offset:function(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(px(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(px(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(Ze.styles),st=0;return null!=ft&&(l++,st=Ze.offset=ft),y=y||st<0||st>1,p=p||st<b,b=st,d.push(st),Ze});y&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),p&&t.errors.push("Please ensure that all keyframe offsets are in order");const S=e.steps.length;let O=0;l>0&&l<S?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==l&&(O=1/(S-1));const F=S-1,$=t.currentTime,ie=t.currentAnimateTimings,Ee=ie.duration;return D.forEach((ke,Ze)=>{const ft=O>0?Ze==F?1:O*Ze:d[Ze],st=ft*Ee;t.currentTime=$+ie.delay+st,ie.duration=st,this._validateStyleAst(ke,t),ke.offset=ft,r.styles.push(ke)}),r}visitReference(e,t){return{type:8,animation:_a(this,Qw(e.animation),t),options:D_(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:D_(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:D_(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,o=e.options||{};t.queryCount++,t.currentQuery=e;const[l,d]=function(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(F3,"")),[n=n.replace(/@\*/g,ax).replace(/@\w+/g,t=>ax+"-"+t.substr(1)).replace(/:animating/g,RR),e]}(e.selector);t.currentQuerySelector=r.length?r+" "+l:l,ma(t.collectedStyles,t.currentQuerySelector,{});const p=_a(this,Qw(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:l,limit:o.limit||0,optional:!!o.optional,includeSelf:d,animation:p,originalSelector:e.selector,options:D_(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:lx(e.timings,t.errors,!0);return{type:12,animation:_a(this,Qw(e.animation),t),timings:r,options:null}}}class B3{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function px(n){return!Array.isArray(n)&&"object"==typeof n}function D_(n){return n?(n=jE(n)).params&&(n.params=function(n){return n?jE(n):null}(n.params)):n={},n}function BR(n,e,t){return{duration:n,delay:e,easing:t}}function jR(n,e,t,r,o,l,d=null,p=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:o,delay:l,totalTime:o+l,easing:d,subTimeline:p}}class gx{constructor(){this._map=new Map}consume(e){let t=this._map.get(e);return t?this._map.delete(e):t=[],t}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Z3=new RegExp(":enter","g"),z3=new RegExp(":leave","g");function HR(n,e,t,r,o,l={},d={},p,y,b=[]){return(new W3).buildKeyframes(n,e,t,r,o,l,d,p,y,b)}class W3{buildKeyframes(e,t,r,o,l,d,p,y,b,D=[]){b=b||new gx;const S=new $R(e,t,b,o,l,D,[]);S.options=y,S.currentTimeline.setStyles([d],null,S.errors,y),_a(this,r,S);const O=S.timelines.filter(F=>F.containsAnimation());if(O.length&&Object.keys(p).length){const F=O[O.length-1];F.allowOnlyTimelineStyles()||F.setStyles([p],null,S.errors,y)}return O.length?O.map(F=>F.buildKeyframes()):[jR(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.consume(t.element);if(r){const o=t.createSubContext(e.options),l=t.currentTimeline.currentTime,d=this._visitSubInstructions(r,o,o.options);l!=d&&t.transformIntoNewTimeline(d)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let l=t.currentTimeline.currentTime;const d=null!=r.duration?T_(r.duration):null,p=null!=r.delay?T_(r.delay):null;return 0!==d&&e.forEach(y=>{const b=t.appendInstructionToTimeline(y,d,p);l=Math.max(l,b.duration+b.delay)}),l}visitReference(e,t){t.updateOptions(e.options,!0),_a(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let o=t;const l=e.options;if(l&&(l.params||l.delay)&&(o=t.createSubContext(l),o.transformIntoNewTimeline(),null!=l.delay)){6==o.previousNode.type&&(o.currentTimeline.snapshotCurrentStyles(),o.previousNode=mx);const d=T_(l.delay);o.delayNextStep(d)}e.steps.length&&(e.steps.forEach(d=>_a(this,d,o)),o.currentTimeline.applyStylesToKeyframe(),o.subContextCount>r&&o.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let o=t.currentTimeline.currentTime;const l=e.options&&e.options.delay?T_(e.options.delay):0;e.steps.forEach(d=>{const p=t.createSubContext(e.options);l&&p.delayNextStep(l),_a(this,d,p),o=Math.max(o,p.currentTimeline.currentTime),r.push(p.currentTimeline)}),r.forEach(d=>t.currentTimeline.mergeTimelineCollectedStyles(d)),t.transformIntoNewTimeline(o),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return lx(t.params?ux(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),o=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),o.snapshotCurrentStyles());const l=e.style;5==l.type?this.visitKeyframes(l,t):(t.incrementTime(r.duration),this.visitStyle(l,t),o.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,o=t.currentAnimateTimings;!o&&r.getCurrentStyleProperties().length&&r.forwardFrame();const l=o&&o.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(l):r.setStyles(e.styles,l,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,o=t.currentTimeline.duration,l=r.duration,p=t.createSubContext().currentTimeline;p.easing=r.easing,e.styles.forEach(y=>{p.forwardTime((y.offset||0)*l),p.setStyles(y.styles,y.easing,t.errors,t.options),p.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(p),t.transformIntoNewTimeline(o+l),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,o=e.options||{},l=o.delay?T_(o.delay):0;l&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=mx);let d=r;const p=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!o.optional,t.errors);t.currentQueryTotal=p.length;let y=null;p.forEach((b,D)=>{t.currentQueryIndex=D;const S=t.createSubContext(e.options,b);l&&S.delayNextStep(l),b===t.element&&(y=S.currentTimeline),_a(this,e.animation,S),S.currentTimeline.applyStylesToKeyframe(),d=Math.max(d,S.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(d),y&&(t.currentTimeline.mergeTimelineCollectedStyles(y),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,o=t.currentTimeline,l=e.timings,d=Math.abs(l.duration),p=d*(t.currentQueryTotal-1);let y=d*t.currentQueryIndex;switch(l.duration<0?"reverse":l.easing){case"reverse":y=p-y;break;case"full":y=r.currentStaggerTime}const D=t.currentTimeline;y&&D.delayNextStep(y);const S=D.currentTime;_a(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=o.currentTime-S+(o.startTime-r.currentTimeline.startTime)}}const mx={};class $R{constructor(e,t,r,o,l,d,p,y){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=o,this._leaveClassName=l,this.errors=d,this.timelines=p,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=mx,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=y||new _x(this._driver,t,0),p.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let o=this.options;null!=r.duration&&(o.duration=T_(r.duration)),null!=r.delay&&(o.delay=T_(r.delay));const l=r.params;if(l){let d=o.params;d||(d=this.options.params={}),Object.keys(l).forEach(p=>{(!t||!d.hasOwnProperty(p))&&(d[p]=ux(l[p],d,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(o=>{r[o]=t[o]})}}return e}createSubContext(e=null,t,r){const o=t||this.element,l=new $R(this._driver,o,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(o,r||0));return l.previousNode=this.previousNode,l.currentAnimateTimings=this.currentAnimateTimings,l.options=this._copyOptions(),l.updateOptions(e),l.currentQueryIndex=this.currentQueryIndex,l.currentQueryTotal=this.currentQueryTotal,l.parentContext=this,this.subContextCount++,l}transformIntoNewTimeline(e){return this.previousNode=mx,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const o={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},l=new K3(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,o,e.stretchStartingKeyframe);return this.timelines.push(l),o}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,o,l,d){let p=[];if(o&&p.push(this.element),e.length>0){e=(e=e.replace(Z3,"."+this._enterClassName)).replace(z3,"."+this._leaveClassName);let b=this._driver.query(this.element,e,1!=r);0!==r&&(b=r<0?b.slice(b.length+r,b.length):b.slice(0,r)),p.push(...b)}return!l&&0==p.length&&d.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),p}}class _x{constructor(e,t,r,o){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=o,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new _x(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||oa,this._currentKeyframe[t]=oa}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,o){t&&(this._previousKeyframe.easing=t);const l=o&&o.params||{},d=function(n,e){const t={};let r;return n.forEach(o=>{"*"===o?(r=r||Object.keys(e),r.forEach(l=>{t[l]=oa})):Yp(o,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(d).forEach(p=>{const y=ux(d[p],l,r);this._pendingStyles[p]=y,this._localTimelineStyles.hasOwnProperty(p)||(this._backFill[p]=this._globalTimelineStyles.hasOwnProperty(p)?this._globalTimelineStyles[p]:oa),this._updateStyle(p,y)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],o=e._styleSummary[t];(!r||o.time>r.time)&&this._updateStyle(t,o.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let o=[];this._keyframes.forEach((p,y)=>{const b=Yp(p,!0);Object.keys(b).forEach(D=>{const S=b[D];"!"==S?e.add(D):S==oa&&t.add(D)}),r||(b.offset=y/this.duration),o.push(b)});const l=e.size?cx(e.values()):[],d=t.size?cx(t.values()):[];if(r){const p=o[0],y=jE(p);p.offset=0,y.offset=1,o=[p,y]}return jR(this.element,o,l,d,this.duration,this.startTime,this.easing,!1)}}class K3 extends _x{constructor(e,t,r,o,l,d,p=!1){super(e,t,d.delay),this.keyframes=r,this.preStyleProps=o,this.postStyleProps=l,this._stretchStartingKeyframe=p,this.timings={duration:d.duration,delay:d.delay,easing:d.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:o}=this.timings;if(this._stretchStartingKeyframe&&t){const l=[],d=r+t,p=t/d,y=Yp(e[0],!1);y.offset=0,l.push(y);const b=Yp(e[0],!1);b.offset=JL(p),l.push(b);const D=e.length-1;for(let S=1;S<=D;S++){let O=Yp(e[S],!1);O.offset=JL((t+O.offset*r)/d),l.push(O)}r=d,t=0,o="",e=l}return jR(this.element,e,this.preStyleProps,this.postStyleProps,r,t,o,!0)}}function JL(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class qR{}class Q3 extends qR{normalizePropertyName(e,t){return LR(e)}normalizeStyleValue(e,t,r,o){let l="";const d=r.toString().trim();if(J3[t]&&0!==r&&"0"!==r)if("number"==typeof r)l="px";else{const p=r.match(/^[+-]?[\d\.]+([a-z]*)$/);p&&0==p[1].length&&o.push(`Please provide a CSS unit value for ${e}:${r}`)}return d+l}}const J3=(()=>function(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function XL(n,e,t,r,o,l,d,p,y,b,D,S,O){return{type:0,element:n,triggerName:e,isRemovalTransition:o,fromState:t,fromStyles:l,toState:r,toStyles:d,timelines:p,queriedElements:y,preStyleProps:b,postStyleProps:D,totalTime:S,errors:O}}const ZR={};class eV{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,o){return function(n,e,t,r,o){return n.some(l=>l(e,t,r,o))}(this.ast.matchers,e,t,r,o)}buildStyles(e,t,r){const o=this._stateStyles["*"],l=this._stateStyles[e],d=o?o.buildStyles(t,r):{};return l?l.buildStyles(t,r):d}build(e,t,r,o,l,d,p,y,b,D){const S=[],O=this.ast.options&&this.ast.options.params||ZR,$=this.buildStyles(r,p&&p.params||ZR,S),ie=y&&y.params||ZR,Ee=this.buildStyles(o,ie,S),ke=new Set,Ze=new Map,ft=new Map,st="void"===o,Dn={params:Object.assign(Object.assign({},O),ie)},Ir=D?[]:HR(e,t,this.ast.animation,l,d,$,Ee,Dn,b,S);let gs=0;if(Ir.forEach(Rh=>{gs=Math.max(Rh.duration+Rh.delay,gs)}),S.length)return XL(t,this._triggerName,r,o,st,$,Ee,[],[],Ze,ft,gs,S);Ir.forEach(Rh=>{const kh=Rh.element,KU=ma(Ze,kh,{});Rh.preStyleProps.forEach(V_=>KU[V_]=!0);const ST=ma(ft,kh,{});Rh.postStyleProps.forEach(V_=>ST[V_]=!0),kh!==t&&ke.add(kh)});const Oh=cx(ke.values());return XL(t,this._triggerName,r,o,st,$,Ee,Ir,Oh,Ze,ft,gs)}}class tH{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},o=jE(this.defaultParams);return Object.keys(e).forEach(l=>{const d=e[l];null!=d&&(o[l]=d)}),this.styles.styles.forEach(l=>{if("string"!=typeof l){const d=l;Object.keys(d).forEach(p=>{let y=d[p];y.length>1&&(y=ux(y,o,t));const b=this.normalizer.normalizePropertyName(p,t);y=this.normalizer.normalizeStyleValue(p,b,y,t),r[b]=y})}}),r}}class rH{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(o=>{this.states[o.name]=new tH(o.style,o.options&&o.options.params||{},r)}),tV(this.states,"true","1"),tV(this.states,"false","0"),t.transitions.forEach(o=>{this.transitionFactories.push(new eV(e,o,this.states))}),this.fallbackTransition=function(n,e,t){return new eV(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(d,p)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,o){return this.transitionFactories.find(d=>d.match(e,t,r,o))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function tV(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const sH=new gx;class oH{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],o=UR(this._driver,t,r);if(r.length)throw new Error(`Unable to build the animation due to the following errors: ${r.join("\n")}`);this._animations[e]=o}_buildPlayer(e,t,r){const o=e.element,l=RL(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(o,l,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const o=[],l=this._animations[e];let d;const p=new Map;if(l?(d=HR(this._driver,t,l,OR,sx,{},{},r,sH,o),d.forEach(D=>{const S=ma(p,D.element,{});D.postStyleProps.forEach(O=>S[O]=null)})):(o.push("The requested animation doesn't exist or has already been destroyed"),d=[]),o.length)throw new Error(`Unable to create the animation due to the following errors: ${o.join("\n")}`);p.forEach((D,S)=>{Object.keys(D).forEach(O=>{D[O]=this._driver.computeStyle(S,O,oa)})});const b=Kp(d.map(D=>{const S=p.get(D.element);return this._buildPlayer(D,{},S)}));return this._playersById[e]=b,b.onDestroy(()=>this.destroy(e)),this.players.push(b),b}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,r,o){const l=IR(t,"","","");return wR(this._getPlayer(e),r,l,o),()=>{}}command(e,t,r,o){if("register"==r)return void this.register(e,o[0]);if("create"==r)return void this.create(e,t,o[0]||{});const l=this._getPlayer(e);switch(r){case"play":l.play();break;case"pause":l.pause();break;case"reset":l.reset();break;case"restart":l.restart();break;case"finish":l.finish();break;case"init":l.init();break;case"setPosition":l.setPosition(parseFloat(o[0]));break;case"destroy":this.destroy(e)}}}const nV="ng-animate-queued",rV="ng-animate-disabled",iV=".ng-animate-disabled",cH=[],sV={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},dH={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},El="__ng_removed";class GR{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function(n){return null!=n?n:null}(r?e.value:e),r){const l=jE(e);delete l.value,this.options=l}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(o=>{null==r[o]&&(r[o]=t[o])})}}}const Jw="void",zR=new GR(Jw);class hH{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Cl(t,this._hostClassName)}listen(e,t,r,o){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${r}" because the animation trigger "${t}" doesn't exist!`);if(null==r||0==r.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if(!function(n){return"start"==n||"done"==n}(r))throw new Error(`The provided animation trigger event "${r}" for the animation trigger "${t}" is not supported!`);const l=ma(this._elementListeners,e,[]),d={name:t,phase:r,callback:o};l.push(d);const p=ma(this._engine.statesByElement,e,{});return p.hasOwnProperty(t)||(Cl(e,ox),Cl(e,ox+"-"+t),p[t]=zR),()=>{this._engine.afterFlush(()=>{const y=l.indexOf(d);y>=0&&l.splice(y,1),this._triggers[t]||delete p[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,r,o=!0){const l=this._getTrigger(t),d=new WR(this.id,t,e);let p=this._engine.statesByElement.get(e);p||(Cl(e,ox),Cl(e,ox+"-"+t),this._engine.statesByElement.set(e,p={}));let y=p[t];const b=new GR(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&y&&b.absorbOptions(y.options),p[t]=b,y||(y=zR),b.value!==Jw&&y.value===b.value){if(!function(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let o=0;o<t.length;o++){const l=t[o];if(!e.hasOwnProperty(l)||n[l]!==e[l])return!1}return!0}(y.params,b.params)){const ie=[],Ee=l.matchStyles(y.value,y.params,ie),ke=l.matchStyles(b.value,b.params,ie);ie.length?this._engine.reportError(ie):this._engine.afterFlush(()=>{I_(e,Ee),Qc(e,ke)})}return}const O=ma(this._engine.playersByElement,e,[]);O.forEach(ie=>{ie.namespaceId==this.id&&ie.triggerName==t&&ie.queued&&ie.destroy()});let F=l.matchTransition(y.value,b.value,e,b.params),$=!1;if(!F){if(!o)return;F=l.fallbackTransition,$=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:F,fromState:y,toState:b,player:d,isFallbackTransition:$}),$||(Cl(e,nV),d.onStart(()=>{HE(e,nV)})),d.onDone(()=>{let ie=this.players.indexOf(d);ie>=0&&this.players.splice(ie,1);const Ee=this._engine.playersByElement.get(e);if(Ee){let ke=Ee.indexOf(d);ke>=0&&Ee.splice(ke,1)}}),this.players.push(d),O.push(d),d}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(o=>o.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,ax,!0);r.forEach(o=>{if(o[El])return;const l=this._engine.fetchNamespacesByElement(o);l.size?l.forEach(d=>d.triggerLeaveAnimation(o,t,!1,!0)):this.clearElementCache(o)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(o=>this.clearElementCache(o)))}triggerLeaveAnimation(e,t,r,o){const l=this._engine.statesByElement.get(e);if(l){const d=[];if(Object.keys(l).forEach(p=>{if(this._triggers[p]){const y=this.trigger(e,p,Jw,o);y&&d.push(y)}}),d.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),r&&Kp(d).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const o=new Set;t.forEach(l=>{const d=l.name;if(o.has(d))return;o.add(d);const y=this._triggers[d].fallbackTransition,b=r[d]||zR,D=new GR(Jw),S=new WR(this.id,d,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:d,transition:y,fromState:b,toState:D,player:S,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let o=!1;if(r.totalAnimations){const l=r.players.length?r.playersByQueriedElement.get(e):[];if(l&&l.length)o=!0;else{let d=e;for(;d=d.parentNode;)if(r.statesByElement.get(d)){o=!0;break}}}if(this.prepareLeaveAnimationListeners(e),o)r.markElementAsRemoved(this.id,e,!1,t);else{const l=e[El];(!l||l===sV)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Cl(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const o=r.player;if(o.destroyed)return;const l=r.element,d=this._elementListeners.get(l);d&&d.forEach(p=>{if(p.name==r.triggerName){const y=IR(l,r.triggerName,r.fromState.value,r.toState.value);y._data=e,wR(r.player,p.phase,y,p.callback)}}),o.markedForDestroy?this._engine.afterFlush(()=>{o.destroy()}):t.push(r)}),this._queue=[],t.sort((r,o)=>{const l=r.transition.ast.depCount,d=o.transition.ast.depCount;return 0==l||0==d?l-d:this._engine.driver.containsElement(r.element,o.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class fH{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(o,l)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new hH(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList.length-1;if(r>=0){let o=!1;for(let l=r;l>=0;l--)if(this.driver.containsElement(this._namespaceList[l].hostElement,t)){this._namespaceList.splice(l+1,0,e),o=!0;break}o||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let o=this._namespaceLookup[e];o&&o.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const o=this._namespaceList.indexOf(r);o>=0&&this._namespaceList.splice(o,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const o=Object.keys(r);for(let l=0;l<o.length;l++){const d=r[o[l]].namespaceId;if(d){const p=this._fetchNamespace(d);p&&t.add(p)}}}return t}trigger(e,t,r,o){if(yx(t)){const l=this._fetchNamespace(e);if(l)return l.trigger(t,r,o),!0}return!1}insertNode(e,t,r,o){if(!yx(t))return;const l=t[El];if(l&&l.setForRemoval){l.setForRemoval=!1,l.setForMove=!0;const d=this.collectedLeaveElements.indexOf(t);d>=0&&this.collectedLeaveElements.splice(d,1)}if(e){const d=this._fetchNamespace(e);d&&d.insertNode(t,r)}o&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Cl(e,rV)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),HE(e,rV))}removeNode(e,t,r,o){if(yx(t)){const l=e?this._fetchNamespace(e):null;if(l?l.removeNode(t,o):this.markElementAsRemoved(e,t,!1,o),r){const d=this.namespacesByHostElement.get(t);d&&d.id!==e&&d.removeNode(t,o)}}else this._onRemovalComplete(t,o)}markElementAsRemoved(e,t,r,o){this.collectedLeaveElements.push(t),t[El]={namespaceId:e,setForRemoval:o,hasAnimation:r,removedBeforeQueried:!1}}listen(e,t,r,o,l){return yx(t)?this._fetchNamespace(e).listen(t,r,o,l):()=>{}}_buildInstruction(e,t,r,o,l){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,o,e.fromState.options,e.toState.options,t,l)}destroyInnerAnimations(e){let t=this.driver.query(e,ax,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,RR,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Kp(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[El];if(t&&t.setForRemoval){if(e[El]=sV,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}this.driver.matchesElement(e,iV)&&this.markElementAsDisabled(e,!1),this.driver.query(e,iV,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,o)=>this._balanceNamespaceList(r,o)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Cl(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let o=0;o<r.length;o++)r[o]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Kp(t).onDone(()=>{r.forEach(o=>o())}):r.forEach(o=>o())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const r=new gx,o=[],l=new Map,d=[],p=new Map,y=new Map,b=new Map,D=new Set;this.disabledNodes.forEach(Je=>{D.add(Je);const dt=this.driver.query(Je,".ng-animate-queued",!0);for(let xt=0;xt<dt.length;xt++)D.add(dt[xt])});const S=this.bodyNode,O=Array.from(this.statesByElement.keys()),F=lV(O,this.collectedEnterElements),$=new Map;let ie=0;F.forEach((Je,dt)=>{const xt=OR+ie++;$.set(dt,xt),Je.forEach(hn=>Cl(hn,xt))});const Ee=[],ke=new Set,Ze=new Set;for(let Je=0;Je<this.collectedLeaveElements.length;Je++){const dt=this.collectedLeaveElements[Je],xt=dt[El];xt&&xt.setForRemoval&&(Ee.push(dt),ke.add(dt),xt.hasAnimation?this.driver.query(dt,".ng-star-inserted",!0).forEach(hn=>ke.add(hn)):Ze.add(dt))}const ft=new Map,st=lV(O,Array.from(ke));st.forEach((Je,dt)=>{const xt=sx+ie++;ft.set(dt,xt),Je.forEach(hn=>Cl(hn,xt))}),e.push(()=>{F.forEach((Je,dt)=>{const xt=$.get(dt);Je.forEach(hn=>HE(hn,xt))}),st.forEach((Je,dt)=>{const xt=ft.get(dt);Je.forEach(hn=>HE(hn,xt))}),Ee.forEach(Je=>{this.processLeaveNode(Je)})});const Dn=[],Ir=[];for(let Je=this._namespaceList.length-1;Je>=0;Je--)this._namespaceList[Je].drainQueuedTransitions(t).forEach(xt=>{const hn=xt.player,qi=xt.element;if(Dn.push(hn),this.collectedEnterElements.length){const rd=qi[El];if(rd&&rd.setForMove)return void hn.destroy()}const nd=!S||!this.driver.containsElement(S,qi),va=ft.get(qi),og=$.get(qi),Rr=this._buildInstruction(xt,r,og,va,nd);if(Rr.errors&&Rr.errors.length)Ir.push(Rr);else{if(nd)return hn.onStart(()=>I_(qi,Rr.fromStyles)),hn.onDestroy(()=>Qc(qi,Rr.toStyles)),void o.push(hn);if(xt.isFallbackTransition)return hn.onStart(()=>I_(qi,Rr.fromStyles)),hn.onDestroy(()=>Qc(qi,Rr.toStyles)),void o.push(hn);Rr.timelines.forEach(rd=>rd.stretchStartingKeyframe=!0),r.append(qi,Rr.timelines),d.push({instruction:Rr,player:hn,element:qi}),Rr.queriedElements.forEach(rd=>ma(p,rd,[]).push(hn)),Rr.preStyleProps.forEach((rd,xT)=>{const sP=Object.keys(rd);if(sP.length){let U_=y.get(xT);U_||y.set(xT,U_=new Set),sP.forEach(uk=>U_.add(uk))}}),Rr.postStyleProps.forEach((rd,xT)=>{const sP=Object.keys(rd);let U_=b.get(xT);U_||b.set(xT,U_=new Set),sP.forEach(uk=>U_.add(uk))})}});if(Ir.length){const Je=[];Ir.forEach(dt=>{Je.push(`@${dt.triggerName} has failed due to:\n`),dt.errors.forEach(xt=>Je.push(`- ${xt}\n`))}),Dn.forEach(dt=>dt.destroy()),this.reportError(Je)}const gs=new Map,Oh=new Map;d.forEach(Je=>{const dt=Je.element;r.has(dt)&&(Oh.set(dt,dt),this._beforeAnimationBuild(Je.player.namespaceId,Je.instruction,gs))}),o.forEach(Je=>{const dt=Je.element;this._getPreviousPlayers(dt,!1,Je.namespaceId,Je.triggerName,null).forEach(hn=>{ma(gs,dt,[]).push(hn),hn.destroy()})});const Rh=Ee.filter(Je=>cV(Je,y,b)),kh=new Map;aV(kh,this.driver,Ze,b,oa).forEach(Je=>{cV(Je,y,b)&&Rh.push(Je)});const ST=new Map;F.forEach((Je,dt)=>{aV(ST,this.driver,new Set(Je),y,"!")}),Rh.forEach(Je=>{const dt=kh.get(Je),xt=ST.get(Je);kh.set(Je,Object.assign(Object.assign({},dt),xt))});const V_=[],YU=[],QU={};d.forEach(Je=>{const{element:dt,player:xt,instruction:hn}=Je;if(r.has(dt)){if(D.has(dt))return xt.onDestroy(()=>Qc(dt,hn.toStyles)),xt.disabled=!0,xt.overrideTotalTime(hn.totalTime),void o.push(xt);let qi=QU;if(Oh.size>1){let va=dt;const og=[];for(;va=va.parentNode;){const Rr=Oh.get(va);if(Rr){qi=Rr;break}og.push(va)}og.forEach(Rr=>Oh.set(Rr,qi))}const nd=this._buildAnimation(xt.namespaceId,hn,gs,l,ST,kh);if(xt.setRealPlayer(nd),qi===QU)V_.push(xt);else{const va=this.playersByElement.get(qi);va&&va.length&&(xt.parentPlayer=Kp(va)),o.push(xt)}}else I_(dt,hn.fromStyles),xt.onDestroy(()=>Qc(dt,hn.toStyles)),YU.push(xt),D.has(dt)&&o.push(xt)}),YU.forEach(Je=>{const dt=l.get(Je.element);if(dt&&dt.length){const xt=Kp(dt);Je.setRealPlayer(xt)}}),o.forEach(Je=>{Je.parentPlayer?Je.syncPlayerEvents(Je.parentPlayer):Je.destroy()});for(let Je=0;Je<Ee.length;Je++){const dt=Ee[Je],xt=dt[El];if(HE(dt,sx),xt&&xt.hasAnimation)continue;let hn=[];if(p.size){let nd=p.get(dt);nd&&nd.length&&hn.push(...nd);let va=this.driver.query(dt,RR,!0);for(let og=0;og<va.length;og++){let Rr=p.get(va[og]);Rr&&Rr.length&&hn.push(...Rr)}}const qi=hn.filter(nd=>!nd.destroyed);qi.length?_H(this,dt,qi):this.processLeaveNode(dt)}return Ee.length=0,V_.forEach(Je=>{this.players.push(Je),Je.onDone(()=>{Je.destroy();const dt=this.players.indexOf(Je);this.players.splice(dt,1)}),Je.play()}),V_}elementContainsData(e,t){let r=!1;const o=t[El];return o&&o.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,o,l){let d=[];if(t){const p=this.playersByQueriedElement.get(e);p&&(d=p)}else{const p=this.playersByElement.get(e);if(p){const y=!l||l==Jw;p.forEach(b=>{b.queued||!y&&b.triggerName!=o||d.push(b)})}}return(r||o)&&(d=d.filter(p=>!(r&&r!=p.namespaceId||o&&o!=p.triggerName))),d}_beforeAnimationBuild(e,t,r){const l=t.element,d=t.isRemovalTransition?void 0:e,p=t.isRemovalTransition?void 0:t.triggerName;for(const y of t.timelines){const b=y.element,D=b!==l,S=ma(r,b,[]);this._getPreviousPlayers(b,D,d,p,t.toState).forEach(F=>{const $=F.getRealPlayer();$.beforeDestroy&&$.beforeDestroy(),F.destroy(),S.push(F)})}I_(l,t.fromStyles)}_buildAnimation(e,t,r,o,l,d){const p=t.triggerName,y=t.element,b=[],D=new Set,S=new Set,O=t.timelines.map($=>{const ie=$.element;D.add(ie);const Ee=ie[El];if(Ee&&Ee.removedBeforeQueried)return new qf($.duration,$.delay);const ke=ie!==y,Ze=function(n){const e=[];return uV(n,e),e}((r.get(ie)||cH).map(gs=>gs.getRealPlayer())).filter(gs=>!!gs.element&&gs.element===ie),ft=l.get(ie),st=d.get(ie),Dn=RL(0,this._normalizer,0,$.keyframes,ft,st),Ir=this._buildPlayer($,Dn,Ze);if($.subTimeline&&o&&S.add(ie),ke){const gs=new WR(e,p,ie);gs.setRealPlayer(Ir),b.push(gs)}return Ir});b.forEach($=>{ma(this.playersByQueriedElement,$.element,[]).push($),$.onDone(()=>function(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const o=r.indexOf(t);r.splice(o,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const o=r.indexOf(t);r.splice(o,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,$.element,$))}),D.forEach($=>Cl($,HL));const F=Kp(O);return F.onDestroy(()=>{D.forEach($=>HE($,HL)),Qc(y,t.toStyles)}),S.forEach($=>{ma(o,$,[]).push(F)}),F}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new qf(e.duration,e.delay)}}class WR{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new qf,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>wR(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){ma(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function yx(n){return n&&1===n.nodeType}function oV(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function aV(n,e,t,r,o){const l=[];t.forEach(y=>l.push(oV(y)));const d=[];r.forEach((y,b)=>{const D={};y.forEach(S=>{const O=D[S]=e.computeStyle(b,S,o);(!O||0==O.length)&&(b[El]=dH,d.push(b))}),n.set(b,D)});let p=0;return t.forEach(y=>oV(y,l[p++])),d}function lV(n,e){const t=new Map;if(n.forEach(p=>t.set(p,[])),0==e.length)return t;const o=new Set(e),l=new Map;function d(p){if(!p)return 1;let y=l.get(p);if(y)return y;const b=p.parentNode;return y=t.has(b)?b:o.has(b)?1:d(b),l.set(p,y),y}return e.forEach(p=>{const y=d(p);1!==y&&t.get(y).push(p)}),t}const vx="$$classes";function Cl(n,e){if(n.classList)n.classList.add(e);else{let t=n[vx];t||(t=n[vx]={}),t[e]=!0}}function HE(n,e){if(n.classList)n.classList.remove(e);else{let t=n[vx];t&&delete t[e]}}function _H(n,e,t){Kp(t).onDone(()=>n.processLeaveNode(e))}function uV(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof dD?uV(r.players,e):e.push(r)}}function cV(n,e,t){const r=t.get(n);if(!r)return!1;let o=e.get(n);return o?r.forEach(l=>o.add(l)):e.set(n,r),t.delete(n),!0}class Ex{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(o,l)=>{},this._transitionEngine=new fH(e,t,r),this._timelineEngine=new oH(e,t,r),this._transitionEngine.onRemovalComplete=(o,l)=>this.onRemovalComplete(o,l)}registerTrigger(e,t,r,o,l){const d=e+"-"+o;let p=this._triggerCache[d];if(!p){const y=[],b=UR(this._driver,l,y);if(y.length)throw new Error(`The animation trigger "${o}" has failed to build due to the following errors:\n - ${y.join("\n - ")}`);p=function(n,e,t){return new rH(n,e,t)}(o,b,this._normalizer),this._triggerCache[d]=p}this._transitionEngine.registerTrigger(t,o,p)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,o){this._transitionEngine.insertNode(e,t,r,o)}onRemove(e,t,r,o){this._transitionEngine.removeNode(e,t,o||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,o){if("@"==r.charAt(0)){const[l,d]=kL(r);this._timelineEngine.command(l,t,d,o)}else this._transitionEngine.trigger(e,t,r,o)}listen(e,t,r,o,l){if("@"==r.charAt(0)){const[d,p]=kL(r);return this._timelineEngine.listen(d,t,p,l)}return this._transitionEngine.listen(e,t,r,o,l)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function dV(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=KR(e[0]),e.length>1&&(r=KR(e[e.length-1]))):e&&(t=KR(e)),t||r?new EH(n,t,r):null}let EH=(()=>{class n{constructor(t,r,o){this._element=t,this._startStyles=r,this._endStyles=o,this._state=0;let l=n.initialStylesByElement.get(t);l||n.initialStylesByElement.set(t,l={}),this._initialStyles=l}start(){this._state<1&&(this._startStyles&&Qc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Qc(this._element,this._initialStyles),this._endStyles&&(Qc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(I_(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(I_(this._element,this._endStyles),this._endStyles=null),Qc(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function KR(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const o=t[r];CH(o)&&(e=e||{},e[o]=n[o])}return e}function CH(n){return"display"===n||"position"===n}const hV="animation",fV="animationend";class TH{constructor(e,t,r,o,l,d,p){this._element=e,this._name=t,this._duration=r,this._delay=o,this._easing=l,this._fillMode=d,this._onDoneFn=p,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=y=>this._handleCallback(y)}apply(){(function(n,e){const t=QR(n,"").trim();let r=0;t.length&&(function(n,e){let t=0;for(let r=0;r<n.length;r++)","===n.charAt(r)&&t++;return t}(t)+1,e=`${t}, ${e}`),Cx(n,"",e)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),mV(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){pV(this._element,this._name,"paused")}resume(){pV(this._element,this._name,"running")}setPosition(e){const t=gV(this._element,this._name);this._position=e*this._duration,Cx(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),r=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&r>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),mV(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(n,e){const r=QR(n,"").split(","),o=YR(r,e);o>=0&&(r.splice(o,1),Cx(n,"",r.join(",")))}(this._element,this._name))}}function pV(n,e,t){Cx(n,"PlayState",t,gV(n,e))}function gV(n,e){const t=QR(n,"");return t.indexOf(",")>0?YR(t.split(","),e):YR([t],e)}function YR(n,e){for(let t=0;t<n.length;t++)if(n[t].indexOf(e)>=0)return t;return-1}function mV(n,e,t){t?n.removeEventListener(fV,e):n.addEventListener(fV,e)}function Cx(n,e,t,r){const o=hV+e;if(null!=r){const l=n.style[o];if(l.length){const d=l.split(",");d[r]=t,t=d.join(",")}}n.style[o]=t}function QR(n,e){return n.style[hV+e]||""}class _V{constructor(e,t,r,o,l,d,p,y){this.element=e,this.keyframes=t,this.animationName=r,this._duration=o,this._delay=l,this._finalStyles=p,this._specialStyles=y,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=d||"linear",this.totalTime=o+l,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new TH(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(r=>{"offset"!=r&&(e[r]=t?this._finalStyles[r]:VR(this.element,r))})}this.currentSnapshot=e}}class PH extends qf{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=UL(t)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}class vV{constructor(){this._count=0}validateStyleProperty(e){return SR(e)}matchesElement(e,t){return xR(e,t)}containsElement(e,t){return PR(e,t)}query(e,t,r){return NR(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,r){r=r.map(p=>UL(p));let o=`@keyframes ${t} {\n`,l="";r.forEach(p=>{l=" ";const y=parseFloat(p.offset);o+=`${l}${100*y}% {\n`,l+=" ",Object.keys(p).forEach(b=>{const D=p[b];switch(b){case"offset":return;case"easing":return void(D&&(o+=`${l}animation-timing-function: ${D};\n`));default:return void(o+=`${l}${b}: ${D};\n`)}}),o+=`${l}}\n`}),o+="}\n";const d=document.createElement("style");return d.textContent=o,d}animate(e,t,r,o,l,d=[],p){const y=d.filter(Ee=>Ee instanceof _V),b={};zL(r,o)&&y.forEach(Ee=>{let ke=Ee.currentSnapshot;Object.keys(ke).forEach(Ze=>b[Ze]=ke[Ze])});const D=function(n){let e={};return n&&(Array.isArray(n)?n:[n]).forEach(r=>{Object.keys(r).forEach(o=>{"offset"==o||"easing"==o||(e[o]=r[o])})}),e}(t=WL(e,t,b));if(0==r)return new PH(e,D);const S="gen_css_kf_"+this._count++,O=this.buildKeyframeElement(e,S,t);(function(n){var e;const t=null===(e=n.getRootNode)||void 0===e?void 0:e.call(n);return"undefined"!=typeof ShadowRoot&&t instanceof ShadowRoot?t:document.head})(e).appendChild(O);const $=dV(e,t),ie=new _V(e,t,S,r,o,l,D,$);return ie.onDestroy(()=>function(n){n.parentNode.removeChild(n)}(O)),ie}}class CV{constructor(e,t,r,o){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=o,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(t=>{"offset"!=t&&(e[t]=this._finished?this._finalKeyframe[t]:VR(this.element,t))}),this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class kH{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(bV().toString()),this._cssKeyframesDriver=new vV}validateStyleProperty(e){return SR(e)}matchesElement(e,t){return xR(e,t)}containsElement(e,t){return PR(e,t)}query(e,t,r){return NR(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,r,o,l,d=[],p){if(!p&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,r,o,l,d);const D={duration:r,delay:o,fill:0==o?"both":"forwards"};l&&(D.easing=l);const S={},O=d.filter($=>$ instanceof CV);zL(r,o)&&O.forEach($=>{let ie=$.currentSnapshot;Object.keys(ie).forEach(Ee=>S[Ee]=ie[Ee])});const F=dV(e,t=WL(e,t=t.map($=>Yp($,!1)),S));return new CV(e,t,D,F)}}function bV(){return OL()&&Element.prototype.animate||{}}let LH=(()=>{class n extends V0{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:c.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const o=Array.isArray(t)?U0(t):t;return wV(this._renderer,null,r,"register",[o]),new VH(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.FYo),c.LFG(me))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class VH extends class{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new UH(this._id,e,t||{},this._renderer)}}class UH{constructor(e,t,r,o){this.id=e,this.element=t,this._renderer=o,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return wV(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function wV(n,e,t,r,o){return n.setProperty(e,`@@${t}:${r}`,o)}const TV="@.disabled";let BH=(()=>{class n{constructor(t,r,o){this.delegate=t,this.engine=r,this._zone=o,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(l,d)=>{d&&d.parentNode(l)&&d.removeChild(l.parentNode,l)}}createRenderer(t,r){const l=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let D=this._rendererCache.get(l);return D||(D=new IV("",l,this.engine),this._rendererCache.set(l,D)),D}const d=r.id,p=r.id+"-"+this._currentId;this._currentId++,this.engine.register(p,t);const y=D=>{Array.isArray(D)?D.forEach(y):this.engine.registerTrigger(d,p,t,D.name,D)};return r.data.animation.forEach(y),new jH(this,p,l,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,o){t>=0&&t<this._microtaskId?this._zone.run(()=>r(o)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(l=>{const[d,p]=l;d(p)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,o]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.FYo),c.LFG(Ex),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class IV{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?o=>t.destroyNode(o):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,o=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,o)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,o){this.delegate.setAttribute(e,t,r,o)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,o){this.delegate.setStyle(e,t,r,o)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==TV?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class jH extends IV{constructor(e,t,r,o){super(t,r,o),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==TV?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const o=function(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let l=t.substr(1),d="";return"@"!=l.charAt(0)&&([l,d]=function(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(l)),this.engine.listen(this.namespaceId,o,l,d,p=>{this.factory.scheduleListenerCallback(p._data||-1,r,p)})}return this.delegate.listen(e,t,r)}}let qH=(()=>{class n extends Ex{constructor(t,r,o){super(t.body,r,o)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(me),c.LFG(MR),c.LFG(qR))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const DV=new c.OlP("AnimationModuleType"),AV=[{provide:V0,useClass:LH},{provide:qR,useFactory:function(){return new Q3}},{provide:Ex,useClass:qH},{provide:c.FYo,useFactory:function(n,e,t){return new BH(n,e,t)},deps:[Mi,Ex,c.R0b]}],SV=[{provide:MR,useFactory:function(){return"function"==typeof bV()?new kH:new vV}},{provide:DV,useValue:"BrowserAnimations"},...AV],xV=[{provide:MR,useClass:BL},{provide:DV,useValue:"NoopAnimations"},...AV];let PV=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?xV:SV}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:SV,imports:[bd]}),n})(),WH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[CR,Vr,sD,hv,PV,vD.forRoot()]]}),n})(),KH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Vr,sD,hv]]}),n})();var YH=V(8819);class JH{constructor(e,t){this.observables=e,this.project=t}call(e,t){return t.subscribe(new XH(e,this.observables,this.project))}}class XH extends T{constructor(e,t,r){super(e),this.observables=t,this.project=r,this.toRespond=[];const o=t.length;this.values=new Array(o);for(let l=0;l<o;l++)this.toRespond.push(l);for(let l=0;l<o;l++)this.add(j(this,t[l],void 0,l))}notifyNext(e,t,r){this.values[r]=t;const o=this.toRespond;if(o.length>0){const l=o.indexOf(r);-1!==l&&o.splice(l,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const t=[e,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(e){let t;try{t=this.project.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}class t${constructor(e){this.predicate=e}call(e,t){return t.subscribe(new n$(e,this.predicate))}}class n$ extends Hr.L{constructor(e,t){super(e),this.predicate=t,this.skipping=!0,this.index=0}_next(e){const t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)}tryCallPredicate(e){try{const t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(t){this.destination.error(t)}}}const NV="@firebase/database";let JR="";function OV(n){JR=n}class r${constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,L.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,L.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class i${constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,L.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const RV=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new r$(e)}}catch(e){}return new i$},A_=RV("localStorage"),XR=RV("sessionStorage"),$E=new sl.Yd("@firebase/database"),kV=function(){let n=1;return function(){return n++}}(),FV=function(n){const e=(0,L.dS)(n),t=new L.gQ;t.update(e);const r=t.digest();return L.US.encodeByteArray(r)},Xw=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Xw.apply(null,r):e+="object"==typeof r?(0,L.Pz)(r):r,e+=" "}return e};let S_=null,LV=!0;const VV=function(n,e){(0,L.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?($E.logLevel=sl.in.VERBOSE,S_=$E.log.bind($E),e&&XR.set("logging_enabled",!0)):"function"==typeof n?S_=n:(S_=null,XR.remove("logging_enabled"))},Hi=function(...n){if(!0===LV&&(LV=!1,null===S_&&!0===XR.get("logging_enabled")&&VV(!0)),S_){const e=Xw.apply(null,n);S_(e)}},eT=function(n){return function(...e){Hi(n,...e)}},e1=function(...n){const e="FIREBASE INTERNAL ERROR: "+Xw(...n);$E.error(e)},Jc=function(...n){const e=`FIREBASE FATAL ERROR: ${Xw(...n)}`;throw $E.error(e),new Error(e)},so=function(...n){const e="FIREBASE WARNING: "+Xw(...n);$E.warn(e)},wx=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Nh="[MIN_NAME]",Xc="[MAX_NAME]",x_=function(n,e){if(n===e)return 0;if(n===Nh||e===Xc)return-1;if(e===Nh||n===Xc)return 1;{const t=Tx(n),r=Tx(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},a$=function(n,e){return n===e?0:n<e?-1:1},tT=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,L.Pz)(e))},t1=function(n){if("object"!=typeof n||null===n)return(0,L.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,L.Pz)(e[r]),t+=":",t+=t1(n[e[r]]);return t+="}",t},UV=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let o=0;o<t;o+=e)r.push(n.substring(o,o+e>t?t:o+e));return r};function $i(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const BV=function(n){(0,L.hu)(!wx(n),"Invalid JSON number");const r=1023;let o,l,d,p,y;0===n?(l=0,d=0,o=1/n==-1/0?1:0):(o=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(p=Math.min(Math.floor(Math.log(n)/Math.LN2),r),l=p+r,d=Math.round(n*Math.pow(2,52-p)-Math.pow(2,52))):(l=0,d=Math.round(n/Math.pow(2,-1074))));const b=[];for(y=52;y;y-=1)b.push(d%2?1:0),d=Math.floor(d/2);for(y=11;y;y-=1)b.push(l%2?1:0),l=Math.floor(l/2);b.push(o?1:0),b.reverse();const D=b.join("");let S="";for(y=0;y<64;y+=8){let O=parseInt(D.substr(y,8),2).toString(16);1===O.length&&(O="0"+O),S+=O}return S.toLowerCase()},d$=new RegExp("^-?(0*)\\d{1,10}$"),jV=-2147483648,n1=2147483647,Tx=function(n){if(d$.test(n)){const e=Number(n);if(e>=jV&&e<=n1)return e}return null},qE=function(n){try{n()}catch(e){setTimeout(()=>{throw so("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},nT=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class f${constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){so(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class p${constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Hi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',so(e)}}let rT=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const GV=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,WV="websocket",KV="long_polling";class i1{constructor(e,t,r,o,l=!1,d="",p=!1){this.secure=t,this.namespace=r,this.webSocketOnly=o,this.nodeAdmin=l,this.persistenceKey=d,this.includeNamespaceInQueryParams=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=A_.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&A_.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function YV(n,e,t){let r;if((0,L.hu)("string"==typeof e,"typeof type must == string"),(0,L.hu)("object"==typeof t,"typeof params must == object"),e===WV)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==KV)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const o=[];return $i(t,(l,d)=>{o.push(l+"="+d)}),r+o.join("&")}class _${constructor(){this.counters_={}}incrementCounter(e,t=1){(0,L.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,L.p$)(this.counters_)}}const s1={},o1={};function a1(n){const e=n.toString();return s1[e]||(s1[e]=new _$),s1[e]}class v${constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<r.length;++o)r[o]&&qE(()=>{this.onMessage_(r[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class ZE{constructor(e,t,r,o,l,d,p){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=o,this.authToken=l,this.transportSessionId=d,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=eT(e),this.stats_=a1(t),this.urlFn=y=>(this.appCheckToken&&(y.ac=this.appCheckToken),YV(t,KV,y))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new v$(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,L.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new l1((...l)=>{const[d,p,y,b,D]=l;if(this.incrementIncomingBytes_(l),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===d)this.id=p,this.password=y;else{if("close"!==d)throw new Error("Unrecognized command received: "+d);p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_()}},(...l)=>{const[d,p]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(d,p)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&GV.test(location.hostname)&&(r.r="f");const o=this.urlFn(r);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ZE.forceAllow_=!0}static forceDisallow(){ZE.forceDisallow_=!0}static isAvailable(){return!((0,L.Yr)()||!ZE.forceAllow_&&(ZE.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,L.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,L.h$)(t),o=UV(r,1840);for(let l=0;l<o.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[l]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,L.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,L.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class l1{constructor(e,t,r,o){if(this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,L.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=kV(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=l1.createIFrame_();let l="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(l='<script>document.domain="'+document.domain+'";<\/script>');const d="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(d),this.myIFrame.doc.close()}catch(p){Hi("frame writing exception"),p.stack&&Hi(p.stack),Hi(p)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Hi("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const d=this.pendingSegs.shift();r=r+"&seg"+o+"="+d.seg+"&ts"+o+"="+d.ts+"&d"+o+"="+d.d,o++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},o=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(o),r()})}addTag(e,t){(0,L.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const o=r.readyState;(!o||"loaded"===o||"complete"===o)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Hi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let iT=null;"undefined"!=typeof MozWebSocket?iT=MozWebSocket:"undefined"!=typeof WebSocket&&(iT=WebSocket);let sT=(()=>{class n{constructor(t,r,o,l,d,p,y){this.connId=t,this.applicationId=o,this.appCheckToken=l,this.authToken=d,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=eT(this.connId),this.stats_=a1(r),this.connURL=n.connectionURL_(r,p,y,l),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,o,l){const d={v:"5"};return!(0,L.Yr)()&&"undefined"!=typeof location&&location.hostname&&GV.test(location.hostname)&&(d.r="f"),r&&(d.s=r),o&&(d.ls=o),l&&(d.ac=l),YV(t,WV,d)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,A_.set("previous_websocket_failure",!0);try{if((0,L.Yr)()){const l={headers:{"User-Agent":`Firebase/5/${JR}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(l.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(l.headers["X-Firebase-AppCheck"]=this.appCheckToken);const d=process.env,p=0===this.connURL.indexOf("wss://")?d.HTTPS_PROXY||d.https_proxy:d.HTTP_PROXY||d.http_proxy;p&&(l.proxy={origin:p}),this.mySock=new iT(this.connURL,[],l)}else this.mySock=new iT(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(o){this.log_("Error instantiating WebSocket.");const l=o.message||o.data;return l&&this.log_(l),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=o=>{this.handleIncomingFrame(o)},this.mySock.onerror=o=>{this.log_("WebSocket error.  Closing connection.");const l=o.message||o.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const o=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);o&&o.length>1&&parseFloat(o[1])<4.4&&(t=!0)}return!t&&null!==iT&&!n.forceDisallow_}static previouslyFailed(){return A_.isInMemoryStorage||!0===A_.get("previous_websocket_failure")}markConnectionHealthy(){A_.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const o=(0,L.cI)(r);this.onMessage(o)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,L.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const o=this.extractFrameCount_(r);null!==o&&this.appendFrame_(o)}}send(t){this.resetKeepAlive();const r=(0,L.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const o=UV(r,16384);o.length>1&&this.sendString_(String(o.length));for(let l=0;l<o.length;l++)this.sendString_(o[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class u1{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[ZE,sT]}initTransports_(e){const t=sT&&sT.isAvailable();let r=t&&!sT.previouslyFailed();if(e.webSocketOnly&&(t||so("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[sT];else{const o=this.transports_=[];for(const l of u1.ALL_TRANSPORTS)l&&l.isAvailable()&&o.push(l)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class u2{constructor(e,t,r,o,l,d,p,y,b,D){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=o,this.authToken_=l,this.onMessage_=d,this.onReady_=p,this.onDisconnect_=y,this.onKill_=b,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=eT("c:"+this.id+":"),this.transportManager_=new u1(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=nT(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=tT("t",e),r=tT("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=tT("t",e),r=tT("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=tT("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?e1("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):e1("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&so("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),nT(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):nT(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(A_.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class c2{put(e,t,r,o){}merge(e,t,r,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class d2{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,L.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let o=0;o<r.length;o++)r[o].callback.apply(r[o].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const o=this.getInitialEvent(e);o&&t.apply(r,o)}off(e,t,r){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let l=0;l<o.length;l++)if(o[l].callback===t&&(!r||r===o[l].context))return void o.splice(l,1)}validateEventType_(e){(0,L.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Dx extends d2{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,L.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Dx}getInitialEvent(e){return(0,L.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Cn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[r]=this.pieces_[o],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function gn(){return new Cn("")}function qt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Qp(n){return n.pieces_.length-n.pieceNum_}function Ln(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Cn(n.pieces_,e)}function d1(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function oT(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function p2(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Cn(e,0)}function cr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Cn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let o=0;o<r.length;o++)r[o].length>0&&t.push(r[o])}return new Cn(t,0)}function Zt(n){return n.pieceNum_>=n.pieces_.length}function oo(n,e){const t=qt(n),r=qt(e);if(null===t)return e;if(t===r)return oo(Ln(n),Ln(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function j$(n,e){const t=oT(n,0),r=oT(e,0);for(let o=0;o<t.length&&o<r.length;o++){const l=x_(t[o],r[o]);if(0!==l)return l}return t.length===r.length?0:t.length<r.length?-1:1}function h1(n,e){if(Qp(n)!==Qp(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function bl(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Qp(n)>Qp(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class H${constructor(e,t){this.errorPrefix_=t,this.parts_=oT(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,L.ug)(this.parts_[r]);g2(this)}}function g2(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+P_(n))}function P_(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class f1 extends d2{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new f1}getInitialEvent(e){return(0,L.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const aT=1e3;let Sx,N_=(()=>{class n extends c2{constructor(t,r,o,l,d,p,y,b){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=o,this.onConnectStatus_=l,this.onServerInfoUpdate_=d,this.authTokenProvider_=p,this.appCheckTokenProvider_=y,this.authOverride_=b,this.id=n.nextPersistentConnectionId_++,this.log_=eT("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=aT,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,b&&!(0,L.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");f1.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Dx.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,o){const l=++this.requestNumber_,d={r:l,a:t,b:r};this.log_((0,L.Pz)(d)),(0,L.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(d),o&&(this.requestCBHash_[l]=o)}get(t){this.initConnection_();const r=new L.BH,o={p:t._path.toString(),q:t._queryObject},l={action:"g",request:o,onComplete:p=>{const y=p.d;"ok"===p.s?(this.onDataUpdate_(o.p,y,!1,null),r.resolve(y)):r.reject(y)}};this.outstandingGets_.push(l),this.outstandingGetCount_++;const d=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const p=this.outstandingGets_[d];void 0===p||l!==p||(delete this.outstandingGets_[d],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+d+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(d),r.promise}listen(t,r,o,l){this.initConnection_();const d=t._queryIdentifier,p=t._path.toString();this.log_("Listen called for "+p+" "+d),this.listens.has(p)||this.listens.set(p,new Map),(0,L.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,L.hu)(!this.listens.get(p).has(d),"listen() called twice for same path/queryId.");const y={onComplete:l,hashFn:r,query:t,tag:o};this.listens.get(p).set(d,y),this.connected_&&this.sendListen_(y)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,o=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(o)})}sendListen_(t){const r=t.query,o=r._path.toString(),l=r._queryIdentifier;this.log_("Listen on "+o+" for "+l);const d={p:o};t.tag&&(d.q=r._queryObject,d.t=t.tag),d.h=t.hashFn(),this.sendRequest("q",d,y=>{const b=y.d,D=y.s;n.warnOnListenWarnings_(b,r),(this.listens.get(o)&&this.listens.get(o).get(l))===t&&(this.log_("listen response",y),"ok"!==D&&this.removeListen_(o,l),t.onComplete&&t.onComplete(D,b))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,L.r3)(t,"w")){const o=(0,L.DV)(t,"w");if(Array.isArray(o)&&~o.indexOf("no_index")){const l='".indexOn": "'+r._queryParams.getIndex().toString()+'"',d=r._path.toString();so(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${d} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,L.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,L.w9)(t)?"auth":"gauth",o={cred:t};null===this.authOverride_?o.noauth=!0:"object"==typeof this.authOverride_&&(o.authvar=this.authOverride_),this.sendRequest(r,o,l=>{const d=l.s,p=l.d||"error";this.authToken_===t&&("ok"===d?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(d,p))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,o=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,o)})}unlisten(t,r){const o=t._path.toString(),l=t._queryIdentifier;this.log_("Unlisten called for "+o+" "+l),(0,L.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(o,l)&&this.connected_&&this.sendUnlisten_(o,l,t._queryObject,r)}sendUnlisten_(t,r,o,l){this.log_("Unlisten on "+t+" for "+r);const d={p:t};l&&(d.q=o,d.t=l),this.sendRequest("n",d)}onDisconnectPut(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:o})}onDisconnectMerge(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:o})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,o,l){const d={p:r,d:o};this.log_("onDisconnect "+t,d),this.sendRequest(t,d,p=>{l&&setTimeout(()=>{l(p.s,p.d)},Math.floor(0))})}put(t,r,o,l){this.putInternal("p",t,r,o,l)}merge(t,r,o,l){this.putInternal("m",t,r,o,l)}putInternal(t,r,o,l,d){this.initConnection_();const p={p:r,d:o};void 0!==d&&(p.h=d),this.outstandingPuts_.push({action:t,request:p,onComplete:l}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,o=this.outstandingPuts_[t].request,l=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,o,d=>{this.log_(r+" response",d),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),l&&l(d.s,d.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,o=>{"ok"!==o.s&&this.log_("reportStats","Error sending stats: "+o.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,L.Pz)(t));const r=t.r,o=this.requestCBHash_[r];o&&(delete this.requestCBHash_[r],o(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):e1("Unrecognized action received from server: "+(0,L.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,L.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=aT,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=aT,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=aT),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,_e.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),o=t.onReady_.bind(t),l=t.onRealtimeDisconnect_.bind(t),d=t.id+":"+n.nextConnectionId_++,p=t.lastSessionId;let y=!1,b=null;const D=function(){b?b.close():(y=!0,l())};t.realtime_={close:D,sendRequest:function(F){(0,L.hu)(b,"sendRequest call when we're not connected not allowed."),b.sendRequest(F)}};const O=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[F,$]=yield Promise.all([t.authTokenProvider_.getToken(O),t.appCheckTokenProvider_.getToken(O)]);y?Hi("getToken() completed but was canceled"):(Hi("getToken() completed. Creating connection."),t.authToken_=F&&F.accessToken,t.appCheckToken_=$&&$.token,b=new u2(d,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,o,l,ie=>{so(ie+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},p))}catch(F){t.log_("Failed to get token: "+F),y||(t.repoInfo_.nodeAdmin&&so(F),D())}}})()}interrupt(t){Hi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Hi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,L.xb)(this.interruptReasons_)&&(this.reconnectDelay_=aT,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let o;o=r?r.map(d=>t1(d)).join("$"):"default";const l=this.removeListen_(t,o);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(t,r){const o=new Cn(t).toString();let l;if(this.listens.has(o)){const d=this.listens.get(o);l=d.get(r),d.delete(r),0===d.size&&this.listens.delete(o)}else l=void 0;return l}onAuthRevoked_(t,r){Hi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Hi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,L.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+JR.replace(/\./g,"-")]=1,(0,L.uI)()?t["framework.cordova"]=1:(0,L.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Dx.getInstance().currentlyOnline();return(0,L.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Kt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Kt(e,t)}}class Ax{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Kt(Nh,e),o=new Kt(Nh,t);return 0!==this.compare(r,o)}minPost(){return Kt.MIN}}class y2 extends Ax{static get __EMPTY_NODE(){return Sx}static set __EMPTY_NODE(e){Sx=e}compare(e,t){return x_(e.name,t.name)}isDefinedOn(e){throw(0,L.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Kt.MIN}maxPost(){return new Kt(Xc,Sx)}makePost(e,t){return(0,L.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Kt(e,Sx)}toString(){return".key"}}const ed=new y2;class xx{constructor(e,t,r,o,l=null){this.isReverse_=o,this.resultGenerator_=l,this.nodeStack_=[];let d=1;for(;!e.isEmpty();)if(e=e,d=t?r(e.key,t):1,o&&(d*=-1),d<0)e=this.isReverse_?e.left:e.right;else{if(0===d){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let g1,Su=(()=>{class n{constructor(t,r,o,l,d){this.key=t,this.value=r,this.color=null!=o?o:n.RED,this.left=null!=l?l:Vo.EMPTY_NODE,this.right=null!=d?d:Vo.EMPTY_NODE}copy(t,r,o,l,d){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=o?o:this.color,null!=l?l:this.left,null!=d?d:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,o){let l=this;const d=o(t,l.key);return l=d<0?l.copy(null,null,null,l.left.insert(t,r,o),null):0===d?l.copy(null,r,null,null,null):l.copy(null,null,null,null,l.right.insert(t,r,o)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return Vo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let o,l;if(o=this,r(t,o.key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(t,r),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),0===r(t,o.key)){if(o.right.isEmpty())return Vo.EMPTY_NODE;l=o.right.min_(),o=o.copy(l.key,l.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(t,r))}return o.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Vo{constructor(e,t=Vo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Vo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Su.BLACK,null,null))}remove(e){return new Vo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Su.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,o=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return o?o.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(o=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new xx(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new xx(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new xx(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new xx(this.root_,null,this.comparator_,!0,e)}}function Q$(n,e){return x_(n.name,e.name)}function p1(n,e){return x_(n,e)}Vo.EMPTY_NODE=new class{copy(e,t,r,o,l){return this}insert(e,t,r){return new Su(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const v2=function(n){return"number"==typeof n?"number:"+BV(n):"string:"+n},E2=function(n){if(n.isLeafNode()){const e=n.val();(0,L.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,L.r3)(e,".sv"),"Priority must be a string or number.")}else(0,L.hu)(n===g1||n.isEmpty(),"priority of unexpected type.");(0,L.hu)(n===g1||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let C2,b2,w2,GE=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,L.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),E2(this.priorityNode_)}static set __childrenNodeConstructor(t){C2=t}static get __childrenNodeConstructor(){return C2}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Zt(t)?this:".priority"===qt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const o=qt(t);return null===o?r:r.isEmpty()&&".priority"!==o?this:((0,L.hu)(".priority"!==o||1===Qp(t),".priority must be the last token in a path"),this.updateImmediateChild(o,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ln(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+v2(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?BV(this.value_):this.value_,this.lazyHash_=FV(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,L.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,o=typeof this.value_,l=n.VALUE_TYPE_ORDER.indexOf(r),d=n.VALUE_TYPE_ORDER.indexOf(o);return(0,L.hu)(l>=0,"Unknown leaf type: "+r),(0,L.hu)(d>=0,"Unknown leaf type: "+o),l===d?"object"===o?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:d-l}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Gn=new class extends Ax{compare(e,t){const r=e.node.getPriority(),o=t.node.getPriority(),l=r.compareTo(o);return 0===l?x_(e.name,t.name):l}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Kt.MIN}maxPost(){return new Kt(Xc,new GE("[PRIORITY-POST]",w2))}makePost(e,t){const r=b2(e);return new Kt(t,new GE("[PRIORITY-POST]",r))}toString(){return".priority"}},nq=Math.log(2);class rq{constructor(e){this.count=parseInt(Math.log(e+1)/nq,10),this.current_=this.count-1;const o=(l=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Px=function(n,e,t,r){n.sort(e);const o=function(y,b){const D=b-y;let S,O;if(0===D)return null;if(1===D)return S=n[y],O=t?t(S):S,new Su(O,S.node,Su.BLACK,null,null);{const F=parseInt(D/2,10)+y,$=o(y,F),ie=o(F+1,b);return S=n[F],O=t?t(S):S,new Su(O,S.node,Su.BLACK,$,ie)}},p=function(y){let b=null,D=null,S=n.length;const O=function($,ie){const Ee=S-$,ke=S;S-=$;const Ze=o(Ee+1,ke),ft=n[Ee],st=t?t(ft):ft;F(new Su(st,ft.node,ie,null,Ze))},F=function($){b?(b.left=$,b=$):(D=$,b=$)};for(let $=0;$<y.count;++$){const ie=y.nextBitIsOne(),Ee=Math.pow(2,y.count-($+1));ie?O(Ee,Su.BLACK):(O(Ee,Su.BLACK),O(Ee,Su.RED))}return D}(new rq(n.length));return new Vo(r||e,p)};let m1;const zE={};class Mh{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,L.hu)(zE&&Gn,"ChildrenNode.ts has not been loaded"),m1=m1||new Mh({".priority":zE},{".priority":Gn}),m1}get(e){const t=(0,L.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Vo?t:null}hasIndex(e){return(0,L.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,L.hu)(e!==ed,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let o=!1;const l=t.getIterator(Kt.Wrap);let p,d=l.getNext();for(;d;)o=o||e.isDefinedOn(d.node),r.push(d),d=l.getNext();p=o?Px(r,e.getCompare()):zE;const y=e.toString(),b=Object.assign({},this.indexSet_);b[y]=e;const D=Object.assign({},this.indexes_);return D[y]=p,new Mh(D,b)}addToIndexes(e,t){const r=(0,L.UI)(this.indexes_,(o,l)=>{const d=(0,L.DV)(this.indexSet_,l);if((0,L.hu)(d,"Missing index implementation for "+l),o===zE){if(d.isDefinedOn(e.node)){const p=[],y=t.getIterator(Kt.Wrap);let b=y.getNext();for(;b;)b.name!==e.name&&p.push(b),b=y.getNext();return p.push(e),Px(p,d.getCompare())}return zE}{const p=t.get(e.name);let y=o;return p&&(y=y.remove(new Kt(e.name,p))),y.insert(e,e.node)}});return new Mh(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,L.UI)(this.indexes_,o=>{if(o===zE)return o;{const l=t.get(e.name);return l?o.remove(new Kt(e.name,l)):o}});return new Mh(r,this.indexSet_)}}let lT,Ot=(()=>{class n{constructor(t,r,o){this.children_=t,this.priorityNode_=r,this.indexMap_=o,this.lazyHash_=null,this.priorityNode_&&E2(this.priorityNode_),this.children_.isEmpty()&&(0,L.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return lT||(lT=new n(new Vo(p1),null,Mh.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||lT}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?lT:r}}getChild(t){const r=qt(t);return null===r?this:this.getImmediateChild(r).getChild(Ln(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,L.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const o=new Kt(t,r);let l,d;r.isEmpty()?(l=this.children_.remove(t),d=this.indexMap_.removeFromIndexes(o,this.children_)):(l=this.children_.insert(t,r),d=this.indexMap_.addToIndexes(o,this.children_));const p=l.isEmpty()?lT:this.priorityNode_;return new n(l,p,d)}}updateChild(t,r){const o=qt(t);if(null===o)return r;{(0,L.hu)(".priority"!==qt(t)||1===Qp(t),".priority must be the last token in a path");const l=this.getImmediateChild(o).updateChild(Ln(t),r);return this.updateImmediateChild(o,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let o=0,l=0,d=!0;if(this.forEachChild(Gn,(p,y)=>{r[p]=y.val(t),o++,d&&n.INTEGER_REGEXP_.test(p)?l=Math.max(l,Number(p)):d=!1}),!t&&d&&l<2*o){const p=[];for(const y in r)p[y]=r[y];return p}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+v2(this.getPriority().val())+":"),this.forEachChild(Gn,(r,o)=>{const l=o.hash();""!==l&&(t+=":"+r+":"+l)}),this.lazyHash_=""===t?"":FV(t)}return this.lazyHash_}getPredecessorChildName(t,r,o){const l=this.resolveIndex_(o);if(l){const d=l.getPredecessorKey(new Kt(t,r));return d?d.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.minKey();return o&&o.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Kt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.maxKey();return o&&o.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Kt(r,this.children_.get(r)):null}forEachChild(t,r){const o=this.resolveIndex_(t);return o?o.inorderTraversal(l=>r(l.name,l.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getIteratorFrom(t,l=>l);{const l=this.children_.getIteratorFrom(t.name,Kt.Wrap);let d=l.peek();for(;null!=d&&r.compare(d,t)<0;)l.getNext(),d=l.peek();return l}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getReverseIteratorFrom(t,l=>l);{const l=this.children_.getReverseIteratorFrom(t.name,Kt.Wrap);let d=l.peek();for(;null!=d&&r.compare(d,t)>0;)l.getNext(),d=l.peek();return l}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===uT?-1:0}withIndex(t){if(t===ed||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===ed||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const o=this.getIterator(Gn),l=r.getIterator(Gn);let d=o.getNext(),p=l.getNext();for(;d&&p;){if(d.name!==p.name||!d.node.equals(p.node))return!1;d=o.getNext(),p=l.getNext()}return null===d&&null===p}return!1}return!1}}resolveIndex_(t){return t===ed?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const uT=new class extends Ot{constructor(){super(new Vo(p1),Ot.EMPTY_NODE,Mh.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ot.EMPTY_NODE}isEmpty(){return!1}};function Tr(n,e=null){if(null===n)return Ot.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,L.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new GE(n,Tr(e));if(n instanceof Array){let t=Ot.EMPTY_NODE;return $i(n,(r,o)=>{if((0,L.r3)(n,r)&&"."!==r.substring(0,1)){const l=Tr(o);(l.isLeafNode()||!l.isEmpty())&&(t=t.updateImmediateChild(r,l))}}),t.updatePriority(Tr(e))}{const t=[];let r=!1;if($i(n,(d,p)=>{if("."!==d.substring(0,1)){const y=Tr(p);y.isEmpty()||(r=r||!y.getPriority().isEmpty(),t.push(new Kt(d,y)))}}),0===t.length)return Ot.EMPTY_NODE;const l=Px(t,Q$,d=>d.name,p1);if(r){const d=Px(t,Gn.getCompare());return new Ot(l,Tr(e),new Mh({".priority":d},{".priority":Gn}))}return new Ot(l,Tr(e),Mh.Default)}}Object.defineProperties(Kt,{MIN:{value:new Kt(Nh,Ot.EMPTY_NODE)},MAX:{value:new Kt(Xc,uT)}}),y2.__EMPTY_NODE=Ot.EMPTY_NODE,GE.__childrenNodeConstructor=Ot,function(n){g1=n}(uT),function(n){w2=n}(uT),function(n){b2=n}(Tr);class _1 extends Ax{constructor(e){super(),this.indexPath_=e,(0,L.hu)(!Zt(e)&&".priority"!==qt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),o=this.extractChild(t.node),l=r.compareTo(o);return 0===l?x_(e.name,t.name):l}makePost(e,t){const r=Tr(e),o=Ot.EMPTY_NODE.updateChild(this.indexPath_,r);return new Kt(t,o)}maxPost(){const e=Ot.EMPTY_NODE.updateChild(this.indexPath_,uT);return new Kt(Xc,e)}toString(){return oT(this.indexPath_,0).join("/")}}const y1=new class extends Ax{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?x_(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Kt.MIN}maxPost(){return Kt.MAX}makePost(e,t){const r=Tr(e);return new Kt(t,r)}toString(){return".value"}},WE="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",aq=function(){let n=0;const e=[];return function(t){const r=t===n;let o;n=t;const l=new Array(8);for(o=7;o>=0;o--)l[o]=WE.charAt(t%64),t=Math.floor(t/64);(0,L.hu)(0===t,"Cannot push at time == 0");let d=l.join("");if(r){for(o=11;o>=0&&63===e[o];o--)e[o]=0;e[o]++}else for(o=0;o<12;o++)e[o]=Math.floor(64*Math.random());for(o=0;o<12;o++)d+=WE.charAt(e[o]);return(0,L.hu)(20===d.length,"nextPushId: Length should be 20."),d}}(),D2=function(n){if(n===""+n1)return"-";const e=Tx(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let d=0;d<t.length;d++)t[d]=n.charAt(d);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Xc;const l=WE.charAt(WE.indexOf(t[r])+1);return t[r]=l,t.slice(0,r+1).join("")},A2=function(n){if(n===""+jV)return Nh;const e=Tx(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+n1:(delete t[t.length-1],t.join("")):(t[t.length-1]=WE.charAt(WE.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function S2(n){return{type:"value",snapshotNode:n}}function KE(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function cT(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function dT(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class E1{constructor(e){this.index_=e}updateChild(e,t,r,o,l,d){(0,L.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const p=e.getImmediateChild(t);return p.getChild(o).equals(r.getChild(o))&&p.isEmpty()===r.isEmpty()||(null!=d&&(r.isEmpty()?e.hasChild(t)?d.trackChildChange(cT(t,p)):(0,L.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):p.isEmpty()?d.trackChildChange(KE(t,r)):d.trackChildChange(dT(t,r,p))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Gn,(o,l)=>{t.hasChild(o)||r.trackChildChange(cT(o,l))}),t.isLeafNode()||t.forEachChild(Gn,(o,l)=>{if(e.hasChild(o)){const d=e.getImmediateChild(o);d.equals(l)||r.trackChildChange(dT(o,l,d))}else r.trackChildChange(KE(o,l))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Ot.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class hT{constructor(e){this.indexedFilter_=new E1(e.getIndex()),this.index_=e.getIndex(),this.startPost_=hT.getStartPost_(e),this.endPost_=hT.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,o,l,d){return this.matches(new Kt(t,r))||(r=Ot.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,o,l,d)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Ot.EMPTY_NODE);let o=t.withIndex(this.index_);o=o.updatePriority(Ot.EMPTY_NODE);const l=this;return t.forEachChild(Gn,(d,p)=>{l.matches(new Kt(d,p))||(o=o.updateImmediateChild(d,Ot.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class uq{constructor(e){this.rangedFilter_=new hT(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,o,l,d){return this.rangedFilter_.matches(new Kt(t,r))||(r=Ot.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,o,l,d):this.fullLimitUpdateChild_(e,t,r,l,d)}updateFullNode(e,t,r){let o;if(t.isLeafNode()||t.isEmpty())o=Ot.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let l;o=Ot.EMPTY_NODE.withIndex(this.index_),l=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let d=0;for(;l.hasNext()&&d<this.limit_;){const p=l.getNext();let y;if(y=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),p)<=0:this.index_.compare(p,this.rangedFilter_.getEndPost())<=0,!y)break;o=o.updateImmediateChild(p.name,p.node),d++}}else{let l,d,p,y;if(o=t.withIndex(this.index_),o=o.updatePriority(Ot.EMPTY_NODE),this.reverse_){y=o.getReverseIterator(this.index_),l=this.rangedFilter_.getEndPost(),d=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();p=(O,F)=>S(F,O)}else y=o.getIterator(this.index_),l=this.rangedFilter_.getStartPost(),d=this.rangedFilter_.getEndPost(),p=this.index_.getCompare();let b=0,D=!1;for(;y.hasNext();){const S=y.getNext();!D&&p(l,S)<=0&&(D=!0),D&&b<this.limit_&&p(S,d)<=0?b++:o=o.updateImmediateChild(S.name,Ot.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,o,l){let d;if(this.reverse_){const S=this.index_.getCompare();d=(O,F)=>S(F,O)}else d=this.index_.getCompare();const p=e;(0,L.hu)(p.numChildren()===this.limit_,"");const y=new Kt(t,r),b=this.reverse_?p.getFirstChild(this.index_):p.getLastChild(this.index_),D=this.rangedFilter_.matches(y);if(p.hasChild(t)){const S=p.getImmediateChild(t);let O=o.getChildAfterChild(this.index_,b,this.reverse_);for(;null!=O&&(O.name===t||p.hasChild(O.name));)O=o.getChildAfterChild(this.index_,O,this.reverse_);const F=null==O?1:d(O,y);if(D&&!r.isEmpty()&&F>=0)return null!=l&&l.trackChildChange(dT(t,r,S)),p.updateImmediateChild(t,r);{null!=l&&l.trackChildChange(cT(t,S));const ie=p.updateImmediateChild(t,Ot.EMPTY_NODE);return null!=O&&this.rangedFilter_.matches(O)?(null!=l&&l.trackChildChange(KE(O.name,O.node)),ie.updateImmediateChild(O.name,O.node)):ie}}return r.isEmpty()?e:D&&d(b,y)>=0?(null!=l&&(l.trackChildChange(cT(b.name,b.node)),l.trackChildChange(KE(t,r))),p.updateImmediateChild(t,r).updateImmediateChild(b.name,Ot.EMPTY_NODE)):e}}class Nx{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Gn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Nh}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Xc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,L.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Gn}copy(){const e=new Nx;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function C1(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function b1(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function Mx(n,e){const t=n.copy();return t.index_=e,t}function x2(n){const e={};if(n.isDefault())return e;let t;return n.index_===Gn?t="$priority":n.index_===y1?t="$value":n.index_===ed?t="$key":((0,L.hu)(n.index_ instanceof _1,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,L.Pz)(t),n.startSet_&&(e.startAt=(0,L.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,L.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,L.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,L.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function P2(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Gn&&(e.i=n.index_.toString()),e}class Ox extends c2{constructor(e,t,r,o){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=o,this.log_=eT("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,L.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,o){const l=e._path.toString();this.log_("Listen called for "+l+" "+e._queryIdentifier);const d=Ox.getListenId_(e,r),p={};this.listens_[d]=p;const y=x2(e._queryParams);this.restRequest_(l+".json",y,(b,D)=>{let S=D;if(404===b&&(S=null,b=null),null===b&&this.onDataUpdate_(l,S,!1,r),(0,L.DV)(this.listens_,d)===p){let O;O=b?401===b?"permission_denied":"rest_error:"+b:"ok",o(O,null)}})}unlisten(e,t){const r=Ox.getListenId_(e,t);delete this.listens_[r]}get(e){const t=x2(e._queryParams),r=e._path.toString(),o=new L.BH;return this.restRequest_(r+".json",t,(l,d)=>{let p=d;404===l&&(p=null,l=null),null===l?(this.onDataUpdate_(r,p,!1,null),o.resolve(p)):o.reject(new Error(p))}),o.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,l])=>{o&&o.accessToken&&(t.auth=o.accessToken),l&&l.token&&(t.ac=l.token);const d=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,L.xO)(t);this.log_("Sending REST request for "+d);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(r&&4===p.readyState){this.log_("REST Response for "+d+" received. status:",p.status,"response:",p.responseText);let y=null;if(p.status>=200&&p.status<300){try{y=(0,L.cI)(p.responseText)}catch(b){so("Failed to parse JSON response for "+d+": "+p.responseText)}r(null,y)}else 401!==p.status&&404!==p.status&&so("Got unsuccessful REST response for "+d+" Status: "+p.status),r(p.status);r=null}},p.open("GET",d,!0),p.send()})}}class gq{constructor(){this.rootNode_=Ot.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Rx(){return{value:null,children:new Map}}function YE(n,e,t){if(Zt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=qt(e);n.children.has(r)||n.children.set(r,Rx()),YE(n.children.get(r),e=Ln(e),t)}}function w1(n,e){if(Zt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Gn,(r,o)=>{YE(n,new Cn(r),o)}),w1(n,e)}}if(n.children.size>0){const t=qt(e);return e=Ln(e),n.children.has(t)&&w1(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function T1(n,e,t){null!==n.value?t(e,n.value):function(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,o)=>{T1(o,new Cn(e.toString()+"/"+r),t)})}class _q{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&$i(this.last_,(r,o)=>{t[r]=t[r]-o}),this.last_=e,t}}class Eq{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new _q(e);const r=1e4+2e4*Math.random();nT(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;$i(e,(o,l)=>{l>0&&(0,L.r3)(this.statsToReport_,o)&&(t[o]=l,r=!0)}),r&&this.server_.reportStats(t),nT(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var wl=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(wl||(wl={})),wl))();function A1(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class kx{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=wl.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Zt(this.path)){if(null!=this.affectedTree.value)return(0,L.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Cn(e));return new kx(gn(),t,this.revert)}}return(0,L.hu)(qt(this.path)===e,"operationForChild called for unrelated child."),new kx(Ln(this.path),this.affectedTree,this.revert)}}class fT{constructor(e,t){this.source=e,this.path=t,this.type=wl.LISTEN_COMPLETE}operationForChild(e){return Zt(this.path)?new fT(this.source,gn()):new fT(this.source,Ln(this.path))}}class M_{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=wl.OVERWRITE}operationForChild(e){return Zt(this.path)?new M_(this.source,gn(),this.snap.getImmediateChild(e)):new M_(this.source,Ln(this.path),this.snap)}}class QE{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=wl.MERGE}operationForChild(e){if(Zt(this.path)){const t=this.children.subtree(new Cn(e));return t.isEmpty()?null:t.value?new M_(this.source,gn(),t.value):new QE(this.source,gn(),t)}return(0,L.hu)(qt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new QE(this.source,Ln(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Jp{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Zt(e))return this.isFullyInitialized()&&!this.filtered_;const t=qt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Cq{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function pT(n,e,t,r,o,l){const d=r.filter(p=>p.type===t);d.sort((p,y)=>function(n,e,t){if(null==e.childName||null==t.childName)throw(0,L.g5)("Should only compare child_ events.");const r=new Kt(e.childName,e.snapshotNode),o=new Kt(t.childName,t.snapshotNode);return n.index_.compare(r,o)}(n,p,y)),d.forEach(p=>{const y=function(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,p,l);o.forEach(b=>{b.respondsTo(p.type)&&e.push(b.createEvent(y,n.query_))})})}function Fx(n,e){return{eventCache:n,serverCache:e}}function gT(n,e,t,r){return Fx(new Jp(e,t,r),n.serverCache)}function M2(n,e,t,r){return Fx(n.eventCache,new Jp(e,t,r))}function Lx(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function O_(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let S1;class zn{constructor(e,t=(()=>(S1||(S1=new Vo(a$)),S1))()){this.value=e,this.children=t}static fromObject(e){let t=new zn(null);return $i(e,(r,o)=>{t=t.set(new Cn(r),o)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:gn(),value:this.value};if(Zt(e))return null;{const r=qt(e),o=this.children.get(r);if(null!==o){const l=o.findRootMostMatchingPathAndValue(Ln(e),t);return null!=l?{path:cr(new Cn(r),l.path),value:l.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Zt(e))return this;{const t=qt(e),r=this.children.get(t);return null!==r?r.subtree(Ln(e)):new zn(null)}}set(e,t){if(Zt(e))return new zn(t,this.children);{const r=qt(e),l=(this.children.get(r)||new zn(null)).set(Ln(e),t),d=this.children.insert(r,l);return new zn(this.value,d)}}remove(e){if(Zt(e))return this.children.isEmpty()?new zn(null):new zn(null,this.children);{const t=qt(e),r=this.children.get(t);if(r){const o=r.remove(Ln(e));let l;return l=o.isEmpty()?this.children.remove(t):this.children.insert(t,o),null===this.value&&l.isEmpty()?new zn(null):new zn(this.value,l)}return this}}get(e){if(Zt(e))return this.value;{const t=qt(e),r=this.children.get(t);return r?r.get(Ln(e)):null}}setTree(e,t){if(Zt(e))return t;{const r=qt(e),l=(this.children.get(r)||new zn(null)).setTree(Ln(e),t);let d;return d=l.isEmpty()?this.children.remove(r):this.children.insert(r,l),new zn(this.value,d)}}fold(e){return this.fold_(gn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((o,l)=>{r[o]=l.fold_(cr(e,o),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,gn(),t)}findOnPath_(e,t,r){const o=!!this.value&&r(t,this.value);if(o)return o;if(Zt(e))return null;{const l=qt(e),d=this.children.get(l);return d?d.findOnPath_(Ln(e),cr(t,l),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,gn(),t)}foreachOnPath_(e,t,r){if(Zt(e))return this;{this.value&&r(t,this.value);const o=qt(e),l=this.children.get(o);return l?l.foreachOnPath_(Ln(e),cr(t,o),r):new zn(null)}}foreach(e){this.foreach_(gn(),e)}foreach_(e,t){this.children.inorderTraversal((r,o)=>{o.foreach_(cr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class xu{constructor(e){this.writeTree_=e}static empty(){return new xu(new zn(null))}}function mT(n,e,t){if(Zt(e))return new xu(new zn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const o=r.path;let l=r.value;const d=oo(o,e);return l=l.updateChild(d,t),new xu(n.writeTree_.set(o,l))}{const o=new zn(t),l=n.writeTree_.setTree(e,o);return new xu(l)}}}function x1(n,e,t){let r=n;return $i(t,(o,l)=>{r=mT(r,cr(e,o),l)}),r}function O2(n,e){if(Zt(e))return xu.empty();{const t=n.writeTree_.setTree(e,new zn(null));return new xu(t)}}function P1(n,e){return null!=R_(n,e)}function R_(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(oo(t.path,e)):null}function R2(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Gn,(r,o)=>{e.push(new Kt(r,o))}):n.writeTree_.children.inorderTraversal((r,o)=>{null!=o.value&&e.push(new Kt(r,o.value))}),e}function Xp(n,e){if(Zt(e))return n;{const t=R_(n,e);return new xu(null!=t?new zn(t):n.writeTree_.subtree(e))}}function N1(n){return n.writeTree_.isEmpty()}function JE(n,e){return k2(gn(),n.writeTree_,e)}function k2(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((o,l)=>{".priority"===o?((0,L.hu)(null!==l.value,"Priority writes must always be leaf nodes"),r=l.value):t=k2(cr(n,o),l,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(cr(n,".priority"),r)),t}}function Vx(n,e){return B2(e,n)}function Pq(n,e){if(n.snap)return bl(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&bl(cr(n.path,t),e))return!0;return!1}function Mq(n){return n.visible}function F2(n,e,t){let r=xu.empty();for(let o=0;o<n.length;++o){const l=n[o];if(e(l)){const d=l.path;let p;if(l.snap)bl(t,d)?(p=oo(t,d),r=mT(r,p,l.snap)):bl(d,t)&&(p=oo(d,t),r=mT(r,gn(),l.snap.getChild(p)));else{if(!l.children)throw(0,L.g5)("WriteRecord should have .snap or .children");if(bl(t,d))p=oo(t,d),r=x1(r,p,l.children);else if(bl(d,t))if(p=oo(d,t),Zt(p))r=x1(r,gn(),l.children);else{const y=(0,L.DV)(l.children,qt(p));if(y){const b=y.getChild(Ln(p));r=mT(r,gn(),b)}}}}}return r}function L2(n,e,t,r,o){if(r||o){const l=Xp(n.visibleWrites,e);return!o&&N1(l)?t:o||null!=t||P1(l,gn())?JE(F2(n.allWrites,function(b){return(b.visible||o)&&(!r||!~r.indexOf(b.writeId))&&(bl(b.path,e)||bl(e,b.path))},e),t||Ot.EMPTY_NODE):null}{const l=R_(n.visibleWrites,e);if(null!=l)return l;{const d=Xp(n.visibleWrites,e);return N1(d)?t:null!=t||P1(d,gn())?JE(d,t||Ot.EMPTY_NODE):null}}}function Ux(n,e,t,r){return L2(n.writeTree,n.treePath,e,t,r)}function M1(n,e){return function(n,e,t){let r=Ot.EMPTY_NODE;const o=R_(n.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(Gn,(l,d)=>{r=r.updateImmediateChild(l,d)}),r;if(t){const l=Xp(n.visibleWrites,e);return t.forEachChild(Gn,(d,p)=>{const y=JE(Xp(l,new Cn(d)),p);r=r.updateImmediateChild(d,y)}),R2(l).forEach(d=>{r=r.updateImmediateChild(d.name,d.node)}),r}return R2(Xp(n.visibleWrites,e)).forEach(d=>{r=r.updateImmediateChild(d.name,d.node)}),r}(n.writeTree,n.treePath,e)}function V2(n,e,t,r){return function(n,e,t,r,o){(0,L.hu)(r||o,"Either existingEventSnap or existingServerSnap must exist");const l=cr(e,t);if(P1(n.visibleWrites,l))return null;{const d=Xp(n.visibleWrites,l);return N1(d)?o.getChild(t):JE(d,o.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function Bx(n,e){return function(n,e){return R_(n.visibleWrites,e)}(n.writeTree,cr(n.treePath,e))}function O1(n,e,t){return function(n,e,t,r){const o=cr(e,t),l=R_(n.visibleWrites,o);return null!=l?l:r.isCompleteForChild(t)?JE(Xp(n.visibleWrites,o),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function U2(n,e){return B2(cr(n.treePath,e),n.writeTree)}function B2(n,e){return{treePath:n,writeTree:e}}class Bq{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,L.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,L.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const o=this.changeMap.get(r);if(o){const l=o.type;if("child_added"===t&&"child_removed"===l)this.changeMap.set(r,dT(r,e.snapshotNode,o.snapshotNode));else if("child_removed"===t&&"child_added"===l)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===l)this.changeMap.set(r,cT(r,o.oldSnap));else if("child_changed"===t&&"child_added"===l)this.changeMap.set(r,KE(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==l)throw(0,L.g5)("Illegal combination of changes: "+e+" occurred after "+o);this.changeMap.set(r,dT(r,e.snapshotNode,o.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const j2=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class R1{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Jp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return O1(this.writes_,e,r)}}getChildAfterChild(e,t,r){const o=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:O_(this.viewCache_),l=function(n,e,t,r,o,l){return function(n,e,t,r,o,l,d){let p;const y=Xp(n.visibleWrites,e),b=R_(y,gn());if(null!=b)p=b;else{if(null==t)return[];p=JE(y,t)}if(p=p.withIndex(d),p.isEmpty()||p.isLeafNode())return[];{const D=[],S=d.getCompare(),O=l?p.getReverseIteratorFrom(r,d):p.getIteratorFrom(r,d);let F=O.getNext();for(;F&&D.length<o;)0!==S(F,r)&&D.push(F),F=O.getNext();return D}}(n.writeTree,n.treePath,e,t,r,o,l)}(this.writes_,o,t,1,r,e);return 0===l.length?null:l[0]}}function H2(n,e,t,r,o,l){const d=e.eventCache;if(null!=Bx(r,t))return e;{let p,y;if(Zt(t))if((0,L.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const b=O_(e),S=M1(r,b instanceof Ot?b:Ot.EMPTY_NODE);p=n.filter.updateFullNode(e.eventCache.getNode(),S,l)}else{const b=Ux(r,O_(e));p=n.filter.updateFullNode(e.eventCache.getNode(),b,l)}else{const b=qt(t);if(".priority"===b){(0,L.hu)(1===Qp(t),"Can't have a priority with additional path components");const D=d.getNode();y=e.serverCache.getNode();const S=V2(r,t,D,y);p=null!=S?n.filter.updatePriority(D,S):d.getNode()}else{const D=Ln(t);let S;if(d.isCompleteForChild(b)){y=e.serverCache.getNode();const O=V2(r,t,d.getNode(),y);S=null!=O?d.getNode().getImmediateChild(b).updateChild(D,O):d.getNode().getImmediateChild(b)}else S=O1(r,b,e.serverCache);p=null!=S?n.filter.updateChild(d.getNode(),b,S,D,o,l):d.getNode()}}return gT(e,p,d.isFullyInitialized()||Zt(t),n.filter.filtersNodes())}}function jx(n,e,t,r,o,l,d,p){const y=e.serverCache;let b;const D=d?n.filter:n.filter.getIndexedFilter();if(Zt(t))b=D.updateFullNode(y.getNode(),r,null);else if(D.filtersNodes()&&!y.isFiltered()){const F=y.getNode().updateChild(t,r);b=D.updateFullNode(y.getNode(),F,null)}else{const F=qt(t);if(!y.isCompleteForPath(t)&&Qp(t)>1)return e;const $=Ln(t),Ee=y.getNode().getImmediateChild(F).updateChild($,r);b=".priority"===F?D.updatePriority(y.getNode(),Ee):D.updateChild(y.getNode(),F,Ee,$,j2,null)}const S=M2(e,b,y.isFullyInitialized()||Zt(t),D.filtersNodes());return H2(n,S,t,o,new R1(o,S,l),p)}function k1(n,e,t,r,o,l,d){const p=e.eventCache;let y,b;const D=new R1(o,e,l);if(Zt(t))b=n.filter.updateFullNode(e.eventCache.getNode(),r,d),y=gT(e,b,!0,n.filter.filtersNodes());else{const S=qt(t);if(".priority"===S)b=n.filter.updatePriority(e.eventCache.getNode(),r),y=gT(e,b,p.isFullyInitialized(),p.isFiltered());else{const O=Ln(t),F=p.getNode().getImmediateChild(S);let $;if(Zt(O))$=r;else{const ie=D.getCompleteChild(S);$=null!=ie?".priority"===d1(O)&&ie.getChild(p2(O)).isEmpty()?ie:ie.updateChild(O,r):Ot.EMPTY_NODE}y=F.equals($)?e:gT(e,n.filter.updateChild(p.getNode(),S,$,O,D,d),p.isFullyInitialized(),n.filter.filtersNodes())}}return y}function $2(n,e){return n.eventCache.isCompleteForChild(e)}function q2(n,e,t){return t.foreach((r,o)=>{e=e.updateChild(r,o)}),e}function F1(n,e,t,r,o,l,d,p){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let b,y=e;b=Zt(t)?r:new zn(null).setTree(t,r);const D=e.serverCache.getNode();return b.children.inorderTraversal((S,O)=>{if(D.hasChild(S)){const $=q2(0,e.serverCache.getNode().getImmediateChild(S),O);y=jx(n,y,new Cn(S),$,o,l,d,p)}}),b.children.inorderTraversal((S,O)=>{const F=!e.serverCache.isCompleteForChild(S)&&void 0===O.value;if(!D.hasChild(S)&&!F){const ie=q2(0,e.serverCache.getNode().getImmediateChild(S),O);y=jx(n,y,new Cn(S),ie,o,l,d,p)}}),y}class Yq{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,o=new E1(r.getIndex()),l=function(n){return n.loadsAllData()?new E1(n.getIndex()):n.hasLimit()?new uq(n):new hT(n)}(r);this.processor_=function(n){return{filter:n}}(l);const d=t.serverCache,p=t.eventCache,y=o.updateFullNode(Ot.EMPTY_NODE,d.getNode(),null),b=l.updateFullNode(Ot.EMPTY_NODE,p.getNode(),null),D=new Jp(y,d.isFullyInitialized(),o.filtersNodes()),S=new Jp(b,p.isFullyInitialized(),l.filtersNodes());this.viewCache_=Fx(S,D),this.eventGenerator_=new Cq(this.query_)}get query(){return this.query_}}function Xq(n,e){const t=O_(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Zt(e)&&!t.getImmediateChild(qt(e)).isEmpty())?t.getChild(e):null}function Z2(n){return 0===n.eventRegistrations_.length}function G2(n,e,t){const r=[];if(t){(0,L.hu)(null==e,"A cancel should cancel all event registrations.");const o=n.query._path;n.eventRegistrations_.forEach(l=>{const d=l.createCancelEvent(t,o);d&&r.push(d)})}if(e){let o=[];for(let l=0;l<n.eventRegistrations_.length;++l){const d=n.eventRegistrations_[l];if(d.matches(e)){if(e.hasAnyCallback()){o=o.concat(n.eventRegistrations_.slice(l+1));break}}else o.push(d)}n.eventRegistrations_=o}else n.eventRegistrations_=[];return r}function z2(n,e,t,r){e.type===wl.MERGE&&null!==e.source.queryId&&((0,L.hu)(O_(n.viewCache_),"We should always have a full cache before handling merges"),(0,L.hu)(Lx(n.viewCache_),"Missing event cache, even though we have a server cache"));const o=n.viewCache_,l=function(n,e,t,r,o){const l=new Bq;let d,p;if(t.type===wl.OVERWRITE){const b=t;b.source.fromUser?d=k1(n,e,b.path,b.snap,r,o,l):((0,L.hu)(b.source.fromServer,"Unknown source."),p=b.source.tagged||e.serverCache.isFiltered()&&!Zt(b.path),d=jx(n,e,b.path,b.snap,r,o,p,l))}else if(t.type===wl.MERGE){const b=t;b.source.fromUser?d=function(n,e,t,r,o,l,d){let p=e;return r.foreach((y,b)=>{const D=cr(t,y);$2(e,qt(D))&&(p=k1(n,p,D,b,o,l,d))}),r.foreach((y,b)=>{const D=cr(t,y);$2(e,qt(D))||(p=k1(n,p,D,b,o,l,d))}),p}(n,e,b.path,b.children,r,o,l):((0,L.hu)(b.source.fromServer,"Unknown source."),p=b.source.tagged||e.serverCache.isFiltered(),d=F1(n,e,b.path,b.children,r,o,p,l))}else if(t.type===wl.ACK_USER_WRITE){const b=t;d=b.revert?function(n,e,t,r,o,l){let d;if(null!=Bx(r,t))return e;{const p=new R1(r,e,o),y=e.eventCache.getNode();let b;if(Zt(t)||".priority"===qt(t)){let D;if(e.serverCache.isFullyInitialized())D=Ux(r,O_(e));else{const S=e.serverCache.getNode();(0,L.hu)(S instanceof Ot,"serverChildren would be complete if leaf node"),D=M1(r,S)}D=D,b=n.filter.updateFullNode(y,D,l)}else{const D=qt(t);let S=O1(r,D,e.serverCache);null==S&&e.serverCache.isCompleteForChild(D)&&(S=y.getImmediateChild(D)),b=null!=S?n.filter.updateChild(y,D,S,Ln(t),p,l):e.eventCache.getNode().hasChild(D)?n.filter.updateChild(y,D,Ot.EMPTY_NODE,Ln(t),p,l):y,b.isEmpty()&&e.serverCache.isFullyInitialized()&&(d=Ux(r,O_(e)),d.isLeafNode()&&(b=n.filter.updateFullNode(b,d,l)))}return d=e.serverCache.isFullyInitialized()||null!=Bx(r,gn()),gT(e,b,d,n.filter.filtersNodes())}}(n,e,b.path,r,o,l):function(n,e,t,r,o,l,d){if(null!=Bx(o,t))return e;const p=e.serverCache.isFiltered(),y=e.serverCache;if(null!=r.value){if(Zt(t)&&y.isFullyInitialized()||y.isCompleteForPath(t))return jx(n,e,t,y.getNode().getChild(t),o,l,p,d);if(Zt(t)){let b=new zn(null);return y.getNode().forEachChild(ed,(D,S)=>{b=b.set(new Cn(D),S)}),F1(n,e,t,b,o,l,p,d)}return e}{let b=new zn(null);return r.foreach((D,S)=>{const O=cr(t,D);y.isCompleteForPath(O)&&(b=b.set(D,y.getNode().getChild(O)))}),F1(n,e,t,b,o,l,p,d)}}(n,e,b.path,b.affectedTree,r,o,l)}else{if(t.type!==wl.LISTEN_COMPLETE)throw(0,L.g5)("Unknown operation type: "+t.type);d=function(n,e,t,r,o){const l=e.serverCache;return H2(n,M2(e,l.getNode(),l.isFullyInitialized()||Zt(t),l.isFiltered()),t,r,j2,o)}(n,e,t.path,r,l)}const y=l.getChanges();return function(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const o=r.getNode().isLeafNode()||r.getNode().isEmpty(),l=Lx(n);(t.length>0||!n.eventCache.isFullyInitialized()||o&&!r.getNode().equals(l)||!r.getNode().getPriority().equals(l.getPriority()))&&t.push(S2(Lx(e)))}}(e,d,y),{viewCache:d,changes:y}}(n.processor_,o,e,t,r);return function(n,e){(0,L.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,L.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,l.viewCache),(0,L.hu)(l.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=l.viewCache,W2(n,l.changes,l.viewCache.eventCache.getNode(),null)}function W2(n,e,t,r){return function(n,e,t,r){const o=[],l=[];return e.forEach(d=>{"child_changed"===d.type&&n.index_.indexedValueChanged(d.oldSnap,d.snapshotNode)&&l.push(function(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(d.childName,d.snapshotNode))}),pT(n,o,"child_removed",e,r,t),pT(n,o,"child_added",e,r,t),pT(n,o,"child_moved",l,r,t),pT(n,o,"child_changed",e,r,t),pT(n,o,"value",e,r,t),o}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let Hx,qx;class K2{constructor(){this.views=new Map}}function L1(n,e,t,r){const o=e.source.queryId;if(null!==o){const l=n.views.get(o);return(0,L.hu)(null!=l,"SyncTree gave us an op for an invalid query."),z2(l,e,t,r)}{let l=[];for(const d of n.views.values())l=l.concat(z2(d,e,t,r));return l}}function Y2(n,e,t,r,o){const d=n.views.get(e._queryIdentifier);if(!d){let p=Ux(t,o?r:null),y=!1;p?y=!0:r instanceof Ot?(p=M1(t,r),y=!1):(p=Ot.EMPTY_NODE,y=!1);const b=Fx(new Jp(p,y,!1),new Jp(r,o,!1));return new Yq(e,b)}return d}function Q2(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function eg(n,e){let t=null;for(const r of n.views.values())t=t||Xq(r,e);return t}function J2(n,e){return e._queryParams.loadsAllData()?$x(n):n.views.get(e._queryIdentifier)}function X2(n,e){return null!=J2(n,e)}function tg(n){return null!=$x(n)}function $x(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let uZ=1;class eU{constructor(e){this.listenProvider_=e,this.syncPointTree_=new zn(null),this.pendingWriteTree_={visibleWrites:xu.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function V1(n,e,t,r,o){return function(n,e,t,r,o){(0,L.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:o}),o&&(n.visibleWrites=mT(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,o),o?XE(n,new M_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function ng(n,e,t=!1){const r=function(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function(n,e){const t=n.allWrites.findIndex(p=>p.writeId===e);(0,L.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let o=r.visible,l=!1,d=n.allWrites.length-1;for(;o&&d>=0;){const p=n.allWrites[d];p.visible&&(d>=t&&Pq(p,r.path)?o=!1:bl(r.path,p.path)&&(l=!0)),d--}return!!o&&(l?(function(n){n.visibleWrites=F2(n.allWrites,Mq,gn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=O2(n.visibleWrites,r.path):$i(r.children,y=>{n.visibleWrites=O2(n.visibleWrites,cr(r.path,y))}),!0))}(n.pendingWriteTree_,e)){let l=new zn(null);return null!=r.snap?l=l.set(gn(),!0):$i(r.children,d=>{l=l.set(new Cn(d),!0)}),XE(n,new kx(r.path,l,t))}return[]}function _T(n,e,t){return XE(n,new M_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function U1(n,e,t,r){const o=e._path,l=n.syncPointTree_.get(o);let d=[];if(l&&("default"===e._queryIdentifier||X2(l,e))){const p=function(n,e,t,r){const o=e._queryIdentifier,l=[];let d=[];const p=tg(n);if("default"===o)for(const[y,b]of n.views.entries())d=d.concat(G2(b,t,r)),Z2(b)&&(n.views.delete(y),b.query._queryParams.loadsAllData()||l.push(b.query));else{const y=n.views.get(o);y&&(d=d.concat(G2(y,t,r)),Z2(y)&&(n.views.delete(o),y.query._queryParams.loadsAllData()||l.push(y.query)))}return p&&!tg(n)&&l.push(new((0,L.hu)(Hx,"Reference.ts has not been loaded"),Hx)(e._repo,e._path)),{removed:l,events:d}}(l,e,t,r);(function(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const y=p.removed;d=p.events;const b=-1!==y.findIndex(S=>S._queryParams.loadsAllData()),D=n.syncPointTree_.findOnPath(o,(S,O)=>tg(O));if(b&&!D){const S=n.syncPointTree_.subtree(o);if(!S.isEmpty()){const O=function(n){return n.fold((e,t,r)=>{if(t&&tg(t))return[$x(t)];{let o=[];return t&&(o=Q2(t)),$i(r,(l,d)=>{o=o.concat(d)}),o}})}(S);for(let F=0;F<O.length;++F){const $=O[F],ie=$.query,Ee=iU(n,$);n.listenProvider_.startListening(yT(ie),Gx(n,ie),Ee.hashFn,Ee.onComplete)}}}if(!D&&y.length>0&&!r)if(b){const S=null;n.listenProvider_.stopListening(yT(e),S)}else y.forEach(S=>{const O=n.queryToTagMap.get(zx(S));n.listenProvider_.stopListening(yT(S),O)});!function(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const o=zx(r),l=n.queryToTagMap.get(o);n.queryToTagMap.delete(o),n.tagToQueryMap.delete(l)}}}(n,y)}return d}function tU(n,e,t){const r=e._path;let o=null,l=!1;n.syncPointTree_.foreachOnPath(r,(S,O)=>{const F=oo(S,r);o=o||eg(O,F),l=l||tg(O)});let p,d=n.syncPointTree_.get(r);d?(l=l||tg(d),o=o||eg(d,gn())):(d=new K2,n.syncPointTree_=n.syncPointTree_.set(r,d)),null!=o?p=!0:(p=!1,o=Ot.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((O,F)=>{const $=eg(F,gn());$&&(o=o.updateImmediateChild(O,$))}));const y=X2(d,e);if(!y&&!e._queryParams.loadsAllData()){const S=zx(e);(0,L.hu)(!n.queryToTagMap.has(S),"View does not exist, but we have a tag");const O=uZ++;n.queryToTagMap.set(S,O),n.tagToQueryMap.set(O,S)}let D=function(n,e,t,r,o,l){const d=Y2(n,e,r,o,l);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,d),function(n,e){n.eventRegistrations_.push(e)}(d,t),function(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Gn,(l,d)=>{r.push(KE(l,d))}),t.isFullyInitialized()&&r.push(S2(t.getNode())),W2(n,r,t.getNode(),e)}(d,t)}(d,e,t,Vx(n.pendingWriteTree_,r),o,p);if(!y&&!l){const S=J2(d,e);D=D.concat(function(n,e,t){const r=e._path,o=Gx(n,e),l=iU(n,t),d=n.listenProvider_.startListening(yT(e),o,l.hashFn,l.onComplete),p=n.syncPointTree_.subtree(r);if(o)(0,L.hu)(!tg(p.value),"If we're adding a query, it shouldn't be shadowed");else{const y=p.fold((b,D,S)=>{if(!Zt(b)&&D&&tg(D))return[$x(D).query];{let O=[];return D&&(O=O.concat(Q2(D).map(F=>F.query))),$i(S,(F,$)=>{O=O.concat($)}),O}});for(let b=0;b<y.length;++b){const D=y[b];n.listenProvider_.stopListening(yT(D),Gx(n,D))}}return d}(n,e,S))}return D}function Zx(n,e,t){const o=n.pendingWriteTree_,l=n.syncPointTree_.findOnPath(e,(d,p)=>{const b=eg(p,oo(d,e));if(b)return b});return L2(o,e,l,t,!0)}function XE(n,e){return nU(e,n.syncPointTree_,null,Vx(n.pendingWriteTree_,gn()))}function nU(n,e,t,r){if(Zt(n.path))return rU(n,e,t,r);{const o=e.get(gn());null==t&&null!=o&&(t=eg(o,gn()));let l=[];const d=qt(n.path),p=n.operationForChild(d),y=e.children.get(d);if(y&&p){const b=t?t.getImmediateChild(d):null,D=U2(r,d);l=l.concat(nU(p,y,b,D))}return o&&(l=l.concat(L1(o,n,r,t))),l}}function rU(n,e,t,r){const o=e.get(gn());null==t&&null!=o&&(t=eg(o,gn()));let l=[];return e.children.inorderTraversal((d,p)=>{const y=t?t.getImmediateChild(d):null,b=U2(r,d),D=n.operationForChild(d);D&&(l=l.concat(rU(D,p,y,b)))}),o&&(l=l.concat(L1(o,n,r,t))),l}function iU(n,e){const t=e.query,r=Gx(n,t);return{hashFn:()=>(function(n){return n.viewCache_.serverCache.getNode()}(e)||Ot.EMPTY_NODE).hash(),onComplete:o=>{if("ok"===o)return r?function(n,e,t){const r=B1(n,t);if(r){const o=j1(r),l=o.path,d=o.queryId,p=oo(l,e);return H1(n,l,new fT(A1(d),p))}return[]}(n,t._path,r):function(n,e){return XE(n,new fT({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const l=function(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(o,t);return U1(n,t,null,l)}}}}function Gx(n,e){const t=zx(e);return n.queryToTagMap.get(t)}function zx(n){return n._path.toString()+"$"+n._queryIdentifier}function B1(n,e){return n.tagToQueryMap.get(e)}function j1(n){const e=n.indexOf("$");return(0,L.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Cn(n.substr(0,e))}}function H1(n,e,t){const r=n.syncPointTree_.get(e);return(0,L.hu)(r,"Missing sync point for query tag that we're tracking"),L1(r,t,Vx(n.pendingWriteTree_,e),null)}function yT(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new((0,L.hu)(qx,"Reference.ts has not been loaded"),qx)(n._repo,n._path):n}class $1{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new $1(t)}node(){return this.node_}}class q1{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=cr(this.path_,e);return new q1(this.syncTree_,t)}node(){return Zx(this.syncTree_,this.path_)}}const sU=function(n,e,t){return n&&"object"==typeof n?((0,L.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?bZ(n[".sv"],e,t):"object"==typeof n[".sv"]?wZ(n[".sv"],e):void(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},bZ=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:(0,L.hu)(!1,"Unexpected server value: "+n)}},wZ=function(n,e,t){n.hasOwnProperty("increment")||(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,L.hu)(!1,"Unexpected increment value: "+r);const o=e.node();if((0,L.hu)(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;const d=o.getValue();return"number"!=typeof d?r:d+r},oU=function(n,e,t,r){return G1(e,new q1(t,n),r)},Z1=function(n,e,t){return G1(n,new $1(e),t)};function G1(n,e,t){const r=n.getPriority().val(),o=sU(r,e.getImmediateChild(".priority"),t);let l;if(n.isLeafNode()){const d=n,p=sU(d.getValue(),e,t);return p!==d.getValue()||o!==d.getPriority().val()?new GE(p,Tr(o)):n}{const d=n;return l=d,o!==d.getPriority().val()&&(l=l.updatePriority(new GE(o))),d.forEachChild(Gn,(p,y)=>{const b=G1(y,e.getImmediateChild(p),t);b!==y&&(l=l.updateImmediateChild(p,b))}),l}}class z1{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function Wx(n,e){let t=e instanceof Cn?e:new Cn(e),r=n,o=qt(t);for(;null!==o;){const l=(0,L.DV)(r.node.children,o)||{children:{},childCount:0};r=new z1(o,r,l),t=Ln(t),o=qt(t)}return r}function k_(n){return n.node.value}function W1(n,e){n.node.value=e,K1(n)}function aU(n){return n.node.childCount>0}function Kx(n,e){$i(n.node.children,(t,r)=>{e(new z1(t,n,r))})}function lU(n,e,t,r){t&&!r&&e(n),Kx(n,o=>{lU(o,e,!0,r)}),t&&r&&e(n)}function vT(n){return new Cn(null===n.parent?n.name:vT(n.parent)+"/"+n.name)}function K1(n){null!==n.parent&&function(n,e,t){const r=function(n){return void 0===k_(n)&&!aU(n)}(t),o=(0,L.r3)(n.node.children,e);r&&o?(delete n.node.children[e],n.node.childCount--,K1(n)):!r&&!o&&(n.node.children[e]=t.node,n.node.childCount++,K1(n))}(n.parent,n.name,n)}const AZ=/[\[\].#$\/\u0000-\u001F\u007F]/,SZ=/[\[\].#$\u0000-\u001F\u007F]/,Y1=10485760,Yx=function(n){return"string"==typeof n&&0!==n.length&&!AZ.test(n)},uU=function(n){return"string"==typeof n&&0!==n.length&&!SZ.test(n)},ET=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!wx(n)||n&&"object"==typeof n&&(0,L.r3)(n,".sv")},td=function(n,e,t,r){r&&void 0===e||CT((0,L.gK)(n,"value"),e,t)},CT=function(n,e,t){const r=t instanceof Cn?new H$(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+P_(r));if("function"==typeof e)throw new Error(n+"contains a function "+P_(r)+" with contents = "+e.toString());if(wx(e))throw new Error(n+"contains "+e.toString()+" "+P_(r));if("string"==typeof e&&e.length>Y1/3&&(0,L.ug)(e)>Y1)throw new Error(n+"contains a string greater than "+Y1+" utf8 bytes "+P_(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let o=!1,l=!1;if($i(e,(d,p)=>{if(".value"===d)o=!0;else if(".priority"!==d&&".sv"!==d&&(l=!0,!Yx(d)))throw new Error(n+" contains an invalid key ("+d+") "+P_(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,L.ug)(e),g2(n)})(r,d),CT(n,p,r),function(n){const e=n.parts_.pop();n.byteLength_-=(0,L.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),o&&l)throw new Error(n+' contains ".value" child '+P_(r)+" in addition to actual children.")}},cU=function(n,e,t,r){if(r&&void 0===e)return;const o=(0,L.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");const l=[];$i(e,(d,p)=>{const y=new Cn(d);if(CT(o,p,cr(t,y)),".priority"===d1(y)&&!ET(p))throw new Error(o+"contains an invalid value for '"+y.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");l.push(y)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const l=oT(r);for(let d=0;d<l.length;d++)if((".priority"!==l[d]||d!==l.length-1)&&!Yx(l[d]))throw new Error(n+"contains an invalid key ("+l[d]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(j$);let o=null;for(t=0;t<e.length;t++){if(r=e[t],null!==o&&bl(o,r))throw new Error(n+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(o,l)},Q1=function(n,e,t){if(!t||void 0!==e){if(wx(e))throw new Error((0,L.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ET(e))throw new Error((0,L.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},bT=function(n,e,t,r){if(!(r&&void 0===t||Yx(t)))throw new Error((0,L.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},wT=function(n,e,t,r){if(!(r&&void 0===t||uU(t)))throw new Error((0,L.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Tl=function(n,e){if(".info"===qt(e))throw new Error(n+" failed = Can't modify data under /.info/")},dU=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Yx(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),uU(n)}(t))throw new Error((0,L.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class MZ{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Qx(n,e){let t=null;for(let r=0;r<e.length;r++){const o=e[r],l=o.getPath();null!==t&&!h1(l,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:l}),t.events.push(o)}t&&n.eventLists_.push(t)}function J1(n,e,t){Qx(n,t),hU(n,r=>h1(r,e))}function Il(n,e,t){Qx(n,t),hU(n,r=>bl(r,e)||bl(e,r))}function hU(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const o=n.eventLists_[r];o&&(e(o.path)?(OZ(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function OZ(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();S_&&Hi("event: "+t.toString()),qE(r)}}}const fU="repo_interrupt";class kZ{constructor(e,t,r,o){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new MZ,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Rx(),this.transactionQueueTree_=new z1,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function pU(n){const t=n.infoData_.getNode(new Cn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function TT(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:pU(n)})}function gU(n,e,t,r,o){n.dataUpdateCount++;const l=new Cn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let d=[];if(o)if(r){const y=(0,L.UI)(t,b=>Tr(b));d=function(n,e,t,r){const o=B1(n,r);if(o){const l=j1(o),d=l.path,p=l.queryId,y=oo(d,e),b=zn.fromObject(t);return H1(n,d,new QE(A1(p),y,b))}return[]}(n.serverSyncTree_,l,y,o)}else{const y=Tr(t);d=function(n,e,t,r){const o=B1(n,r);if(null!=o){const l=j1(o),d=l.path,p=l.queryId,y=oo(d,e);return H1(n,d,new M_(A1(p),y,t))}return[]}(n.serverSyncTree_,l,y,o)}else if(r){const y=(0,L.UI)(t,b=>Tr(b));d=function(n,e,t){const r=zn.fromObject(t);return XE(n,new QE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,l,y)}else{const y=Tr(t);d=_T(n.serverSyncTree_,l,y)}let p=l;d.length>0&&(p=tC(n,l)),Il(n.eventQueue_,p,d)}function mU(n,e){X1(n,"connected",e),!1===e&&function(n){eC(n,"onDisconnectEvents");const e=TT(n),t=Rx();T1(n.onDisconnect_,gn(),(o,l)=>{const d=oU(o,l,n.serverSyncTree_,e);YE(t,o,d)});let r=[];T1(t,gn(),(o,l)=>{r=r.concat(_T(n.serverSyncTree_,o,l));const d=rk(n,o);tC(n,d)}),n.onDisconnect_=Rx(),Il(n.eventQueue_,gn(),r)}(n)}function X1(n,e,t){const r=new Cn("/.info/"+e),o=Tr(t);n.infoData_.updateSnapshot(r,o);const l=_T(n.infoSyncTree_,r,o);Il(n.eventQueue_,r,l)}function Jx(n){return n.nextWriteId_++}function ek(n,e,t,r,o){eC(n,"set",{path:e.toString(),value:t,priority:r});const l=TT(n),d=Tr(t,r),p=Zx(n.serverSyncTree_,e),y=Z1(d,p,l),b=Jx(n),D=V1(n.serverSyncTree_,e,y,b,!0);Qx(n.eventQueue_,D),n.server_.put(e.toString(),d.val(!0),(O,F)=>{const $="ok"===O;$||so("set at "+e+" failed: "+O);const ie=ng(n.serverSyncTree_,b,!$);Il(n.eventQueue_,e,ie),rg(0,o,O,F)});const S=rk(n,e);tC(n,S),Il(n.eventQueue_,S,[])}function jZ(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,o)=>{"ok"===r&&w1(n.onDisconnect_,e),rg(0,t,r,o)})}function _U(n,e,t,r){const o=Tr(t);n.server_.onDisconnectPut(e.toString(),o.val(!0),(l,d)=>{"ok"===l&&YE(n.onDisconnect_,e,o),rg(0,r,l,d)})}function tk(n,e,t){let r;r=".info"===qt(e._path)?U1(n.infoSyncTree_,e,t):U1(n.serverSyncTree_,e,t),J1(n.eventQueue_,e._path,r)}function yU(n){n.persistentConnection_&&n.persistentConnection_.interrupt(fU)}function eC(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Hi(t,...e)}function rg(n,e,t,r){e&&qE(()=>{if("ok"===t)e(null);else{const o=(t||"error").toUpperCase();let l=o;r&&(l+=": "+r);const d=new Error(l);d.code=o,e(d)}})}function nk(n,e,t){return Zx(n.serverSyncTree_,e,t)||Ot.EMPTY_NODE}function Xx(n,e=n.transactionQueueTree_){if(e||eP(n,e),k_(e)){const t=EU(n,e);(0,L.hu)(t.length>0,"Sending zero length transaction queue"),t.every(o=>0===o.status)&&function(n,e,t){const r=t.map(b=>b.currentWriteId),o=nk(n,e,r);let l=o;const d=o.hash();for(let b=0;b<t.length;b++){const D=t[b];(0,L.hu)(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const S=oo(e,D.path);l=l.updateChild(S,D.currentOutputSnapshotRaw)}const p=l.val(!0),y=e;n.server_.put(y.toString(),p,b=>{eC(n,"transaction put response",{path:y.toString(),status:b});let D=[];if("ok"===b){const S=[];for(let O=0;O<t.length;O++)t[O].status=2,D=D.concat(ng(n.serverSyncTree_,t[O].currentWriteId)),t[O].onComplete&&S.push(()=>t[O].onComplete(null,!0,t[O].currentOutputSnapshotResolved)),t[O].unwatcher();eP(n,Wx(n.transactionQueueTree_,e)),Xx(n,n.transactionQueueTree_),Il(n.eventQueue_,e,D);for(let O=0;O<S.length;O++)qE(S[O])}else{if("datastale"===b)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{so("transaction at "+y.toString()+" failed: "+b);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=b}tC(n,e)}},d)}(n,vT(e),t)}else aU(e)&&Kx(e,t=>{Xx(n,t)})}function tC(n,e){const t=vU(n,e),r=vT(t);return function(n,e,t){if(0===e.length)return;const r=[];let o=[];const d=e.filter(p=>0===p.status).map(p=>p.currentWriteId);for(let p=0;p<e.length;p++){const y=e[p],b=oo(t,y.path);let S,D=!1;if((0,L.hu)(null!==b,"rerunTransactionsUnderNode_: relativePath should not be null."),4===y.status)D=!0,S=y.abortReason,o=o.concat(ng(n.serverSyncTree_,y.currentWriteId,!0));else if(0===y.status)if(y.retryCount>=25)D=!0,S="maxretry",o=o.concat(ng(n.serverSyncTree_,y.currentWriteId,!0));else{const O=nk(n,y.path,d);y.currentInputSnapshot=O;const F=e[p].update(O.val());if(void 0!==F){CT("transaction failed: Data returned ",F,y.path);let $=Tr(F);"object"==typeof F&&null!=F&&(0,L.r3)(F,".priority")||($=$.updatePriority(O.getPriority()));const Ee=y.currentWriteId,ke=TT(n),Ze=Z1($,O,ke);y.currentOutputSnapshotRaw=$,y.currentOutputSnapshotResolved=Ze,y.currentWriteId=Jx(n),d.splice(d.indexOf(Ee),1),o=o.concat(V1(n.serverSyncTree_,y.path,Ze,y.currentWriteId,y.applyLocally)),o=o.concat(ng(n.serverSyncTree_,Ee,!0))}else D=!0,S="nodata",o=o.concat(ng(n.serverSyncTree_,y.currentWriteId,!0))}Il(n.eventQueue_,t,o),o=[],D&&(e[p].status=2,setTimeout(e[p].unwatcher,Math.floor(0)),e[p].onComplete&&r.push("nodata"===S?()=>e[p].onComplete(null,!1,e[p].currentInputSnapshot):()=>e[p].onComplete(new Error(S),!1,null)))}eP(n,n.transactionQueueTree_);for(let p=0;p<r.length;p++)qE(r[p]);Xx(n,n.transactionQueueTree_)}(n,EU(n,t),r),r}function vU(n,e){let t,r=n.transactionQueueTree_;for(t=qt(e);null!==t&&void 0===k_(r);)r=Wx(r,t),t=qt(e=Ln(e));return r}function EU(n,e){const t=[];return CU(n,e,t),t.sort((r,o)=>r.order-o.order),t}function CU(n,e,t){const r=k_(e);if(r)for(let o=0;o<r.length;o++)t.push(r[o]);Kx(e,o=>{CU(n,o,t)})}function eP(n,e){const t=k_(e);if(t){let r=0;for(let o=0;o<t.length;o++)2!==t[o].status&&(t[r]=t[o],r++);t.length=r,W1(e,t.length>0?t:void 0)}Kx(e,r=>{eP(n,r)})}function rk(n,e){const t=vT(vU(n,e)),r=Wx(n.transactionQueueTree_,e);return function(n,e,t){let r=n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,o=>{ik(n,o)}),ik(n,r),lU(r,o=>{ik(n,o)}),t}function ik(n,e){const t=k_(e);if(t){const r=[];let o=[],l=-1;for(let d=0;d<t.length;d++)3===t[d].status||(1===t[d].status?((0,L.hu)(l===d-1,"All SENT items should be at beginning of queue."),l=d,t[d].status=3,t[d].abortReason="set"):((0,L.hu)(0===t[d].status,"Unexpected transaction status in abort"),t[d].unwatcher(),o=o.concat(ng(n.serverSyncTree_,t[d].currentWriteId,!0)),t[d].onComplete&&r.push(t[d].onComplete.bind(null,new Error("set"),!1,null))));-1===l?W1(e,void 0):t.length=l+1,Il(n.eventQueue_,vT(e),o);for(let d=0;d<r.length;d++)qE(r[d])}}const sk=function(n,e){const t=QZ(n),r=t.namespace;return"firebase.com"===t.domain&&Jc(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Jc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&so("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new i1(t.host,t.secure,r,e,"ws"===t.scheme||"wss"===t.scheme,"",r!==t.subdomain),path:new Cn(t.pathString)}},QZ=function(n){let e="",t="",r="",o="",l="",d=!0,p="https",y=443;if("string"==typeof n){let b=n.indexOf("//");b>=0&&(p=n.substring(0,b-1),n=n.substring(b+2));let D=n.indexOf("/");-1===D&&(D=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(D,S)),D<S&&(o=function(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let o=t[r];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch(l){}e+="/"+o}return e}(n.substring(D,S)));const O=function(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):so(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));b=e.indexOf(":"),b>=0?(d="https"===p||"wss"===p,y=parseInt(e.substring(b+1),10)):b=e.length;const F=e.slice(0,b);if("localhost"===F.toLowerCase())t="localhost";else if(F.split(".").length<=2)t=F;else{const $=e.indexOf(".");r=e.substring(0,$).toLowerCase(),t=e.substring($+1),l=r}"ns"in O&&(l=O.ns)}return{host:e,port:y,domain:t,subdomain:r,secure:d,scheme:p,pathString:o,namespace:l}};class bU{constructor(e,t,r,o){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=o}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,L.Pz)(this.snapshot.exportVal())}}class wU{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class TU{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,L.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class IU{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new L.BH;return jZ(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Tl("OnDisconnect.remove",this._path);const e=new L.BH;return _U(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Tl("OnDisconnect.set",this._path),td("OnDisconnect.set",e,this._path,!1);const t=new L.BH;return _U(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Tl("OnDisconnect.setWithPriority",this._path),td("OnDisconnect.setWithPriority",e,this._path,!1),Q1("OnDisconnect.setWithPriority",t,!1);const r=new L.BH;return function(n,e,t,r,o){const l=Tr(t,r);n.server_.onDisconnectPut(e.toString(),l.val(!0),(d,p)=>{"ok"===d&&YE(n.onDisconnect_,e,l),rg(0,o,d,p)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Tl("OnDisconnect.update",this._path),cU("OnDisconnect.update",e,this._path,!1);const t=new L.BH;return function(n,e,t,r){if((0,L.xb)(t))return Hi("onDisconnect().update() called with empty data.  Don't do anything."),void rg(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(o,l)=>{"ok"===o&&$i(t,(d,p)=>{const y=Tr(p);YE(n.onDisconnect_,cr(e,d),y)}),rg(0,r,o,l)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Uo{constructor(e,t,r,o){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=o}get key(){return Zt(this._path)?null:d1(this._path)}get ref(){return new Dl(this._repo,this._path)}get _queryIdentifier(){const e=P2(this._queryParams),t=t1(e);return"{}"===t?"default":t}get _queryObject(){return P2(this._queryParams)}isEqual(e){if(!((e=(0,L.m9)(e))instanceof Uo))return!1;const t=this._repo===e._repo,r=h1(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function tP(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function ig(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===ed){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Nh)throw new Error(r);if("string"!=typeof e)throw new Error(o)}if(n.hasEnd()){if(n.getIndexEndName()!==Xc)throw new Error(r);if("string"!=typeof t)throw new Error(o)}}else if(n.getIndex()===Gn){if(null!=e&&!ET(e)||null!=t&&!ET(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,L.hu)(n.getIndex()instanceof _1||n.getIndex()===y1,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function nP(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Dl extends Uo{constructor(e,t){super(e,t,new Nx,!1)}get parent(){const e=p2(this._path);return null===e?null:new Dl(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class F_{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Cn(e),r=L_(this.ref,e);return new F_(this._node.getChild(t),r,Gn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,o)=>e(new F_(o,L_(this.ref,r),Gn)))}hasChild(e){const t=new Cn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function DU(n,e){return(n=(0,L.m9)(n))._checkNotDeleted("ref"),void 0!==e?L_(n._root,e):n._root}function AU(n,e){(n=(0,L.m9)(n))._checkNotDeleted("refFromURL");const t=sk(e,n._repo.repoInfo_.nodeAdmin);dU("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Jc("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),DU(n,t.path.toString())}function L_(n,e){return null===qt((n=(0,L.m9)(n))._path)?((t=e)&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),wT("child","path",t,!1)):wT("child","path",e,!1),new Dl(n._repo,cr(n._path,e));var t}function ok(n,e){n=(0,L.m9)(n),Tl("set",n._path),td("set",e,n._path,!1);const t=new L.BH;return ek(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function nG(n,e){cU("update",e,n._path,!1);const t=new L.BH;return function(n,e,t,r){eC(n,"update",{path:e.toString(),value:t});let o=!0;const l=TT(n),d={};if($i(t,(p,y)=>{o=!1,d[p]=oU(cr(e,p),Tr(y),n.serverSyncTree_,l)}),o)Hi("update() called with empty data.  Don't do anything."),rg(0,r,"ok",void 0);else{const p=Jx(n),y=function(n,e,t,r){!function(n,e,t,r){(0,L.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=x1(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const o=zn.fromObject(t);return XE(n,new QE({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,o))}(n.serverSyncTree_,e,d,p);Qx(n.eventQueue_,y),n.server_.merge(e.toString(),t,(b,D)=>{const S="ok"===b;S||so("update at "+e+" failed: "+b);const O=ng(n.serverSyncTree_,p,!S),F=O.length>0?tC(n,e):e;Il(n.eventQueue_,F,O),rg(0,r,b,D)}),$i(t,b=>{const D=rk(n,cr(e,b));tC(n,D)}),Il(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function rG(n){return function(n,e){const t=function(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(b,D)=>{const S=oo(b,t);r=r||eg(D,S)});let o=n.syncPointTree_.get(t);o?r=r||eg(o,gn()):(o=new K2,n.syncPointTree_=n.syncPointTree_.set(t,o));const l=null!=r,d=l?new Jp(r,!0,!1):null;return function(n){return Lx(n.viewCache_)}(Y2(o,e,Vx(n.pendingWriteTree_,e._path),l?d.getNode():Ot.EMPTY_NODE,l))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const o=Tr(r).withIndex(e._queryParams.getIndex()),l=_T(n.serverSyncTree_,e._path,o);return J1(n.eventQueue_,e._path,l),Promise.resolve(o)},r=>(eC(n,"get for query "+(0,L.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,L.m9)(n))._repo,n).then(e=>new F_(e,new Dl(n._repo,n._path),n._queryParams.getIndex()))}class rP{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new bU("value",this,new F_(e.snapshotNode,new Dl(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new wU(this,e,t):null}matches(e){return e instanceof rP&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class iP{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new wU(this,e,t):null}createEvent(e,t){(0,L.hu)(null!=e.childName,"Child events should have a childName.");const r=L_(new Dl(t._repo,t._path),e.childName),o=t._queryParams.getIndex();return new bU(e.type,this,new F_(e.snapshotNode,r,o),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof iP&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function IT(n,e,t,r,o){let l;if("object"==typeof r&&(l=void 0,o=r),"function"==typeof r&&(l=r),o&&o.onlyOnce){const y=t,b=(D,S)=>{tk(n._repo,n,p),y(D,S)};b.userCallback=t.userCallback,b.context=t.context,t=b}const d=new TU(t,l||void 0),p="value"===e?new rP(d):new iP(e,d);return function(n,e,t){let r;r=".info"===qt(e._path)?tU(n.infoSyncTree_,e,t):tU(n.serverSyncTree_,e,t),J1(n.eventQueue_,e._path,r)}(n._repo,n,p),()=>tk(n._repo,n,p)}function ak(n,e,t,r){return IT(n,"value",e,t,r)}function SU(n,e,t,r){return IT(n,"child_added",e,t,r)}function xU(n,e,t,r){return IT(n,"child_changed",e,t,r)}function PU(n,e,t,r){return IT(n,"child_moved",e,t,r)}function NU(n,e,t,r){return IT(n,"child_removed",e,t,r)}function MU(n,e,t){let r=null;const o=t?new TU(t):null;"value"===e?r=new rP(o):e&&(r=new iP(e,o)),tk(n._repo,n,r)}class Pu{}class OU extends Pu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){td("endAt",this._value,e._path,!0);const t=b1(e._queryParams,this._value,this._key);if(nP(t),ig(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Uo(e._repo,e._path,t,e._orderByCalled)}}class sG extends Pu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){td("endBefore",this._value,e._path,!1);const t=function(n,e,t){let r,o;return n.index_===ed?("string"==typeof e&&(e=A2(e)),o=b1(n,e,t)):(r=null==t?Nh:A2(t),o=b1(n,e,r)),o.endBeforeSet_=!0,o}(e._queryParams,this._value,this._key);if(nP(t),ig(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Uo(e._repo,e._path,t,e._orderByCalled)}}class RU extends Pu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){td("startAt",this._value,e._path,!0);const t=C1(e._queryParams,this._value,this._key);if(nP(t),ig(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Uo(e._repo,e._path,t,e._orderByCalled)}}class lG extends Pu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){td("startAfter",this._value,e._path,!1);const t=function(n,e,t){let r;if(n.index_===ed)"string"==typeof e&&(e=D2(e)),r=C1(n,e,t);else{let o;o=null==t?Xc:D2(t),r=C1(n,e,o)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(nP(t),ig(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Uo(e._repo,e._path,t,e._orderByCalled)}}class cG extends Pu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Uo(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class hG extends Pu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Uo(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class pG extends Pu{constructor(e){super(),this._path=e}_apply(e){tP(e,"orderByChild");const t=new Cn(this._path);if(Zt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new _1(t),o=Mx(e._queryParams,r);return ig(o),new Uo(e._repo,e._path,o,!0)}}class mG extends Pu{_apply(e){tP(e,"orderByKey");const t=Mx(e._queryParams,ed);return ig(t),new Uo(e._repo,e._path,t,!0)}}class yG extends Pu{_apply(e){tP(e,"orderByPriority");const t=Mx(e._queryParams,Gn);return ig(t),new Uo(e._repo,e._path,t,!0)}}class EG extends Pu{_apply(e){tP(e,"orderByValue");const t=Mx(e._queryParams,y1);return ig(t),new Uo(e._repo,e._path,t,!0)}}class bG extends Pu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(td("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new OU(this._value,this._key)._apply(new RU(this._value,this._key)._apply(e))}}function Nu(n,...e){let t=(0,L.m9)(n);for(const r of e)t=r._apply(t);return t}(function(n){(0,L.hu)(!Hx,"__referenceConstructor has already been defined"),Hx=n})(Dl),function(n){(0,L.hu)(!qx,"__referenceConstructor has already been defined"),qx=n}(Dl);const lk={};function FU(n,e,t,r,o){let l=r||n.options.databaseURL;void 0===l&&(n.options.projectId||Jc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Hi("Using default host for project ",n.options.projectId),l=`${n.options.projectId}-default-rtdb.firebaseio.com`);let y,b,d=sk(l,o),p=d.repoInfo;"undefined"!=typeof process&&(b=process.env.FIREBASE_DATABASE_EMULATOR_HOST),b?(y=!0,l=`http://${b}?ns=${p.namespace}`,d=sk(l,o),p=d.repoInfo):y=!d.repoInfo.secure;const D=o&&y?new rT(rT.OWNER):new p$(n.name,n.options,e);dU("Invalid Firebase Database URL",d),Zt(d.path)||Jc("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function(n,e,t,r){let o=lk[e.name];o||(o={},lk[e.name]=o);let l=o[n.toURLString()];return l&&Jc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new kZ(n,false,t,r),o[n.toURLString()]=l,l}(p,n,D,new f$(n.name,t));return new xG(S,n)}class xG{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(n,e,t){if(n.stats_=a1(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Ox(n.repoInfo_,(r,o,l,d)=>{gU(n,r,o,l,d)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>mU(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,L.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new N_(n.repoInfo_,e,(r,o,l,d)=>{gU(n,r,o,l,d)},r=>{mU(n,r)},r=>{!function(n,e){$i(e,(t,r)=>{X1(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function(n,e){const t=n.toString();return o1[t]||(o1[t]=e()),o1[t]}(n.repoInfo_,()=>new Eq(n.stats_,n.server_)),n.infoData_=new gq,n.infoSyncTree_=new eU({startListening:(r,o,l,d)=>{let p=[];const y=n.infoData_.getNode(r._path);return y.isEmpty()||(p=_T(n.infoSyncTree_,r._path,y),setTimeout(()=>{d("ok")},0)),p},stopListening:()=>{}}),X1(n,"connected",!1),n.serverSyncTree_=new eU({startListening:(r,o,l,d)=>(n.server_.listen(r,l,o,(p,y)=>{const b=d(p,y);Il(n.eventQueue_,r._path,b)}),[]),stopListening:(r,o)=>{n.server_.unlisten(r,o)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Dl(this._repo,gn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(n,e){const t=lk[e];(!t||t[n.key]!==n)&&Jc(`Database ${e}(${n.repoInfo_}) has already been deleted.`),yU(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Jc("Cannot call "+e+" on a deleted database.")}}function OG(n,e){VV(n,e)}class VG{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}N_.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},N_.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},OV(er.SDK_VERSION),(0,er._registerComponent)(new du.wA("database",(e,{instanceIdentifier:t})=>FU(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,er.registerVersion)(NV,"0.12.4",void 0),(0,er.registerVersion)(NV,"0.12.4","esm2017");const HG=new sl.Yd("@firebase/database-compat"),LU=function(n){HG.warn("FIREBASE WARNING: "+n)};class ZG{constructor(e){this._delegate=e}cancel(e){(0,L.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,L.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,L.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,L.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,L.Dv)("OnDisconnect.set",1,2,arguments.length),(0,L.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),o=>t(o)),r}setWithPriority(e,t,r){(0,L.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,L.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const o=this._delegate.setWithPriority(e,t);return r&&o.then(()=>r(null),l=>r(l)),o}update(e,t){if((0,L.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const o={};for(let l=0;l<e.length;++l)o[""+l]=e[l];e=o,LU("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,L.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),o=>t(o)),r}}class GG{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,L.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class sg{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,L.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,L.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,L.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,L.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,L.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),wT("DataSnapshot.child","path",e,!1),new sg(this._database,this._delegate.child(e))}hasChild(e){return(0,L.Dv)("DataSnapshot.hasChild",1,1,arguments.length),wT("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,L.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,L.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,L.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new sg(this._database,t)))}hasChildren(){return(0,L.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,L.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,L.Dv)("DataSnapshot.ref",0,0,arguments.length),new ya(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ps{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,o){var l;(0,L.Dv)("Query.on",2,4,arguments.length),(0,L.Wj)("Query.on","callback",t,!1);const d=ps.getCancelAndContextArgs_("Query.on",r,o),p=(b,D)=>{t.call(d.context,new sg(this.database,b),D)};p.userCallback=t,p.context=d.context;const y=null===(l=d.cancel)||void 0===l?void 0:l.bind(d.context);switch(e){case"value":return ak(this._delegate,p,y),t;case"child_added":return SU(this._delegate,p,y),t;case"child_removed":return NU(this._delegate,p,y),t;case"child_changed":return xU(this._delegate,p,y),t;case"child_moved":return PU(this._delegate,p,y),t;default:throw new Error((0,L.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,L.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,L.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,L.Wj)("Query.off","callback",t,!0),(0,L.lb)("Query.off","context",r,!0),t){const o=()=>{};o.userCallback=t,o.context=r,MU(this._delegate,e,o)}else MU(this._delegate,e)}get(){return rG(this._delegate).then(e=>new sg(this.database,e))}once(e,t,r,o){(0,L.Dv)("Query.once",1,4,arguments.length),(0,L.Wj)("Query.once","callback",t,!0);const l=ps.getCancelAndContextArgs_("Query.once",r,o),d=new L.BH,p=(b,D)=>{const S=new sg(this.database,b);t&&t.call(l.context,S,D),d.resolve(S)};p.userCallback=t,p.context=l.context;const y=b=>{l.cancel&&l.cancel.call(l.context,b),d.reject(b)};switch(e){case"value":ak(this._delegate,p,y,{onlyOnce:!0});break;case"child_added":SU(this._delegate,p,y,{onlyOnce:!0});break;case"child_removed":NU(this._delegate,p,y,{onlyOnce:!0});break;case"child_changed":xU(this._delegate,p,y,{onlyOnce:!0});break;case"child_moved":PU(this._delegate,p,y,{onlyOnce:!0});break;default:throw new Error((0,L.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return d.promise}limitToFirst(e){return(0,L.Dv)("Query.limitToFirst",1,1,arguments.length),new ps(this.database,Nu(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new cG(n)}(e)))}limitToLast(e){return(0,L.Dv)("Query.limitToLast",1,1,arguments.length),new ps(this.database,Nu(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new hG(n)}(e)))}orderByChild(e){return(0,L.Dv)("Query.orderByChild",1,1,arguments.length),new ps(this.database,Nu(this._delegate,function(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return wT("orderByChild","path",n,!1),new pG(n)}(e)))}orderByKey(){return(0,L.Dv)("Query.orderByKey",0,0,arguments.length),new ps(this.database,Nu(this._delegate,new mG))}orderByPriority(){return(0,L.Dv)("Query.orderByPriority",0,0,arguments.length),new ps(this.database,Nu(this._delegate,new yG))}orderByValue(){return(0,L.Dv)("Query.orderByValue",0,0,arguments.length),new ps(this.database,Nu(this._delegate,new EG))}startAt(e=null,t){return(0,L.Dv)("Query.startAt",0,2,arguments.length),new ps(this.database,Nu(this._delegate,function(n=null,e){return bT("startAt","key",e,!0),new RU(n,e)}(e,t)))}startAfter(e=null,t){return(0,L.Dv)("Query.startAfter",0,2,arguments.length),new ps(this.database,Nu(this._delegate,function(n,e){return bT("startAfter","key",e,!0),new lG(n,e)}(e,t)))}endAt(e=null,t){return(0,L.Dv)("Query.endAt",0,2,arguments.length),new ps(this.database,Nu(this._delegate,function(n,e){return bT("endAt","key",e,!0),new OU(n,e)}(e,t)))}endBefore(e=null,t){return(0,L.Dv)("Query.endBefore",0,2,arguments.length),new ps(this.database,Nu(this._delegate,function(n,e){return bT("endBefore","key",e,!0),new sG(n,e)}(e,t)))}equalTo(e,t){return(0,L.Dv)("Query.equalTo",1,2,arguments.length),new ps(this.database,Nu(this._delegate,function(n,e){return bT("equalTo","key",e,!0),new bG(n,e)}(e,t)))}toString(){return(0,L.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,L.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,L.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ps))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const o={cancel:void 0,context:void 0};if(t&&r)o.cancel=t,(0,L.Wj)(e,"cancel",o.cancel,!0),o.context=r,(0,L.lb)(e,"context",o.context,!0);else if(t)if("object"==typeof t&&null!==t)o.context=t;else{if("function"!=typeof t)throw new Error((0,L.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");o.cancel=t}return o}get ref(){return new ya(this.database,new Dl(this._delegate._repo,this._delegate._path))}}class ya extends ps{constructor(e,t){super(e,new Uo(t._repo,t._path,new Nx,!1)),this.database=e,this._delegate=t}getKey(){return(0,L.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,L.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new ya(this.database,L_(this._delegate,e))}getParent(){(0,L.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new ya(this.database,e):null}getRoot(){return(0,L.Dv)("Reference.root",0,0,arguments.length),new ya(this.database,this._delegate.root)}set(e,t){(0,L.Dv)("Reference.set",1,2,arguments.length),(0,L.Wj)("Reference.set","onComplete",t,!0);const r=ok(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}update(e,t){if((0,L.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const o={};for(let l=0;l<e.length;++l)o[""+l]=e[l];e=o,LU("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Tl("Reference.update",this._delegate._path),(0,L.Wj)("Reference.update","onComplete",t,!0);const r=nG(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}setWithPriority(e,t,r){(0,L.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,L.Wj)("Reference.setWithPriority","onComplete",r,!0);const o=function(n,e,t){if(Tl("setWithPriority",n._path),td("setWithPriority",e,n._path,!1),Q1("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new L.BH;return ek(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&o.then(()=>r(null),l=>r(l)),o}remove(e){(0,L.Dv)("Reference.remove",0,1,arguments.length),(0,L.Wj)("Reference.remove","onComplete",e,!0);const t=function(n){return Tl("remove",n._path),ok(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,L.Dv)("Reference.transaction",1,3,arguments.length),(0,L.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,L.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,L.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const o=function(n,e,t){var r;if(n=(0,L.m9)(n),Tl("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const o=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,l=new L.BH,p=ak(n,()=>{});return function(n,e,t,r,o,l){eC(n,"transaction on "+e);const d={path:e,update:t,onComplete:r,status:null,order:kV(),applyLocally:l,retryCount:0,unwatcher:o,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},p=nk(n,e,void 0);d.currentInputSnapshot=p;const y=d.update(p.val());if(void 0===y)d.unwatcher(),d.currentOutputSnapshotRaw=null,d.currentOutputSnapshotResolved=null,d.onComplete&&d.onComplete(null,!1,d.currentInputSnapshot);else{CT("transaction failed: Data returned ",y,d.path),d.status=0;const b=Wx(n.transactionQueueTree_,e),D=k_(b)||[];let S;D.push(d),W1(b,D),"object"==typeof y&&null!==y&&(0,L.r3)(y,".priority")?(S=(0,L.DV)(y,".priority"),(0,L.hu)(ET(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(Zx(n.serverSyncTree_,e)||Ot.EMPTY_NODE).getPriority().val();const O=TT(n),F=Tr(y,S),$=Z1(F,p,O);d.currentOutputSnapshotRaw=F,d.currentOutputSnapshotResolved=$,d.currentWriteId=Jx(n);const ie=V1(n.serverSyncTree_,e,$,d.currentWriteId,d.applyLocally);Il(n.eventQueue_,e,ie),Xx(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(y,b,D)=>{let S=null;y?l.reject(y):(S=new F_(D,new Dl(n._repo,n._path),Gn),l.resolve(new VG(b,S)))},p,o),l.promise}(this._delegate,e,{applyLocally:r}).then(l=>new GG(l.committed,new sg(this.database,l.snapshot)));return t&&o.then(l=>t(null,l.committed,l.snapshot),l=>t(l,!1,null)),o}setPriority(e,t){(0,L.Dv)("Reference.setPriority",1,2,arguments.length),(0,L.Wj)("Reference.setPriority","onComplete",t,!0);const r=function(n,e){n=(0,L.m9)(n),Tl("setPriority",n._path),Q1("setPriority",e,!1);const t=new L.BH;return ek(n._repo,cr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}push(e,t){(0,L.Dv)("Reference.push",0,2,arguments.length),(0,L.Wj)("Reference.push","onComplete",t,!0);const r=function(n,e){n=(0,L.m9)(n),Tl("push",n._path),td("push",e,n._path,!0);const t=pU(n._repo),r=aq(t),o=L_(n,r),l=L_(n,r);let d;return d=null!=e?ok(l,e).then(()=>l):Promise.resolve(l),o.then=d.then.bind(d),o.catch=d.then.bind(d,void 0),o}(this._delegate,e),o=r.then(d=>new ya(this.database,d));t&&o.then(()=>t(null),d=>t(d));const l=new ya(this.database,r);return l.then=o.then.bind(o),l.catch=o.catch.bind(o,void 0),l}onDisconnect(){return Tl("Reference.onDisconnect",this._delegate._path),new ZG(new IU(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class DT{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,r={}){!function(n,e,t,r={}){(n=(0,L.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Jc("Cannot call useEmulator() after instance has already been initialized.");const o=n._repoInternal;let l;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&Jc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new rT(rT.OWNER);else if(r.mockUserToken){const d="string"==typeof r.mockUserToken?r.mockUserToken:(0,L.Sg)(r.mockUserToken,n.app.options.projectId);l=new rT(d)}!function(n,e,t,r){n.repoInfo_=new i1(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(o,e,t,l)}(this._delegate,e,t,r)}ref(e){if((0,L.Dv)("database.ref",0,1,arguments.length),e instanceof ya){const t=AU(this._delegate,e.toString());return new ya(this,t)}{const t=DU(this._delegate,e);return new ya(this,t)}}refFromURL(e){(0,L.Dv)("database.refFromURL",1,1,arguments.length);const r=AU(this._delegate,e);return new ya(this,r)}goOffline(){return(0,L.Dv)("database.goOffline",0,0,arguments.length),function(n){(n=(0,L.m9)(n))._checkNotDeleted("goOffline"),yU(n._repo)}(this._delegate)}goOnline(){return(0,L.Dv)("database.goOnline",0,0,arguments.length),function(n){(n=(0,L.m9)(n))._checkNotDeleted("goOnline"),function(n){n.persistentConnection_&&n.persistentConnection_.resume(fU)}(n._repo)}(this._delegate)}}DT.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:n=>function(n){return{".sv":{increment:n}}}(n)};var WG=Object.freeze({__proto__:null,initStandalone:function({app:n,url:e,version:t,customAuthImpl:r,namespace:o,nodeAdmin:l=!1}){OV(t);const d=new du.zt("auth-internal",new du.H0("database-standalone"));return d.setComponent(new du.wA("auth-internal",()=>r,"PRIVATE")),{instance:new DT(FU(n,d,void 0,e,l),n),namespace:o}}});const KG=DT.ServerValue;function VU(n){return null==n}function UU(n){return"function"==typeof n.set}function BU(n,e){return UU(e)?e:n.ref(e)}function jU(n,e){if(function(n){return"string"==typeof n}(n))return e.stringCase();if(UU(n))return e.firebaseCase();if(function(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function AT(n,e,t="on",r=tr.z){return new _n.y(o=>{let l=null;return l=n[t](e,(d,p)=>{r.schedule(()=>{o.next({snapshot:d,prevKey:p})}),"once"===t&&r.schedule(()=>o.complete())},d=>{r.schedule(()=>o.error(d))}),"on"===t?{unsubscribe(){null!=l&&n.off(e,l)}}:{unsubscribe(){}}}).pipe((0,ze.U)(o=>{const{snapshot:l,prevKey:d}=o;let p=null;return l.exists()&&(p=l.key),{type:e,payload:l,prevKey:d,key:p}}),(0,YH.B)())}function HU(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function t6(n,e){const{payload:t,prevKey:r,key:o}=e,l=HU(n,o),d=function(n,e){if(VU(e))return 0;{const t=HU(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let p=null;e.payload.forEach(y=>{const b={payload:y,type:"value",prevKey:p,key:y.key};return p=y.key,n=[...n,b],!1})}return n;case"child_added":if(l>-1){const p=n[l-1];(p&&p.key||null)!==r&&(n=n.filter(y=>y.payload.key!==t.key)).splice(d,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(d,0,e)}return n;case"child_removed":return n.filter(p=>p.payload.key!==t.key);case"child_changed":return n.map(p=>p.payload.key===o?e:p);case"child_moved":if(l>-1){const p=n.splice(l,1)[0];return(n=n.slice()).splice(d,0,p),n}return n;default:return n}}function $U(n){return(VU(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function qU(n,e,t){return function(n,e,t){return AT(n,"value","once",t).pipe(pn(r=>{const o=[(0,rt.of)(r)];return e.forEach(l=>o.push(AT(n,l,"on",t))),(0,Ny.T)(...o).pipe(Io(t6,[]))}),bD())}(n,e=$U(e),t)}function ZU(n,e,t){const r=(e=$U(e)).map(o=>AT(n,o,"on",t));return(0,Ny.T)(...r)}function GU(n,e){return function(r,o){return jU(r,{stringCase:()=>n.child(r)[e](o),firebaseCase:()=>r[e](o),snapshotCase:()=>r.ref[e](o)})}}function s6(n){return function(t){return t?jU(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function zU(n,e){return function(){return AT(n,"value","on",e)}}!function(n){n.INTERNAL.registerComponent(new du.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),o=e.getProvider("database").getImmediate({identifier:t});return new DT(o,r)},"PUBLIC").setServiceProps({Reference:ya,Query:ps,Database:DT,DataSnapshot:sg,enableLogging:OG,INTERNAL:WG,ServerValue:KG}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.4")}(q0.Z);const l6=new c.OlP("angularfire2.realtimeDatabaseURL"),u6=new c.OlP("angularfire2.database.use-emulator");let c6=(()=>{class n{constructor(t,r,o,l,d,p,y,b,D,S,O,F,$,ie,Ee){this.schedulers=p;const ke=y,Ze=(0,Mr.on)(t,d,r);b&&xI(Ze,d,D,O,F,$,S,ie),this.database=(0,Mr.cc)(`${Ze.name}.database.${o}`,"AngularFireDatabase",Ze.name,()=>{const ft=d.runOutsideAngular(()=>Ze.database(o||void 0));return ke&&ft.useEmulator(...ke),ft},[ke])}list(t,r){const o=this.schedulers.ngZone.runOutsideAngular(()=>BU(this.database,t));let l=o;return r&&(l=r(o)),function(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:GU(r,"update"),set:GU(r,"set"),push:o=>r.push(o),remove:s6(r),snapshotChanges:o=>qU(n,o,t).pipe(vn.iC),stateChanges:o=>ZU(n,o,t).pipe(vn.iC),auditTrail:o=>function(n,e,t){return function(n,e,t){return function(n,e){return AT(n,"value","on",e).pipe((0,ze.U)(t=>{let r;return t.payload.forEach(o=>(r=o.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function(...n){return e=>{let t;return"function"==typeof n[n.length-1]&&(t=n.pop()),e.lift(new JH(n,t))}}(e),(0,ze.U)(([o,l])=>{const d=o.lastKeyToLoad,p=l.map(y=>y.key);return{actions:l,lastKeyToLoad:d,loadedKeys:p}}),function(n){return e=>e.lift(new t$(n))}(o=>-1===o.loadedKeys.indexOf(o.lastKeyToLoad)),(0,ze.U)(o=>o.actions))}(n,ZU(n,e).pipe(Io((o,l)=>[...o,l],[])),t)}(n,o,t).pipe(vn.iC),valueChanges:(o,l)=>qU(n,o,t).pipe((0,ze.U)(p=>p.map(y=>l&&l.idField?Object.assign(Object.assign({},y.payload.val()),{[l.idField]:y.key}):y.payload.val())),vn.iC)}}(l,this)}object(t){return function(n,e){return{query:n,snapshotChanges:()=>zU(n,e.schedulers.outsideAngular)().pipe(vn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>zU(n,e.schedulers.outsideAngular)().pipe(vn.iC,(0,ze.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>BU(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Mr.Dh),c.LFG(Mr.xv,8),c.LFG(l6,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(vn.HU),c.LFG(u6,8),c.LFG(os,8),c.LFG(AI,8),c.LFG(SI,8),c.LFG(nm,8),c.LFG(r0,8),c.LFG(Gy,8),c.LFG(zy,8),c.LFG(tm,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),d6=(()=>{class n{constructor(){Lf.Z.registerVersion("angularfire",vn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[c6]}),n})();const WU_firebaseConfig={apiKey:"AIzaSyA3ZfxBjUFKWZtJ4OG5Gqu7n725hPmOI1k",authDomain:"tiendairlandesa.firebaseapp.com",projectId:"tiendairlandesa",storageBucket:"tiendairlandesa.appspot.com",messagingSenderId:"874267688134",appId:"1:874267688134:web:b4728be378a4c651a4ebc7"};let h6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n,bootstrap:[jC]}),n.\u0275inj=c.cJS({providers:[],imports:[[hv,bd,T3,Qo,WH,CR,KH,PV,Mr.hO.initializeApp(WU_firebaseConfig),kk,d6,Rj]]}),n})();(0,c.G48)(),yo().bootstrapModule(h6).catch(n=>console.error(n))},3394:(je,ye,V)=>{"use strict";V.d(ye,{Z:()=>we});var c=V(3854),ne=V(3910),U=V(8026),de=V(5422);class se{constructor(pe,re){this._delegate=pe,this.firebase=re,(0,U._addComponent)(pe,new ne.wA("app-compat",()=>this,"PUBLIC")),this.container=pe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pe){this._delegate.automaticDataCollectionEnabled=pe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pe=>{this._delegate.checkDestroyed(),pe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,U.deleteApp)(this._delegate)))}_getService(pe,re=U._DEFAULT_ENTRY_NAME){var fe;this._delegate.checkDestroyed();const Ce=this._delegate.container.getProvider(pe);return!Ce.isInitialized()&&"EXPLICIT"===(null===(fe=Ce.getComponent())||void 0===fe?void 0:fe.instantiationMode)&&Ce.initialize(),Ce.getImmediate({identifier:re})}_removeServiceInstance(pe,re=U._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pe).clearInstance(re)}_addComponent(pe){(0,U._addComponent)(this._delegate,pe)}_addOrOverwriteComponent(pe){(0,U._addOrOverwriteComponent)(this._delegate,pe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const me=new c.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function ee(){const ve=function(ve){const pe={},re={__esModule:!0,initializeApp:function(Tt,An={}){const It=U.initializeApp(Tt,An);if((0,c.r3)(pe,It.name))return pe[It.name];const pt=new ve(It,re);return pe[It.name]=pt,pt},app:Ce,registerVersion:U.registerVersion,setLogLevel:U.setLogLevel,onLog:U.onLog,apps:null,SDK_VERSION:U.SDK_VERSION,INTERNAL:{registerComponent:function(Tt){const An=Tt.name,It=An.replace("-compat","");if(U._registerComponent(Tt)&&"PUBLIC"===Tt.type){const pt=(Xt=Ce())=>{if("function"!=typeof Xt[It])throw me.create("invalid-app-argument",{appName:An});return Xt[It]()};void 0!==Tt.serviceProps&&(0,c.ZB)(pt,Tt.serviceProps),re[It]=pt,ve.prototype[It]=function(...Xt){return this._getService.bind(this,An).apply(this,Tt.multipleInstances?Xt:[])}}return"PUBLIC"===Tt.type?re[It]:null},removeApp:function(Tt){delete pe[Tt]},useAsService:function(Tt,An){return"serverAuth"===An?null:An},modularAPIs:U}};function Ce(Tt){if(!(0,c.r3)(pe,Tt=Tt||U._DEFAULT_ENTRY_NAME))throw me.create("no-app",{appName:Tt});return pe[Tt]}return re.default=re,Object.defineProperty(re,"apps",{get:function(){return Object.keys(pe).map(Tt=>pe[Tt])}}),Ce.App=ve,re}(se);return ve.INTERNAL=Object.assign(Object.assign({},ve.INTERNAL),{createFirebaseNamespace:ee,extendNamespace:function(re){(0,c.ZB)(ve,re)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),ve}(),H=new de.Yd("@firebase/app-compat");if((0,c.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ve=self.firebase.SDK_VERSION;ve&&ve.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const we=B;(0,U.registerVersion)("@firebase/app-compat","0.1.9",undefined)},8026:(je,ye,V)=>{"use strict";V.r(ye),V.d(ye,{FirebaseError:()=>de.ZR,SDK_VERSION:()=>Ca,_DEFAULT_ENTRY_NAME:()=>Os,_addComponent:()=>Rs,_addOrOverwriteComponent:()=>lo,_apps:()=>Gt,_clearComponents:()=>Sn,_components:()=>zt,_getProvider:()=>fn,_registerComponent:()=>ms,_removeServiceInstance:()=>Ea,deleteApp:()=>dr,getApp:()=>_s,getApps:()=>Ae,initializeApp:()=>Zi,onLog:()=>Wt,registerVersion:()=>Ge,setLogLevel:()=>Gi});var c=V(8239),ne=V(3910),U=V(5422),de=V(3854);class se{constructor(ot){this.container=ot}getPlatformInfoString(){return this.container.getProviders().map(Nt=>{if(function(tt){const ot=tt.getComponent();return"VERSION"===(null==ot?void 0:ot.type)}(Nt)){const Mt=Nt.getImmediate();return`${Mt.library}/${Mt.version}`}return null}).filter(Nt=>Nt).join(" ")}}const me="@firebase/app",J="0.7.8",ee=new U.Yd("@firebase/app"),Os="[DEFAULT]",Sl={[me]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Gt=new Map,zt=new Map;function Rs(tt,ot){try{tt.container.addComponent(ot)}catch(Nt){ee.debug(`Component ${ot.name} failed to register with FirebaseApp ${tt.name}`,Nt)}}function lo(tt,ot){tt.container.addOrOverwriteComponent(ot)}function ms(tt){const ot=tt.name;if(zt.has(ot))return ee.debug(`There were multiple attempts to register component ${ot}.`),!1;zt.set(ot,tt);for(const Nt of Gt.values())Rs(Nt,tt);return!0}function fn(tt,ot){return tt.container.getProvider(ot)}function Ea(tt,ot,Nt=Os){fn(tt,ot).clearInstance(Nt)}function Sn(){zt.clear()}const Bt=new de.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class xn{constructor(ot,Nt,Mt){this._isDeleted=!1,this._options=Object.assign({},ot),this._config=Object.assign({},Nt),this._name=Nt.name,this._automaticDataCollectionEnabled=Nt.automaticDataCollectionEnabled,this._container=Mt,this.container.addComponent(new ne.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ot){this.checkDestroyed(),this._automaticDataCollectionEnabled=ot}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ot){this._isDeleted=ot}checkDestroyed(){if(this.isDeleted)throw Bt.create("app-deleted",{appName:this._name})}}const Ca="9.4.1";function Zi(tt,ot={}){"object"!=typeof ot&&(ot={name:ot});const Nt=Object.assign({name:Os,automaticDataCollectionEnabled:!1},ot),Mt=Nt.name;if("string"!=typeof Mt||!Mt)throw Bt.create("bad-app-name",{appName:String(Mt)});const Jr=Gt.get(Mt);if(Jr){if((0,de.vZ)(tt,Jr.options)&&(0,de.vZ)(Nt,Jr.config))return Jr;throw Bt.create("duplicate-app",{appName:Mt})}const Yt=new ne.H0(Mt);for(const Xe of zt.values())Yt.addComponent(Xe);const Fe=new xn(tt,Nt,Yt);return Gt.set(Mt,Fe),Fe}function _s(tt=Os){const ot=Gt.get(tt);if(!ot)throw Bt.create("no-app",{appName:tt});return ot}function Ae(){return Array.from(Gt.values())}function dr(tt){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,c.Z)(function*(tt){const ot=tt.name;Gt.has(ot)&&(Gt.delete(ot),yield Promise.all(tt.container.getProviders().map(Nt=>Nt.delete())),tt.isDeleted=!0)})).apply(this,arguments)}function Ge(tt,ot,Nt){var Mt;let Jr=null!==(Mt=Sl[tt])&&void 0!==Mt?Mt:tt;Nt&&(Jr+=`-${Nt}`);const Yt=Jr.match(/\s|\//),Fe=ot.match(/\s|\//);if(Yt||Fe){const Xe=[`Unable to register library "${Jr}" with version "${ot}":`];return Yt&&Xe.push(`library name "${Jr}" contains illegal characters (whitespace or "/")`),Yt&&Fe&&Xe.push("and"),Fe&&Xe.push(`version name "${ot}" contains illegal characters (whitespace or "/")`),void ee.warn(Xe.join(" "))}ms(new ne.wA(`${Jr}-version`,()=>({library:Jr,version:ot}),"VERSION"))}function Wt(tt,ot){if(null!==tt&&"function"!=typeof tt)throw Bt.create("invalid-log-argument");(0,U.Am)(tt,ot)}function Gi(tt){(0,U.Ub)(tt)}ms(new ne.wA("platform-logger",ot=>new se(ot),"PRIVATE")),Ge(me,J,""),Ge(me,J,"esm2017"),Ge("fire-js","")},3910:(je,ye,V)=>{"use strict";V.d(ye,{wA:()=>U,H0:()=>J,zt:()=>se});var c=V(8239),ne=V(3854);class U{constructor(B,H,G){this.name=B,this.instanceFactory=H,this.type=G,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const de="[DEFAULT]";class se{constructor(B,H){this.name=B,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const H=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(H)){const G=new ne.BH;if(this.instancesDeferred.set(H,G),this.isInitialized(H)||this.shouldAutoInitialize())try{const le=this.getOrInitializeService({instanceIdentifier:H});le&&G.resolve(le)}catch(le){}}return this.instancesDeferred.get(H).promise}getImmediate(B){var H;const G=this.normalizeInstanceIdentifier(null==B?void 0:B.identifier),le=null!==(H=null==B?void 0:B.optional)&&void 0!==H&&H;if(!this.isInitialized(G)&&!this.shouldAutoInitialize()){if(le)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:G})}catch(he){if(le)return null;throw he}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if("EAGER"===B.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:de})}catch(H){}for(const[H,G]of this.instancesDeferred.entries()){const le=this.normalizeInstanceIdentifier(H);try{const he=this.getOrInitializeService({instanceIdentifier:le});G.resolve(he)}catch(he){}}}}clearInstance(B=de){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,c.Z)(function*(){const H=Array.from(B.instances.values());yield Promise.all([...H.filter(G=>"INTERNAL"in G).map(G=>G.INTERNAL.delete()),...H.filter(G=>"_delete"in G).map(G=>G._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=de){return this.instances.has(B)}getOptions(B=de){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:H={}}=B,G=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(G))throw Error(`${this.name}(${G}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const le=this.getOrInitializeService({instanceIdentifier:G,options:H});for(const[he,we]of this.instancesDeferred.entries())G===this.normalizeInstanceIdentifier(he)&&we.resolve(le);return le}onInit(B,H){var G;const le=this.normalizeInstanceIdentifier(H),he=null!==(G=this.onInitCallbacks.get(le))&&void 0!==G?G:new Set;he.add(B),this.onInitCallbacks.set(le,he);const we=this.instances.get(le);return we&&B(we,le),()=>{he.delete(B)}}invokeOnInitCallbacks(B,H){const G=this.onInitCallbacks.get(H);if(G)for(const le of G)try{le(B,H)}catch(he){}}getOrInitializeService({instanceIdentifier:B,options:H={}}){let G=this.instances.get(B);if(!G&&this.component&&(G=this.component.instanceFactory(this.container,{instanceIdentifier:(ee=B,ee===de?void 0:ee),options:H}),this.instances.set(B,G),this.instancesOptions.set(B,H),this.invokeOnInitCallbacks(G,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,G)}catch(le){}var ee;return G||null}normalizeInstanceIdentifier(B=de){return this.component?this.component.multipleInstances?B:de:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class J{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const H=this.getProvider(B.name);if(H.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);H.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const H=new se(B,this);return this.providers.set(B,H),H}getProviders(){return Array.from(this.providers.values())}}},5422:(je,ye,V)=>{"use strict";V.d(ye,{in:()=>ne,Yd:()=>me,Ub:()=>J,Am:()=>ee});const c=[];var ne=(()=>{return(B=ne||(ne={}))[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",ne;var B})();const U={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},de=ne.INFO,se={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},Q=(B,H,...G)=>{if(H<B.logLevel)return;const le=(new Date).toISOString(),he=se[H];if(!he)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[he](`[${le}]  ${B.name}:`,...G)};class me{constructor(H){this.name=H,this._logLevel=de,this._logHandler=Q,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in ne))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?U[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...H),this._logHandler(this,ne.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...H),this._logHandler(this,ne.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...H),this._logHandler(this,ne.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...H),this._logHandler(this,ne.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...H),this._logHandler(this,ne.ERROR,...H)}}function J(B){c.forEach(H=>{H.setLogLevel(B)})}function ee(B,H){for(const G of c){let le=null;H&&H.level&&(le=U[H.level]),G.userLogHandler=null===B?null:(he,we,...ve)=>{const pe=ve.map(re=>{if(null==re)return null;if("string"==typeof re)return re;if("number"==typeof re||"boolean"==typeof re)return re.toString();if(re instanceof Error)return re.message;try{return JSON.stringify(re)}catch(fe){return null}}).filter(re=>re).join(" ");we>=(null!=le?le:he.logLevel)&&B({level:ne[we].toLowerCase(),message:pe,args:ve,type:he.name})}}}},8239:(je,ye,V)=>{"use strict";function c(U,de,se,Q,me,J,ee){try{var B=U[J](ee),H=B.value}catch(G){return void se(G)}B.done?de(H):Promise.resolve(H).then(Q,me)}function ne(U){return function(){var de=this,se=arguments;return new Promise(function(Q,me){var J=U.apply(de,se);function ee(H){c(J,Q,me,ee,B,"next",H)}function B(H){c(J,Q,me,ee,B,"throw",H)}ee(void 0)})}}V.d(ye,{Z:()=>ne})}},je=>{je(je.s=5537)}]);